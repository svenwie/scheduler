{"version":3,"file":"ej2-navigations.umd.min.js","sources":["../src/common/h-scroll.js","../src/toolbar/toolbar.js","../src/accordion/accordion.js","../src/common/menu-base.js","../src/context-menu/context-menu.js","../src/menu/menu.js","../src/tab/tab.js","../src/treeview/treeview.js","../src/sidebar/sidebar.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Touch, Component, EventHandler, selectAll, getUniqueID } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, Property, Browser, detach } from '@syncfusion/ej2-base';\nimport { classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar CLS_ROOT = 'e-hscroll';\nvar CLS_RTL = 'e-rtl';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_HSCROLLBAR = 'e-hscroll-bar';\nvar CLS_HSCROLLCON = 'e-hscroll-content';\nvar CLS_NAVARROW = 'e-nav-arrow';\nvar CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\nvar CLS_NAVLEFTARROW = 'e-nav-left-arrow';\nvar CLS_HSCROLLNAV = 'e-scroll-nav';\nvar CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\nvar CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\nvar CLS_DEVICE = 'e-scroll-device';\nvar CLS_OVERLAY = 'e-scroll-overlay';\nvar CLS_RIGHTOVERLAY = 'e-scroll-right-overlay';\nvar CLS_LEFTOVERLAY = 'e-scroll-left-overlay';\nvar OVERLAY_MAXWID = 40;\n/**\n * HScroll module is introduces horizontal scroller when content exceeds the current viewing area.\n * It can be useful for the components like Toolbar, Tab which needs horizontal scrolling alone.\n * Hidden content can be view by touch moving or icon click.\n * ```html\n * <div id=\"scroll\"/>\n * <script>\n *   var scrollObj = new HScroll();\n *   scrollObj.appendTo(\"#scroll\");\n * </script>\n * ```\n */\nvar HScroll = /** @class */ (function (_super) {\n    __extends(HScroll, _super);\n    /**\n     * Initializes a new instance of the HScroll class.\n     * @param options  - Specifies HScroll model properties as options.\n     * @param element  - Specifies the element for which horizontal scrolling applies.\n     */\n    function HScroll(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Initialize the event handler\n     * @private\n     */\n    HScroll.prototype.preRender = function () {\n        this.browser = Browser.info.name;\n        this.browserCheck = this.browser === 'mozilla';\n        this.isDevice = Browser.isDevice;\n        this.customStep = true;\n        var element = this.element;\n        this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n        this.initialize();\n        if (element.id === '') {\n            element.id = getUniqueID('hscroll');\n            this.uniqueId = true;\n        }\n        element.style.display = 'block';\n        if (this.enableRtl) {\n            element.classList.add(CLS_RTL);\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     * @private\n     */\n    HScroll.prototype.render = function () {\n        this.touchModule = new Touch(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) });\n        EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n        if (!this.isDevice) {\n            this.createNavIcon(this.element);\n        }\n        else {\n            this.element.classList.add(CLS_DEVICE);\n            this.createOverlay(this.element);\n        }\n        if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {\n            this.scrollStep = this.scrollEle.offsetWidth;\n            this.customStep = false;\n        }\n    };\n    HScroll.prototype.initialize = function () {\n        var scrollEle = this.createElement('div', { className: CLS_HSCROLLCON });\n        var scrollDiv = this.createElement('div', { className: CLS_HSCROLLBAR });\n        scrollDiv.setAttribute('tabindex', '-1');\n        var ele = this.element;\n        var innerEle = [].slice.call(ele.children);\n        for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {\n            var ele_1 = innerEle_1[_i];\n            scrollEle.appendChild(ele_1);\n        }\n        scrollDiv.appendChild(scrollEle);\n        ele.appendChild(scrollDiv);\n        scrollDiv.style.overflowX = 'hidden';\n        this.scrollEle = scrollDiv;\n        this.scrollItems = scrollEle;\n    };\n    HScroll.prototype.getPersistData = function () {\n        var keyEntity = ['scrollStep'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * Returns the current module name.\n     * @returns string\n     * @private\n     */\n    HScroll.prototype.getModuleName = function () {\n        return 'hScroll';\n    };\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     * @returns void\n     */\n    HScroll.prototype.destroy = function () {\n        var ele = this.element;\n        ele.style.display = '';\n        ele.classList.remove(CLS_ROOT);\n        ele.classList.remove(CLS_DEVICE);\n        var nav = selectAll('.e-' + ele.id + '_nav.' + CLS_HSCROLLNAV, ele);\n        var overlay = selectAll('.' + CLS_OVERLAY, ele);\n        overlay.forEach(function (ele) {\n            detach(ele);\n        });\n        for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {\n            var elem = _a[_i];\n            ele.appendChild(elem);\n        }\n        if (this.uniqueId) {\n            this.element.removeAttribute('id');\n        }\n        detach(this.scrollEle);\n        if (nav.length > 0) {\n            detach(nav[0]);\n            if (!isNullOrUndefined(nav[1])) {\n                detach(nav[1]);\n            }\n        }\n        EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n        this.touchModule.destroy();\n        this.touchModule = null;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Specifies the value to disable/enable the HScroll component.\n     * When set to `true`, the component will be disabled.\n     * @param  {boolean} value - Based on this Boolean value, HScroll will be enabled (false) or disabled (true).\n     * @returns void.\n     */\n    HScroll.prototype.disable = function (value) {\n        var navEles = selectAll('.e-scroll-nav:not(.' + CLS_DISABLE + ')', this.element);\n        value ? this.element.classList.add(CLS_DISABLE) : this.element.classList.remove(CLS_DISABLE);\n        navEles.forEach(function (el) {\n            el.setAttribute('tabindex', !value ? '0' : '-1');\n        });\n    };\n    HScroll.prototype.createOverlay = function (element) {\n        var id = element.id.concat('_nav');\n        var rightOverlayEle = this.createElement('div', { className: CLS_OVERLAY + ' ' + CLS_RIGHTOVERLAY });\n        var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n        var rightEle = this.createElement('div', { id: id.concat('_right'), className: clsRight });\n        var navItem = this.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n        rightEle.appendChild(navItem);\n        var leftEle = this.createElement('div', { className: CLS_OVERLAY + ' ' + CLS_LEFTOVERLAY });\n        if (this.ieCheck) {\n            rightEle.classList.add('e-ie-align');\n        }\n        element.appendChild(rightOverlayEle);\n        element.appendChild(rightEle);\n        element.insertBefore(leftEle, element.firstChild);\n        this.eventBinding([rightEle]);\n    };\n    HScroll.prototype.createNavIcon = function (element) {\n        var id = element.id.concat('_nav');\n        var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n        var nav = this.createElement('div', { id: id.concat('_right'), className: clsRight });\n        nav.setAttribute('aria-disabled', 'false');\n        var navItem = this.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n        var clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n        var navEle = this.createElement('div', { id: id.concat('_left'), className: clsLeft + ' ' + CLS_DISABLE });\n        navEle.setAttribute('aria-disabled', 'true');\n        var navLeftItem = this.createElement('div', { className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n        navEle.appendChild(navLeftItem);\n        nav.appendChild(navItem);\n        nav.setAttribute('tabindex', '0');\n        element.appendChild(nav);\n        element.insertBefore(navEle, element.firstChild);\n        if (this.ieCheck) {\n            nav.classList.add('e-ie-align');\n            navEle.classList.add('e-ie-align');\n        }\n        this.eventBinding([nav, navEle]);\n    };\n    HScroll.prototype.onKeyPress = function (e) {\n        var _this = this;\n        if (e.key === 'Enter') {\n            var timeoutFun_1 = function () {\n                _this.keyTimeout = true;\n                _this.eleScrolling(10, e.target, true);\n            };\n            this.keyTimer = window.setTimeout(function () {\n                timeoutFun_1();\n            }, 100);\n        }\n    };\n    HScroll.prototype.onKeyUp = function (e) {\n        if (e.key !== 'Enter') {\n            return;\n        }\n        if (this.keyTimeout) {\n            this.keyTimeout = false;\n        }\n        else {\n            e.target.click();\n        }\n        clearTimeout(this.keyTimer);\n    };\n    HScroll.prototype.eventBinding = function (ele) {\n        var _this = this;\n        ele.forEach(function (el) {\n            new Touch(el, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });\n            el.addEventListener('keydown', _this.onKeyPress.bind(_this));\n            el.addEventListener('keyup', _this.onKeyUp.bind(_this));\n            el.addEventListener('mouseup', _this.repeatScroll.bind(_this));\n            el.addEventListener('touchend', _this.repeatScroll.bind(_this));\n            el.addEventListener('contextmenu', function (e) {\n                e.preventDefault();\n            });\n            EventHandler.add(el, 'click', _this.clickEventHandler, _this);\n        });\n    };\n    HScroll.prototype.repeatScroll = function () {\n        clearInterval(this.timeout);\n    };\n    HScroll.prototype.tabHoldHandler = function (e) {\n        var _this = this;\n        var trgt = e.originalEvent.target;\n        trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n        var scrollDis = 10;\n        var timeoutFun = function () {\n            _this.eleScrolling(scrollDis, trgt, true);\n        };\n        this.timeout = window.setInterval(function () {\n            timeoutFun();\n        }, 50);\n    };\n    HScroll.prototype.contains = function (ele, className) {\n        return ele.classList.contains(className);\n    };\n    HScroll.prototype.eleScrolling = function (scrollDis, trgt, isContinuous) {\n        var element = this.scrollEle;\n        var rootEle = this.element;\n        var classList = trgt.classList;\n        if (classList.contains(CLS_HSCROLLNAV)) {\n            classList = trgt.querySelector('.' + CLS_NAVARROW).classList;\n        }\n        if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n            scrollDis = -scrollDis;\n        }\n        var scrlLeft = element.scrollLeft;\n        if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n            if (classList.contains(CLS_NAVRIGHTARROW)) {\n                this.frameScrollRequest(scrollDis, 'add', isContinuous);\n            }\n            else {\n                this.frameScrollRequest(scrollDis, '', isContinuous);\n            }\n        }\n        else {\n            if (classList.contains(CLS_NAVLEFTARROW)) {\n                this.frameScrollRequest(scrollDis, 'add', isContinuous);\n            }\n            else {\n                this.frameScrollRequest(scrollDis, '', isContinuous);\n            }\n        }\n    };\n    HScroll.prototype.clickEventHandler = function (e) {\n        this.eleScrolling(this.scrollStep, e.target, false);\n    };\n    HScroll.prototype.swipeHandler = function (e) {\n        var swipeEle = this.scrollEle;\n        var distance;\n        if (e.velocity <= 1) {\n            distance = e.distanceX / (e.velocity * 10);\n        }\n        else {\n            distance = e.distanceX / e.velocity;\n        }\n        var start = 0.5;\n        var animate = function () {\n            var step = Math.sin(start);\n            if (step <= 0) {\n                window.cancelAnimationFrame(step);\n            }\n            else {\n                if (e.swipeDirection === 'Left') {\n                    swipeEle.scrollLeft += distance * step;\n                }\n                else if (e.swipeDirection === 'Right') {\n                    swipeEle.scrollLeft -= distance * step;\n                }\n                start -= 0.02;\n                window.requestAnimationFrame(animate);\n            }\n        };\n        animate();\n    };\n    HScroll.prototype.scrollUpdating = function (scrollVal, action) {\n        if (action === 'add') {\n            this.scrollEle.scrollLeft += scrollVal;\n        }\n        else {\n            this.scrollEle.scrollLeft -= scrollVal;\n        }\n    };\n    HScroll.prototype.frameScrollRequest = function (scrollVal, action, isContinuous) {\n        var _this = this;\n        var step = 10;\n        if (isContinuous) {\n            this.scrollUpdating(scrollVal, action);\n            return;\n        }\n        if (!this.customStep) {\n            selectAll('.' + CLS_OVERLAY, this.element).forEach(function (el) {\n                scrollVal -= el.offsetWidth;\n            });\n        }\n        var animate = function () {\n            if (scrollVal < step) {\n                window.cancelAnimationFrame(step);\n            }\n            else {\n                _this.scrollUpdating(step, action);\n                scrollVal -= step;\n                window.requestAnimationFrame(animate);\n            }\n        };\n        animate();\n    };\n    HScroll.prototype.touchHandler = function (e) {\n        var ele = this.scrollEle;\n        var distance;\n        distance = e.distanceX;\n        if ((this.ieCheck) && this.contains(this.element, CLS_RTL)) {\n            distance = -distance;\n        }\n        if (e.scrollDirection === 'Left') {\n            ele.scrollLeft = ele.scrollLeft + distance;\n        }\n        else if (e.scrollDirection === 'Right') {\n            ele.scrollLeft = ele.scrollLeft - distance;\n        }\n    };\n    HScroll.prototype.arrowDisabling = function (addDisable, removeDisable) {\n        if (this.isDevice) {\n            var arrowEle = isNullOrUndefined(addDisable) ? removeDisable : addDisable;\n            var arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW);\n            if (isNullOrUndefined(addDisable)) {\n                classList(arrowIcon, [CLS_NAVRIGHTARROW], [CLS_NAVLEFTARROW]);\n            }\n            else {\n                classList(arrowIcon, [CLS_NAVLEFTARROW], [CLS_NAVRIGHTARROW]);\n            }\n        }\n        else {\n            addDisable.classList.add(CLS_DISABLE);\n            addDisable.setAttribute('aria-disabled', 'true');\n            addDisable.removeAttribute('tabindex');\n            removeDisable.classList.remove(CLS_DISABLE);\n            removeDisable.setAttribute('aria-disabled', 'false');\n            removeDisable.setAttribute('tabindex', '0');\n        }\n        this.repeatScroll();\n    };\n    HScroll.prototype.scrollHandler = function (e) {\n        var target = e.target;\n        var width = target.offsetWidth;\n        var rootEle = this.element;\n        var navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n        var navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n        var leftOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);\n        var rightOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);\n        var scrollLeft = target.scrollLeft;\n        if (scrollLeft <= 0) {\n            scrollLeft = -scrollLeft;\n        }\n        if (this.isDevice) {\n            if (this.enableRtl && !(this.browserCheck || this.ieCheck)) {\n                leftOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);\n                rightOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);\n            }\n            if (scrollLeft < OVERLAY_MAXWID) {\n                leftOverlay.style.width = scrollLeft + 'px';\n            }\n            else {\n                leftOverlay.style.width = '40px';\n            }\n            if ((target.scrollWidth - Math.ceil(width + scrollLeft)) < OVERLAY_MAXWID) {\n                rightOverlay.style.width = (target.scrollWidth - Math.ceil(width + scrollLeft)) + 'px';\n            }\n            else {\n                rightOverlay.style.width = '40px';\n            }\n        }\n        if (scrollLeft === 0) {\n            if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n                this.arrowDisabling(navLeftEle, navRightEle);\n            }\n            else {\n                this.arrowDisabling(navRightEle, navLeftEle);\n            }\n        }\n        else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n            if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n                this.arrowDisabling(navRightEle, navLeftEle);\n            }\n            else {\n                this.arrowDisabling(navLeftEle, navRightEle);\n            }\n        }\n        else {\n            var disEle = this.element.querySelector('.' + CLS_HSCROLLNAV + '.' + CLS_DISABLE);\n            if (disEle) {\n                disEle.classList.remove(CLS_DISABLE);\n                disEle.setAttribute('aria-disabled', 'false');\n                disEle.setAttribute('tabindex', '0');\n            }\n        }\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of property that changed.\n     * @param  {HScrollModel} newProp\n     * @param  {HScrollModel} oldProp\n     * @returns void\n     * @private\n     */\n    HScroll.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'scrollStep':\n                    break;\n                case 'enableRtl':\n                    newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property(null)\n    ], HScroll.prototype, \"scrollStep\", void 0);\n    HScroll = __decorate([\n        NotifyPropertyChanges\n    ], HScroll);\n    return HScroll;\n}(Component));\nexport { HScroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Property, Event } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, isVisible, closest, attributes, detach, classList, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { selectAll, setStyleAttribute as setStyle } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, getUniqueID, formatUnit, Collection, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, Browser } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { HScroll } from '../common/h-scroll';\nvar CLS_ITEMS = 'e-toolbar-items';\nvar CLS_ITEM = 'e-toolbar-item';\nvar CLS_RTL = 'e-rtl';\nvar CLS_SEPARATOR = 'e-separator';\nvar CLS_POPUPICON = 'e-popup-up-icon';\nvar CLS_POPUPDOWN = 'e-popup-down-icon';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_POPUPTEXT = 'e-toolbar-text';\nvar CLS_TBARTEXT = 'e-popup-text';\nvar CLS_TBAROVERFLOW = 'e-overflow-show';\nvar CLS_POPOVERFLOW = 'e-overflow-hide';\nvar CLS_TBARBTN = 'e-tbar-btn';\nvar CLS_TBARNAV = 'e-hor-nav';\nvar CLS_TBARSCRLNAV = 'e-scroll-nav';\nvar CLS_TBARRIGHT = 'e-toolbar-right';\nvar CLS_TBARLEFT = 'e-toolbar-left';\nvar CLS_TBARCENTER = 'e-toolbar-center';\nvar CLS_TBARPOS = 'e-tbar-pos';\nvar CLS_TBARSCROLL = 'e-hscroll-content';\nvar CLS_POPUPNAV = 'e-hor-nav';\nvar CLS_POPUPCLASS = 'e-toolbar-pop';\nvar CLS_POPUP = 'e-toolbar-popup';\nvar CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nvar CLS_TBARNAVACT = 'e-nav-active';\nvar CLS_TBARIGNORE = 'e-ignore';\nvar CLS_POPPRI = 'e-popup-alone';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_MULTIROW = 'e-toolbar-multirow';\nvar CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nvar CLS_EXTENDABLE_ITEM = 'e-extended-item';\nvar CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nvar CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nvar CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nvar CLS_EXTENDPOPUP = 'e-expended-nav';\nvar CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Item.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"text\", void 0);\n    __decorate([\n        Property('auto')\n    ], Item.prototype, \"width\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], Item.prototype, \"showAlwaysInPopup\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"prefixIcon\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"suffixIcon\", void 0);\n    __decorate([\n        Property('None')\n    ], Item.prototype, \"overflow\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"template\", void 0);\n    __decorate([\n        Property('Button')\n    ], Item.prototype, \"type\", void 0);\n    __decorate([\n        Property('Both')\n    ], Item.prototype, \"showTextOn\", void 0);\n    __decorate([\n        Property(null)\n    ], Item.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"tooltipText\", void 0);\n    __decorate([\n        Property('Left')\n    ], Item.prototype, \"align\", void 0);\n    return Item;\n}(ChildProperty));\nexport { Item };\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    /**\n     * Initializes a new instance of the Toolbar class.\n     * @param options  - Specifies Toolbar model properties as options.\n     * @param element  - Specifies the element that is rendered as a Toolbar.\n     */\n    function Toolbar(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Contains the keyboard configuration of the Toolbar.\n         */\n        _this.keyConfigs = {\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow',\n            popupOpen: 'enter',\n            popupClose: 'escape',\n            tab: 'tab',\n            home: 'home',\n            end: 'end',\n        };\n        return _this;\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     * @returns void.\n     */\n    Toolbar.prototype.destroy = function () {\n        var _this = this;\n        var ele = this.element;\n        _super.prototype.destroy.call(this);\n        this.unwireEvents();\n        this.tempId.forEach(function (ele) {\n            if (!isNOU(_this.element.querySelector(ele))) {\n                document.body.appendChild(_this.element.querySelector(ele)).style.display = 'none';\n            }\n        });\n        while (ele.firstChild) {\n            ele.removeChild(ele.firstChild);\n        }\n        if (this.trgtEle) {\n            ele.appendChild(this.ctrlTem);\n        }\n        this.clearProperty();\n        this.popObj = null;\n        this.tbarAlign = null;\n        this.remove(this.element, 'e-toolpop');\n        ele.removeAttribute('style');\n        ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n            _this.element.removeAttribute(attrb);\n        });\n    };\n    /**\n     * Initialize the event handler\n     * @private\n     */\n    Toolbar.prototype.preRender = function () {\n        var eventArgs = { enableCollision: true, scrollStep: this.scrollStep };\n        this.trigger('beforeCreate', eventArgs);\n        this.enableCollision = eventArgs.enableCollision;\n        this.scrollStep = eventArgs.scrollStep;\n        this.scrollModule = null;\n        this.popObj = null;\n        this.tempId = [];\n        this.tbarItemsCol = this.items;\n        this.popupPriCount = 0;\n        if (this.enableRtl) {\n            this.add(this.element, CLS_RTL);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        window.addEventListener('resize', this.resize.bind(this));\n        this.keyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs\n        });\n        EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n        this.element.setAttribute('tabIndex', '0');\n    };\n    Toolbar.prototype.docKeyDown = function (e) {\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        var popCheck = !isNOU(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n        if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        var keyCheck = (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36);\n        if (keyCheck) {\n            e.preventDefault();\n        }\n    };\n    Toolbar.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        this.destroyHScroll();\n        this.keyModule.destroy();\n        EventHandler.remove(document, 'scroll', this.docEvent);\n        EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n        EventHandler.remove(document, 'click', this.docEvent);\n    };\n    Toolbar.prototype.clearProperty = function () {\n        this.tbarEle = [];\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n    };\n    Toolbar.prototype.docEvent = function (e) {\n        var popEle = closest(e.target, '.e-popup');\n        if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n    };\n    Toolbar.prototype.destroyHScroll = function () {\n        if (this.scrollModule) {\n            if (this.tbarAlign) {\n                this.add(this.scrollModule.element, CLS_TBARPOS);\n            }\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n    };\n    Toolbar.prototype.destroyItems = function () {\n        [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n            detach(el);\n        });\n        var tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n        if (this.tbarAlign) {\n            [].slice.call(tbarItems.children).forEach(function (el) {\n                detach(el);\n            });\n            this.tbarAlign = false;\n            this.remove(tbarItems, CLS_TBARPOS);\n        }\n        this.clearProperty();\n    };\n    Toolbar.prototype.destroyMode = function () {\n        if (this.scrollModule) {\n            this.remove(this.scrollModule.element, CLS_RTL);\n            this.destroyHScroll();\n        }\n        this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n        if (this.popObj) {\n            this.popupRefresh(this.popObj.element, true);\n        }\n    };\n    Toolbar.prototype.add = function (ele, val) {\n        ele.classList.add(val);\n    };\n    Toolbar.prototype.remove = function (ele, val) {\n        ele.classList.remove(val);\n    };\n    Toolbar.prototype.elementFocus = function (ele) {\n        var fChild = ele.firstElementChild;\n        if (fChild) {\n            fChild.focus();\n            this.activeEleSwitch(ele);\n        }\n        else {\n            ele.focus();\n        }\n    };\n    Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n        var clst;\n        if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n            clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n        }\n        else if (this.element === trgt || tbrNavChk) {\n            clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE + ' ):not(.' + CLS_SEPARATOR + ' )');\n        }\n        else {\n            clst = closest(trgt, '.' + CLS_ITEM);\n        }\n        return clst;\n    };\n    Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n        var popObj = this.popObj;\n        var rootEle = this.element;\n        var popAnimate = { name: 'FadeOut', duration: 100 };\n        switch (e.action) {\n            case 'moveRight':\n                if (rootEle === trgt) {\n                    this.elementFocus(clst);\n                }\n                else if (!navChk) {\n                    this.eleFocus(clst, 'next');\n                }\n                break;\n            case 'moveLeft':\n                if (!navChk) {\n                    this.eleFocus(clst, 'previous');\n                }\n                break;\n            case 'home':\n            case 'end':\n                var ele = void 0;\n                var nodes = void 0;\n                if (clst) {\n                    var popupCheck = closest(clst, '.e-popup');\n                    if (popupCheck) {\n                        if (isVisible(this.popObj.element)) {\n                            nodes = popupCheck.children;\n                            if (e.action === 'home') {\n                                ele = nodes[0];\n                            }\n                            else {\n                                ele = nodes[nodes.length - 1];\n                            }\n                        }\n                    }\n                    else {\n                        nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n                        if (e.action === 'home') {\n                            ele = nodes[0];\n                        }\n                        else {\n                            ele = nodes[nodes.length - 1];\n                        }\n                    }\n                    if (ele) {\n                        this.elementFocus(ele);\n                    }\n                }\n                break;\n            case 'moveUp':\n            case 'moveDown':\n                var value = e.action === 'moveUp' ? 'previous' : 'next';\n                if (popObj && closest(trgt, '.e-popup')) {\n                    var popEle = popObj.element;\n                    var popFrstEle = popEle.firstElementChild;\n                    if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n                        return;\n                    }\n                    else {\n                        this.eleFocus(clst, value);\n                    }\n                }\n                else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n                    this.elementFocus(clst);\n                }\n                break;\n            case 'tab':\n                if (!scrollChk && !navChk) {\n                    var ele_1 = clst.firstElementChild;\n                    if (rootEle === trgt) {\n                        if (this.activeEle) {\n                            this.activeEle.focus();\n                        }\n                        else {\n                            this.activeEleRemove(ele_1);\n                            ele_1.focus();\n                        }\n                        this.element.removeAttribute('tabindex');\n                    }\n                }\n                break;\n            case 'popupClose':\n                if (popObj && this.overflowMode !== 'Extended') {\n                    popObj.hide(popAnimate);\n                }\n                break;\n            case 'popupOpen':\n                if (!navChk) {\n                    return;\n                }\n                if (popObj && !isVisible(popObj.element)) {\n                    popObj.element.style.top = rootEle.offsetHeight + 'px';\n                    popObj.show({ name: 'FadeIn', duration: 100 });\n                }\n                else {\n                    popObj.hide(popAnimate);\n                }\n                break;\n        }\n    };\n    Toolbar.prototype.keyActionHandler = function (e) {\n        var trgt = e.target;\n        if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        e.preventDefault();\n        var clst;\n        var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n        var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n        clst = this.clstElement(tbrNavChk, trgt);\n        if (clst || tbarScrollChk) {\n            this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n        }\n    };\n    /**\n     * Specifies the value to disable/enable the Toolbar component.\n     * When set to `true`, the component will be disabled.\n     * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n     * @returns void.\n     */\n    Toolbar.prototype.disable = function (value) {\n        var rootEle = this.element;\n        value ? rootEle.classList.add(CLS_DISABLE) : rootEle.classList.remove(CLS_DISABLE);\n        rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n        if (this.activeEle) {\n            this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n        }\n        if (this.scrollModule) {\n            this.scrollModule.disable(value);\n        }\n        if (this.popObj) {\n            if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n                this.popObj.hide();\n            }\n            rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n        }\n    };\n    Toolbar.prototype.eleFocus = function (closest, pos) {\n        var sib = Object(closest)[pos + 'ElementSibling'];\n        var contains = function (el) {\n            return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE);\n        };\n        if (sib) {\n            var skipEle = contains(sib);\n            if (skipEle) {\n                if (Object(sib)[pos + 'ElementSibling']) {\n                    sib = Object(sib)[pos + 'ElementSibling'];\n                    skipEle = contains(sib);\n                    if (skipEle) {\n                        this.eleFocus(sib, pos);\n                        return;\n                    }\n                }\n                else {\n                    return;\n                }\n            }\n            this.elementFocus(sib);\n        }\n        else if (this.tbarAlign) {\n            var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n            if (!isNOU(elem) && elem.children.length === 0) {\n                elem = Object(elem)[pos + 'ElementSibling'];\n            }\n            if (!isNOU(elem) && elem.children.length > 0) {\n                if (pos === 'next') {\n                    var el = elem.querySelector('.' + CLS_ITEM);\n                    if (contains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        el.firstElementChild.focus();\n                        this.activeEleSwitch(el);\n                    }\n                }\n                else {\n                    var el = elem.lastElementChild;\n                    if (contains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        this.elementFocus(el);\n                    }\n                }\n            }\n        }\n    };\n    Toolbar.prototype.clickHandler = function (e) {\n        var trgt = e.target;\n        var clsList = trgt.classList;\n        var ele = this.element;\n        var isPopupElement = !isNOU(closest(trgt, '.' + CLS_POPUPCLASS));\n        var popupNav = closest(trgt, ('.' + CLS_TBARNAV));\n        if (!popupNav) {\n            popupNav = trgt;\n        }\n        if (!ele.children[0].classList.contains('e-hscroll') && (clsList.contains(CLS_TBARNAV))) {\n            clsList = trgt.querySelector('.e-icons').classList;\n        }\n        if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n            this.popupClickHandler(ele, popupNav, CLS_RTL);\n        }\n        var itemObj;\n        var clst = closest(e.target, '.' + CLS_ITEM);\n        if ((isNOU(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n            return;\n        }\n        if (clst) {\n            itemObj = this.items[this.tbarEle.indexOf(clst)];\n        }\n        var eventArgs = { originalEvent: e, item: itemObj };\n        this.trigger('clicked', eventArgs);\n        if (!isNOU(this.popObj) && isPopupElement && !eventArgs.cancel && this.overflowMode === 'Popup') {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n    };\n    ;\n    Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n        var popObj = this.popObj;\n        if (isVisible(popObj.element)) {\n            popupNav.classList.remove(CLS_TBARNAVACT);\n            popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        else {\n            if (ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = true;\n                popObj.position = { X: 'left', Y: 'top' };\n            }\n            if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = false;\n                popObj.position = { X: 'right', Y: 'top' };\n            }\n            popObj.dataBind();\n            popObj.refreshPosition();\n            popObj.element.style.top = this.getElementOffsetY() + 'px';\n            if (this.overflowMode === 'Extended') {\n                popObj.element.style.minHeight = '0px';\n            }\n            popupNav.classList.add(CLS_TBARNAVACT);\n            popObj.show({ name: 'FadeIn', duration: 100 });\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     * @private\n     */\n    Toolbar.prototype.render = function () {\n        this.initialize();\n        this.renderControl();\n        this.separator();\n        this.wireEvents();\n    };\n    Toolbar.prototype.initialize = function () {\n        var width = formatUnit(this.width);\n        var height = formatUnit(this.height);\n        if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n            setStyle(this.element, { 'height': height });\n        }\n        setStyle(this.element, { 'width': width });\n        var ariaAttr = {\n            'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false', 'aria-orientation': 'horizontal',\n        };\n        attributes(this.element, ariaAttr);\n    };\n    Toolbar.prototype.renderControl = function () {\n        this.trgtEle = (this.element.children.length > 0) ? this.element.querySelector('div') : null;\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n        this.renderItems();\n        this.renderOverflowMode();\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n            this.popupRefresh(this.popObj.element, false);\n        }\n    };\n    Toolbar.prototype.initHScroll = function (element, innerItems) {\n        if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n            if (this.tbarAlign) {\n                this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n            }\n            this.scrollModule = new HScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl });\n            this.scrollModule.createElement = this.createElement;\n            this.scrollModule.appendTo(innerItems[0]);\n            this.remove(this.scrollModule.element, CLS_TBARPOS);\n            setStyle(this.element, { overflow: 'hidden' });\n        }\n    };\n    Toolbar.prototype.itemWidthCal = function (items) {\n        var width = 0;\n        var style;\n        [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach(function (el) {\n            if (isVisible(el)) {\n                style = window.getComputedStyle(el);\n                width += (el.offsetWidth + parseFloat(style.marginRight) + parseFloat(style.marginLeft));\n            }\n        });\n        return width;\n    };\n    Toolbar.prototype.checkOverflow = function (element, innerItem) {\n        if (isNOU(element) || isNOU(innerItem) || !isVisible(element)) {\n            return false;\n        }\n        var eleWidth = element.offsetWidth;\n        var itemWidth = innerItem.offsetWidth;\n        if (this.tbarAlign || this.scrollModule || (eleWidth === itemWidth)) {\n            itemWidth = this.itemWidthCal(this.scrollModule ? innerItem.querySelector('.e-hscroll-content') : innerItem);\n        }\n        var popNav = element.querySelector('.' + CLS_TBARNAV);\n        var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n        if (itemWidth > eleWidth - (popNav ? popNav.offsetWidth : (scrollNav ? scrollNav.offsetWidth * 2 : 0))) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /** @hidden */\n    Toolbar.prototype.refreshOverflow = function () {\n        this.resize();\n    };\n    Toolbar.prototype.renderOverflowMode = function () {\n        var ele = this.element;\n        var innerItems = ele.querySelector('.' + CLS_ITEMS);\n        var priorityCheck = this.popupPriCount > 0;\n        if (ele && ele.children.length > 0) {\n            this.offsetWid = ele.offsetWidth;\n            this.remove(this.element, 'e-toolpop');\n            if (Browser.info.name === 'msie' && this.height === 'auto') {\n                ele.style.height = '';\n            }\n            switch (this.overflowMode) {\n                case 'Scrollable':\n                    if (isNOU(this.scrollModule)) {\n                        this.initHScroll(ele, ele.getElementsByClassName(CLS_ITEMS));\n                    }\n                    break;\n                case 'Popup':\n                    this.add(this.element, 'e-toolpop');\n                    if (this.tbarAlign) {\n                        this.removePositioning();\n                    }\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n                        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n                    }\n                    if (this.tbarAlign) {\n                        this.add(innerItems, CLS_TBARPOS);\n                        this.itemPositioning();\n                    }\n                    break;\n                case 'MultiRow':\n                    this.add(innerItems, CLS_MULTIROW);\n                    if (ele.style.overflow === 'hidden') {\n                        ele.style.overflow = '';\n                    }\n                    if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n                        ele.style.height = 'auto';\n                    }\n                    break;\n                case 'Extended':\n                    this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n                        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n                    }\n            }\n        }\n    };\n    Toolbar.prototype.separator = function () {\n        var element = this.element;\n        var eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n        var eleInlineItem;\n        var multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n        var extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n        eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n        if (eleInlineItem !== null) {\n            if (this.overflowMode === 'MultiRow') {\n                eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n            }\n            else if (this.overflowMode === 'Extended') {\n                eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n            }\n        }\n        for (var i = 0; i <= eleItem.length - 1; i++) {\n            if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n                if (this.overflowMode === 'MultiRow') {\n                    eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n                }\n                else if (this.overflowMode === 'Extended') {\n                    eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n                }\n            }\n        }\n    };\n    Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n        var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        if (!innerNav) {\n            this.createPopupIcon(ele);\n        }\n        innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        var eleWidth = (ele.offsetWidth - (innerNav.offsetWidth));\n        this.element.classList.remove('e-rtl');\n        setStyle(this.element, { direction: 'initial' });\n        this.checkPriority(ele, innerEle, eleWidth, true);\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        this.element.style.removeProperty('direction');\n        this.createPopup();\n    };\n    Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight, sepHeight) {\n        var element = tbarObj.element;\n        var nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n        var nodeIndex = 0;\n        var poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n        var nodePri = 0;\n        poppedEle.forEach(function (el, index) {\n            nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n            if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n                if (tbarObj.tbResize && nodes.length > index) {\n                    ele.insertBefore(el, nodes[index]);\n                    ++nodePri;\n                }\n                else {\n                    ele.insertBefore(el, ele.children[nodes.length]);\n                    ++nodePri;\n                }\n            }\n            else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (el.classList.contains(CLS_POPOVERFLOW)) {\n                popupPri.push(el);\n            }\n            else if (tbarObj.tbResize) {\n                ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n                ++nodeIndex;\n            }\n            else {\n                ele.appendChild(el);\n            }\n            if (el.classList.contains(CLS_SEPARATOR)) {\n                setStyle(el, { display: '', height: sepHeight + 'px' });\n            }\n            else {\n                setStyle(el, { display: '', height: eleHeight + 'px' });\n            }\n        });\n        popupPri.forEach(function (el) {\n            ele.appendChild(el);\n        });\n        var tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n        for (var i = tbarEle.length - 1; i >= 0; i--) {\n            var tbarElement = tbarEle[i];\n            if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n                setStyle(tbarElement, { display: 'none' });\n            }\n            else {\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.createPopup = function () {\n        var element = this.element;\n        var eleHeight;\n        var eleItem;\n        var sepHeight;\n        var sepItem;\n        if (this.overflowMode === 'Extended') {\n            sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ' )');\n            sepHeight = (element.style.height === 'auto' || element.style.height === '') ? null : sepItem.offsetHeight;\n        }\n        eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_POPUP + ' )');\n        eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : eleItem.offsetHeight;\n        var ele;\n        var popupPri = [];\n        if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n            ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n        }\n        else {\n            var extendEle = this.createElement('div', {\n                id: element.id + '_popup', className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n            });\n            var popupEle = this.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n            ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n        }\n        this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n        this.popupInit(element, ele);\n    };\n    Toolbar.prototype.getElementOffsetY = function () {\n        return (this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ?\n            this.element.clientHeight : this.element.offsetHeight);\n    };\n    Toolbar.prototype.popupInit = function (element, ele) {\n        if (!this.popObj) {\n            element.appendChild(ele);\n            setStyle(this.element, { overflow: '' });\n            var eleStyles = window.getComputedStyle(this.element);\n            var popup = new Popup(null, {\n                relateTo: this.element,\n                offsetY: this.getElementOffsetY(),\n                enableRtl: this.enableRtl,\n                open: this.popupOpen.bind(this),\n                close: this.popupClose.bind(this),\n                collision: { Y: this.enableCollision ? 'flip' : 'none' },\n                position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n            });\n            popup.appendTo(ele);\n            if (this.overflowMode === 'Extended') {\n                popup.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n                popup.offsetX = 0;\n            }\n            EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n            EventHandler.add(document, 'click ', this.docEvent.bind(this));\n            popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n            popup.hide();\n            this.popObj = popup;\n            this.element.setAttribute('aria-haspopup', 'true');\n        }\n        else {\n            var popupEle = this.popObj.element;\n            setStyle(popupEle, { maxHeight: '', display: 'block' });\n            setStyle(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n        }\n    };\n    Toolbar.prototype.tbarPopupHandler = function (isOpen) {\n        if (this.overflowMode === 'Extended') {\n            isOpen ? this.add(this.element, CLS_EXTENDEDPOPOPEN) : this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n        }\n    };\n    Toolbar.prototype.popupOpen = function (e) {\n        var popObj = this.popObj;\n        popObj.offsetY = this.getElementOffsetY();\n        popObj.dataBind();\n        var popupEle = this.popObj.element;\n        var toolEle = this.popObj.element.parentElement;\n        var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n        setStyle(popObj.element, { height: 'auto', maxHeight: '' });\n        popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n        if (this.overflowMode === 'Extended') {\n            popObj.element.style.minHeight = '';\n        }\n        var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n        var popIcon = popupNav.firstElementChild;\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.tbarPopupHandler(true);\n        var scrollVal = isNOU(window.scrollY) ? 0 : window.scrollY;\n        if (((window.innerHeight + scrollVal) < popupElePos) && (this.element.offsetTop < popupEle.offsetHeight)) {\n            var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n            popObj.height = overflowHeight + 'px';\n            for (var i = 0; i <= popupEle.childElementCount; i++) {\n                var ele = popupEle.children[i];\n                if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n                    overflowHeight = ele.offsetTop;\n                    break;\n                }\n            }\n            setStyle(popObj.element, { maxHeight: overflowHeight + 'px' });\n        }\n    };\n    Toolbar.prototype.popupClose = function (e) {\n        var element = this.element;\n        var popupNav = element.querySelector('.' + CLS_TBARNAV);\n        var popIcon = popupNav.firstElementChild;\n        popupNav.classList.remove(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n        this.tbarPopupHandler(false);\n    };\n    Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n        var popPriority = this.popupPriCount > 0;\n        var len = inEle.length;\n        var eleWid = eleWidth;\n        var sepCheck = 0;\n        var itemCount = 0;\n        var itemPopCount = 0;\n        var checkClass = function (ele, val) {\n            var rVal = false;\n            val.forEach(function (cls) {\n                if (ele.classList.contains(cls)) {\n                    rVal = true;\n                }\n            });\n            return rVal;\n        };\n        for (var i = len - 1; i >= 0; i--) {\n            var mrgn = parseFloat((window.getComputedStyle(inEle[i])).marginRight);\n            mrgn += parseFloat((window.getComputedStyle(inEle[i])).marginLeft);\n            var fstEleCheck = inEle[i] === this.tbarEle[0];\n            if (fstEleCheck) {\n                this.tbarEleMrgn = mrgn;\n            }\n            var eleWid_1 = fstEleCheck ? (inEle[i].offsetWidth + mrgn) : inEle[i].offsetWidth;\n            if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n                inEle[i].classList.add(CLS_POPUP);\n                setStyle(inEle[i], { display: 'none', minWidth: eleWid_1 + 'px' });\n                itemPopCount++;\n            }\n            if ((inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth) {\n                if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n                    if (this.overflowMode === 'Extended') {\n                        if (itemCount === itemPopCount) {\n                            var sepEle = inEle[i];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                inEle[i].classList.add(CLS_POPUP);\n                                itemPopCount++;\n                            }\n                        }\n                        itemCount++;\n                    }\n                    else if (this.overflowMode === 'Popup') {\n                        if (sepCheck > 0 && itemCount === itemPopCount) {\n                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                setStyle(sepEle, { display: 'none' });\n                            }\n                        }\n                        sepCheck++;\n                        itemCount = 0;\n                        itemPopCount = 0;\n                    }\n                }\n                else {\n                    itemCount++;\n                }\n                if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n                    eleWidth -= (inEle[i].offsetWidth + (mrgn));\n                }\n                else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                    inEle[i].classList.add(CLS_POPUP);\n                    setStyle(inEle[i], { display: 'none', minWidth: eleWid_1 + 'px' });\n                    itemPopCount++;\n                }\n                else {\n                    eleWidth -= (inEle[i].offsetWidth + (mrgn));\n                }\n            }\n        }\n        if (pre) {\n            var popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n            this.checkPriority(ele, popedEle, eleWid, false);\n        }\n    };\n    Toolbar.prototype.createPopupIcon = function (element) {\n        var id = element.id.concat('_nav');\n        var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n        className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n        var nav = this.createElement('div', { id: id, className: className });\n        if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n            nav.classList.add('e-ie-align');\n        }\n        var navItem = this.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n        nav.appendChild(navItem);\n        nav.setAttribute('tabindex', '0');\n        element.appendChild(nav);\n    };\n    Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n        var ignoreCount = ig;\n        var popEle = this.popObj.element;\n        var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n        var priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n        var checkClass = function (ele, val) {\n            return ele.classList.contains(val);\n        };\n        if (selectAll(query, inEle).length === 0) {\n            var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n            var ignoreCheck = (!isNOU(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n            if ((!isNOU(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep)) || ignoreCheck) {\n                var sepDisplay = 'none';\n                eleSep.style.display = 'inherit';\n                var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n                var prevSep = eleSep.previousElementSibling;\n                if ((elWid + eleSepWidth) < wid || des) {\n                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n                    if (!isNOU(prevSep)) {\n                        prevSep.style.display = '';\n                    }\n                }\n                else {\n                    if (prevSep.classList.contains(CLS_SEPARATOR)) {\n                        prevSep.style.display = sepDisplay;\n                    }\n                }\n                eleSep.style.display = '';\n            }\n            else {\n                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n            }\n        }\n        else {\n            inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n        }\n    };\n    Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n        var _this = this;\n        var ele = this.element;\n        var popNav = ele.querySelector('.' + CLS_TBARNAV);\n        var innerEle = ele.querySelector('.' + CLS_ITEMS);\n        if (isNOU(popNav)) {\n            return;\n        }\n        innerEle.removeAttribute('style');\n        popupEle.style.display = 'block';\n        var width = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n        var popupEleWidth = 0;\n        [].slice.call(popupEle.children).forEach(function (el) {\n            popupEleWidth += _this.popupEleWidth(el);\n            setStyle(el, { 'position': '' });\n        });\n        if ((width + popNav.offsetWidth) > (popupEleWidth) && this.popupPriCount === 0) {\n            destroy = true;\n        }\n        this.popupEleRefresh(width, popupEle, destroy);\n        popupEle.style.display = '';\n        if (popupEle.children.length === 0 && popNav && this.popObj) {\n            detach(popNav);\n            popNav = null;\n            this.popObj.destroy();\n            detach(this.popObj.element);\n            this.popObj = null;\n            ele.setAttribute('aria-haspopup', 'false');\n            ele.classList.remove('e-toolpop');\n        }\n    };\n    Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n        var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n        var ignoreInx = [];\n        var count = 0;\n        if (ignoreEle.length > 0) {\n            ignoreEle.forEach(function (ele) {\n                ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n            });\n        }\n        else {\n            return 0;\n        }\n        ignoreInx.forEach(function (val) {\n            if (val <= index) {\n                count++;\n            }\n        });\n        return count;\n    };\n    Toolbar.prototype.checkPopupRefresh = function (root, popEle) {\n        popEle.style.display = 'block';\n        var elWid = this.popupEleWidth(popEle.firstElementChild);\n        popEle.firstElementChild.style.removeProperty('Position');\n        var tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n        var tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n        popEle.style.removeProperty('display');\n        if (tbarWidth > (elWid + tbarItemsWid)) {\n            return true;\n        }\n        return false;\n    };\n    Toolbar.prototype.popupEleWidth = function (el) {\n        el.style.position = 'absolute';\n        var elWidth = el.offsetWidth;\n        var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n        if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n            var btn = el.children[0];\n            if (!isNOU(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n                btnText.style.display = 'none';\n            }\n            else if (!isNOU(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n                btnText.style.display = 'block';\n            }\n            btn.style.minWidth = '0%';\n            elWidth = parseFloat(el.style.minWidth);\n            btn.style.minWidth = '';\n            if (!isNOU(btnText)) {\n                btnText.style.display = '';\n            }\n        }\n        return elWidth;\n    };\n    Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n        var popPriority = this.popupPriCount > 0;\n        var eleSplice = this.tbarEle;\n        var priEleCnt;\n        var index;\n        var checkOverflow;\n        var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n        var ignoreCount = 0;\n        var _loop_1 = function (el) {\n            if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n                return \"continue\";\n            }\n            var elWidth = this_1.popupEleWidth(el);\n            if (el === this_1.tbarEle[0]) {\n                elWidth += this_1.tbarEleMrgn;\n            }\n            el.style.position = '';\n            if (elWidth < width || destroy) {\n                el.style.minWidth = '';\n                if (!el.classList.contains(CLS_POPOVERFLOW)) {\n                    el.classList.remove(CLS_POPUP);\n                }\n                index = this_1.tbarEle.indexOf(el);\n                if (this_1.tbarAlign) {\n                    var pos = this_1.items[index].align;\n                    index = this_1.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n                    eleSplice = this_1.tbarAlgEle[(pos + 's').toLowerCase()];\n                    innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n                }\n                var sepBeforePri_1 = 0;\n                if (this_1.overflowMode !== 'Extended') {\n                    eleSplice.slice(0, index).forEach(function (el) {\n                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n                            if (el.classList.contains(CLS_SEPARATOR)) {\n                                el.style.display = '';\n                                width -= el.offsetWidth;\n                            }\n                            sepBeforePri_1++;\n                        }\n                    });\n                }\n                ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n                if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                    this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n                    width -= el.offsetWidth;\n                }\n                else if (index === 0) {\n                    innerEle.insertBefore(el, innerEle.firstChild);\n                    width -= el.offsetWidth;\n                }\n                else {\n                    priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n                    innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n                    width -= el.offsetWidth;\n                }\n                el.style.height = '';\n            }\n            else {\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var state_1 = _loop_1(el);\n            if (state_1 === \"break\")\n                break;\n        }\n        checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n        if (checkOverflow && !destroy) {\n            this.renderOverflowMode();\n        }\n    };\n    Toolbar.prototype.removePositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        this.remove(item, CLS_TBARPOS);\n        var innerItem = [].slice.call(item.childNodes);\n        innerItem[1].removeAttribute('style');\n        innerItem[2].removeAttribute('style');\n    };\n    Toolbar.prototype.refreshPositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        this.add(item, CLS_TBARPOS);\n        this.itemPositioning();\n    };\n    Toolbar.prototype.itemPositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        var innerItem;\n        if (this.scrollModule) {\n            innerItem = [].slice.call(item.querySelector('.' + CLS_TBARSCROLL).children);\n        }\n        else {\n            innerItem = [].slice.call(item.childNodes);\n        }\n        var margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n        var tbarWid = this.element.offsetWidth;\n        if (popupNav) {\n            tbarWid -= popupNav.offsetWidth;\n            var popWid = popupNav.offsetWidth + 'px';\n            innerItem[2].removeAttribute('style');\n            this.enableRtl ? innerItem[2].style.left = popWid : innerItem[2].style.right = popWid;\n        }\n        if (tbarWid <= margin) {\n            return;\n        }\n        var value = (((tbarWid - margin)) - innerItem[1].offsetWidth) / 2;\n        innerItem[1].removeAttribute('style');\n        var mrgn = (innerItem[0].offsetWidth + value) + 'px';\n        this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n    };\n    Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n        var _this = this;\n        if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n            return;\n        }\n        var alignDiv = [];\n        alignDiv.push(this.createElement('div', { className: CLS_TBARLEFT }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARCENTER }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARRIGHT }));\n        if (pos === 0 && item.align !== 'Left') {\n            alignDiv.forEach(function (ele) {\n                itemEle.appendChild(ele);\n            });\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n        else if (item.align !== 'Left') {\n            var alignEle = itemEle.childNodes;\n            var leftAlign_1 = alignDiv[0];\n            [].slice.call(alignEle).forEach(function (el) {\n                _this.tbarAlgEle.lefts.push(el);\n                leftAlign_1.appendChild(el);\n            });\n            itemEle.appendChild(leftAlign_1);\n            itemEle.appendChild(alignDiv[1]);\n            itemEle.appendChild(alignDiv[2]);\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n    };\n    Toolbar.prototype.ctrlTemplate = function () {\n        var _this = this;\n        this.ctrlTem = this.trgtEle.cloneNode(true);\n        this.add(this.trgtEle, CLS_ITEMS);\n        this.tbarEle = [];\n        var innerEle = [].slice.call(this.trgtEle.children);\n        innerEle.forEach(function (ele) {\n            if (ele.tagName === 'DIV') {\n                _this.tbarEle.push(ele);\n                ele.setAttribute('aria-disabled', 'false');\n                _this.add(ele, CLS_ITEM);\n            }\n        });\n    };\n    Toolbar.prototype.renderItems = function () {\n        var ele = this.element;\n        var itemEleDom;\n        var innerItem;\n        var innerPos;\n        var items = this.items;\n        if (ele && ele.children.length > 0) {\n            itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n        }\n        if (this.trgtEle != null) {\n            this.ctrlTemplate();\n        }\n        else if (ele && items.length > 0) {\n            if (!itemEleDom) {\n                itemEleDom = this.createElement('div', { className: CLS_ITEMS });\n            }\n            for (var i = 0; i < items.length; i++) {\n                innerItem = this.renderSubComponent(items[i], i);\n                if (this.tbarEle.indexOf(innerItem) === -1) {\n                    this.tbarEle.push(innerItem);\n                }\n                if (!this.tbarAlign) {\n                    this.tbarItemAlign(items[i], itemEleDom, i);\n                }\n                innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n                if (innerPos) {\n                    if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n                        this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n                    }\n                    innerPos.appendChild(innerItem);\n                }\n                else {\n                    itemEleDom.appendChild(innerItem);\n                }\n            }\n            ele.appendChild(itemEleDom);\n        }\n    };\n    Toolbar.prototype.setAttr = function (attr, element) {\n        var key = Object.keys(attr);\n        var keyVal;\n        for (var i = 0; i < key.length; i++) {\n            keyVal = key[i];\n            keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n        }\n    };\n    /**\n     * Enables or disables the specified Toolbar item.\n     * @param  {HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n     * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, `isEnable` is set to true.\n     * @returns void.\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        var elements = items;\n        var len = elements.length;\n        if (isNOU(isEnable)) {\n            isEnable = true;\n        }\n        var enable = function (isEnable, ele) {\n            if (isEnable) {\n                ele.classList.remove(CLS_DISABLE);\n                ele.setAttribute('aria-disabled', 'false');\n            }\n            else {\n                ele.classList.add(CLS_DISABLE);\n                ele.setAttribute('aria-disabled', 'true');\n            }\n        };\n        if (len && len > 1) {\n            for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n                var ele = _a[_i];\n                enable(isEnable, ele);\n            }\n            isEnable ? removeClass(elements, CLS_DISABLE) : addClass(elements, CLS_DISABLE);\n        }\n        else {\n            var ele = void 0;\n            ele = (len && len === 1) ? elements[0] : items;\n            enable(isEnable, ele);\n        }\n    };\n    /**\n     * Adds new items to the Toolbar that accepts an array as Toolbar items.\n     * @param  {ItemsModel[]} items - DOM element or an array of items to be added to the Toolbar.\n     * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n     * @returns void.\n     */\n    Toolbar.prototype.addItems = function (items, index) {\n        var innerItems;\n        var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(itemsDiv)) {\n            this.itemsRerender(items);\n            return;\n        }\n        var innerEle;\n        var itemAgn = 'Left';\n        if (isNOU(index)) {\n            index = 0;\n        }\n        items.forEach(function (e) {\n            if (!isNOU(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n                itemAgn = e.align;\n            }\n        });\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            if (isNOU(item.type)) {\n                item.type = 'Button';\n            }\n            innerItems = selectAll('.' + CLS_ITEM, this.element);\n            item.align = itemAgn;\n            innerEle = this.renderSubComponent(item, index);\n            if (this.tbarEle.length >= index && innerItems.length >= 0) {\n                if (isNOU(this.scrollModule)) {\n                    this.destroyMode();\n                }\n                var algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n                var ele = void 0;\n                if (!this.tbarAlign && itemAgn !== 'Left') {\n                    this.tbarItemAlign(item, itemsDiv, 1);\n                    this.tbarAlign = true;\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.appendChild(innerEle);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n                    this.refreshPositioning();\n                }\n                else if (this.tbarAlign) {\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.insertBefore(innerEle, ele.children[index]);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n                    this.refreshPositioning();\n                }\n                else if (innerItems.length === 0) {\n                    innerItems = selectAll('.' + CLS_ITEMS, this.element);\n                    innerItems[0].appendChild(innerEle);\n                }\n                else {\n                    innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n                }\n                this.items.splice(index, 0, item);\n                this.tbarEle.splice(index, 0, innerEle);\n                index++;\n                this.offsetWid = itemsDiv.offsetWidth;\n            }\n        }\n        itemsDiv.style.width = '';\n        this.renderOverflowMode();\n    };\n    /**\n     * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n     * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n     * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n     * @returns void.\n     */\n    Toolbar.prototype.removeItems = function (args) {\n        var elements = args;\n        var index;\n        var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (typeof (elements) === 'number') {\n            index = parseInt(args.toString(), 10);\n            this.removeItemByIndex(index, innerItems);\n        }\n        else {\n            if (elements && elements.length > 1) {\n                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n                    var ele = _a[_i];\n                    index = this.tbarEle.indexOf(ele);\n                    this.removeItemByIndex(index, innerItems);\n                    innerItems = selectAll('.' + CLS_ITEM, this.element);\n                }\n            }\n            else {\n                var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n                index = innerItems.indexOf(ele);\n                this.removeItemByIndex(index, innerItems);\n            }\n        }\n        this.resize();\n    };\n    Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n        if (this.tbarEle[index] && innerItems[index]) {\n            var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n            if (this.tbarAlign) {\n                var indexAgn = void 0;\n                indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n                this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n            }\n            detach(innerItems[index]);\n            this.items.splice(eleIdx, 1);\n            this.tbarEle.splice(eleIdx, 1);\n        }\n    };\n    Toolbar.prototype.templateRender = function (templateProp, innerEle, item, index) {\n        var itemType = item.type;\n        var eleObj = templateProp;\n        var isComponent;\n        if (typeof (templateProp) === 'object') {\n            isComponent = typeof (eleObj.appendTo) === 'function';\n        }\n        if (typeof (templateProp) === 'string' || !isComponent) {\n            var templateFn = void 0;\n            var val = templateProp;\n            val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n            var e = void 0;\n            try {\n                if (typeof (templateProp) === 'object' && !isNOU(templateProp.tagName)) {\n                    innerEle.appendChild(templateProp);\n                }\n                else if (document.querySelectorAll(val).length) {\n                    var ele = document.querySelector(val);\n                    var tempStr = ele.outerHTML.trim();\n                    innerEle.appendChild(ele);\n                    ele.style.display = '';\n                    if (!isNOU(tempStr)) {\n                        this.tempId.push(val);\n                    }\n                }\n            }\n            catch (e) {\n                templateFn = templateCompiler(val);\n            }\n            var tempArray = void 0;\n            if (!isNOU(templateFn)) {\n                tempArray = templateFn({}, this, 'template');\n            }\n            if (!isNOU(tempArray) && tempArray.length > 0) {\n                [].slice.call(tempArray).forEach(function (ele) {\n                    if (!isNOU(ele.tagName)) {\n                        ele.style.display = '';\n                    }\n                    innerEle.appendChild(ele);\n                });\n            }\n        }\n        else if (itemType === 'Input') {\n            var ele = this.createElement('input');\n            item.id ? (ele.id = item.id) : (ele.id = getUniqueID('tbr-ipt'));\n            innerEle.appendChild(ele);\n            eleObj.appendTo(ele);\n        }\n        this.add(innerEle, CLS_TEMPLATE);\n        this.tbarEle.push(innerEle);\n    };\n    Toolbar.prototype.buttonRendering = function (item, innerEle) {\n        var dom = this.createElement('button', { className: CLS_TBARBTN });\n        dom.setAttribute('type', 'button');\n        var textStr = item.text;\n        var iconCss;\n        var iconPos;\n        item.id ? (dom.id = item.id) : dom.id = getUniqueID('e-tbr-btn');\n        var btnTxt = this.createElement('div', { className: 'e-tbar-btn-text' });\n        if (textStr) {\n            btnTxt.innerHTML = textStr;\n            dom.appendChild(btnTxt);\n            dom.classList.add('e-tbtn-txt');\n        }\n        else {\n            this.add(innerEle, 'e-tbtn-align');\n        }\n        if (item.prefixIcon || item.suffixIcon) {\n            if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n                iconCss = item.prefixIcon + ' e-icons';\n                iconPos = 'Left';\n            }\n            else {\n                iconCss = item.suffixIcon + ' e-icons';\n                iconPos = 'Right';\n            }\n        }\n        var btnObj = new Button({ iconCss: iconCss, iconPosition: iconPos });\n        btnObj.createElement = this.createElement;\n        btnObj.appendTo(dom);\n        if (item.width) {\n            setStyle(dom, { 'width': formatUnit(item.width) });\n        }\n        return dom;\n    };\n    Toolbar.prototype.renderSubComponent = function (item, index) {\n        var innerEle;\n        var dom;\n        innerEle = this.createElement('div', { className: CLS_ITEM });\n        innerEle.setAttribute('aria-disabled', 'false');\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        if (item.htmlAttributes) {\n            this.setAttr(item.htmlAttributes, innerEle);\n        }\n        if (item.tooltipText) {\n            var tempDom = this.createElement('div', { innerHTML: item.tooltipText });\n            innerEle.setAttribute('title', tempDom.textContent);\n        }\n        if (item.cssClass) {\n            innerEle.className = innerEle.className + ' ' + item.cssClass;\n        }\n        if (item.template) {\n            this.templateRender(item.template, innerEle, item, index);\n        }\n        else {\n            switch (item.type) {\n                case 'Button':\n                    dom = this.buttonRendering(item, innerEle);\n                    dom.setAttribute('tabindex', '-1');\n                    innerEle.appendChild(dom);\n                    innerEle.addEventListener('click', this.itemClick.bind(this));\n                    break;\n                case 'Separator':\n                    this.add(innerEle, CLS_SEPARATOR);\n                    break;\n            }\n        }\n        if (item.showTextOn) {\n            var sTxt = item.showTextOn;\n            if (sTxt === 'Toolbar') {\n                this.add(innerEle, CLS_POPUPTEXT);\n                this.add(innerEle, 'e-tbtn-align');\n            }\n            else if (sTxt === 'Overflow') {\n                this.add(innerEle, CLS_TBARTEXT);\n            }\n        }\n        if (item.overflow) {\n            var overflow = item.overflow;\n            if (overflow === 'Show') {\n                this.add(innerEle, CLS_TBAROVERFLOW);\n            }\n            else if (overflow === 'Hide') {\n                if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n                    this.add(innerEle, CLS_POPOVERFLOW);\n                }\n            }\n        }\n        if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n            this.add(innerEle, CLS_POPPRI);\n            this.popupPriCount++;\n        }\n        return innerEle;\n    };\n    Toolbar.prototype.itemClick = function (e) {\n        this.activeEleSwitch(e.currentTarget);\n    };\n    Toolbar.prototype.activeEleSwitch = function (ele) {\n        this.activeEleRemove(ele.firstElementChild);\n        this.activeEle.focus();\n    };\n    Toolbar.prototype.activeEleRemove = function (curEle) {\n        if (!isNOU(this.activeEle)) {\n            this.activeEle.setAttribute('tabindex', '-1');\n        }\n        this.activeEle = curEle;\n        if (isNOU(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n            curEle.removeAttribute('tabindex');\n        }\n        else {\n            this.activeEle.setAttribute('tabindex', '0');\n        }\n    };\n    Toolbar.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Returns the current module name.\n     * @returns string\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    Toolbar.prototype.itemsRerender = function (newProp) {\n        this.items = this.tbarItemsCol;\n        this.destroyMode();\n        this.destroyItems();\n        this.items = newProp;\n        this.tbarItemsCol = this.items;\n        this.renderItems();\n        this.renderOverflowMode();\n    };\n    Toolbar.prototype.resize = function () {\n        var ele = this.element;\n        this.tbResize = true;\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.overflowMode === 'Popup') {\n            this.popObj.hide();\n        }\n        var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n        if (!checkOverflow) {\n            this.destroyHScroll();\n        }\n        if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n            return;\n        }\n        if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n            this.renderOverflowMode();\n        }\n        if (this.popObj) {\n            if (this.overflowMode === 'Extended') {\n                var eleStyles = window.getComputedStyle(this.element);\n                this.popObj.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n            }\n            if (this.tbarAlign) {\n                this.removePositioning();\n            }\n            this.popupRefresh(this.popObj.element, false);\n            if (this.tbarAlign) {\n                this.refreshPositioning();\n            }\n        }\n        this.offsetWid = ele.offsetWidth;\n        this.tbResize = false;\n        this.separator();\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     * @param  {ToolbarModel} newProp\n     * @param  {ToolbarModel} oldProp\n     * @returns void\n     * @private\n     */\n    Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var tEle = this.element;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n                        var changedProb = Object.keys(newProp.items);\n                        for (var i = 0; i < changedProb.length; i++) {\n                            var index = parseInt(Object.keys(newProp.items)[i], 10);\n                            var property = Object.keys(newProp.items[index])[0];\n                            var oldProperty = Object(oldProp.items[index])[property];\n                            var newProperty = Object(newProp.items[index])[property];\n                            if (this.tbarAlign || property === 'align') {\n                                this.refresh();\n                                break;\n                            }\n                            var popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n                            var booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n                            if ((popupPriCheck) || (this.items[index].showAlwaysInPopup) && booleanCheck) {\n                                --this.popupPriCount;\n                            }\n                            if (isNOU(this.scrollModule)) {\n                                this.destroyMode();\n                            }\n                            var itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle));\n                            detach(itemCol[index]);\n                            this.tbarEle.splice(index, 1);\n                            this.addItems([this.items[index]], index);\n                            this.items.splice(index, 1);\n                            if (this.items[index].template) {\n                                this.tbarEle.splice(this.items.length, 1);\n                            }\n                        }\n                    }\n                    else {\n                        this.itemsRerender(newProp.items);\n                    }\n                    break;\n                case 'width':\n                    var wid = tEle.offsetWidth;\n                    setStyle(tEle, { 'width': formatUnit(newProp.width) });\n                    this.renderOverflowMode();\n                    if (this.popObj && wid < tEle.offsetWidth) {\n                        this.popupRefresh(this.popObj.element, false);\n                    }\n                    break;\n                case 'height':\n                    setStyle(this.element, { 'height': formatUnit(newProp.height) });\n                    break;\n                case 'overflowMode':\n                    this.destroyMode();\n                    this.renderOverflowMode();\n                    if (this.enableRtl) {\n                        this.add(tEle, CLS_RTL);\n                    }\n                    this.refreshOverflow();\n                    break;\n                case 'enableRtl':\n                    newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n                    if (!isNOU(this.scrollModule)) {\n                        newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n                    }\n                    if (!isNOU(this.popObj)) {\n                        newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n                    }\n                    if (this.tbarAlign) {\n                        this.itemPositioning();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Shows or hides the Toolbar item that is in the specified index.\n     * @param  {number} index - Index value of target item.\n     * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n     * @returns void.\n     */\n    Toolbar.prototype.hideItem = function (index, value) {\n        if (this.tbarEle[index]) {\n            var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n            if (value === true) {\n                innerItems[index].classList.add(CLS_HIDDEN);\n            }\n            else {\n                innerItems[index].classList.remove(CLS_HIDDEN);\n            }\n            this.refreshOverflow();\n        }\n    };\n    __decorate([\n        Collection([], Item)\n    ], Toolbar.prototype, \"items\", void 0);\n    __decorate([\n        Property('auto')\n    ], Toolbar.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Toolbar.prototype, \"height\", void 0);\n    __decorate([\n        Property('Scrollable')\n    ], Toolbar.prototype, \"overflowMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Toolbar.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"clicked\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"beforeCreate\", void 0);\n    Toolbar = __decorate([\n        NotifyPropertyChanges\n    ], Toolbar);\n    return Toolbar;\n}(Component));\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Property, Event, KeyboardEvents, rippleEffect } from '@syncfusion/ej2-base';\nimport { getUniqueID, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { addClass, isVisible, closest, attributes, classList, detach, select } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, Collection, Animation } from '@syncfusion/ej2-base';\nimport { setStyleAttribute as setStyle, Complex } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, formatUnit, selectAll } from '@syncfusion/ej2-base';\nvar CLS_ACRDN_ROOT = 'e-acrdn-root';\nvar CLS_ROOT = 'e-accordion';\nvar CLS_ITEM = 'e-acrdn-item';\nvar CLS_ITEMFOCUS = 'e-item-focus';\nvar CLS_ITEMHIDE = 'e-hide';\nvar CLS_HEADER = 'e-acrdn-header';\nvar CLS_HEADERICN = 'e-acrdn-header-icon';\nvar CLS_HEADERCTN = 'e-acrdn-header-content';\nvar CLS_CONTENT = 'e-acrdn-panel';\nvar CLS_CTENT = 'e-acrdn-content';\nvar CLS_TOOGLEICN = 'e-toggle-icon';\nvar CLS_COLLAPSEICN = 'e-tgl-collapse-icon e-icons';\nvar CLS_EXPANDICN = 'e-expand-icon';\nvar CLS_RTL = 'e-rtl';\nvar CLS_CTNHIDE = 'e-content-hide';\nvar CLS_SLCT = 'e-select';\nvar CLS_SLCTED = 'e-selected';\nvar CLS_ACTIVE = 'e-active';\nvar CLS_ANIMATE = 'e-animate';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_TOGANIMATE = 'e-toggle-animation';\nvar CLS_NEST = 'e-nested';\nvar CLS_EXPANDSTATE = 'e-expand-state';\nvar AccordionActionSettings = /** @class */ (function (_super) {\n    __extends(AccordionActionSettings, _super);\n    function AccordionActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('SlideDown')\n    ], AccordionActionSettings.prototype, \"effect\", void 0);\n    __decorate([\n        Property(400)\n    ], AccordionActionSettings.prototype, \"duration\", void 0);\n    __decorate([\n        Property('linear')\n    ], AccordionActionSettings.prototype, \"easing\", void 0);\n    return AccordionActionSettings;\n}(ChildProperty));\nexport { AccordionActionSettings };\nvar AccordionAnimationSettings = /** @class */ (function (_super) {\n    __extends(AccordionAnimationSettings, _super);\n    function AccordionAnimationSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, AccordionActionSettings)\n    ], AccordionAnimationSettings.prototype, \"collapse\", void 0);\n    __decorate([\n        Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, AccordionActionSettings)\n    ], AccordionAnimationSettings.prototype, \"expand\", void 0);\n    return AccordionAnimationSettings;\n}(ChildProperty));\nexport { AccordionAnimationSettings };\n/**\n * An item object that is used to configure Accordion items.\n */\nvar AccordionItem = /** @class */ (function (_super) {\n    __extends(AccordionItem, _super);\n    function AccordionItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(undefined)\n    ], AccordionItem.prototype, \"content\", void 0);\n    __decorate([\n        Property(undefined)\n    ], AccordionItem.prototype, \"header\", void 0);\n    __decorate([\n        Property(undefined)\n    ], AccordionItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(undefined)\n    ], AccordionItem.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property(false)\n    ], AccordionItem.prototype, \"expanded\", void 0);\n    return AccordionItem;\n}(ChildProperty));\nexport { AccordionItem };\n/**\n * The Accordion is a vertically collapsible content panel that displays one or more panels at a time within the available space.\n * ```html\n * <div id='accordion'/>\n * <script>\n *   var accordionObj = new Accordion();\n *   accordionObj.appendTo('#accordion');\n * </script>\n * ```\n */\nvar Accordion = /** @class */ (function (_super) {\n    __extends(Accordion, _super);\n    /**\n     * Initializes a new instance of the Accordion class.\n     * @param options  - Specifies Accordion model properties as options.\n     * @param element  - Specifies the element that is rendered as an Accordion.\n     */\n    function Accordion(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Contains the keyboard configuration of the Accordion.\n         */\n        _this.keyConfigs = {\n            moveUp: 'uparrow',\n            moveDown: 'downarrow',\n            enter: 'enter',\n            space: 'space',\n            home: 'home',\n            end: 'end',\n        };\n        return _this;\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     * @returns void\n     */\n    Accordion.prototype.destroy = function () {\n        var _this = this;\n        var ele = this.element;\n        _super.prototype.destroy.call(this);\n        this.unwireEvents();\n        this.isDestroy = true;\n        this.templateEle.forEach(function (eleStr) {\n            if (!isNOU(_this.element.querySelector(eleStr))) {\n                document.body.appendChild(_this.element.querySelector(eleStr)).style.display = 'none';\n            }\n        });\n        while (ele.firstChild) {\n            ele.removeChild(ele.firstChild);\n        }\n        if (this.trgtEle) {\n            while (this.ctrlTem.firstChild) {\n                ele.appendChild(this.ctrlTem.firstChild);\n            }\n        }\n        ele.removeAttribute('style');\n        ['aria-disabled', 'aria-multiselectable', 'role'].forEach(function (attrb) {\n            _this.element.removeAttribute(attrb);\n        });\n    };\n    Accordion.prototype.preRender = function () {\n        var nested = closest(this.element, '.' + CLS_CONTENT);\n        this.isNested = false;\n        this.templateEle = [];\n        if (!this.isDestroy) {\n            this.isDestroy = false;\n        }\n        if (!isNOU(nested)) {\n            nested.classList.add(CLS_NEST);\n            this.isNested = true;\n        }\n        else {\n            this.element.classList.add(CLS_ACRDN_ROOT);\n        }\n        if (this.enableRtl) {\n            this.add(this.element, CLS_RTL);\n        }\n        if (!this.enablePersistence || isNOU(this.expandedItems)) {\n            this.expandedItems = [];\n        }\n    };\n    Accordion.prototype.add = function (ele, val) {\n        ele.classList.add(val);\n    };\n    Accordion.prototype.remove = function (ele, val) {\n        ele.classList.remove(val);\n    };\n    /**\n     * To initialize the control rendering\n     * @private\n     */\n    Accordion.prototype.render = function () {\n        this.initialize();\n        this.renderControl();\n        this.wireEvents();\n    };\n    Accordion.prototype.initialize = function () {\n        var width = formatUnit(this.width);\n        var height = formatUnit(this.height);\n        setStyle(this.element, { 'width': width, 'height': height });\n        var ariaAttr = {\n            'aria-disabled': 'false', 'role': 'presentation', 'aria-multiselectable': 'true'\n        };\n        if (this.expandedItems.length > 0) {\n            this.initExpand = this.expandedItems;\n        }\n        attributes(this.element, ariaAttr);\n        if (this.expandMode === 'Single') {\n            this.element.setAttribute('aria-multiselectable', 'false');\n        }\n    };\n    Accordion.prototype.renderControl = function () {\n        this.trgtEle = (this.element.children.length > 0) ? select('div', this.element) : null;\n        this.renderItems();\n        this.initItemExpand();\n    };\n    Accordion.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        if (!isNOU(this.keyModule)) {\n            this.keyModule.destroy();\n        }\n    };\n    Accordion.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        if (!this.isNested && !this.isDestroy) {\n            rippleEffect(this.element, { selector: '.' + CLS_HEADER });\n        }\n        if (!this.isNested) {\n            this.keyModule = new KeyboardEvents(this.element, {\n                keyAction: this.keyActionHandler.bind(this),\n                keyConfigs: this.keyConfigs,\n                eventName: 'keydown'\n            });\n        }\n    };\n    Accordion.prototype.focusIn = function (e) {\n        e.target.parentElement.classList.add(CLS_ITEMFOCUS);\n    };\n    Accordion.prototype.focusOut = function (e) {\n        e.target.parentElement.classList.remove(CLS_ITEMFOCUS);\n    };\n    Accordion.prototype.ctrlTemplate = function () {\n        var _this = this;\n        this.ctrlTem = this.element.cloneNode(true);\n        var innerEles = this.element.children;\n        var content;\n        addClass(innerEles, [CLS_ITEM]);\n        [].slice.call(innerEles).forEach(function (el) {\n            el.id = getUniqueID('acrdn_item');\n            if (el.children.length > 0) {\n                _this.add(el.children[0], CLS_HEADER);\n                var header = el.children[0];\n                attributes(header, { 'tabindex': '0', 'role': 'heading', 'aria-level': innerEles.length.toString() });\n                header.id = getUniqueID('acrdn_header');\n                EventHandler.add(header, 'focus', _this.focusIn, _this);\n                EventHandler.add(header, 'blur', _this.focusOut, _this);\n                var headerEle = header.firstElementChild;\n                if (headerEle) {\n                    headerEle.classList.add(CLS_HEADERCTN);\n                }\n                content = el.children[1];\n                if (content) {\n                    content.id = getUniqueID('acrdn_panel');\n                    header.setAttribute('aria-controls', content.id);\n                    content.style.display = '';\n                    el.classList.add(CLS_SLCT);\n                    el.children[0].appendChild(_this.toggleIconGenerate());\n                    classList(content, [CLS_CONTENT, CLS_CTNHIDE], []);\n                    attributes(content, { 'aria-labelledby': header.id, 'aria-hidden': 'true' });\n                    content = content.firstElementChild;\n                    if (content) {\n                        content.classList.add(CLS_CTENT);\n                        content.style.display = '';\n                    }\n                }\n            }\n        });\n    };\n    Accordion.prototype.toggleIconGenerate = function () {\n        var tglIcon = this.createElement('div', { className: CLS_TOOGLEICN });\n        var hdrColIcon = this.createElement('span', { className: CLS_COLLAPSEICN });\n        tglIcon.appendChild(hdrColIcon);\n        return tglIcon;\n    };\n    Accordion.prototype.initItemExpand = function () {\n        var len = this.initExpand.length;\n        if (len === 0) {\n            return;\n        }\n        if (this.expandMode === 'Single') {\n            this.expandItem(true, this.initExpand[len - 1]);\n        }\n        else {\n            for (var i = 0; i < len; i++) {\n                this.expandItem(true, this.initExpand[i]);\n            }\n        }\n    };\n    Accordion.prototype.renderItems = function () {\n        var _this = this;\n        var ele = this.element;\n        var innerItem;\n        if (isNOU(this.initExpand)) {\n            this.initExpand = [];\n        }\n        var items = this.items;\n        if (!isNOU(this.trgtEle)) {\n            this.ctrlTemplate();\n        }\n        else if (ele && items.length > 0) {\n            items.forEach(function (item, index) {\n                innerItem = _this.renderInnerItem(item, index);\n                ele.appendChild(innerItem);\n                if (innerItem.childElementCount > 0) {\n                    EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'focus', _this.focusIn, _this);\n                    EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'blur', _this.focusOut, _this);\n                }\n            });\n        }\n    };\n    Accordion.prototype.clickHandler = function (e) {\n        var _this = this;\n        var trgt = e.target;\n        var eventArgs = {};\n        var index;\n        var tglIcon;\n        var acrdEle = closest(trgt, '.' + CLS_ROOT);\n        if (acrdEle !== this.element) {\n            return;\n        }\n        trgt.classList.add('e-target');\n        var acrdnItem = closest(trgt, '.' + CLS_ITEM);\n        var acrdnHdr = closest(trgt, '.' + CLS_HEADER);\n        var acrdnCtn = closest(trgt, '.' + CLS_CONTENT);\n        if (acrdnItem && (isNOU(acrdnHdr) || isNOU(acrdnCtn))) {\n            acrdnHdr = acrdnItem.children[0];\n            acrdnCtn = acrdnItem.children[1];\n        }\n        if (acrdnHdr) {\n            tglIcon = select('.' + CLS_TOOGLEICN, acrdnHdr);\n        }\n        var acrdnCtnItem;\n        if (acrdnCtn) {\n            acrdnCtnItem = closest(acrdnCtn, '.' + CLS_ITEM);\n        }\n        var acrdActive = [];\n        index = this.getIndexByItem(acrdnItem);\n        if (acrdnCtnItem) {\n            eventArgs.item = this.items[this.getIndexByItem(acrdnCtnItem)];\n        }\n        eventArgs.originalEvent = e;\n        var ctnCheck = !isNOU(tglIcon) && isNOU(this.trgtEle) && acrdnItem.childElementCount <= 1;\n        if (ctnCheck && (isNOU(acrdnCtn) || !isNOU(select('.' + CLS_HEADER + ' .' + CLS_TOOGLEICN, acrdnCtnItem)))) {\n            acrdnItem.appendChild(this.contentRendering(index));\n            this.ariaAttrUpdate(acrdnItem);\n        }\n        this.trigger('clicked', eventArgs);\n        var cntclkCheck = (acrdnCtn && !isNOU(select('.e-target', acrdnCtn)));\n        cntclkCheck = cntclkCheck && (isNOU(select('.' + CLS_ROOT, acrdnCtn)) || !(closest(trgt, '.' + CLS_ROOT) === this.element));\n        trgt.classList.remove('e-target');\n        if (trgt.classList.contains(CLS_CONTENT) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {\n            return;\n        }\n        [].slice.call(this.element.children).forEach(function (el) {\n            if (el.classList.contains(CLS_ACTIVE)) {\n                acrdActive.push(el);\n            }\n        });\n        var acrdAniEle = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM + ' [' + CLS_ANIMATE + ']'));\n        if (acrdAniEle.length > 0) {\n            for (var _i = 0, acrdAniEle_1 = acrdAniEle; _i < acrdAniEle_1.length; _i++) {\n                var el = acrdAniEle_1[_i];\n                acrdActive.push(el.parentElement);\n            }\n        }\n        var sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute('e-animate') === 'true';\n        var sameHeader = false;\n        if (!isNOU(acrdnItem) && !isNOU(acrdnHdr)) {\n            var acrdnCtn_1 = select('.' + CLS_CONTENT, acrdnItem);\n            var acrdnRoot = closest(acrdnItem, '.' + CLS_ACRDN_ROOT);\n            var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n            if (isNOU(acrdnCtn_1)) {\n                return;\n            }\n            sameHeader = (expandState === acrdnItem);\n            if (isVisible(acrdnCtn_1) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {\n                this.collapse(acrdnCtn_1);\n            }\n            else {\n                if ((acrdActive.length > 0) && this.expandMode === 'Single' && !sameContentCheck) {\n                    acrdActive.forEach(function (el) {\n                        _this.collapse(select('.' + CLS_CONTENT, el));\n                        el.classList.remove(CLS_EXPANDSTATE);\n                    });\n                }\n                this.expand(acrdnCtn_1);\n            }\n            if (!isNOU(expandState) && !sameHeader) {\n                expandState.classList.remove(CLS_EXPANDSTATE);\n            }\n        }\n    };\n    Accordion.prototype.eleMoveFocus = function (action, root, trgt) {\n        var clst;\n        var clstItem = closest(trgt, '.' + CLS_ITEM);\n        if (trgt === root) {\n            clst = ((action === 'moveUp' ? trgt.lastElementChild : trgt).querySelector('.' + CLS_HEADER));\n        }\n        else if (trgt.classList.contains(CLS_HEADER)) {\n            clstItem = (action === 'moveUp' ? clstItem.previousElementSibling : clstItem.nextElementSibling);\n            if (clstItem) {\n                clst = select('.' + CLS_HEADER, clstItem);\n            }\n        }\n        if (clst) {\n            clst.focus();\n        }\n    };\n    Accordion.prototype.keyActionHandler = function (e) {\n        var trgt = e.target;\n        var header = closest(e.target, CLS_HEADER);\n        if (isNOU(header) && !trgt.classList.contains(CLS_ROOT) && !trgt.classList.contains(CLS_HEADER)) {\n            return;\n        }\n        var clst;\n        var root = this.element;\n        var content;\n        switch (e.action) {\n            case 'moveUp':\n                this.eleMoveFocus(e.action, root, trgt);\n                break;\n            case 'moveDown':\n                this.eleMoveFocus(e.action, root, trgt);\n                break;\n            case 'space':\n            case 'enter':\n                content = trgt.nextElementSibling;\n                if (!isNOU(content) && content.classList.contains(CLS_CONTENT)) {\n                    if (content.getAttribute('e-animate') !== 'true') {\n                        trgt.click();\n                    }\n                }\n                else {\n                    trgt.click();\n                }\n                break;\n            case 'home':\n            case 'end':\n                clst = e.action === 'home' ? root.firstElementChild.children[0] : root.lastElementChild.children[0];\n                clst.focus();\n                break;\n        }\n    };\n    Accordion.prototype.headerEleGenerate = function () {\n        var header = this.createElement('div', { className: CLS_HEADER, id: getUniqueID('acrdn_header') });\n        var ariaAttr = {\n            'tabindex': '0', 'role': 'heading', 'aria-expanded': 'false', 'aria-selected': 'false',\n            'aria-disabled': 'false', 'aria-level': this.items.length.toString()\n        };\n        attributes(header, ariaAttr);\n        return header;\n    };\n    Accordion.prototype.renderInnerItem = function (item, index) {\n        var innerEle;\n        innerEle = this.createElement('div', { className: CLS_ITEM });\n        innerEle.id = getUniqueID('acrdn_item');\n        if (item.header) {\n            var ctnEle = this.headerEleGenerate();\n            var hdrEle = this.createElement('div', { className: CLS_HEADERCTN });\n            ctnEle.appendChild(hdrEle);\n            ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));\n            innerEle.appendChild(ctnEle);\n        }\n        var hdr = select('.' + CLS_HEADER, innerEle);\n        if (item.expanded && !isNOU(index) && (!this.enablePersistence)) {\n            if (this.initExpand.indexOf(index) === -1) {\n                this.initExpand.push(index);\n            }\n        }\n        if (item.cssClass) {\n            innerEle.classList.add(item.cssClass);\n        }\n        if (item.iconCss) {\n            var hdrIcnEle = this.createElement('div', { className: CLS_HEADERICN });\n            var icon = this.createElement('span', { className: item.iconCss + ' e-icons' });\n            hdrIcnEle.appendChild(icon);\n            if (isNOU(hdr)) {\n                hdr = this.headerEleGenerate();\n                hdr.appendChild(hdrIcnEle);\n                innerEle.appendChild(hdr);\n            }\n            else {\n                hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);\n            }\n        }\n        if (item.content) {\n            var hdrIcon = this.toggleIconGenerate();\n            if (isNOU(hdr)) {\n                hdr = this.headerEleGenerate();\n                innerEle.appendChild(hdr);\n            }\n            hdr.appendChild(hdrIcon);\n            this.add(innerEle, CLS_SLCT);\n        }\n        return innerEle;\n    };\n    Accordion.prototype.fetchElement = function (ele, value, index, isHeader) {\n        var templateFn;\n        var temString;\n        try {\n            if (document.querySelectorAll(value).length) {\n                var eleVal = document.querySelector(value);\n                temString = eleVal.outerHTML.trim();\n                ele.appendChild(eleVal);\n                eleVal.style.display = '';\n            }\n        }\n        catch (e) {\n            templateFn = templateCompiler(value);\n        }\n        var tempArray;\n        if (!isNOU(templateFn)) {\n            tempArray = templateFn();\n        }\n        if (!isNOU(tempArray) && tempArray.length > 0 && !(isNOU(tempArray[0].tagName) && tempArray.length === 1)) {\n            [].slice.call(tempArray).forEach(function (el) {\n                if (!isNOU(el.tagName)) {\n                    el.style.display = '';\n                }\n                ele.appendChild(el);\n            });\n        }\n        else if (ele.childElementCount === 0) {\n            ele.innerHTML = value;\n        }\n        if (!isNOU(temString)) {\n            this.templateEle.push(value);\n        }\n        return ele;\n    };\n    Accordion.prototype.ariaAttrUpdate = function (itemEle) {\n        var header = select('.' + CLS_HEADER, itemEle);\n        var content = select('.' + CLS_CONTENT, itemEle);\n        header.setAttribute('aria-controls', content.id);\n        content.setAttribute('aria-labelledby', header.id);\n    };\n    Accordion.prototype.contentRendering = function (index) {\n        var content = this.items[index].content;\n        var itemcnt = this.createElement('div', { className: CLS_CONTENT + ' ' + CLS_CTNHIDE, id: getUniqueID('acrdn_panel') });\n        attributes(itemcnt, { 'aria-hidden': 'true' });\n        var ctn = this.createElement('div', { className: CLS_CTENT });\n        itemcnt.appendChild(this.fetchElement(ctn, content, index, false));\n        return itemcnt;\n    };\n    Accordion.prototype.expand = function (trgt) {\n        var eventArgs;\n        var trgtItemEle = closest(trgt, '.' + CLS_ITEM);\n        if (isNOU(trgt) || (isVisible(trgt) && trgt.getAttribute('e-animate') !== 'true') || trgtItemEle.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        var acrdnRoot = closest(trgtItemEle, '.' + CLS_ACRDN_ROOT);\n        var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n        var animation = {\n            name: this.animation.expand.effect,\n            duration: this.animation.expand.duration,\n            timingFunction: this.animation.expand.easing\n        };\n        var icon = select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n        eventArgs = { element: trgtItemEle,\n            item: this.items[this.getIndexByItem(trgtItemEle)],\n            isExpanded: true };\n        var eff = animation.name;\n        this.trigger('expanding', eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n        icon.classList.add(CLS_TOGANIMATE);\n        this.expandedItemsPush(trgtItemEle);\n        if (!isNOU(expandState)) {\n            expandState.classList.remove(CLS_EXPANDSTATE);\n        }\n        trgtItemEle.classList.add(CLS_EXPANDSTATE);\n        if ((animation.name === 'None')) {\n            this.expandProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n            this.expandProgress('end', icon, trgt, trgtItemEle, eventArgs);\n            return;\n        }\n        this.expandAnimation(eff, icon, trgt, trgtItemEle, animation, eventArgs);\n    };\n    Accordion.prototype.expandAnimation = function (ef, icn, trgt, trgtItemEle, animate, args) {\n        var _this = this;\n        var height;\n        var trgtHgt;\n        this.lastActiveItemId = trgtItemEle.id;\n        if (ef === 'SlideDown') {\n            animate.begin = function () {\n                _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n                trgt.style.position = 'absolute';\n                height = trgtItemEle.offsetHeight;\n                trgtHgt = trgt.offsetHeight;\n                trgt.style.maxHeight = (trgt.offsetHeight) + 'px';\n                trgtItemEle.style.maxHeight = '';\n            };\n            animate.progress = function () {\n                trgtItemEle.style.minHeight = (height + trgt.offsetHeight) + 'px';\n            };\n            animate.end = function () {\n                setStyle(trgt, { 'position': '', 'maxHeight': '' });\n                trgtItemEle.style.minHeight = '';\n                _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n            };\n        }\n        else {\n            animate.begin = function () {\n                _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n            };\n            animate.end = function () {\n                _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n            };\n        }\n        new Animation(animate).animate(trgt);\n    };\n    Accordion.prototype.expandProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n        this.remove(trgt, CLS_CTNHIDE);\n        this.add(trgtItemEle, CLS_SLCTED);\n        this.add(icon, CLS_EXPANDICN);\n        if (progress === 'end') {\n            this.add(trgtItemEle, CLS_ACTIVE);\n            trgt.setAttribute('aria-hidden', 'false');\n            attributes(trgt.previousElementSibling, { 'aria-selected': 'true', 'aria-expanded': 'true' });\n            icon.classList.remove(CLS_TOGANIMATE);\n            this.trigger('expanded', eventArgs);\n        }\n    };\n    Accordion.prototype.expandedItemsPush = function (item) {\n        var index = this.getIndexByItem(item);\n        if (this.expandedItems.indexOf(index) === -1) {\n            this.expandedItems.push(index);\n        }\n    };\n    Accordion.prototype.getIndexByItem = function (item) {\n        return [].slice.call(this.element.children).indexOf(item);\n    };\n    Accordion.prototype.expandedItemsPop = function (item) {\n        var index = this.getIndexByItem(item);\n        this.expandedItems.splice(this.expandedItems.indexOf(index), 1);\n    };\n    Accordion.prototype.collapse = function (trgt) {\n        var eventArgs;\n        var trgtItemEle = closest(trgt, '.' + CLS_ITEM);\n        if (isNOU(trgt) || !isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        var animation = {\n            name: this.animation.collapse.effect,\n            duration: this.animation.collapse.duration,\n            timingFunction: this.animation.collapse.easing,\n        };\n        var icon = select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n        eventArgs = { element: trgtItemEle,\n            item: this.items[this.getIndexByItem(trgtItemEle)],\n            isExpanded: false };\n        var eff = animation.name;\n        this.trigger('expanding', eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n        this.expandedItemsPop(trgtItemEle);\n        trgtItemEle.classList.add(CLS_EXPANDSTATE);\n        icon.classList.add(CLS_TOGANIMATE);\n        if ((animation.name === 'None')) {\n            this.collapseProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n            this.collapseProgress('end', icon, trgt, trgtItemEle, eventArgs);\n            return;\n        }\n        this.collapseAnimation(eff, trgt, trgtItemEle, icon, animation, eventArgs);\n    };\n    Accordion.prototype.collapseAnimation = function (ef, trgt, trgtItEl, icn, animate, args) {\n        var _this = this;\n        var height;\n        var trgtHeight;\n        var itemHeight;\n        var remain;\n        this.lastActiveItemId = trgtItEl.id;\n        if (ef === 'SlideUp') {\n            animate.begin = function () {\n                itemHeight = trgtItEl.offsetHeight;\n                trgtItEl.style.minHeight = itemHeight + 'px';\n                trgt.style.position = 'absolute';\n                height = trgtItEl.offsetHeight;\n                trgtHeight = trgt.offsetHeight;\n                trgt.style.maxHeight = trgtHeight + 'px';\n                _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n            };\n            animate.progress = function () {\n                remain = ((height - (trgtHeight - trgt.offsetHeight)));\n                if (remain < itemHeight) {\n                    trgtItEl.style.minHeight = remain + 'px';\n                }\n            };\n            animate.end = function () {\n                trgt.style.display = 'none';\n                _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n                trgtItEl.style.minHeight = '';\n                setStyle(trgt, { 'position': '', 'maxHeight': '', 'display': '' });\n            };\n        }\n        else {\n            animate.begin = function () {\n                _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n            };\n            animate.end = function () {\n                _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n            };\n        }\n        new Animation(animate).animate(trgt);\n    };\n    Accordion.prototype.collapseProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n        this.remove(icon, CLS_EXPANDICN);\n        this.remove(trgtItemEle, CLS_SLCTED);\n        if (progress === 'end') {\n            this.add(trgt, CLS_CTNHIDE);\n            icon.classList.remove(CLS_TOGANIMATE);\n            this.remove(trgtItemEle, CLS_ACTIVE);\n            trgt.setAttribute('aria-hidden', 'true');\n            attributes(trgt.previousElementSibling, { 'aria-selected': 'false', 'aria-expanded': 'false' });\n            this.trigger('expanded', eventArgs);\n        }\n    };\n    /**\n     * Returns the current module name.\n     * @returns string\n     * @private\n     */\n    Accordion.prototype.getModuleName = function () {\n        return 'accordion';\n    };\n    Accordion.prototype.itemAttribUpdate = function () {\n        var itemEle = [].slice.call(this.element.children);\n        var itemLen = this.items.length;\n        itemEle.forEach(function (ele) {\n            select('.' + CLS_HEADER, ele).setAttribute('aria-level', '' + itemLen);\n        });\n    };\n    /**\n     * Adds new item to the Accordion with the specified index of the Accordion.\n     * @param  {AccordionItemModel} item - Item array that is to be added to the Accordion.\n     * @param  {number} index - Number value that determines where the item should be added.\n     * By default, item is added at the last index if the index is not specified.\n     * @returns void\n     */\n    Accordion.prototype.addItem = function (item, index) {\n        var ele = this.element;\n        if (isNOU(index)) {\n            index = this.items.length;\n        }\n        if (ele.childElementCount >= index) {\n            this.items.splice(index, 0, item);\n            var innerItemEle = this.renderInnerItem(item, index);\n            if (ele.childElementCount === index) {\n                ele.appendChild(innerItemEle);\n            }\n            else {\n                ele.insertBefore(innerItemEle, ele.children[index]);\n            }\n            EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n            EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n            this.itemAttribUpdate();\n        }\n        this.expandedItems = [];\n        this.expandedItemRefresh(ele);\n        if (item.expanded) {\n            this.expandItem(true, index);\n        }\n    };\n    Accordion.prototype.expandedItemRefresh = function (ele) {\n        var _this = this;\n        [].slice.call(ele.children).forEach(function (el) {\n            if (el.classList.contains(CLS_SLCTED)) {\n                _this.expandedItemsPush(el);\n            }\n        });\n    };\n    /**\n     * Dynamically removes item from Accordion.\n     * @param  {number} index - Number value that determines which item should be removed.\n     * @returns void.\n     */\n    Accordion.prototype.removeItem = function (index) {\n        var ele = this.element.children[index];\n        if (isNOU(ele)) {\n            return;\n        }\n        detach(ele);\n        this.items.splice(index, 1);\n        this.itemAttribUpdate();\n        this.expandedItems = [];\n        this.expandedItemRefresh(this.element);\n    };\n    /**\n     * Sets focus to the specified index item header in Accordion.\n     * @param  {number} index - Number value that determines which item should be focused.\n     * @returns void.\n     */\n    Accordion.prototype.select = function (index) {\n        var ele = this.element.children[index];\n        if (isNOU(ele) || isNOU(select('.' + CLS_HEADER, ele))) {\n            return;\n        }\n        ele.children[0].focus();\n    };\n    /**\n     * Shows or hides the specified item from Accordion.\n     * @param  {number} index - Number value that determines which item should be hidden/shown.\n     * @param  {Boolean} isHidden - Boolean value that determines the action either hide (true) or show (false). Default value is false.\n     *  If the `isHidden` value is false, the item is shown or else item it is hidden.\n     * @returns void.\n     */\n    Accordion.prototype.hideItem = function (index, isHidden) {\n        var ele = this.element.children[index];\n        if (isNOU(ele)) {\n            return;\n        }\n        if (isNOU(isHidden)) {\n            isHidden = true;\n        }\n        isHidden ? this.add(ele, CLS_ITEMHIDE) : this.remove(ele, CLS_ITEMHIDE);\n    };\n    /**\n     * Enables/Disables the specified Accordion item.\n     * @param  {number} index - Number value that determines which item should be enabled/disabled.\n     * @param  {boolean} isEnable - Boolean value that determines the action as enable (true) or disable (false).\n     * If the `isEnable` value is true, the item is enabled or else it is disabled.\n     * @returns void.\n     */\n    Accordion.prototype.enableItem = function (index, isEnable) {\n        var ele = this.element.children[index];\n        if (isNOU(ele)) {\n            return;\n        }\n        var eleHeader = ele.firstElementChild;\n        if (isEnable) {\n            this.remove(ele, CLS_DISABLE);\n            attributes(eleHeader, { 'tabindex': '0', 'aria-disabled': 'false' });\n            eleHeader.focus();\n        }\n        else {\n            if (ele.classList.contains(CLS_ACTIVE)) {\n                this.expandItem(false, index);\n                this.eleMoveFocus('movedown', this.element, eleHeader);\n            }\n            this.add(ele, CLS_DISABLE);\n            eleHeader.setAttribute('aria-disabled', 'true');\n            eleHeader.removeAttribute('tabindex');\n        }\n    };\n    /**\n     * Expands/Collapses the specified Accordion item.\n     * @param  {boolean} isExpand - Boolean value that determines the action as expand or collapse.\n     * @param  {number} index - Number value that determines which item should be expanded/collapsed.`index` is optional parameter.\n     *  Without Specifying index, based on the `isExpand` value all Accordion item can be expanded or collapsed.\n     * @returns void.\n     */\n    Accordion.prototype.expandItem = function (isExpand, index) {\n        var _this = this;\n        var root = this.element;\n        if (isNOU(index)) {\n            if (this.expandMode === 'Single' && isExpand) {\n                var ele = root.children[root.childElementCount - 1];\n                this.itemExpand(isExpand, ele, this.getIndexByItem(ele));\n            }\n            else {\n                var item = select('#' + this.lastActiveItemId, this.element);\n                [].slice.call(this.element.children).forEach(function (el) {\n                    _this.itemExpand(isExpand, el, _this.getIndexByItem(el));\n                    el.classList.remove(CLS_EXPANDSTATE);\n                });\n                var expandedItem = select('.' + CLS_EXPANDSTATE, this.element);\n                if (expandedItem) {\n                    expandedItem.classList.remove(CLS_EXPANDSTATE);\n                }\n                if (item) {\n                    item.classList.add(CLS_EXPANDSTATE);\n                }\n            }\n        }\n        else {\n            var ele = this.element.children[index];\n            if (isNOU(ele) || !ele.classList.contains(CLS_SLCT) || (ele.classList.contains(CLS_ACTIVE) && isExpand)) {\n                return;\n            }\n            else {\n                if (this.expandMode === 'Single') {\n                    this.expandItem(false);\n                }\n                this.itemExpand(isExpand, ele, index);\n            }\n        }\n    };\n    Accordion.prototype.itemExpand = function (isExpand, ele, index) {\n        var ctn = ele.children[1];\n        if (ele.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        if (isNOU(ctn) && isExpand) {\n            ctn = this.contentRendering(index);\n            ele.appendChild(ctn);\n            this.ariaAttrUpdate(ele);\n        }\n        else if (isNOU(ctn)) {\n            return;\n        }\n        isExpand ? this.expand(ctn) : this.collapse(ctn);\n    };\n    Accordion.prototype.destroyItems = function () {\n        [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) { detach(el); });\n    };\n    Accordion.prototype.updateItem = function (item, index) {\n        if (!isNOU(item)) {\n            var itemObj = this.items[index];\n            this.items.splice(index, 1);\n            detach(item);\n            this.addItem(itemObj, index);\n        }\n    };\n    Accordion.prototype.getPersistData = function () {\n        var keyEntity = ['expandedItems'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     * @param  {AccordionModel} newProp\n     * @param  {AccordionModel} oldProp\n     * @returns void\n     * @private\n     */\n    Accordion.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var acrdn = this.element;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n                        var changedProp = Object.keys(newProp.items);\n                        for (var j = 0; j < changedProp.length; j++) {\n                            var index = parseInt(Object.keys(newProp.items)[j], 10);\n                            var property = Object.keys(newProp.items[index])[0];\n                            var item = selectAll('.' + CLS_ITEM, this.element)[index];\n                            var oldVal = Object(oldProp.items[index])[property];\n                            var newVal = Object(newProp.items[index])[property];\n                            if (property === 'header' || property === 'iconCss' || property === 'expanded') {\n                                this.updateItem(item, index);\n                            }\n                            if (property === 'cssClass' && !isNOU(item)) {\n                                item.classList.remove(oldVal);\n                                item.classList.add(newVal);\n                            }\n                            if (property === 'content' && !isNOU(item) && item.children.length === 2) {\n                                if (item.classList.contains(CLS_SLCTED)) {\n                                    this.expandItem(false, index);\n                                }\n                                detach(item.querySelector('.' + CLS_CONTENT));\n                            }\n                        }\n                    }\n                    else {\n                        this.destroyItems();\n                        this.renderItems();\n                        this.initItemExpand();\n                    }\n                    break;\n                case 'enableRtl':\n                    newProp.enableRtl ? this.add(acrdn, CLS_RTL) : this.remove(acrdn, CLS_RTL);\n                    break;\n                case 'height':\n                    setStyle(this.element, { 'height': formatUnit(newProp.height) });\n                    break;\n                case 'width':\n                    setStyle(this.element, { 'width': formatUnit(newProp.width) });\n                    break;\n                case 'expandMode':\n                    if (newProp.expandMode === 'Single') {\n                        this.element.setAttribute('aria-multiselectable', 'false');\n                        if (this.expandedItems.length > 1) {\n                            this.expandItem(false);\n                        }\n                    }\n                    else {\n                        this.element.setAttribute('aria-multiselectable', 'true');\n                    }\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Collection([], AccordionItem)\n    ], Accordion.prototype, \"items\", void 0);\n    __decorate([\n        Property('100%')\n    ], Accordion.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Accordion.prototype, \"height\", void 0);\n    __decorate([\n        Property('Multiple')\n    ], Accordion.prototype, \"expandMode\", void 0);\n    __decorate([\n        Complex({}, AccordionAnimationSettings)\n    ], Accordion.prototype, \"animation\", void 0);\n    __decorate([\n        Event()\n    ], Accordion.prototype, \"clicked\", void 0);\n    __decorate([\n        Event()\n    ], Accordion.prototype, \"expanding\", void 0);\n    __decorate([\n        Event()\n    ], Accordion.prototype, \"expanded\", void 0);\n    __decorate([\n        Event()\n    ], Accordion.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Accordion.prototype, \"destroyed\", void 0);\n    Accordion = __decorate([\n        NotifyPropertyChanges\n    ], Accordion);\n    return Accordion;\n}(Component));\nexport { Accordion };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, ChildProperty, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, KeyboardEvents, Touch } from '@syncfusion/ej2-base';\nimport { attributes, Animation } from '@syncfusion/ej2-base';\nimport { Browser, Collection, setValue, getValue, getUniqueID, getInstance, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { select, selectAll, closest, detach, append, rippleEffect, isVisible, Complex } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { getZindexPartial, calculatePosition, isCollide, fit } from '@syncfusion/ej2-popups';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nvar ENTER = 'enter';\nvar ESCAPE = 'escape';\nvar FOCUSED = 'e-focused';\nvar HEADER = 'e-menu-header';\nvar SELECTED = 'e-selected';\nvar SEPARATOR = 'e-separator';\nvar UPARROW = 'uparrow';\nvar DOWNARROW = 'downarrow';\nvar LEFTARROW = 'leftarrow';\nvar RIGHTARROW = 'rightarrow';\nvar HOME = 'home';\nvar END = 'end';\nvar CARET = 'e-caret';\nvar ITEM = 'e-menu-item';\nvar DISABLED = 'e-disabled';\nvar HIDE = 'e-menu-hide';\nvar ICONS = 'e-icons';\nvar RTL = 'e-rtl';\n/**\n * Configures the field options of the Menu.\n */\nvar FieldSettings = /** @class */ (function (_super) {\n    __extends(FieldSettings, _super);\n    function FieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('id')\n    ], FieldSettings.prototype, \"itemId\", void 0);\n    __decorate([\n        Property('parentId')\n    ], FieldSettings.prototype, \"parentId\", void 0);\n    __decorate([\n        Property('text')\n    ], FieldSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property('iconCss')\n    ], FieldSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('url')\n    ], FieldSettings.prototype, \"url\", void 0);\n    __decorate([\n        Property('separator')\n    ], FieldSettings.prototype, \"separator\", void 0);\n    __decorate([\n        Property('items')\n    ], FieldSettings.prototype, \"children\", void 0);\n    return FieldSettings;\n}(ChildProperty));\nexport { FieldSettings };\n/**\n * Specifies menu items.\n */\nvar MenuItem = /** @class */ (function (_super) {\n    __extends(MenuItem, _super);\n    function MenuItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], MenuItem.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('')\n    ], MenuItem.prototype, \"id\", void 0);\n    __decorate([\n        Property(false)\n    ], MenuItem.prototype, \"separator\", void 0);\n    __decorate([\n        Collection([], MenuItem)\n    ], MenuItem.prototype, \"items\", void 0);\n    __decorate([\n        Property('')\n    ], MenuItem.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], MenuItem.prototype, \"url\", void 0);\n    return MenuItem;\n}(ChildProperty));\nexport { MenuItem };\n/**\n * @private\n * Base class for Menu and ContextMenu components.\n */\nvar MenuBase = /** @class */ (function (_super) {\n    __extends(MenuBase, _super);\n    /**\n     * Constructor for creating the widget.\n     * @private\n     */\n    function MenuBase(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.navIdx = [];\n        _this.animation = new Animation({});\n        _this.isTapHold = false;\n        return _this;\n    }\n    /**\n     * Initialized third party configuration settings.\n     * @private\n     */\n    MenuBase.prototype.preRender = function () {\n        if (this.element.tagName === 'EJS-CONTEXTMENU') {\n            this.element.style.display = 'none';\n            this.element.classList.remove('e-' + this.getModuleName());\n            this.element.classList.remove('e-control');\n            var ejInst = getValue('ej2_instances', this.element);\n            var ul = this.createElement('ul');\n            this.ngElement = this.element;\n            this.element = ul;\n            this.element.classList.add('e-control');\n            this.element.classList.add('e-' + this.getModuleName());\n            setValue('ej2_instances', ejInst, this.element);\n            if (!this.element.id) {\n                this.element.id = getUniqueID(this.getModuleName());\n            }\n        }\n        if (this.element.tagName === 'EJS-MENU') {\n            var ele = this.element;\n            var ejInstance = getValue('ej2_instances', ele);\n            var ul = this.createElement('ul');\n            var wrapper = this.createElement('EJS-MENU', { className: 'e-' + this.getModuleName() + '-wrapper' });\n            wrapper.style.display = 'block';\n            for (var idx = 0, len = ele.attributes.length; idx < len; idx++) {\n                ul.setAttribute(ele.attributes[idx].nodeName, ele.attributes[idx].nodeValue);\n            }\n            ele.parentNode.insertBefore(wrapper, ele);\n            detach(ele);\n            ele = ul;\n            wrapper.appendChild(ele);\n            setValue('ej2_instances', ejInstance, ele);\n            this.ngElement = wrapper;\n            this.element = ele;\n            if (!this.element.id) {\n                this.element.id = getUniqueID(this.getModuleName());\n            }\n        }\n    };\n    /**\n     * Initialize the control rendering\n     * @private\n     */\n    MenuBase.prototype.render = function () {\n        this.initialize();\n        this.renderItems();\n        this.wireEvents();\n    };\n    MenuBase.prototype.initialize = function () {\n        var wrapper = this.getWrapper();\n        if (!wrapper) {\n            wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n            if (this.isMenu) {\n                this.element.parentElement.insertBefore(wrapper, this.element);\n            }\n            else {\n                document.body.appendChild(wrapper);\n            }\n        }\n        if (this.cssClass) {\n            wrapper.classList.add(this.cssClass);\n        }\n        if (this.enableRtl) {\n            wrapper.classList.add(RTL);\n        }\n        attributes(this.element, { 'role': this.isMenu ? 'menubar' : 'menu', 'tabindex': '0' });\n        wrapper.appendChild(this.element);\n        this.element.style.zIndex = getZindexPartial(this.element).toString();\n    };\n    MenuBase.prototype.renderItems = function () {\n        if (!this.items.length) {\n            var items = ListBase.createJsonFromElement(this.element, { fields: { child: 'items' } });\n            this.setProperties({ items: items }, true);\n            this.element.innerHTML = '';\n        }\n        var ul = this.createItems(this.items);\n        append(Array.prototype.slice.call(ul.children), this.element);\n        this.element.classList.add('e-menu-parent');\n    };\n    MenuBase.prototype.wireEvents = function () {\n        var wrapper = this.getWrapper();\n        if (this.target) {\n            var target = void 0;\n            var targetElems = selectAll(this.target);\n            for (var i = 0, len = targetElems.length; i < len; i++) {\n                target = targetElems[i];\n                if (Browser.isIos) {\n                    new Touch(target, { tapHold: this.touchHandler.bind(this) });\n                }\n                else {\n                    EventHandler.add(target, 'contextmenu', this.cmenuHandler, this);\n                }\n            }\n            this.targetElement = target;\n            for (var _i = 0, _a = getScrollableParent(this.targetElement); _i < _a.length; _i++) {\n                var parent_1 = _a[_i];\n                EventHandler.add(parent_1, 'scroll', this.scrollHandler, this);\n            }\n        }\n        if (!Browser.isDevice) {\n            EventHandler.add(this.isMenu ? document : wrapper, 'mouseover', this.moverHandler, this);\n            EventHandler.add(document, 'mousedown', this.mouseDownHandler, this);\n        }\n        this.delegateClickHandler = this.clickHandler.bind(this);\n        EventHandler.add(document, 'click', this.delegateClickHandler, this);\n        var keyConfigs = {\n            downarrow: DOWNARROW,\n            uparrow: UPARROW,\n            enter: ENTER,\n            leftarrow: LEFTARROW,\n            rightarrow: RIGHTARROW,\n            escape: ESCAPE\n        };\n        if (this.isMenu) {\n            keyConfigs.home = HOME;\n            keyConfigs.end = END;\n        }\n        new KeyboardEvents(wrapper, {\n            keyAction: this.keyBoardHandler.bind(this),\n            keyConfigs: keyConfigs\n        });\n        this.rippleFn = rippleEffect(wrapper, { selector: '.' + ITEM });\n    };\n    MenuBase.prototype.mouseDownHandler = function (e) {\n        if (closest(e.target, '.e-' + this.getModuleName() + '-wrapper') !== this.getWrapper()) {\n            this.closeMenu(this.navIdx.length, e);\n        }\n    };\n    MenuBase.prototype.keyBoardHandler = function (e) {\n        var actionName = '';\n        var actionNeeded = this.isMenu && !this.element.classList.contains('e-vertical') && this.navIdx.length < 1;\n        e.preventDefault();\n        if (actionNeeded) {\n            switch (e.action) {\n                case RIGHTARROW:\n                    actionName = RIGHTARROW;\n                    e.action = DOWNARROW;\n                    break;\n                case LEFTARROW:\n                    actionName = LEFTARROW;\n                    e.action = UPARROW;\n                    break;\n                case DOWNARROW:\n                    actionName = DOWNARROW;\n                    e.action = RIGHTARROW;\n                    break;\n                case UPARROW:\n                    actionName = UPARROW;\n                    e.action = '';\n                    break;\n            }\n        }\n        else if (this.enableRtl) {\n            switch (e.action) {\n                case LEFTARROW:\n                    actionNeeded = true;\n                    actionName = LEFTARROW;\n                    e.action = RIGHTARROW;\n                    break;\n                case RIGHTARROW:\n                    actionNeeded = true;\n                    actionName = RIGHTARROW;\n                    e.action = LEFTARROW;\n                    break;\n            }\n        }\n        switch (e.action) {\n            case DOWNARROW:\n            case UPARROW:\n            case END:\n            case HOME:\n                this.upDownKeyHandler(e);\n                break;\n            case RIGHTARROW:\n                this.rightEnterKeyHandler(e);\n                break;\n            case LEFTARROW:\n                this.leftEscKeyHandler(e);\n                break;\n            case ENTER:\n                this.rightEnterKeyHandler(e);\n                break;\n            case ESCAPE:\n                this.leftEscKeyHandler(e);\n                break;\n        }\n        if (actionNeeded) {\n            e.action = actionName;\n        }\n    };\n    MenuBase.prototype.upDownKeyHandler = function (e) {\n        var wrapper = this.getWrapper();\n        var cul = wrapper.children[this.navIdx.length];\n        var defaultIdx = (e.action === DOWNARROW || e.action === HOME) ? 0 : cul.childElementCount - 1;\n        var fliIdx = defaultIdx;\n        var fli = this.getLIByClass(cul, FOCUSED);\n        if (fli) {\n            if (e.action !== END && e.action !== HOME) {\n                fliIdx = this.getIdx(cul, fli);\n            }\n            fli.classList.remove(FOCUSED);\n            if (e.action !== END && e.action !== HOME) {\n                e.action === DOWNARROW ? fliIdx++ : fliIdx--;\n                if (fliIdx === (e.action === DOWNARROW ? cul.childElementCount : -1)) {\n                    fliIdx = defaultIdx;\n                }\n            }\n        }\n        var cli = cul.children[fliIdx];\n        fliIdx = this.isValidLI(cli, fliIdx, e.action);\n        cul.children[fliIdx].classList.add(FOCUSED);\n        cul.children[fliIdx].focus();\n    };\n    MenuBase.prototype.isValidLI = function (cli, index, action) {\n        var wrapper = this.getWrapper();\n        var cul = wrapper.children[this.navIdx.length];\n        if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {\n            ((action === DOWNARROW) || (action === RIGHTARROW)) ? index++ : index--;\n        }\n        cli = cul.children[index];\n        if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {\n            index = this.isValidLI(cli, index, action);\n        }\n        return index;\n    };\n    MenuBase.prototype.rightEnterKeyHandler = function (e) {\n        var eventArgs;\n        var wrapper = this.getWrapper();\n        var cul = wrapper.children[this.navIdx.length];\n        var fli = this.getLIByClass(cul, FOCUSED);\n        if (fli) {\n            var fliIdx = this.getIdx(cul, fli);\n            var navIdx = this.navIdx.concat(fliIdx);\n            var index = void 0;\n            var item = this.getItem(navIdx);\n            if (item.items.length) {\n                this.navIdx.push(fliIdx);\n                this.openMenu(fli, item, null, null, e);\n                fli.classList.remove(FOCUSED);\n                fli.classList.add(SELECTED);\n                if (e.action === ENTER) {\n                    eventArgs = { element: fli, item: item };\n                    this.trigger('select', eventArgs);\n                }\n                fli.focus();\n                cul = wrapper.children[this.navIdx.length];\n                index = this.isValidLI(cul.children[0], 0, e.action);\n                cul.children[index].classList.add(FOCUSED);\n                cul.children[index].focus();\n            }\n            else {\n                if (e.action === ENTER) {\n                    fli.classList.remove(FOCUSED);\n                    fli.classList.add(SELECTED);\n                    eventArgs = { element: fli, item: item };\n                    this.trigger('select', eventArgs);\n                    this.closeMenu(null, e);\n                }\n            }\n        }\n    };\n    MenuBase.prototype.leftEscKeyHandler = function (e) {\n        if (this.navIdx.length) {\n            var wrapper = this.getWrapper();\n            this.closeMenu(this.navIdx.length, e);\n            var cul = wrapper.children[this.navIdx.length];\n            var sli = this.getLIByClass(cul, SELECTED);\n            if (sli) {\n                sli.setAttribute('aria-expanded', 'false');\n                sli.classList.remove(SELECTED);\n                sli.classList.add(FOCUSED);\n                sli.focus();\n            }\n        }\n        else {\n            if (e.action === ESCAPE) {\n                this.closeMenu(null, e);\n            }\n        }\n    };\n    MenuBase.prototype.scrollHandler = function (e) {\n        this.closeMenu(null, e);\n    };\n    MenuBase.prototype.touchHandler = function (e) {\n        this.isTapHold = true;\n        this.cmenuHandler(e.originalEvent);\n    };\n    MenuBase.prototype.cmenuHandler = function (e) {\n        e.preventDefault();\n        this.closeMenu(null, e);\n        if (this.canOpen(e.target)) {\n            if (e.changedTouches) {\n                this.openMenu(null, null, e.changedTouches[0].pageY + 1, e.changedTouches[0].pageX + 1, e);\n            }\n            else {\n                this.openMenu(null, null, e.pageY + 1, e.pageX + 1, e);\n            }\n        }\n    };\n    MenuBase.prototype.closeMenu = function (ulIndex, e) {\n        if (ulIndex === void 0) { ulIndex = 0; }\n        if (e === void 0) { e = null; }\n        if (this.isMenuVisible()) {\n            var ul = void 0;\n            var sli = void 0;\n            var item = void 0;\n            var items = void 0;\n            var closeArgs = void 0;\n            var beforeCloseArgs = void 0;\n            var wrapper = this.getWrapper();\n            for (var cnt = wrapper.childElementCount; cnt > ulIndex; cnt--) {\n                ul = wrapper.children[cnt - 1];\n                if (this.isMenu && ul.classList.contains('e-menu')) {\n                    sli = this.getLIByClass(ul, SELECTED);\n                    if (sli) {\n                        sli.classList.remove(SELECTED);\n                    }\n                    break;\n                }\n                item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n                items = item ? item.items : this.items;\n                beforeCloseArgs = { element: ul, parentItem: item, items: items, event: e, cancel: false };\n                this.trigger('beforeClose', beforeCloseArgs);\n                if (!beforeCloseArgs.cancel) {\n                    this.toggleAnimation(ul, false);\n                    this.navIdx.length = ulIndex ? ulIndex - 1 : ulIndex;\n                    closeArgs = { element: ul, parentItem: item, items: items };\n                    this.trigger('onClose', closeArgs);\n                }\n            }\n        }\n    };\n    MenuBase.prototype.isMenuVisible = function () {\n        return (this.navIdx.length > 0 || (this.element.classList.contains('e-contextmenu') && isVisible(this.element).valueOf()));\n    };\n    MenuBase.prototype.canOpen = function (target) {\n        var canOpen = true;\n        if (this.filter) {\n            canOpen = false;\n            var filter = this.filter.split(' ');\n            for (var i = 0, len = target.classList.length; i < len; i++) {\n                if (filter.indexOf(target.classList[i]) > -1) {\n                    canOpen = true;\n                    break;\n                }\n            }\n        }\n        return canOpen;\n    };\n    MenuBase.prototype.openMenu = function (li, item, top, left, e, target) {\n        if (top === void 0) { top = 0; }\n        if (left === void 0) { left = 0; }\n        if (e === void 0) { e = null; }\n        if (target === void 0) { target = this.targetElement; }\n        var ul;\n        var navIdx;\n        var wrapper = this.getWrapper();\n        if (li) {\n            ul = this.createItems(item[this.getField('children', this.navIdx.length - 1)]);\n            if (!this.isMenu && Browser.isDevice) {\n                wrapper.lastChild.style.display = 'none';\n                var data = {\n                    text: item[this.getField('text')].toString(), iconCss: ICONS + ' e-previous'\n                };\n                var hdata = new MenuItem(this.items[0], null, data, true);\n                var hli = this.createItems([hdata]).children[0];\n                hli.classList.add(HEADER);\n                ul.insertBefore(hli, ul.children[0]);\n            }\n            ul.style.zIndex = this.element.style.zIndex;\n            wrapper.appendChild(ul);\n        }\n        else {\n            ul = this.element;\n            ul.style.zIndex = getZindexPartial(target ? target : this.element).toString();\n        }\n        navIdx = this.getIndex(li ? li.id : null, true);\n        var items = li ? item[this.getField('children', this.navIdx.length - 1)] : this.items;\n        var eventArgs = {\n            element: ul, items: items, parentItem: item, event: e, cancel: false, top: top, left: left\n        };\n        this.trigger('beforeOpen', eventArgs);\n        top = eventArgs.top;\n        left = eventArgs.left;\n        if (eventArgs.cancel) {\n            this.navIdx.pop();\n        }\n        else {\n            this.setPosition(li, ul, top, left);\n            this.toggleAnimation(ul);\n        }\n    };\n    MenuBase.prototype.setPosition = function (li, ul, top, left) {\n        var px = 'px';\n        this.toggleVisiblity(ul);\n        if (ul === this.element || (!isNullOrUndefined(left) && !isNullOrUndefined(top))) {\n            var collide = isCollide(ul, null, left, top);\n            if (collide.indexOf('right') > -1) {\n                left = left - ul.offsetWidth;\n            }\n            if (collide.indexOf('bottom') > -1) {\n                var offset = fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n                top = offset.top - 20;\n            }\n            collide = isCollide(ul, null, left, top);\n            if (collide.indexOf('left') > -1) {\n                var offset = fit(ul, null, { X: true, Y: false }, { top: top, left: left });\n                left = offset.left;\n            }\n        }\n        else {\n            var offset = void 0;\n            var isRelative = this.isMenu && this.element.offsetParent.tagName !== 'BODY';\n            if (!this.isMenu && Browser.isDevice) {\n                top = Number(this.element.style.top.replace(px, ''));\n                left = Number(this.element.style.left.replace(px, ''));\n            }\n            else {\n                var x = 'right';\n                var y = 'top';\n                if (this.isMenu && !this.element.classList.contains('e-vertical') && this.navIdx.length < 2) {\n                    x = this.enableRtl ? 'right' : 'left';\n                    y = 'bottom';\n                }\n                else {\n                    x = this.enableRtl ? 'left' : 'right';\n                }\n                offset = calculatePosition(li, x, y);\n                top = offset.top;\n                left = offset.left;\n            }\n            var collide = isCollide(ul, null, this.enableRtl ? left - ul.offsetWidth : left, top);\n            var xCollision = collide.indexOf('left') > -1 || collide.indexOf('right') > -1;\n            var yCollision = collide.indexOf('bottom') > -1;\n            if (xCollision) {\n                offset = calculatePosition(li, this.enableRtl ? 'right' : 'left', 'top');\n                left = offset.left;\n            }\n            if (this.enableRtl || xCollision) {\n                left = (this.enableRtl && xCollision) ? left : left - ul.offsetWidth;\n                if (this.isMenu && xCollision && !this.element.classList.contains('e-vertical') && this.navIdx && this.navIdx.length < 2) {\n                    left = this.enableRtl ? left - li.getBoundingClientRect().width : left + li.getBoundingClientRect().width;\n                }\n            }\n            if (yCollision) {\n                offset = fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n                top = offset.top;\n            }\n            collide = isCollide(ul, null, left, top);\n            xCollision = collide.indexOf('left') > -1 || collide.indexOf('right') > -1;\n            if (xCollision) {\n                offset = fit(ul, null, { X: true, Y: false }, { top: top, left: left });\n                top = offset.top;\n                left = offset.left;\n            }\n            if (isRelative) {\n                var boundRect = ul.offsetParent.getBoundingClientRect();\n                top -= boundRect.top + pageYOffset;\n                left -= boundRect.left + pageXOffset;\n            }\n        }\n        this.toggleVisiblity(ul, false);\n        if (this.isMenu) {\n            if (this.element.classList.contains('e-vertical') && this.navIdx && this.navIdx[this.navIdx.length - 1] === 0) {\n                top = top - 1;\n            }\n            else {\n                if (this.navIdx && this.navIdx[this.navIdx.length - 1] === 0) {\n                    if (this.navIdx.length === 1) {\n                        left = left - 1;\n                    }\n                    else {\n                        top = top - 1;\n                    }\n                }\n            }\n        }\n        ul.style.top = top + px;\n        ul.style.left = left + px;\n    };\n    MenuBase.prototype.toggleVisiblity = function (ul, isVisible) {\n        if (isVisible === void 0) { isVisible = true; }\n        ul.style.visibility = isVisible ? 'hidden' : '';\n        ul.style.display = isVisible ? 'block' : 'none';\n    };\n    MenuBase.prototype.createItems = function (items) {\n        var _this = this;\n        var level = this.navIdx ? this.navIdx.length : 0;\n        var showIcon = this.hasField(items, this.getField('iconCss', level));\n        var id = 'id';\n        var listBaseOptions = {\n            showIcon: showIcon,\n            moduleName: 'menu',\n            fields: this.getFields(level),\n            template: this.template,\n            itemCreating: function (args) {\n                if (!args.curData[args.fields[id]]) {\n                    args.curData[args.fields[id]] = getUniqueID('menuitem');\n                    _this.clearChanges();\n                }\n                args.curData.htmlAttributes = {\n                    role: 'menuitem',\n                    tabindex: '-1'\n                };\n                if (_this.isMenu && !args.curData[_this.getField('separator', level)]) {\n                    args.curData.htmlAttributes['aria-label'] = args.curData[args.fields.text];\n                }\n            },\n            itemCreated: function (args) {\n                if (args.curData[_this.getField('separator', level)]) {\n                    args.item.classList.add(SEPARATOR);\n                    args.item.removeAttribute('role');\n                }\n                if (showIcon && !args.curData[args.fields.iconCss]\n                    && !args.curData[_this.getField('separator', level)]) {\n                    args.item.classList.add('e-blankicon');\n                }\n                if (args.curData[args.fields.child]\n                    && args.curData[args.fields.child].length) {\n                    var span = _this.createElement('span', { className: ICONS + ' ' + CARET });\n                    args.item.appendChild(span);\n                    args.item.setAttribute('aria-haspopup', 'true');\n                    args.item.setAttribute('aria-expanded', 'false');\n                    if (!_this.isMenu) {\n                        args.item.removeAttribute('role');\n                    }\n                    args.item.classList.add('e-menu-caret-icon');\n                }\n                if (_this.isMenu && _this.template) {\n                    args.item.setAttribute('id', args.curData[args.fields.id].toString());\n                    args.item.removeAttribute('data-uid');\n                }\n                var eventArgs = { item: args.curData, element: args.item };\n                _this.trigger('beforeItemRender', eventArgs);\n            }\n        };\n        var ul = ListBase.createList(this.createElement, items, listBaseOptions, !this.template);\n        ul.setAttribute('tabindex', '0');\n        if (this.isMenu) {\n            ul.setAttribute('role', 'menu');\n        }\n        return ul;\n    };\n    MenuBase.prototype.moverHandler = function (e) {\n        var wrapper = this.getWrapper();\n        var trgt = e.target;\n        var cli = this.getLI(trgt);\n        if (cli && closest(cli, '.e-' + this.getModuleName() + '-wrapper')) {\n            var fli = select('.' + FOCUSED, wrapper);\n            if (fli) {\n                fli.classList.remove(FOCUSED);\n            }\n            cli.classList.add(FOCUSED);\n            if (!this.showItemOnClick) {\n                this.clickHandler(e);\n            }\n        }\n        if (this.isMenu && trgt.parentElement !== wrapper && !cli && this.navIdx.length) {\n            this.closeMenu(null, e);\n        }\n    };\n    MenuBase.prototype.getField = function (propName, level) {\n        if (level === void 0) { level = 0; }\n        var fieldName = this.fields[propName];\n        return typeof fieldName === 'string' ? fieldName :\n            (!fieldName[level] ? fieldName[fieldName.length - 1].toString() : fieldName[level].toString());\n    };\n    MenuBase.prototype.getFields = function (level) {\n        if (level === void 0) { level = 0; }\n        return {\n            id: this.getField('itemId', level),\n            iconCss: this.getField('iconCss', level),\n            text: this.getField('text', level),\n            url: this.getField('url', level),\n            child: this.getField('children', level),\n            separator: this.getField('separator', level)\n        };\n    };\n    MenuBase.prototype.hasField = function (items, field) {\n        for (var i = 0, len = items.length; i < len; i++) {\n            if (items[i][field]) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MenuBase.prototype.clickHandler = function (e) {\n        if (this.isTapHold) {\n            this.isTapHold = false;\n        }\n        else {\n            var wrapper = this.getWrapper();\n            var trgt = e.target;\n            var cli = this.getLI(trgt);\n            var cliWrapper = cli ? closest(cli, '.e-' + this.getModuleName() + '-wrapper') : null;\n            var isInstLI = cli && cliWrapper && wrapper.firstElementChild.id === cliWrapper.firstElementChild.id;\n            if (isInstLI && e.type === 'click' && !cli.classList.contains(HEADER)) {\n                this.setLISelected(cli);\n                var navIdx = this.getIndex(cli.id, true);\n                var item = this.getItem(navIdx);\n                var eventArgs = { element: cli, item: item };\n                this.trigger('select', eventArgs);\n            }\n            if (isInstLI && (e.type === 'mouseover' || Browser.isDevice || this.showItemOnClick)) {\n                var ul = void 0;\n                if (cli.classList.contains(HEADER)) {\n                    ul = wrapper.children[this.navIdx.length - 1];\n                    this.toggleAnimation(ul);\n                    var sli = this.getLIByClass(ul, SELECTED);\n                    if (sli) {\n                        sli.classList.remove(SELECTED);\n                    }\n                    detach(cli.parentNode);\n                    this.navIdx.pop();\n                }\n                else {\n                    if (!cli.classList.contains(SEPARATOR)) {\n                        var showSubMenu = true;\n                        var cul = cli.parentNode;\n                        var cliIdx = this.getIdx(cul, cli);\n                        if (this.isMenu || !Browser.isDevice) {\n                            var culIdx = this.getIdx(wrapper, cul);\n                            if (this.navIdx[culIdx] === cliIdx) {\n                                showSubMenu = false;\n                            }\n                            if (culIdx !== this.navIdx.length && (e.type !== 'mouseover' || showSubMenu)) {\n                                var sli = this.getLIByClass(cul, SELECTED);\n                                if (sli) {\n                                    sli.classList.remove(SELECTED);\n                                }\n                                this.closeMenu(culIdx + 1, e);\n                            }\n                        }\n                        if (showSubMenu) {\n                            var idx = this.navIdx.concat(cliIdx);\n                            var item = this.getItem(idx);\n                            if (item[this.getField('children', idx.length - 1)] &&\n                                item[this.getField('children', idx.length - 1)].length) {\n                                if (e.type === 'mouseover' || (Browser.isDevice && this.isMenu)) {\n                                    this.setLISelected(cli);\n                                }\n                                cli.setAttribute('aria-expanded', 'true');\n                                this.navIdx.push(cliIdx);\n                                if (this.isMenu && !this.element.classList.contains('e-vertical') && this.navIdx.length < 2) {\n                                    var collision = isCollide(cli, this.element);\n                                    if (collision.length) {\n                                        var boundRect = cli.getBoundingClientRect();\n                                        this.element.scroll((collision.indexOf('right') > -1 ? boundRect.right : boundRect.left), 0);\n                                    }\n                                }\n                                this.openMenu(cli, item, null, null, e);\n                            }\n                            else {\n                                if (e.type !== 'mouseover') {\n                                    this.closeMenu(null, e);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                if (trgt.tagName !== 'UL' || trgt.parentElement !== wrapper) {\n                    if (!cli || !cli.querySelector('.' + CARET)) {\n                        this.closeMenu(null, e);\n                    }\n                }\n            }\n        }\n    };\n    MenuBase.prototype.setLISelected = function (li) {\n        var sli = this.getLIByClass(li.parentElement, SELECTED);\n        if (sli) {\n            sli.classList.remove(SELECTED);\n        }\n        li.classList.remove(FOCUSED);\n        li.classList.add(SELECTED);\n    };\n    MenuBase.prototype.getLIByClass = function (ul, classname) {\n        for (var i = 0, len = ul.children.length; i < len; i++) {\n            if (ul.children[i].classList.contains(classname)) {\n                return ul.children[i];\n            }\n        }\n        return null;\n    };\n    MenuBase.prototype.getItem = function (navIdx) {\n        navIdx = navIdx.slice();\n        var idx = navIdx.pop();\n        var items = this.getItems(navIdx);\n        return items[idx];\n    };\n    MenuBase.prototype.getItems = function (navIdx) {\n        var items = this.items;\n        for (var i = 0; i < navIdx.length; i++) {\n            items = items[navIdx[i]][this.getField('children', i)];\n        }\n        return items;\n    };\n    MenuBase.prototype.getIdx = function (ul, li, skipHdr) {\n        if (skipHdr === void 0) { skipHdr = true; }\n        var idx = Array.prototype.indexOf.call(ul.children, li);\n        if (skipHdr && ul.children[0].classList.contains(HEADER)) {\n            idx--;\n        }\n        return idx;\n    };\n    MenuBase.prototype.getLI = function (elem) {\n        if (elem.tagName === 'LI' && elem.classList.contains('e-menu-item')) {\n            return elem;\n        }\n        return closest(elem, 'li.e-menu-item');\n    };\n    /**\n     * Called internally if any of the property value changed\n     * @private\n     * @param {MenuBaseModel} newProp\n     * @param {MenuBaseModel} oldProp\n     * @returns void\n     */\n    MenuBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var wrapper = this.getWrapper();\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        wrapper.classList.remove(oldProp.cssClass);\n                    }\n                    if (newProp.cssClass) {\n                        wrapper.classList.add(newProp.cssClass);\n                    }\n                    break;\n                case 'enableRtl':\n                    wrapper.classList.toggle(RTL);\n                    break;\n                case 'showItemOnClick':\n                    this.unWireEvents();\n                    this.showItemOnClick = newProp.showItemOnClick;\n                    this.wireEvents();\n                    break;\n                case 'items':\n                    var idx = void 0;\n                    var navIdx = void 0;\n                    var item = void 0;\n                    var keys = Object.keys(newProp.items);\n                    for (var i = 0; i < keys.length; i++) {\n                        navIdx = this.getChangedItemIndex(newProp, [], Number(keys[i]));\n                        if (navIdx.length <= this.getWrapper().children.length) {\n                            idx = navIdx.pop();\n                            item = this.getItems(navIdx);\n                            this.insertAfter([item[idx]], item[idx].text);\n                            this.removeItem(item, navIdx, idx);\n                        }\n                        navIdx.length = 0;\n                    }\n                    break;\n            }\n        }\n    };\n    MenuBase.prototype.getChangedItemIndex = function (newProp, index, idx) {\n        index.push(idx);\n        var key = Object.keys(newProp.items[idx]).pop();\n        if (key === 'items') {\n            var item = newProp.items[idx];\n            this.getChangedItemIndex(item, index, Number(Object.keys(item.items).pop()));\n        }\n        else {\n            if (key === 'isParentArray' && index.length > 1) {\n                index.pop();\n            }\n        }\n        return index;\n    };\n    MenuBase.prototype.removeItem = function (item, navIdx, idx) {\n        item.splice(idx, 1);\n        var uls = this.getWrapper().children;\n        if (navIdx.length < uls.length) {\n            detach(uls[navIdx.length].children[idx]);\n        }\n    };\n    /**\n     * Used to unwire the bind events.\n     * @private\n     */\n    MenuBase.prototype.unWireEvents = function () {\n        var wrapper = this.getWrapper();\n        if (this.target) {\n            var target = void 0;\n            var touchModule = void 0;\n            var targetElems = selectAll(this.target);\n            for (var i = 0, len = targetElems.length; i < len; i++) {\n                target = targetElems[i];\n                if (Browser.isIos) {\n                    touchModule = getInstance(target, Touch);\n                    if (touchModule) {\n                        touchModule.destroy();\n                    }\n                }\n                else {\n                    EventHandler.remove(target, 'contextmenu', this.cmenuHandler);\n                }\n            }\n            for (var _i = 0, _a = getScrollableParent(this.targetElement); _i < _a.length; _i++) {\n                var parent_2 = _a[_i];\n                EventHandler.remove(parent_2, 'scroll', this.scrollHandler);\n            }\n        }\n        if (!Browser.isDevice) {\n            EventHandler.remove(this.isMenu ? document : wrapper, 'mouseover', this.moverHandler);\n            EventHandler.remove(document, 'mousedown', this.mouseDownHandler);\n        }\n        EventHandler.remove(document, 'click', this.delegateClickHandler);\n        var keyboardModule = getInstance(wrapper, KeyboardEvents);\n        if (keyboardModule) {\n            keyboardModule.destroy();\n        }\n        this.rippleFn();\n    };\n    MenuBase.prototype.toggleAnimation = function (ul, isMenuOpen) {\n        var _this = this;\n        if (isMenuOpen === void 0) { isMenuOpen = true; }\n        if (this.animationSettings.effect === 'None' || !isMenuOpen) {\n            this.end(ul, isMenuOpen);\n        }\n        else {\n            this.animation.animate(ul, {\n                name: this.animationSettings.effect,\n                duration: this.animationSettings.duration,\n                timingFunction: this.animationSettings.easing,\n                begin: function (options) {\n                    options.element.style.display = 'block';\n                    options.element.style.maxHeight = options.element.getBoundingClientRect().height + 'px';\n                },\n                end: function (options) {\n                    _this.end(options.element, isMenuOpen);\n                }\n            });\n        }\n    };\n    MenuBase.prototype.end = function (ul, isMenuOpen) {\n        if (isMenuOpen) {\n            ul.style.display = 'block';\n            ul.style.maxHeight = '';\n            var item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n            var eventArgs = {\n                element: ul, parentItem: item, items: item ? item.items : this.items\n            };\n            this.trigger('onOpen', eventArgs);\n            if (ul.querySelector('.' + FOCUSED)) {\n                ul.querySelector('.' + FOCUSED).focus();\n            }\n            else {\n                var ele = void 0;\n                ele = this.getWrapper().children[this.getIdx(this.getWrapper(), ul) - 1];\n                if (ele) {\n                    ele.querySelector('.' + SELECTED).focus();\n                }\n                else {\n                    this.element.focus();\n                }\n            }\n        }\n        else {\n            if (ul === this.element) {\n                var fli = this.getLIByClass(this.element, FOCUSED);\n                if (fli) {\n                    fli.classList.remove(FOCUSED);\n                }\n                var sli = this.getLIByClass(this.element, SELECTED);\n                if (sli) {\n                    sli.classList.remove(SELECTED);\n                }\n                ul.style.display = 'none';\n            }\n            else {\n                detach(ul);\n            }\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @returns string\n     */\n    MenuBase.prototype.getPersistData = function () {\n        return '';\n    };\n    /**\n     * Get wrapper element.\n     * @returns Element\n     * @private\n     */\n    MenuBase.prototype.getWrapper = function () {\n        return closest(this.element, '.e-' + this.getModuleName() + '-wrapper');\n    };\n    MenuBase.prototype.getIndex = function (data, isUniqueId, items, nIndex, isCallBack, level) {\n        if (items === void 0) { items = this.items; }\n        if (nIndex === void 0) { nIndex = []; }\n        if (isCallBack === void 0) { isCallBack = false; }\n        if (level === void 0) { level = 0; }\n        var item;\n        level = isCallBack ? level + 1 : 0;\n        for (var i = 0, len = items.length; i < len; i++) {\n            item = items[i];\n            if ((isUniqueId ? item[this.getField('itemId', level)] : item[this.getField('text', level)]) === data) {\n                nIndex.push(i);\n                break;\n            }\n            else if (item[this.getField('children', level)]\n                && item[this.getField('children', level)].length) {\n                nIndex = this.getIndex(data, isUniqueId, item[this.getField('children', level)], nIndex, true, level);\n                if (nIndex[nIndex.length - 1] === -1) {\n                    if (i !== len - 1) {\n                        nIndex.pop();\n                    }\n                }\n                else {\n                    nIndex.unshift(i);\n                    break;\n                }\n            }\n            else {\n                if (i === len - 1) {\n                    nIndex.push(-1);\n                }\n            }\n        }\n        return (!isCallBack && nIndex[0] === -1) ? [] : nIndex;\n    };\n    /**\n     * This method is used to enable or disable the menu items in the Menu based on the items and enable argument.\n     * @param items Text items that needs to be enabled/disabled.\n     * @param enable Set `true`/`false` to enable/disable the list items.\n     * @param isUniqueId - Set `true` if it is a unique id.\n     * @returns void\n     */\n    MenuBase.prototype.enableItems = function (items, enable, isUniqueId) {\n        if (enable === void 0) { enable = true; }\n        var ul;\n        var idx;\n        var navIdx;\n        var disabled = DISABLED;\n        var wrapper = this.getWrapper();\n        for (var i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(items[i], isUniqueId);\n            idx = navIdx.pop();\n            ul = wrapper.children[navIdx.length];\n            if (ul) {\n                if (enable) {\n                    if (this.isMenu) {\n                        ul.children[idx].classList.remove(disabled);\n                        ul.children[idx].removeAttribute('aria-disabled');\n                    }\n                    else {\n                        if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                            ul.children[idx + 1].classList.remove(disabled);\n                        }\n                        else {\n                            ul.children[idx].classList.remove(disabled);\n                        }\n                    }\n                }\n                else {\n                    if (this.isMenu) {\n                        ul.children[idx].classList.add(disabled);\n                        ul.children[idx].setAttribute('aria-disabled', 'true');\n                    }\n                    else {\n                        if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                            ul.children[idx + 1].classList.add(disabled);\n                        }\n                        else {\n                            ul.children[idx].classList.add(disabled);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * This method is used to show the menu items in the Menu based on the items text.\n     * @param items Text items that needs to be shown.\n     * @param isUniqueId - Set `true` if it is a unique id.\n     * @returns void\n     */\n    MenuBase.prototype.showItems = function (items, isUniqueId) {\n        this.showHideItems(items, false, isUniqueId);\n    };\n    /**\n     * This method is used to hide the menu items in the Menu based on the items text.\n     * @param items Text items that needs to be hidden.\n     * @returns void\n     */\n    MenuBase.prototype.hideItems = function (items, isUniqueId) {\n        this.showHideItems(items, true, isUniqueId);\n    };\n    MenuBase.prototype.showHideItems = function (items, ishide, isUniqueId) {\n        var ul;\n        var index;\n        var navIdx;\n        var wrapper = this.getWrapper();\n        for (var i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(items[i], isUniqueId);\n            index = navIdx.pop();\n            ul = wrapper.children[navIdx.length];\n            if (ul) {\n                if (ishide) {\n                    if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                        ul.children[index + 1].classList.add(HIDE);\n                    }\n                    else {\n                        ul.children[index].classList.add(HIDE);\n                    }\n                }\n                else {\n                    if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                        ul.children[index + 1].classList.remove(HIDE);\n                    }\n                    else {\n                        ul.children[index].classList.remove(HIDE);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * It is used to remove the menu items from the Menu based on the items text.\n     * @param items Text items that needs to be removed.\n     * @returns void\n     */\n    MenuBase.prototype.removeItems = function (items, isUniqueId) {\n        var idx;\n        var navIdx;\n        var iitems;\n        for (var i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(items[i], isUniqueId);\n            idx = navIdx.pop();\n            iitems = this.getItems(navIdx);\n            this.removeItem(iitems, navIdx, idx);\n        }\n    };\n    /**\n     * It is used to insert the menu items after the specified menu item text.\n     * @param items Items that needs to be inserted.\n     * @param text Text item after that the element to be inserted.\n     * @returns void\n     */\n    MenuBase.prototype.insertAfter = function (items, text, isUniqueId) {\n        this.insertItems(items, text, isUniqueId);\n    };\n    /**\n     * It is used to insert the menu items before the specified menu item text.\n     * @param items Items that needs to be inserted.\n     * @param text Text item before that the element to be inserted.\n     * @param isUniqueId - Set `true` if it is a unique id.\n     * @returns void\n     */\n    MenuBase.prototype.insertBefore = function (items, text, isUniqueId) {\n        this.insertItems(items, text, isUniqueId, false);\n    };\n    MenuBase.prototype.insertItems = function (items, text, isUniqueId, isAfter) {\n        if (isAfter === void 0) { isAfter = true; }\n        var li;\n        var idx;\n        var navIdx;\n        var iitems;\n        var menuitem;\n        var showIcon;\n        for (var i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(text, isUniqueId);\n            idx = navIdx.pop();\n            iitems = this.getItems(navIdx);\n            menuitem = new MenuItem(iitems[0], 'items', items[i], true);\n            iitems.splice(isAfter ? idx + 1 : idx, 0, menuitem);\n            var uls = this.getWrapper().children;\n            if (navIdx.length < uls.length) {\n                idx = isAfter ? idx + 1 : idx;\n                showIcon = this.hasField(iitems, this.getField('iconCss', navIdx.length - 1));\n                li = this.createItems(iitems).children[idx];\n                uls[navIdx.length].insertBefore(li, uls[navIdx.length].children[idx]);\n            }\n        }\n    };\n    /**\n     * Destroys the widget.\n     * @returns void\n     */\n    MenuBase.prototype.destroy = function () {\n        var _this = this;\n        var wrapper = this.getWrapper();\n        if (wrapper) {\n            _super.prototype.destroy.call(this);\n            this.unWireEvents();\n            if (this.ngElement && !this.isMenu) {\n                this.ngElement.style.display = 'block';\n            }\n            else {\n                this.closeMenu();\n                this.element.innerHTML = '';\n                ['top', 'left', 'display', 'z-index'].forEach(function (key) {\n                    _this.element.style.removeProperty(key);\n                });\n                ['role', 'tabindex', 'class', 'style'].forEach(function (key) {\n                    if (['class', 'style'].indexOf(key) === -1 || !_this.element.getAttribute(key)) {\n                        _this.element.removeAttribute(key);\n                    }\n                    if (_this.isMenu && key === 'class' && _this.element.classList.contains('e-vertical')) {\n                        _this.element.classList.remove('e-vertical');\n                    }\n                });\n                wrapper.parentNode.insertBefore(this.element, wrapper);\n            }\n            if (this.isMenu && this.ngElement) {\n                detach(this.element);\n                wrapper.style.display = '';\n                wrapper.classList.remove('e-' + this.getModuleName() + '-wrapper');\n                wrapper.removeAttribute('data-ripple');\n            }\n            else {\n                detach(wrapper);\n            }\n        }\n    };\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"beforeItemRender\", void 0);\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"onOpen\", void 0);\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"beforeClose\", void 0);\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"onClose\", void 0);\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], MenuBase.prototype, \"created\", void 0);\n    __decorate([\n        Property('')\n    ], MenuBase.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], MenuBase.prototype, \"showItemOnClick\", void 0);\n    __decorate([\n        Property('')\n    ], MenuBase.prototype, \"target\", void 0);\n    __decorate([\n        Property('')\n    ], MenuBase.prototype, \"filter\", void 0);\n    __decorate([\n        Property(null)\n    ], MenuBase.prototype, \"template\", void 0);\n    __decorate([\n        Complex({}, FieldSettings)\n    ], MenuBase.prototype, \"fields\", void 0);\n    __decorate([\n        Collection([], MenuItem)\n    ], MenuBase.prototype, \"items\", void 0);\n    __decorate([\n        Property({ duration: 400, easing: 'ease', effect: 'SlideDown' })\n    ], MenuBase.prototype, \"animationSettings\", void 0);\n    MenuBase = __decorate([\n        NotifyPropertyChanges\n    ], MenuBase);\n    return MenuBase;\n}(Component));\nexport { MenuBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/// <reference path='../common/menu-base-model.d.ts'/>\nimport { Collection, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { MenuBase, MenuItem } from '../common/menu-base';\n/**\n * The ContextMenu is a graphical user interface that appears on the user right click/touch hold operation.\n * ```html\n * <div id = 'target'></div>\n * <ul id = 'contextmenu'></ul>\n * ```\n * ```typescript\n * <script>\n * var contextMenuObj = new ContextMenu({items: [{ text: 'Cut' }, { text: 'Copy' },{ text: 'Paste' }], target: '#target'});\n * </script>\n * ```\n */\nvar ContextMenu = /** @class */ (function (_super) {\n    __extends(ContextMenu, _super);\n    /**\n     * Constructor for creating the widget.\n     * @private\n     */\n    function ContextMenu(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * For internal use only - prerender processing.\n     * @private\n     */\n    ContextMenu.prototype.preRender = function () {\n        this.isMenu = false;\n        _super.prototype.preRender.call(this);\n    };\n    /**\n     * This method is used to open the ContextMenu in specified position.\n     * @param top - To specify ContextMenu vertical positioning.\n     * @param left - To specify ContextMenu horizontal positioning.\n     * @param target - To calculate z-index for ContextMenu based upon the specified target.\n     * @method open\n     * @returns void\n     */\n    ContextMenu.prototype.open = function (top, left, target) {\n        _super.prototype.openMenu.call(this, null, null, top, left, null, target);\n    };\n    /**\n     * Closes the ContextMenu if it is opened.\n     */\n    ContextMenu.prototype.close = function () {\n        _super.prototype.closeMenu.call(this);\n    };\n    /**\n     * Called internally if any of the property value changed\n     * @private\n     * @param {ContextMenuModel} newProp\n     * @param {ContextMenuModel} oldProp\n     * @returns void\n     */\n    ContextMenu.prototype.onPropertyChanged = function (newProp, oldProp) {\n        _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'filter':\n                    this.close();\n                    this.filter = newProp.filter;\n                    break;\n                case 'target':\n                    this.unWireEvents();\n                    this.target = newProp.target;\n                    this.wireEvents();\n                    break;\n            }\n        }\n    };\n    /**\n     * Get module name.\n     * @returns string\n     * @private\n     */\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextmenu';\n    };\n    __decorate([\n        Property('')\n    ], ContextMenu.prototype, \"target\", void 0);\n    __decorate([\n        Property('')\n    ], ContextMenu.prototype, \"filter\", void 0);\n    __decorate([\n        Collection([], MenuItem)\n    ], ContextMenu.prototype, \"items\", void 0);\n    ContextMenu = __decorate([\n        NotifyPropertyChanges\n    ], ContextMenu);\n    return ContextMenu;\n}(MenuBase));\nexport { ContextMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/// <reference path='../common/menu-base-model.d.ts'/>\nimport { NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, Complex } from '@syncfusion/ej2-base';\nimport { MenuBase, FieldSettings } from '../common/menu-base';\nvar VMENU = 'e-vertical';\nvar SCROLLABLE = 'e-scrollable';\n/**\n * The Menu is a graphical user interface that serve as navigation headers for your application or site.\n * ```html\n * <ul id = 'menu'></ul>\n * ```\n * ```typescript\n * <script>\n * var menuObj = new Menu({ items: [{ text: 'Home' }, { text: 'Contact Us' },{ text: 'Login' }]});\n * menuObj.appendTo(\"#menu\");\n * </script>\n * ```\n */\nvar Menu = /** @class */ (function (_super) {\n    __extends(Menu, _super);\n    /**\n     * Constructor for creating the component.\n     * @private\n     */\n    function Menu(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.tempItems = [];\n        return _this;\n    }\n    /**\n     * Get module name.\n     * @returns string\n     * @private\n     */\n    Menu.prototype.getModuleName = function () {\n        return 'menu';\n    };\n    /**\n     * For internal use only - prerender processing.\n     * @private\n     */\n    Menu.prototype.preRender = function () {\n        this.isMenu = true;\n        if (this.template) {\n            try {\n                if (document.querySelectorAll(this.template).length) {\n                    this.template = document.querySelector(this.template).innerHTML.trim();\n                    this.clearChanges();\n                }\n            }\n            catch (e) {\n                /* action on catch */\n            }\n        }\n        else {\n            this.tempItems = this.items;\n            this.items = [];\n            this.tempItems.map(this.createMenuItems, this);\n            this.setProperties({ items: this.items }, true);\n            this.tempItems = [];\n        }\n        _super.prototype.preRender.call(this);\n    };\n    Menu.prototype.initialize = function () {\n        _super.prototype.initialize.call(this);\n        if (this.orientation === 'Vertical') {\n            this.element.classList.add(VMENU);\n            this.element.setAttribute('aria-orientation', 'vertical');\n        }\n        else {\n            if (Browser.isDevice) {\n                this.element.classList.add(SCROLLABLE);\n            }\n        }\n    };\n    /**\n     * Called internally if any of the property value changed\n     * @private\n     * @param {MenuModel} newProp\n     * @param {MenuModel} oldProp\n     * @returns void\n     */\n    Menu.prototype.onPropertyChanged = function (newProp, oldProp) {\n        _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'orientation':\n                    if (newProp.orientation === 'Vertical') {\n                        this.element.classList.add(VMENU);\n                        this.element.setAttribute('aria-orientation', 'vertical');\n                    }\n                    else {\n                        this.element.classList.remove(VMENU);\n                        this.element.removeAttribute('aria-orientation');\n                    }\n                    break;\n            }\n        }\n    };\n    Menu.prototype.createMenuItems = function (item, index) {\n        var pIdField;\n        var record = { items: [] };\n        var idx;\n        var i;\n        var items = this.items;\n        var fields = ['itemId', 'text', 'iconCss', 'url', 'separator', 'children'];\n        pIdField = this.getField('parentId');\n        for (i = 0; i < fields.length; i++) {\n            var field = this.getField(fields[i]);\n            if (item[field]) {\n                record[field] = item[field];\n            }\n        }\n        if (item[pIdField]) {\n            idx = this.getIndex(item[pIdField].toString(), true);\n            for (i = 0; i < idx.length; i++) {\n                if (!items[idx[i]].items) {\n                    items[idx[i]].items = [];\n                }\n                items = items[idx[i]].items;\n            }\n            items.push(record);\n        }\n        else {\n            this.items.push(record);\n        }\n    };\n    __decorate([\n        Property('Horizontal')\n    ], Menu.prototype, \"orientation\", void 0);\n    __decorate([\n        Property(null)\n    ], Menu.prototype, \"template\", void 0);\n    __decorate([\n        Complex({}, FieldSettings)\n    ], Menu.prototype, \"fields\", void 0);\n    Menu = __decorate([\n        NotifyPropertyChanges\n    ], Menu);\n    return Menu;\n}(MenuBase));\nexport { Menu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, Event, closest, Collection, Complex, attributes, detach } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, select, isVisible } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, Browser, formatUnit, L10n } from '@syncfusion/ej2-base';\nimport { setStyleAttribute as setStyle, isNullOrUndefined as isNOU, selectAll } from '@syncfusion/ej2-base';\nimport { EventHandler, rippleEffect, Touch, compile, Animation } from '@syncfusion/ej2-base';\nimport { Toolbar } from '../toolbar/toolbar';\nvar CLS_TAB = 'e-tab';\nvar CLS_HEADER = 'e-tab-header';\nvar CLS_CONTENT = 'e-content';\nvar CLS_NEST = 'e-nested';\nvar CLS_ITEMS = 'e-items';\nvar CLS_ITEM = 'e-item';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_RTL = 'e-rtl';\nvar CLS_ACTIVE = 'e-active';\nvar CLS_DISABLE = 'e-disable';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_FOCUS = 'e-focused';\nvar CLS_ICONS = 'e-icons';\nvar CLS_ICON = 'e-icon';\nvar CLS_ICON_CLOSE = 'e-close-icon';\nvar CLS_CLOSE_SHOW = 'e-close-show';\nvar CLS_TEXT = 'e-tab-text';\nvar CLS_INDICATOR = 'e-indicator';\nvar CLS_WRAP = 'e-tab-wrap';\nvar CLS_TEXT_WRAP = 'e-text-wrap';\nvar CLS_TAB_ICON = 'e-tab-icon';\nvar CLS_TB_ITEMS = 'e-toolbar-items';\nvar CLS_TB_ITEM = 'e-toolbar-item';\nvar CLS_TB_POP = 'e-toolbar-pop';\nvar CLS_TB_POPUP = 'e-toolbar-popup';\nvar CLS_POPUP_OPEN = 'e-popup-open';\nvar CLS_POPUP_CLOSE = 'e-popup-close';\nvar CLS_PROGRESS = 'e-progress';\nvar CLS_IGNORE = 'e-ignore';\nvar CLS_OVERLAY = 'e-overlay';\nvar TabActionSettings = /** @class */ (function (_super) {\n    __extends(TabActionSettings, _super);\n    function TabActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('SlideLeftIn')\n    ], TabActionSettings.prototype, \"effect\", void 0);\n    __decorate([\n        Property(600)\n    ], TabActionSettings.prototype, \"duration\", void 0);\n    __decorate([\n        Property('ease')\n    ], TabActionSettings.prototype, \"easing\", void 0);\n    return TabActionSettings;\n}(ChildProperty));\nexport { TabActionSettings };\nvar TabAnimationSettings = /** @class */ (function (_super) {\n    __extends(TabAnimationSettings, _super);\n    function TabAnimationSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\n    ], TabAnimationSettings.prototype, \"previous\", void 0);\n    __decorate([\n        Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\n    ], TabAnimationSettings.prototype, \"next\", void 0);\n    return TabAnimationSettings;\n}(ChildProperty));\nexport { TabAnimationSettings };\n/**\n * Objects used for configuring the Tab item header properties.\n */\nvar Header = /** @class */ (function (_super) {\n    __extends(Header, _super);\n    function Header() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Header.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], Header.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('left')\n    ], Header.prototype, \"iconPosition\", void 0);\n    return Header;\n}(ChildProperty));\nexport { Header };\n/**\n * An array of object that is used to configure the Tab.\n */\nvar TabItem = /** @class */ (function (_super) {\n    __extends(TabItem, _super);\n    function TabItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({}, Header)\n    ], TabItem.prototype, \"header\", void 0);\n    __decorate([\n        Property('')\n    ], TabItem.prototype, \"content\", void 0);\n    __decorate([\n        Property('')\n    ], TabItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], TabItem.prototype, \"disabled\", void 0);\n    return TabItem;\n}(ChildProperty));\nexport { TabItem };\n/**\n * Tab is a content panel to show multiple contents in a single space, one at a time.\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\n * ```html\n * <div id=\"tab\"></div>\n * <script>\n *   var tabObj = new Tab();\n *   tab.appendTo(\"#tab\");\n * </script>\n * ```\n */\nvar Tab = /** @class */ (function (_super) {\n    __extends(Tab, _super);\n    /**\n     * Initializes a new instance of the Tab class.\n     * @param options  - Specifies Tab model properties as options.\n     * @param element  - Specifies the element that is rendered as a Tab.\n     */\n    function Tab(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.show = { name: 'SlideDown', duration: 100 };\n        _this.hide = { name: 'SlideUp', duration: 100 };\n        _this.animateOptions = {};\n        _this.animObj = new Animation(_this.animateOptions);\n        _this.maxHeight = 0;\n        _this.title = 'Close';\n        _this.lastIndex = 0;\n        /**\n         * Contains the keyboard configuration of the Tab.\n         */\n        _this.keyConfigs = {\n            tab: 'tab',\n            home: 'home',\n            end: 'end',\n            enter: 'enter',\n            space: 'space',\n            delete: 'delete',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow'\n        };\n        return _this;\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\n     * @returns void\n     */\n    Tab.prototype.destroy = function () {\n        var _this = this;\n        if (!isNOU(this.tbObj)) {\n            this.tbObj.destroy();\n        }\n        this.unWireEvents();\n        ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n            _this.element.removeAttribute(val);\n        });\n        this.expTemplateContent();\n        if (!this.isTemplate) {\n            this.element.innerHTML = '';\n        }\n        else {\n            var cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n            this.element.classList.remove(CLS_TEMPLATE);\n            if (!isNOU(cntEle)) {\n                cntEle.innerHTML = this.cnt;\n            }\n        }\n        _super.prototype.destroy.call(this);\n        this.trigger('destroyed');\n    };\n    /**\n     * Initialize component\n     * @private\n     */\n    Tab.prototype.preRender = function () {\n        var nested = closest(this.element, '.' + CLS_CONTENT);\n        this.prevIndex = 0;\n        this.isNested = false;\n        this.isPopup = false;\n        this.initRender = true;\n        this.isSwipeed = false;\n        this.itemIndexArray = [];\n        this.templateEle = [];\n        if (!isNOU(nested)) {\n            nested.parentElement.classList.add(CLS_NEST);\n            this.isNested = true;\n        }\n        var name = Browser.info.name;\n        var css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\n        setStyle(this.element, { 'width': formatUnit(this.width), 'height': formatUnit(this.height) });\n        this.setCssClass(this.element, this.cssClass, true);\n        attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '' });\n        this.setCssClass(this.element, css, true);\n    };\n    /**\n     * Initialize the component rendering\n     * @private\n     */\n    Tab.prototype.render = function () {\n        this.btnCls = this.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } });\n        this.renderContainer();\n        this.wireEvents();\n        this.initRender = false;\n    };\n    Tab.prototype.renderContainer = function () {\n        var ele = this.element;\n        if (this.items.length > 0 && ele.children.length === 0) {\n            ele.appendChild(this.createElement('div', { className: CLS_CONTENT }));\n            this.setOrientation(this.headerPlacement, this.createElement('div', { className: CLS_HEADER }));\n            this.isTemplate = false;\n        }\n        else if (this.element.children.length > 0) {\n            this.isTemplate = true;\n            ele.classList.add(CLS_TEMPLATE);\n            var header = ele.querySelector('.' + CLS_HEADER);\n            if (header && this.headerPlacement === 'Bottom') {\n                this.setOrientation(this.headerPlacement, header);\n            }\n        }\n        if (!isNOU(select('.' + CLS_HEADER, this.element)) && !isNOU(select('.' + CLS_CONTENT, this.element))) {\n            this.renderHeader();\n            this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n            if (!isNOU(this.tbItems)) {\n                rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n            }\n            this.renderContent();\n            if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n                this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n                this.bdrLine = this.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE });\n                var scrCnt = select('.e-hscroll-content', this.tbItems);\n                if (!isNOU(scrCnt)) {\n                    scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n                }\n                else {\n                    this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n                }\n                this.setContentHeight(true);\n                this.select(this.selectedItem);\n            }\n            this.setRTL(this.enableRtl);\n        }\n    };\n    Tab.prototype.renderHeader = function () {\n        var _this = this;\n        var tabItems = [];\n        this.hdrEle = select('.' + CLS_HEADER, this.element);\n        if (!this.isTemplate) {\n            tabItems = this.parseObject(this.items, 0);\n        }\n        else {\n            var count = this.hdrEle.children.length;\n            var hdrItems = [];\n            for (var i = 0; i < count; i++) {\n                hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n            }\n            if (count > 0) {\n                this.hdrEle.innerHTML = '';\n                this.hdrEle.appendChild(this.createElement('div', { className: CLS_ITEMS }));\n                hdrItems.forEach(function (item, index) {\n                    _this.lastIndex = index;\n                    var attr = {\n                        className: CLS_ITEM, id: CLS_ITEM + '_' + index,\n                        attrs: { role: 'tab', 'aria-controls': CLS_CONTENT + '_' + index, 'aria-selected': 'false' }\n                    };\n                    var txt = _this.createElement('span', {\n                        className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' }\n                    }).outerHTML;\n                    var cont = _this.createElement('div', {\n                        className: CLS_TEXT_WRAP, innerHTML: txt + _this.btnCls.outerHTML\n                    }).outerHTML;\n                    var wrap = _this.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\n                    select('.' + CLS_ITEMS, _this.element).appendChild(_this.createElement('div', attr));\n                    selectAll('.' + CLS_ITEM, _this.element)[index].appendChild(wrap);\n                });\n            }\n        }\n        this.tbObj = new Toolbar({\n            width: '100%',\n            overflowMode: this.overflowMode,\n            items: (tabItems.length !== 0) ? tabItems : [],\n            clicked: this.clickHandler.bind(this)\n        });\n        this.tbObj.createElement = this.createElement;\n        this.tbObj.appendTo(this.hdrEle);\n        attributes(this.element, { 'aria-orientation': 'horizontal' });\n        this.setCloseButton(this.showCloseButton);\n        this.setProperties({ headerPlacement: (this.element.children.item(0).classList.contains(CLS_HEADER)) ? 'Top' : 'Bottom' }, true);\n    };\n    Tab.prototype.renderContent = function () {\n        this.cntEle = select('.' + CLS_CONTENT, this.element);\n        var hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\n        if (this.isTemplate) {\n            this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\n            var contents = this.cntEle.children;\n            for (var i = 0; i < hdrItem.length; i++) {\n                if (contents.length - 1 >= i) {\n                    contents.item(i).className += CLS_ITEM;\n                    attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + i });\n                    contents.item(i).id = CLS_CONTENT + '_' + i;\n                }\n            }\n        }\n    };\n    Tab.prototype.reRenderItems = function () {\n        this.renderContainer();\n        if (!isNOU(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n    };\n    Tab.prototype.parseObject = function (items, index) {\n        var _this = this;\n        var tbCount = selectAll('.' + CLS_TB_ITEM, this.element).length;\n        var tItems = [];\n        var txtWrapEle;\n        items.forEach(function (item, i) {\n            if (isNOU(item.header) || isNOU(item.header.text)) {\n                _this.items.splice(i, 0);\n                return;\n            }\n            var pos = (isNOU(item.header.iconPosition)) ? '' : item.header.iconPosition;\n            var css = (isNOU(item.header.iconCss)) ? '' : item.header.iconCss;\n            var txt = item.header.text;\n            _this.lastIndex = ((tbCount === 0) ? i : ((_this.isReplace) ? (index + i) : (_this.lastIndex + 1)));\n            var disabled = (item.disabled) ? ' ' + CLS_DISABLE + ' ' + CLS_OVERLAY : '';\n            txtWrapEle = _this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\n            var tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\n            var txtEmpty = (!isNOU(tHtml) && tHtml !== '');\n            if (!isNOU(txt.tagName)) {\n                txtWrapEle.appendChild(txt);\n            }\n            else {\n                _this.headerTextCompile(txtWrapEle, txt);\n            }\n            var tEle;\n            var icon = _this.createElement('span', {\n                className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n            });\n            var tCont = _this.createElement('div', { className: CLS_TEXT_WRAP });\n            tCont.appendChild(txtWrapEle);\n            if ((txt === '' || txt === undefined) && css === '') {\n                return;\n            }\n            else {\n                if ((txt !== '' && txt !== undefined) && css !== '') {\n                    if ((pos === 'left' || pos === 'top')) {\n                        tCont.insertBefore(icon, tCont.firstElementChild);\n                    }\n                    else {\n                        tCont.appendChild(icon);\n                    }\n                    tEle = txtWrapEle;\n                }\n                else {\n                    tEle = ((css === '') ? txtWrapEle : icon);\n                    if (tEle === icon) {\n                        detach(txtWrapEle);\n                        tCont.appendChild(icon);\n                    }\n                }\n            }\n            var wrapAttrs = (item.disabled) ? {} : { tabIndex: '-1' };\n            tCont.appendChild(_this.btnCls.cloneNode(true));\n            var wrap = _this.createElement('div', { className: CLS_WRAP, attrs: wrapAttrs });\n            wrap.appendChild(tCont);\n            if (_this.itemIndexArray === []) {\n                _this.itemIndexArray.push(CLS_ITEM + '_' + _this.lastIndex);\n            }\n            else {\n                _this.itemIndexArray.splice((index + i), 0, CLS_ITEM + '_' + _this.lastIndex);\n            }\n            var attrObj = {\n                id: CLS_ITEM + '_' + _this.lastIndex, role: 'tab', 'aria-selected': 'false'\n            };\n            var tItem = { htmlAttributes: attrObj, template: wrap };\n            tItem.cssClass = item.cssClass + ' ' + disabled + ' ' + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\n            if (pos === 'top' || pos === 'bottom') {\n                _this.element.classList.add('e-vertical-icon');\n            }\n            tItems.push(tItem);\n        });\n        return tItems;\n    };\n    Tab.prototype.removeActiveClass = function (id) {\n        var hdrActEle = selectAll(':root .' + CLS_HEADER + ' .' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element)[0];\n        if (this.headerPlacement === 'Bottom') {\n            hdrActEle = selectAll(':root .' + CLS_HEADER + ' .' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element.children[1])[0];\n        }\n        if (!isNOU(hdrActEle)) {\n            hdrActEle.classList.remove(CLS_ACTIVE);\n            var no = this.extIndex(hdrActEle.id);\n            var trg = this.findEle(select('.' + CLS_CONTENT, this.element).children, CLS_CONTENT + '_' + no);\n        }\n    };\n    Tab.prototype.checkPopupOverflow = function (ele) {\n        this.tbPop = select('.' + CLS_TB_POP, this.element);\n        var popIcon = select('.e-hor-nav', this.element);\n        var tbrItems = select('.' + CLS_TB_ITEMS, this.element);\n        if ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\n            || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n            ele.classList.add(CLS_TB_POPUP);\n            this.tbPop.insertBefore(ele.cloneNode(true), selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n            ele.outerHTML = '';\n        }\n        return true;\n    };\n    Tab.prototype.popupHandler = function (target) {\n        var ripEle = target.querySelector('.e-ripple-element');\n        if (!isNOU(ripEle)) {\n            ripEle.outerHTML = '';\n            target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n        }\n        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n        var lastChild = this.tbItem[this.tbItem.length - 1];\n        if (this.tbItem.length !== 0) {\n            target.classList.remove(CLS_TB_POPUP);\n            this.tbItems.appendChild(target.cloneNode(true));\n            this.actEleId = target.id;\n            target.outerHTML = '';\n            if (this.checkPopupOverflow(lastChild)) {\n                var prevEle = this.tbItems.lastChild.previousElementSibling;\n                this.checkPopupOverflow(prevEle);\n            }\n            this.isPopup = true;\n        }\n        return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n    };\n    Tab.prototype.setCloseButton = function (val) {\n        var trg = select('.' + CLS_HEADER, this.element);\n        (val === true) ? trg.classList.add(CLS_CLOSE_SHOW) : trg.classList.remove(CLS_CLOSE_SHOW);\n        this.tbObj.refreshOverflow();\n        this.refreshActElePosition();\n    };\n    Tab.prototype.prevCtnAnimation = function (prev, current) {\n        var animation;\n        var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n        if (this.isPopup || prev <= current) {\n            if (this.animation.previous.effect === 'SlideLeftIn') {\n                animation = { name: 'SlideLeftOut',\n                    duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing };\n            }\n            else {\n                animation = null;\n            }\n        }\n        else {\n            if (this.animation.next.effect === 'SlideRightIn') {\n                animation = { name: 'SlideRightOut',\n                    duration: this.animation.next.duration, timingFunction: this.animation.next.easing };\n            }\n            else {\n                animation = null;\n            }\n        }\n        return animation;\n    };\n    Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n        var _this = this;\n        var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n        if (!isNOU(animateObj)) {\n            animateObj.begin = function () {\n                setStyle(oldCnt, { 'position': 'absolute' });\n                oldCnt.classList.add(CLS_PROGRESS);\n                oldCnt.classList.add('e-view');\n            };\n            animateObj.end = function () {\n                oldCnt.style.display = 'none';\n                oldCnt.classList.remove(CLS_ACTIVE);\n                oldCnt.classList.remove(CLS_PROGRESS);\n                oldCnt.classList.remove('e-view');\n                setStyle(oldCnt, { 'display': '', 'position': '' });\n                if (oldCnt.childNodes.length === 0 && !_this.isTemplate) {\n                    detach(oldCnt);\n                }\n            };\n            new Animation(animateObj).animate(oldCnt);\n        }\n        else {\n            oldCnt.classList.remove(CLS_ACTIVE);\n        }\n    };\n    Tab.prototype.triggerAnimation = function (id, value) {\n        var _this = this;\n        var prevIndex = this.prevIndex;\n        var itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT).children);\n        var oldCnt;\n        itemCollection.forEach(function (item) {\n            if (item.id === _this.prevActiveEle) {\n                oldCnt = item;\n            }\n        });\n        var prevEle = this.tbItem[prevIndex];\n        var no = this.extIndex(this.tbItem[this.selectedItem].id);\n        var newCnt = this.getTrgContent(this.cntEle, no);\n        if (isNOU(oldCnt) && !isNOU(prevEle)) {\n            var idNo = this.extIndex(prevEle.id);\n            oldCnt = this.getTrgContent(this.cntEle, idNo);\n        }\n        this.prevActiveEle = newCnt.id;\n        if (this.initRender || value === false || this.animation === {} || isNOU(this.animation)) {\n            if (oldCnt && oldCnt !== newCnt) {\n                oldCnt.classList.remove(CLS_ACTIVE);\n            }\n            return;\n        }\n        var cnt = select('.' + CLS_CONTENT, this.element);\n        var animateObj;\n        if (this.prevIndex > this.selectedItem && !this.isPopup) {\n            var openEff = this.animation.previous.effect;\n            animateObj = {\n                name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\n                duration: this.animation.previous.duration,\n                timingFunction: this.animation.previous.easing\n            };\n        }\n        else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n            var clsEff = this.animation.next.effect;\n            animateObj = {\n                name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\n                duration: this.animation.next.duration,\n                timingFunction: this.animation.next.easing\n            };\n        }\n        animateObj.progress = function () {\n            cnt.classList.add(CLS_PROGRESS);\n            _this.setActiveBorder();\n        };\n        animateObj.end = function () {\n            cnt.classList.remove(CLS_PROGRESS);\n            newCnt.classList.add(CLS_ACTIVE);\n        };\n        if (!this.initRender && !isNOU(oldCnt)) {\n            this.triggerPrevAnimation(oldCnt, prevIndex);\n        }\n        this.isPopup = false;\n        if (animateObj.name === '') {\n            newCnt.classList.add(CLS_ACTIVE);\n        }\n        else {\n            new Animation(animateObj).animate(newCnt);\n        }\n    };\n    Tab.prototype.keyPressed = function (trg) {\n        var trgParent = closest(trg, '.' + CLS_HEADER + ' .' + CLS_TB_ITEM);\n        var trgIndex = this.getEleIndex(trgParent);\n        if (!isNOU(this.popEle) && trg.classList.contains('e-hor-nav')) {\n            (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n        }\n        else if (trg.classList.contains('e-scroll-nav')) {\n            trg.click();\n        }\n        else {\n            if (!isNOU(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n                this.select(trgIndex);\n                if (!isNOU(this.popEle)) {\n                    this.popObj.hide(this.hide);\n                }\n            }\n        }\n    };\n    Tab.prototype.getEleIndex = function (item) {\n        return Array.prototype.indexOf.call(selectAll('.' + CLS_HEADER + ' .' + CLS_TB_ITEM, this.element), item);\n    };\n    Tab.prototype.extIndex = function (id) {\n        return id.replace(CLS_ITEM + '_', '');\n    };\n    Tab.prototype.expTemplateContent = function () {\n        var _this = this;\n        this.templateEle.forEach(function (eleStr) {\n            if (!isNOU(_this.element.querySelector(eleStr))) {\n                document.body.appendChild(_this.element.querySelector(eleStr)).style.display = 'none';\n            }\n        });\n    };\n    Tab.prototype.templateCompile = function (ele, cnt) {\n        var tempEle = this.createElement('div');\n        this.compileElement(tempEle, cnt, 'content');\n        if (tempEle.childNodes.length !== 0) {\n            ele.appendChild(tempEle);\n        }\n    };\n    Tab.prototype.compileElement = function (ele, val, prop) {\n        if (typeof val === 'string') {\n            val = val.trim();\n        }\n        var templateFn = compile(val);\n        var templateFUN;\n        if (!isNOU(templateFn)) {\n            templateFUN = templateFn({}, this, prop);\n        }\n        if (!isNOU(templateFn) && templateFUN.length > 0) {\n            [].slice.call(templateFUN).forEach(function (el) {\n                ele.appendChild(el);\n            });\n        }\n    };\n    Tab.prototype.headerTextCompile = function (element, text) {\n        this.compileElement(element, text, 'headerText');\n    };\n    Tab.prototype.getContent = function (ele, cnt, callType) {\n        var eleStr;\n        if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n            if (cnt[0] === '.' || cnt[0] === '#') {\n                if (document.querySelectorAll(cnt).length) {\n                    var eleVal = document.querySelector(cnt);\n                    eleStr = eleVal.outerHTML.trim();\n                    if (callType === 'clone') {\n                        ele.appendChild(eleVal.cloneNode(true));\n                    }\n                    else {\n                        ele.appendChild(eleVal);\n                        eleVal.style.display = '';\n                    }\n                }\n                else {\n                    this.templateCompile(ele, cnt);\n                }\n            }\n            else {\n                this.templateCompile(ele, cnt);\n            }\n        }\n        else {\n            ele.appendChild(cnt);\n        }\n        if (!isNOU(eleStr)) {\n            if (this.templateEle.indexOf(cnt.toString()) === -1) {\n                this.templateEle.push(cnt.toString());\n            }\n        }\n    };\n    Tab.prototype.getTrgContent = function (cntEle, no) {\n        var ele;\n        if (this.element.classList.contains(CLS_NEST)) {\n            ele = select('.' + CLS_NEST + '> .' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + no, this.element);\n        }\n        else {\n            ele = this.findEle(cntEle.children, CLS_CONTENT + '_' + no);\n        }\n        return ele;\n    };\n    Tab.prototype.findEle = function (items, key) {\n        var ele;\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].id === key) {\n                ele = items[i];\n                break;\n            }\n        }\n        return ele;\n    };\n    Tab.prototype.setOrientation = function (place, ele) {\n        (place === 'Bottom') ? this.element.appendChild(ele) : this.element.insertBefore(ele, select('.' + CLS_CONTENT, this.element));\n    };\n    Tab.prototype.setCssClass = function (ele, cls, val) {\n        if (cls === '') {\n            return;\n        }\n        var list = cls.split(' ');\n        for (var i = 0; i < list.length; i++) {\n            if (val) {\n                ele.classList.add(list[i]);\n            }\n            else {\n                ele.classList.remove(list[i]);\n            }\n        }\n    };\n    Tab.prototype.setContentHeight = function (val) {\n        if (isNOU(this.cntEle)) {\n            return;\n        }\n        var height;\n        var hdrEle = select('.' + CLS_HEADER, this.element);\n        if (this.heightAdjustMode === 'None') {\n            if (this.height === 'auto') {\n                return;\n            }\n            else {\n                setStyle(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n            }\n        }\n        else if (this.heightAdjustMode === 'Fill') {\n            setStyle(this.element, { 'height': '100%' });\n            setStyle(this.cntEle, { 'height': 'auto' });\n        }\n        else if (this.heightAdjustMode === 'Auto') {\n            var cnt = selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n            if (this.isTemplate === true) {\n                for (var i = 0; i < cnt.length; i++) {\n                    cnt[i].setAttribute('style', 'display:block; visibility: visible');\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n                    cnt[i].style.removeProperty('display');\n                    cnt[i].style.removeProperty('visibility');\n                }\n            }\n            else {\n                this.cntEle = select('.' + CLS_CONTENT, this.element);\n                if (val === true) {\n                    this.cntEle.appendChild(this.createElement('div', {\n                        id: (CLS_CONTENT + '_' + 0), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n                        attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + 0 }\n                    }));\n                }\n                var ele = this.cntEle.children.item(0);\n                for (var i = 0; i < this.items.length; i++) {\n                    this.getContent(ele, this.items[i].content, 'clone');\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n                    while (ele.firstChild) {\n                        ele.removeChild(ele.firstChild);\n                    }\n                }\n                this.templateEle = [];\n                this.getContent(ele, this.items[0].content, 'render');\n                ele.classList.remove(CLS_ACTIVE);\n            }\n            setStyle(this.cntEle, { 'height': this.maxHeight + 'px' });\n        }\n        else {\n            setStyle(this.cntEle, { 'height': 'auto' });\n        }\n    };\n    Tab.prototype.getHeight = function (ele) {\n        var cs = window.getComputedStyle(ele);\n        return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\n            parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n    };\n    Tab.prototype.setActiveBorder = function () {\n        var trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element);\n        if (this.headerPlacement === 'Bottom') {\n            trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element.children[1]);\n        }\n        if (trg === null) {\n            return;\n        }\n        var root = closest(trg, '.' + CLS_TAB);\n        if (this.element !== root) {\n            return;\n        }\n        var hsCnt = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS + ' .e-hscroll-content', this.element.children[0]);\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        var bar = select('.' + CLS_HEADER + ' .' + CLS_INDICATOR, this.element);\n        if (this.headerPlacement === 'Bottom') {\n            hsCnt = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS + ' .e-hscroll-content', this.element.children[1]);\n        }\n        var tbWidth = (isNOU(hsCnt)) ? this.tbItems.offsetWidth : hsCnt.offsetWidth;\n        if (tbWidth !== 0) {\n            setStyle(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\n        }\n        else {\n            setStyle(bar, { 'left': 'auto', 'right': 'auto' });\n        }\n        if (!isNOU(this.bdrLine)) {\n            this.bdrLine.classList.remove(CLS_HIDDEN);\n        }\n    };\n    Tab.prototype.setActive = function (value) {\n        this.tbItem = selectAll('.' + CLS_HEADER + ' .' + CLS_TB_ITEM, this.element);\n        var trg = this.tbItem[value];\n        if (value >= 0) {\n            this.setProperties({ selectedItem: value }, true);\n        }\n        if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n            return;\n        }\n        if (trg.classList.contains(CLS_ACTIVE)) {\n            this.setActiveBorder();\n            return;\n        }\n        if (!this.isTemplate) {\n            var prev = this.tbItem[this.prevIndex];\n            if (!isNOU(prev)) {\n                prev.removeAttribute('aria-controls');\n            }\n            attributes(trg, { 'aria-controls': CLS_CONTENT + '_' + value });\n        }\n        var id = trg.id;\n        this.removeActiveClass(id);\n        trg.classList.add(CLS_ACTIVE);\n        trg.setAttribute('aria-selected', 'true');\n        var no = Number(this.extIndex(id));\n        if (isNOU(this.prevActiveEle)) {\n            this.prevActiveEle = CLS_CONTENT + '_' + no;\n        }\n        attributes(this.element, { 'aria-activedescendant': id });\n        if (this.isTemplate) {\n            if (select('.' + CLS_CONTENT, this.element).children.length > 0) {\n                var trg_1 = this.findEle(select('.' + CLS_CONTENT, this.element).children, CLS_CONTENT + '_' + no);\n                if (!isNOU(trg_1)) {\n                    trg_1.classList.add(CLS_ACTIVE);\n                }\n                this.triggerAnimation(id, this.enableAnimation);\n            }\n        }\n        else {\n            this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n            var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n            if (isNOU(item)) {\n                this.cntEle.appendChild(this.createElement('div', {\n                    id: CLS_CONTENT + '_' + this.extIndex(id), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n                    attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + this.extIndex(id) }\n                }));\n                var eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\n                var itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, trg.id);\n                this.getContent(eleTrg, this.items[itemIndex].content, 'render');\n            }\n            else {\n                item.classList.add(CLS_ACTIVE);\n            }\n            this.triggerAnimation(id, this.enableAnimation);\n        }\n        this.setActiveBorder();\n        var curActItem = select('.' + CLS_HEADER + ' #' + id, this.element);\n        this.refreshItemVisibility(curActItem);\n        curActItem.firstChild.focus();\n        var eventArg = {\n            previousItem: this.prevItem,\n            previousIndex: this.prevIndex,\n            selectedItem: trg,\n            selectedIndex: value,\n            isSwiped: this.isSwipeed\n        };\n        if (!this.initRender || this.selectedItem !== 0) {\n            this.trigger('selected', eventArg);\n        }\n    };\n    Tab.prototype.setItems = function (items) {\n        this.isReplace = true;\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        this.tbObj.items = this.parseObject(items, 0);\n        this.tbObj.dataBind();\n        this.isReplace = false;\n    };\n    Tab.prototype.setRTL = function (value) {\n        this.tbObj.enableRtl = value;\n        this.tbObj.dataBind();\n        this.setCssClass(this.element, CLS_RTL, value);\n        this.refreshActiveBorder();\n    };\n    Tab.prototype.refreshActiveBorder = function () {\n        if (!isNOU(this.bdrLine)) {\n            this.bdrLine.classList.add(CLS_HIDDEN);\n        }\n        this.setActiveBorder();\n    };\n    Tab.prototype.wireEvents = function () {\n        window.addEventListener('resize', this.refreshActElePosition.bind(this));\n        EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n        if (!isNOU(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n        this.keyModule = new KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n        this.tabKeyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyHandler.bind(this),\n            keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\n            eventName: 'keydown'\n        });\n    };\n    Tab.prototype.unWireEvents = function () {\n        this.keyModule.destroy();\n        this.tabKeyModule.destroy();\n        if (!isNOU(this.cntEle)) {\n            this.touchModule.destroy();\n        }\n        window.removeEventListener('resize', this.refreshActElePosition.bind(this));\n        this.element.removeEventListener('mouseover', this.hoverHandler.bind(this));\n    };\n    Tab.prototype.clickHandler = function (args) {\n        this.element.classList.remove(CLS_FOCUS);\n        var trg = args.originalEvent.target;\n        var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n        var trgIndex = this.getEleIndex(trgParent);\n        if (trg.classList.contains(CLS_ICON_CLOSE)) {\n            this.removeTab(trgIndex);\n        }\n        else {\n            this.isPopup = false;\n            if (!isNOU(trgParent) && trgIndex !== this.selectedItem) {\n                this.select(trgIndex);\n            }\n        }\n    };\n    Tab.prototype.swipeHandler = function (e) {\n        if (e.velocity < 3 && isNOU(e.originalEvent.changedTouches)) {\n            return;\n        }\n        this.isSwipeed = true;\n        if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\n            for (var k = this.selectedItem - 1; k >= 0; k--) {\n                if (!this.tbItem[k].classList.contains('e-hidden')) {\n                    this.select(k);\n                    break;\n                }\n            }\n        }\n        else if (e.swipeDirection === 'Left' && (this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\n            for (var i = this.selectedItem + 1; i < this.tbItem.length; i++) {\n                if (!this.tbItem[i].classList.contains('e-hidden')) {\n                    this.select(i);\n                    break;\n                }\n            }\n        }\n        this.isSwipeed = false;\n    };\n    Tab.prototype.spaceKeyDown = function (e) {\n        if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\n            var clstHead = closest(e.target, '.' + CLS_HEADER);\n            if (!isNOU(clstHead)) {\n                e.preventDefault();\n            }\n        }\n    };\n    Tab.prototype.keyHandler = function (e) {\n        if (this.element.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        this.element.classList.add(CLS_FOCUS);\n        var trg = e.target;\n        var actEle = select('.' + CLS_HEADER + ' .' + CLS_ACTIVE, this.element);\n        var tabItem = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element);\n        this.popEle = select('.' + CLS_HEADER + ' .' + CLS_TB_POP, this.element);\n        if (!isNOU(this.popEle)) {\n            this.popObj = this.popEle.ej2_instances[0];\n        }\n        switch (e.action) {\n            case 'space':\n            case 'enter':\n                if (trg.parentElement.classList.contains(CLS_DISABLE)) {\n                    return;\n                }\n                if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n                    break;\n                }\n                this.keyPressed(trg);\n                break;\n            case 'tab':\n            case 'shiftTab':\n                if (trg.classList.contains(CLS_WRAP)\n                    && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n                    trg.setAttribute('tabindex', '-1');\n                }\n                if (this.popObj && isVisible(this.popObj.element)) {\n                    this.popObj.hide(this.hide);\n                }\n                actEle.children.item(0).setAttribute('tabindex', '0');\n                break;\n            case 'moveLeft':\n            case 'moveRight':\n                var item = closest(document.activeElement, '.' + CLS_TB_ITEM);\n                if (!isNOU(item)) {\n                    this.refreshItemVisibility(item);\n                }\n                break;\n            case 'openPopup':\n                e.preventDefault();\n                if (!isNOU(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n                    this.popObj.show(this.show);\n                }\n                break;\n            case 'delete':\n                var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n                if (this.showCloseButton === true && !isNOU(trgParent)) {\n                    var nxtSib = trgParent.nextSibling;\n                    if (!isNOU(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n                        nxtSib.firstChild.focus();\n                    }\n                    this.removeTab(this.getEleIndex(trgParent));\n                }\n                this.setActiveBorder();\n                break;\n        }\n    };\n    Tab.prototype.refreshActElePosition = function () {\n        var activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n        if (!isNOU(activeEle)) {\n            this.select(this.getEleIndex(activeEle));\n        }\n        this.refreshActiveBorder();\n    };\n    Tab.prototype.refreshItemVisibility = function (target) {\n        var scrCnt = select('.e-hscroll-content', this.tbItems);\n        if (!isNOU(scrCnt)) {\n            var scrBar = select('.e-hscroll-bar', this.tbItems);\n            var scrStart = scrBar.scrollLeft;\n            var scrEnd = scrStart + scrBar.offsetWidth;\n            var eleStart = target.offsetLeft;\n            var eleWidth = target.offsetWidth;\n            var eleEnd = target.offsetLeft + target.offsetWidth;\n            if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\n                var eleViewRange = scrEnd - eleStart;\n                scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n            }\n            else {\n                if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\n                    var eleViewRange = eleEnd - scrStart;\n                    scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    Tab.prototype.hoverHandler = function (e) {\n        var trg = e.target;\n        if (!isNOU(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n            trg.setAttribute('title', new L10n('tab', { closeButtonTitle: this.title }, this.locale).getConstant('closeButtonTitle'));\n        }\n    };\n    /**\n     * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\n     * @param  {number} index - Index value of target Tab item.\n     * @param  {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, isEnable is true.\n     * @returns void.\n     */\n    Tab.prototype.enableTab = function (index, value) {\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNOU(tbItems)) {\n            return;\n        }\n        if (value === true) {\n            tbItems.classList.remove(CLS_DISABLE, CLS_OVERLAY);\n            tbItems.firstChild.setAttribute('tabindex', '-1');\n        }\n        else {\n            tbItems.classList.add(CLS_DISABLE, CLS_OVERLAY);\n            tbItems.firstChild.removeAttribute('tabindex');\n            if (tbItems.classList.contains(CLS_ACTIVE)) {\n                this.select(index + 1);\n            }\n        }\n        if (!isNOU(this.items[index])) {\n            this.items[index].disabled = !value;\n            this.dataBind();\n        }\n        tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\n    };\n    /**\n     * Adds new items to the Tab that accepts an array as Tab items.\n     * @param  {TabItemsModel[]} items - An array of item that is added to the Tab.\n     * @param  {number} index - Number value that determines where the items to be added. By default, index is 0.\n     * @returns void.\n     */\n    Tab.prototype.addTab = function (items, index) {\n        var _this = this;\n        var lastEleIndex = 0;\n        if (!this.isReplace) {\n            this.trigger('adding', { addedItems: items });\n        }\n        this.hdrEle = select('.' + CLS_HEADER, this.element);\n        if (isNOU(this.hdrEle)) {\n            this.items = items;\n            this.reRenderItems();\n            return;\n        }\n        var itemsCount = selectAll('.' + CLS_TB_ITEM, this.element).length;\n        if (itemsCount !== 0) {\n            lastEleIndex = this.lastIndex + 1;\n        }\n        if (isNOU(index)) {\n            index = itemsCount - 1;\n        }\n        if (itemsCount < index || index < 0 || isNaN(index)) {\n            return;\n        }\n        if (itemsCount === 0 && !isNOU(this.hdrEle)) {\n            this.hdrEle.style.display = '';\n        }\n        if (!isNOU(this.bdrLine)) {\n            this.bdrLine.classList.add(CLS_HIDDEN);\n        }\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        var tabItems = this.parseObject(items, index);\n        items.forEach(function (item, place) {\n            _this.items.splice((index + place), 0, item);\n            if (_this.isTemplate && !isNOU(item.header) && !isNOU(item.header.text)) {\n                var no = lastEleIndex + place;\n                var ele = _this.createElement('div', {\n                    id: CLS_CONTENT + '_' + no, className: CLS_ITEM, attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + no }\n                });\n                _this.cntEle.insertBefore(ele, _this.cntEle.children[(index + place)]);\n                var eleTrg = _this.getTrgContent(_this.cntEle, no.toString());\n                _this.getContent(eleTrg, item.content, 'render');\n            }\n        });\n        this.tbObj.addItems(tabItems, index);\n        if (!this.isReplace) {\n            this.trigger('added', { addedItems: items });\n        }\n        if (this.selectedItem === index) {\n            this.select(index);\n        }\n        else {\n            this.setActiveBorder();\n        }\n    };\n    /**\n     * Removes the items in the Tab from the specified index.\n     * @param  {number} index - Index of target item that is going to be removed.\n     * @returns void.\n     */\n    Tab.prototype.removeTab = function (index) {\n        var trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        var removeArgs = { removedItem: trg, removedIndex: index };\n        this.trigger('removing', removeArgs);\n        if (isNOU(trg)) {\n            return;\n        }\n        this.tbObj.removeItems(index);\n        this.items.splice(index, 1);\n        this.itemIndexArray.splice(index, 1);\n        this.refreshActiveBorder();\n        var cntTrg = select('#' + CLS_CONTENT + '_' + this.extIndex(trg.id), select('.' + CLS_CONTENT, this.element));\n        if (!isNOU(cntTrg)) {\n            detach(cntTrg);\n        }\n        this.trigger('removed', removeArgs);\n        if (trg.classList.contains(CLS_ACTIVE)) {\n            index = (index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element).length - 1) ? index - 1 : index;\n            this.enableAnimation = false;\n            this.selectedItem = index;\n            this.select(index);\n        }\n        if (selectAll('.' + CLS_TB_ITEM, this.element).length === 0) {\n            this.hdrEle.style.display = 'none';\n        }\n        this.enableAnimation = true;\n    };\n    /**\n     * Shows or hides the Tab that is in the specified index.\n     * @param  {number} index - Index value of target item.\n     * @param  {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\n     * @returns void.\n     */\n    Tab.prototype.hideTab = function (index, value) {\n        var items;\n        var item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNOU(item)) {\n            return;\n        }\n        if (isNOU(value)) {\n            value = true;\n        }\n        this.bdrLine.classList.add(CLS_HIDDEN);\n        if (value === true) {\n            item.classList.add(CLS_HIDDEN);\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n            if (items.length !== 0 && item.classList.contains(CLS_ACTIVE)) {\n                if (index !== 0) {\n                    for (var i = index - 1; i >= 0; i--) {\n                        if (!this.tbItem[i].classList.contains('e-hidden')) {\n                            this.select(i);\n                            break;\n                        }\n                        else if (i === 0) {\n                            for (var k = index + 1; k < this.tbItem.length; k++) {\n                                if (!this.tbItem[k].classList.contains('e-hidden')) {\n                                    this.select(k);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    for (var k = index + 1; k < this.tbItem.length; k++) {\n                        if (!this.tbItem[k].classList.contains('e-hidden')) {\n                            this.select(k);\n                            break;\n                        }\n                    }\n                }\n            }\n            else if (items.length === 0) {\n                this.element.classList.add(CLS_HIDDEN);\n            }\n        }\n        else {\n            this.element.classList.remove(CLS_HIDDEN);\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n            if (items.length === 0) {\n                this.select(index);\n            }\n            item.classList.remove(CLS_HIDDEN);\n        }\n        this.setActiveBorder();\n        item.setAttribute('aria-hidden', '' + value);\n    };\n    /**\n     * Specifies the index or HTMLElement to select an item from the Tab.\n     * @param  {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\n     * @returns void.\n     */\n    Tab.prototype.select = function (args) {\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        this.tbItem = selectAll('.' + CLS_HEADER + ' .' + CLS_TB_ITEM, this.element);\n        this.prevItem = this.tbItem[this.prevIndex];\n        var trg = this.tbItem[args];\n        if (!isNOU(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE)) {\n            this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n        }\n        var eventArg = {\n            previousItem: this.prevItem,\n            previousIndex: this.prevIndex,\n            selectedItem: this.tbItem[this.selectedItem],\n            selectedIndex: this.selectedItem,\n            selectingItem: trg,\n            selectingIndex: args,\n            isSwiped: this.isSwipeed\n        };\n        if (!this.initRender || this.selectedItem !== 0) {\n            this.trigger('selecting', eventArg);\n        }\n        if (eventArg.cancel) {\n            return;\n        }\n        if (typeof args === 'number') {\n            if (!isNOU(this.tbItem[args]) && this.tbItem[args].classList.contains(CLS_DISABLE)) {\n                for (var i = args + 1; i < this.items.length; i++) {\n                    if (this.items[i].disabled === false) {\n                        args = i;\n                        break;\n                    }\n                    else {\n                        args = 0;\n                    }\n                }\n            }\n            if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n                this.prevIndex = this.selectedItem;\n                if (this.tbItem[args].classList.contains(CLS_TB_POPUP)) {\n                    this.setActive(this.popupHandler(this.tbItem[args]));\n                }\n                else {\n                    this.setActive(args);\n                }\n            }\n            else {\n                this.setActive(0);\n            }\n        }\n        else if (args instanceof (HTMLElement)) {\n            this.setActive(this.getEleIndex(args));\n        }\n    };\n    /**\n     * Specifies the value to disable/enable the Tab component.\n     * When set to `true`, the component will be disabled.\n     * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\n     * @returns void.\n     */\n    Tab.prototype.disable = function (value) {\n        this.setCssClass(this.element, CLS_DISABLE, value);\n        this.element.setAttribute('aria-disabled', '' + value);\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @returns string\n     */\n    Tab.prototype.getPersistData = function () {\n        return this.addOnPersist(['selectedItem', 'actEleId']);\n    };\n    /**\n     * Returns the current module name.\n     * @returns string\n     * @private\n     */\n    Tab.prototype.getModuleName = function () {\n        return 'tab';\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     * @param  {TabModel} newProp\n     * @param  {TabModel} oldProp\n     * @returns void\n     * @private\n     */\n    Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    setStyle(this.element, { width: formatUnit(newProp.width) });\n                    break;\n                case 'height':\n                    setStyle(this.element, { height: formatUnit(newProp.height) });\n                    this.setContentHeight(false);\n                    break;\n                case 'cssClass':\n                    this.setCssClass(this.element, newProp.cssClass, true);\n                    break;\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n                        var changedProp = Object.keys(newProp.items);\n                        for (var i = 0; i < changedProp.length; i++) {\n                            var index = parseInt(Object.keys(newProp.items)[i], 10);\n                            var property = Object.keys(newProp.items[index])[0];\n                            var oldVal = Object(oldProp.items[index])[property];\n                            var newVal = Object(newProp.items[index])[property];\n                            var hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM + '_' + index, this.element);\n                            var cntItem = select('.' + CLS_CONTENT + ' #' + CLS_CONTENT + '_' + index, this.element);\n                            if (property === 'header') {\n                                var arr = [];\n                                arr.push(this.items[index]);\n                                this.items.splice(index, 1);\n                                this.itemIndexArray.splice(index, 1);\n                                this.tbObj.items.splice(index, 1);\n                                var isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN);\n                                detach(hdrItem);\n                                this.isReplace = true;\n                                this.addTab(arr, index);\n                                if (isHiddenEle) {\n                                    this.hideTab(index);\n                                }\n                                this.isReplace = false;\n                            }\n                            if (property === 'content' && !isNOU(cntItem)) {\n                                var strVal = typeof newVal === 'string' || isNOU(newVal.innerHTML);\n                                if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\n                                    var eleVal = document.querySelector(newVal);\n                                    cntItem.appendChild(eleVal);\n                                    eleVal.style.display = '';\n                                }\n                                else if (newVal === '' && oldVal[0] === '#') {\n                                    document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\n                                    cntItem.innerHTML = newVal;\n                                }\n                                else {\n                                    cntItem.innerHTML = newVal;\n                                }\n                            }\n                            if (property === 'cssClass') {\n                                if (!isNOU(hdrItem)) {\n                                    hdrItem.classList.remove(oldVal);\n                                    hdrItem.classList.add(newVal);\n                                }\n                                if (!isNOU(cntItem)) {\n                                    cntItem.classList.remove(oldVal);\n                                    cntItem.classList.add(newVal);\n                                }\n                            }\n                            if (property === 'disabled') {\n                                this.enableTab(index, ((newVal === true) ? false : true));\n                            }\n                        }\n                    }\n                    else {\n                        this.lastIndex = 0;\n                        if (isNOU(this.tbObj)) {\n                            this.reRenderItems();\n                        }\n                        else {\n                            this.setItems(newProp.items);\n                            if (this.templateEle.length > 0) {\n                                this.expTemplateContent();\n                            }\n                            this.templateEle = [];\n                            select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element).innerHTML = '';\n                            this.select(this.selectedItem);\n                        }\n                    }\n                    break;\n                case 'showCloseButton':\n                    this.setCloseButton(newProp.showCloseButton);\n                    break;\n                case 'selectedItem':\n                    this.selectedItem = oldProp.selectedItem;\n                    this.select(newProp.selectedItem);\n                    break;\n                case 'headerPlacement':\n                    var tempHdrEle = select('.' + CLS_HEADER, this.element);\n                    this.setOrientation(newProp.headerPlacement, tempHdrEle);\n                    this.select(this.selectedItem);\n                    break;\n                case 'enableRtl':\n                    this.setRTL(newProp.enableRtl);\n                    break;\n                case 'overflowMode':\n                    this.tbObj.overflowMode = newProp.overflowMode;\n                    this.tbObj.dataBind();\n                    this.refreshActElePosition();\n                    break;\n                case 'heightAdjustMode':\n                    this.setContentHeight(false);\n                    this.select(this.selectedItem);\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Collection([], TabItem)\n    ], Tab.prototype, \"items\", void 0);\n    __decorate([\n        Property('100%')\n    ], Tab.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Tab.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], Tab.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(0)\n    ], Tab.prototype, \"selectedItem\", void 0);\n    __decorate([\n        Property('Top')\n    ], Tab.prototype, \"headerPlacement\", void 0);\n    __decorate([\n        Property('Content')\n    ], Tab.prototype, \"heightAdjustMode\", void 0);\n    __decorate([\n        Property('Scrollable')\n    ], Tab.prototype, \"overflowMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"showCloseButton\", void 0);\n    __decorate([\n        Complex({}, TabAnimationSettings)\n    ], Tab.prototype, \"animation\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"adding\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"added\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"selecting\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"selected\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"removing\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"removed\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"destroyed\", void 0);\n    Tab = __decorate([\n        NotifyPropertyChanges\n    ], Tab);\n    return Tab;\n}(Component));\nexport { Tab };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, isUndefined, Browser, compile } from '@syncfusion/ej2-base';\nimport { Property, NotifyPropertyChanges, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { rippleEffect, Animation } from '@syncfusion/ej2-base';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, closest, matches, detach, select, selectAll, isVisible, append } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { isNullOrUndefined as isNOU, Touch, getValue, setValue } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { createCheckBox, rippleMouseHandler } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nvar ROOT = 'e-treeview';\nvar CONTROL = 'e-control';\nvar COLLAPSIBLE = 'e-icon-collapsible';\nvar EXPANDABLE = 'e-icon-expandable';\nvar LISTITEM = 'e-list-item';\nvar LISTTEXT = 'e-list-text';\nvar PARENTITEM = 'e-list-parent';\nvar HOVER = 'e-hover';\nvar ACTIVE = 'e-active';\nvar LOAD = 'e-icons-spinner';\nvar PROCESS = 'e-process';\nvar ICON = 'e-icons';\nvar TEXTWRAP = 'e-text-content';\nvar INPUT = 'e-input';\nvar INPUTGROUP = 'e-input-group';\nvar TREEINPUT = 'e-tree-input';\nvar EDITING = 'e-editing';\nvar RTL = 'e-rtl';\nvar DRAGITEM = 'e-drag-item';\nvar DROPPABLE = 'e-droppable';\nvar DRAGGING = 'e-dragging';\nvar SIBLING = 'e-sibling';\nvar DROPIN = 'e-drop-in';\nvar DROPNEXT = 'e-drop-next';\nvar DROPOUT = 'e-drop-out';\nvar NODROP = 'e-no-drop';\nvar FULLROWWRAP = 'e-fullrow-wrap';\nvar FULLROW = 'e-fullrow';\nvar SELECTED = 'e-selected';\nvar EXPANDED = 'e-expanded';\nvar NODECOLLAPSED = 'e-node-collapsed';\nvar DISABLE = 'e-disable';\nvar CONTENT = 'e-content';\nvar DOWNTAIL = 'e-downtail';\nvar DROPCOUNT = 'e-drop-count';\nvar CHECK = 'e-check';\nvar INDETERMINATE = 'e-stop';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECKBOXRIPPLE = 'e-ripple-container';\nvar FOCUS = 'e-node-focus';\nvar IMAGE = 'e-list-img';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar treeAriaAttr = {\n    treeRole: 'tree',\n    itemRole: 'treeitem',\n    listRole: 'group',\n    itemText: '',\n    wrapperRole: '',\n};\n/**\n * Configures the fields to bind to the properties of node in the TreeView component.\n */\nvar FieldsSettings = /** @class */ (function (_super) {\n    __extends(FieldsSettings, _super);\n    function FieldsSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('child')\n    ], FieldsSettings.prototype, \"child\", void 0);\n    __decorate([\n        Property([])\n    ], FieldsSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property('expanded')\n    ], FieldsSettings.prototype, \"expanded\", void 0);\n    __decorate([\n        Property('hasChildren')\n    ], FieldsSettings.prototype, \"hasChildren\", void 0);\n    __decorate([\n        Property('htmlAttributes')\n    ], FieldsSettings.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('iconCss')\n    ], FieldsSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('id')\n    ], FieldsSettings.prototype, \"id\", void 0);\n    __decorate([\n        Property('imageUrl')\n    ], FieldsSettings.prototype, \"imageUrl\", void 0);\n    __decorate([\n        Property('isChecked')\n    ], FieldsSettings.prototype, \"isChecked\", void 0);\n    __decorate([\n        Property('parentID')\n    ], FieldsSettings.prototype, \"parentID\", void 0);\n    __decorate([\n        Property(null)\n    ], FieldsSettings.prototype, \"query\", void 0);\n    __decorate([\n        Property('selected')\n    ], FieldsSettings.prototype, \"selected\", void 0);\n    __decorate([\n        Property(null)\n    ], FieldsSettings.prototype, \"tableName\", void 0);\n    __decorate([\n        Property('text')\n    ], FieldsSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property('tooltip')\n    ], FieldsSettings.prototype, \"tooltip\", void 0);\n    __decorate([\n        Property('navigateUrl')\n    ], FieldsSettings.prototype, \"navigateUrl\", void 0);\n    return FieldsSettings;\n}(ChildProperty));\nexport { FieldsSettings };\n/**\n * Configures animation settings for the TreeView component.\n */\nvar ActionSettings = /** @class */ (function (_super) {\n    __extends(ActionSettings, _super);\n    function ActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('SlideDown')\n    ], ActionSettings.prototype, \"effect\", void 0);\n    __decorate([\n        Property(400)\n    ], ActionSettings.prototype, \"duration\", void 0);\n    __decorate([\n        Property('linear')\n    ], ActionSettings.prototype, \"easing\", void 0);\n    return ActionSettings;\n}(ChildProperty));\nexport { ActionSettings };\n/**\n * Configures the animation settings for expanding and collapsing nodes in TreeView.\n */\nvar NodeAnimationSettings = /** @class */ (function (_super) {\n    __extends(NodeAnimationSettings, _super);\n    function NodeAnimationSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, ActionSettings)\n    ], NodeAnimationSettings.prototype, \"collapse\", void 0);\n    __decorate([\n        Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, ActionSettings)\n    ], NodeAnimationSettings.prototype, \"expand\", void 0);\n    return NodeAnimationSettings;\n}(ChildProperty));\nexport { NodeAnimationSettings };\n/**\n * The TreeView component is used to represent hierarchical data in a tree like structure with advanced\n * functions to perform edit, drag and drop, selection with check-box, and more.\n * ```html\n *  <div id=\"tree\"></div>\n * ```\n * ```typescript\n *  let treeObj: TreeView = new TreeView();\n *  treeObj.appendTo('#tree');\n * ```\n */\nvar TreeView = /** @class */ (function (_super) {\n    __extends(TreeView, _super);\n    function TreeView(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.preventExpand = false;\n        _this.checkedElement = [];\n        _this.mouseDownStatus = false;\n        return _this;\n    }\n    TreeView_1 = TreeView;\n    /**\n     * Get component name.\n     * @returns string\n     * @private\n     */\n    TreeView.prototype.getModuleName = function () {\n        return 'treeview';\n    };\n    /**\n     * Initialize the event handler\n     */\n    TreeView.prototype.preRender = function () {\n        var _this = this;\n        this.checkActionNodes = [];\n        this.dragStartAction = false;\n        this.isAnimate = false;\n        this.keyConfigs = {\n            escape: 'escape',\n            end: 'end',\n            enter: 'enter',\n            f2: 'f2',\n            home: 'home',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlUp: 'ctrl+uparrow',\n            ctrlEnter: 'ctrl+enter',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            ctrlA: 'ctrl+A',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftEnter: 'shift+enter',\n            shiftHome: 'shift+home',\n            shiftEnd: 'shift+end',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            csEnter: 'ctrl+shift+enter',\n            csHome: 'ctrl+shift+home',\n            csEnd: 'ctrl+shift+end',\n            space: 'space',\n        };\n        this.listBaseOption = {\n            expandCollapse: true,\n            showIcon: true,\n            expandIconClass: EXPANDABLE,\n            ariaAttributes: treeAriaAttr,\n            expandIconPosition: 'Left',\n            itemCreated: function (e) {\n                _this.beforeNodeCreate(e);\n            },\n        };\n        this.updateListProp(this.fields);\n        this.aniObj = new Animation({});\n        this.treeList = [];\n        this.isLoaded = false;\n        this.isInitalExpand = false;\n        this.index = 0;\n        this.setTouchClass();\n        if (isNOU(this.selectedNodes)) {\n            this.setProperties({ selectedNodes: [] }, true);\n        }\n        if (isNOU(this.checkedNodes)) {\n            this.setProperties({ checkedNodes: [] }, true);\n        }\n        if (isNOU(this.expandedNodes)) {\n            this.setProperties({ expandedNodes: [] }, true);\n        }\n        else {\n            this.isInitalExpand = true;\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @returns string\n     * @hidden\n     */\n    TreeView.prototype.getPersistData = function () {\n        var keyEntity = ['selectedNodes', 'checkedNodes', 'expandedNodes'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To Initialize the control rendering\n     * @private\n     */\n    TreeView.prototype.render = function () {\n        this.initialRender = true;\n        this.initialize();\n        this.setDataBinding();\n        this.setExpandOnType();\n        this.setRipple();\n        this.wireEditingEvents(this.allowEditing);\n        this.setDragAndDrop(this.allowDragAndDrop);\n        this.wireEvents();\n        this.initialRender = false;\n    };\n    TreeView.prototype.initialize = function () {\n        this.element.setAttribute('role', 'tree');\n        this.element.setAttribute('tabindex', '0');\n        this.element.setAttribute('aria-activedescendant', this.element.id + '_active');\n        this.setCssClass(null, this.cssClass);\n        this.setEnableRtl();\n        this.setFullRow(this.fullRowSelect);\n        this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n    };\n    TreeView.prototype.setEnableRtl = function () {\n        this.enableRtl ? addClass([this.element], RTL) : removeClass([this.element], RTL);\n    };\n    TreeView.prototype.setRipple = function () {\n        var tempStr = '.' + FULLROW + ',.' + TEXTWRAP;\n        var rippleModel = {\n            selector: tempStr,\n            ignore: '.' + TEXTWRAP + ' > .' + ICON + ',.' + INPUTGROUP + ',.' + INPUT + ', .' + CHECKBOXWRAP\n        };\n        this.rippleFn = rippleEffect(this.element, rippleModel);\n        var iconModel = {\n            selector: '.' + TEXTWRAP + ' > .' + ICON,\n            isCenterRipple: true,\n        };\n        this.rippleIconFn = rippleEffect(this.element, iconModel);\n    };\n    TreeView.prototype.setFullRow = function (isEnabled) {\n        isEnabled ? addClass([this.element], FULLROWWRAP) : removeClass([this.element], FULLROWWRAP);\n    };\n    TreeView.prototype.setMultiSelect = function (isEnabled) {\n        var firstUl = select('.' + PARENTITEM, this.element);\n        if (isEnabled) {\n            firstUl.setAttribute('aria-multiselectable', 'true');\n        }\n        else {\n            firstUl.removeAttribute('aria-multiselectable');\n        }\n    };\n    TreeView.prototype.templateComplier = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    TreeView.prototype.setDataBinding = function () {\n        var _this = this;\n        this.treeList.push('false');\n        if (this.fields.dataSource instanceof DataManager) {\n            this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function (e) {\n                _this.treeList.pop();\n                _this.treeData = e.result;\n                _this.isNumberTypeId = _this.getType();\n                _this.setRootData();\n                _this.renderItems(true);\n                if (_this.treeList.length === 0 && !_this.isLoaded) {\n                    _this.finalize();\n                }\n            });\n        }\n        else {\n            this.treeList.pop();\n            if (isNOU(this.fields.dataSource)) {\n                this.rootData = this.treeData = [];\n            }\n            else {\n                this.treeData = JSON.parse(JSON.stringify(this.fields.dataSource));\n                this.setRootData();\n            }\n            this.isNumberTypeId = this.getType();\n            this.renderItems(false);\n        }\n        if (this.treeList.length === 0 && !this.isLoaded) {\n            this.finalize();\n        }\n    };\n    TreeView.prototype.getQuery = function (mapper, value) {\n        if (value === void 0) { value = null; }\n        var columns = [];\n        var query;\n        if (!mapper.query) {\n            query = new Query();\n            var prop = this.getActualProperties(mapper);\n            for (var _i = 0, _a = Object.keys(prop); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (col !== 'dataSource' && col !== 'tableName' && col !== 'child' && !!mapper[col]\n                    && columns.indexOf(mapper[col]) === -1) {\n                    columns.push(mapper[col]);\n                }\n            }\n            query.select(columns);\n            if (prop.hasOwnProperty('tableName')) {\n                query.from(mapper.tableName);\n            }\n        }\n        else {\n            query = mapper.query.clone();\n        }\n        ListBase.addSorting(this.sortOrder, mapper.text, query);\n        if (!isNOU(value) && !isNOU(mapper.parentID)) {\n            query.where(mapper.parentID, 'equal', (this.isNumberTypeId ? parseFloat(value) : value));\n        }\n        return query;\n    };\n    TreeView.prototype.getType = function () {\n        return this.treeData[0] ? ((typeof getValue(this.fields.id, this.treeData[0]) === 'number') ? true : false) : false;\n    };\n    TreeView.prototype.setRootData = function () {\n        this.dataType = this.getDataType(this.treeData, this.fields);\n        if (this.dataType === 1) {\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n            var rootItems = this.getChildNodes(this.treeData, undefined, true);\n            if (isNOU(rootItems)) {\n                this.rootData = [];\n            }\n            else {\n                this.rootData = rootItems;\n            }\n        }\n        else {\n            this.rootData = this.treeData;\n        }\n    };\n    TreeView.prototype.renderItems = function (isSorted) {\n        this.listBaseOption.ariaAttributes.level = 1;\n        this.ulElement = ListBase.createList(this.createElement, isSorted ? this.rootData : this.getSortedData(this.rootData), this.listBaseOption);\n        this.element.appendChild(this.ulElement);\n        this.finalizeNode(this.element);\n    };\n    TreeView.prototype.beforeNodeCreate = function (e) {\n        if (this.showCheckBox) {\n            var checkboxEle = createCheckBox(this.createElement, true, { cssClass: this.touchClass });\n            var icon = select('div.' + ICON, e.item);\n            var id = e.item.getAttribute('data-uid');\n            e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[isNOU(icon) ? 0 : 1]);\n            var checkValue = getValue(e.fields.isChecked, e.curData);\n            if (this.checkedNodes.indexOf(id) > -1) {\n                select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n                checkboxEle.setAttribute('aria-checked', 'true');\n                this.addCheck(e.item);\n            }\n            else if (!isNOU(checkValue) && checkValue.toString() === 'true') {\n                select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n                checkboxEle.setAttribute('aria-checked', 'true');\n                this.addCheck(e.item);\n            }\n            else {\n                checkboxEle.setAttribute('aria-checked', 'false');\n            }\n            var frame = select('.' + CHECKBOXFRAME, checkboxEle);\n            EventHandler.add(frame, 'mousedown', this.frameMouseHandler, this);\n            EventHandler.add(frame, 'mouseup', this.frameMouseHandler, this);\n        }\n        if (this.fullRowSelect) {\n            this.createFullRow(e.item);\n        }\n        if (this.allowMultiSelection && !e.item.classList.contains(SELECTED)) {\n            e.item.setAttribute('aria-selected', 'false');\n        }\n        var fields = e.fields;\n        this.addActionClass(e, fields.selected, SELECTED);\n        this.addActionClass(e, fields.expanded, EXPANDED);\n        if (!isNOU(this.nodeTemplateFn)) {\n            var textEle = e.item.querySelector('.' + LISTTEXT);\n            textEle.innerHTML = '';\n            append(this.nodeTemplateFn(e.curData), textEle);\n        }\n        var eventArgs = {\n            node: e.item,\n            nodeData: e.curData,\n            text: e.text,\n        };\n        this.trigger('drawNode', eventArgs);\n    };\n    TreeView.prototype.frameMouseHandler = function (e) {\n        var rippleSpan = select('.' + CHECKBOXRIPPLE, e.target.parentElement);\n        rippleMouseHandler(e, rippleSpan);\n    };\n    TreeView.prototype.addActionClass = function (e, action, cssClass) {\n        var data = e.curData;\n        var actionValue = getValue(action, data);\n        if (!isNOU(actionValue) && actionValue.toString() !== 'false') {\n            e.item.classList.add(cssClass);\n        }\n    };\n    TreeView.prototype.getDataType = function (ds, mapper) {\n        if (this.fields.dataSource instanceof DataManager) {\n            for (var i = 0; i < ds.length; i++) {\n                if ((typeof mapper.child === 'string') && isNOU(getValue(mapper.child, ds[i]))) {\n                    return 1;\n                }\n            }\n            return 2;\n        }\n        for (var i = 0, len = ds.length; i < len; i++) {\n            if ((typeof mapper.child === 'string') && !isNOU(getValue(mapper.child, ds[i]))) {\n                return 2;\n            }\n            if (!isNOU(getValue(mapper.parentID, ds[i])) || !isNOU(getValue(mapper.hasChildren, ds[i]))) {\n                return 1;\n            }\n        }\n        return 1;\n    };\n    TreeView.prototype.getGroupedData = function (dataSource, groupBy) {\n        var cusQuery = new Query().group(groupBy);\n        var ds = ListBase.getDataSource(dataSource, cusQuery);\n        var grpItem = [];\n        for (var j = 0; j < ds.length; j++) {\n            var itemObj = ds[j].items;\n            grpItem.push(itemObj);\n        }\n        return grpItem;\n    };\n    TreeView.prototype.getSortedData = function (list) {\n        if (list && this.sortOrder !== 'None') {\n            list = ListBase.getDataSource(list, ListBase.addSorting(this.sortOrder, this.fields.text));\n        }\n        return list;\n    };\n    TreeView.prototype.finalizeNode = function (element) {\n        var iNodes = selectAll('.' + IMAGE, element);\n        for (var k = 0; k < iNodes.length; k++) {\n            iNodes[k].setAttribute('alt', IMAGE);\n        }\n        if (this.isLoaded) {\n            var sNodes = selectAll('.' + SELECTED, element);\n            for (var i = 0; i < sNodes.length; i++) {\n                this.selectNode(sNodes[i], null);\n                break;\n            }\n            removeClass(sNodes, SELECTED);\n        }\n        var cNodes = selectAll('.' + LISTITEM + ':not(.' + EXPANDED + ')', element);\n        for (var j = 0; j < cNodes.length; j++) {\n            var icon = select('div.' + ICON, cNodes[j]);\n            if (icon && icon.classList.contains(EXPANDABLE)) {\n                this.disableExpandAttr(cNodes[j]);\n            }\n        }\n        var eNodes = selectAll('.' + EXPANDED, element);\n        if (!this.isInitalExpand) {\n            for (var i = 0; i < eNodes.length; i++) {\n                this.renderChildNodes(eNodes[i]);\n            }\n        }\n        removeClass(eNodes, EXPANDED);\n        this.updateList();\n        if (this.isLoaded) {\n            this.updateCheckedProp();\n        }\n    };\n    TreeView.prototype.updateCheckedProp = function () {\n        var _this = this;\n        if (this.showCheckBox) {\n            var nodes_1 = [].concat([], this.checkedNodes);\n            this.checkedNodes.forEach(function (value, index) {\n                var checkBox = _this.element.querySelector('[data-uid=\"' + value + '\"]');\n                if (isNOU(checkBox)) {\n                    nodes_1 = nodes_1.filter(function (e) { return e !== value; });\n                }\n            });\n            this.setProperties({ checkedNodes: nodes_1 }, true);\n        }\n    };\n    TreeView.prototype.ensureParentCheckState = function (element) {\n        if (!isNOU(element)) {\n            if (element.classList.contains(ROOT)) {\n                return;\n            }\n            var ulElement = element;\n            if (element.classList.contains(LISTITEM)) {\n                ulElement = select('.' + PARENTITEM, element);\n            }\n            var checkedNodes = selectAll('.' + CHECK, ulElement);\n            var nodes = selectAll('.' + LISTITEM, ulElement);\n            var checkBoxEle = element.getElementsByClassName(CHECKBOXWRAP)[0];\n            if (nodes.length === checkedNodes.length) {\n                this.changeState(checkBoxEle, 'check', null, true, true);\n            }\n            else if (checkedNodes.length > 0) {\n                this.changeState(checkBoxEle, 'indeterminate', null, true, true);\n            }\n            else if (checkedNodes.length === 0) {\n                this.changeState(checkBoxEle, 'uncheck', null, true, true);\n            }\n            var parentUL = closest(element, '.' + PARENTITEM);\n            if (!isNOU(parentUL)) {\n                var currentParent = closest(parentUL, '.' + LISTITEM);\n                this.ensureParentCheckState(currentParent);\n            }\n        }\n    };\n    TreeView.prototype.ensureChildCheckState = function (element, e) {\n        if (!isNOU(element)) {\n            var childElement = select('.' + PARENTITEM, element);\n            var checkBoxes = void 0;\n            if (!isNOU(childElement)) {\n                checkBoxes = selectAll('.' + CHECKBOXWRAP, childElement);\n                var isChecked = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n                var checkedState = void 0;\n                for (var index = 0; index < checkBoxes.length; index++) {\n                    if (!isNOU(this.currentLoadData) && !isNOU(getValue(this.fields.isChecked, this.currentLoadData[index]))) {\n                        checkedState = getValue(this.fields.isChecked, this.currentLoadData[index]) ? 'check' : 'uncheck';\n                        if (this.ele !== -1) {\n                            checkedState = isChecked ? 'check' : 'uncheck';\n                        }\n                    }\n                    else {\n                        var isNodeChecked = checkBoxes[index].getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n                        checkedState = (!this.isLoaded && isNodeChecked) ? 'check' : (isChecked ? 'check' : 'uncheck');\n                    }\n                    this.changeState(checkBoxes[index], checkedState, e, true, true);\n                }\n            }\n        }\n    };\n    TreeView.prototype.doCheckBoxAction = function (nodes, doCheck) {\n        if (!isNOU(nodes)) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                var liEle = this.getElement(nodes[i]);\n                if (isNOU(liEle)) {\n                    continue;\n                }\n                var checkBox = select('.' + PARENTITEM + ' .' + CHECKBOXWRAP, liEle);\n                this.validateCheckNode(checkBox, !doCheck, liEle, null);\n            }\n        }\n        else {\n            var checkBoxes = selectAll('.' + CHECKBOXWRAP, this.element);\n            for (var index = 0; index < checkBoxes.length; index++) {\n                this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck');\n            }\n        }\n    };\n    TreeView.prototype.changeState = function (wrapper, state, e, isPrevent, isAdd) {\n        var ariaState;\n        var eventArgs;\n        var currLi = closest(wrapper, '.' + LISTITEM);\n        if (!isPrevent) {\n            this.checkActionNodes = [];\n            eventArgs = this.getCheckEvent(currLi, state, e);\n            this.trigger('nodeChecking', eventArgs);\n            if (eventArgs.cancel) {\n                return;\n            }\n        }\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK);\n            this.addCheck(currLi);\n            ariaState = 'true';\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK, INDETERMINATE]);\n            this.removeCheck(currLi);\n            ariaState = 'false';\n        }\n        else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n            frameSpan.classList.remove(CHECK);\n            frameSpan.classList.add(INDETERMINATE);\n            this.removeCheck(currLi);\n            ariaState = 'mixed';\n        }\n        ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n        if (!isNOU(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n        if (isAdd) {\n            var data = [].concat([], this.checkActionNodes);\n            eventArgs = this.getCheckEvent(currLi, state, e);\n            if (isUndefined(isPrevent)) {\n                eventArgs.data = data;\n            }\n        }\n        if (!isPrevent) {\n            if (!isNOU(ariaState)) {\n                wrapper.setAttribute('aria-checked', ariaState);\n                eventArgs.data[0].checked = ariaState;\n                this.trigger('nodeChecked', eventArgs);\n                this.checkActionNodes = [];\n            }\n        }\n    };\n    TreeView.prototype.addCheck = function (liEle) {\n        var id = liEle.getAttribute('data-uid');\n        if (!isNOU(id) && this.checkedNodes.indexOf(id) === -1) {\n            this.checkedNodes.push(id);\n        }\n    };\n    TreeView.prototype.removeCheck = function (liEle) {\n        var index = this.checkedNodes.indexOf(liEle.getAttribute('data-uid'));\n        if (index > -1) {\n            this.checkedNodes.splice(index, 1);\n        }\n    };\n    TreeView.prototype.getCheckEvent = function (currLi, action, e) {\n        this.checkActionNodes.push(this.getNodeData(currLi));\n        var nodeData = this.checkActionNodes;\n        return { action: action, cancel: false, isInteracted: isNOU(e) ? false : true, node: currLi, data: nodeData };\n    };\n    TreeView.prototype.finalize = function () {\n        var firstUl = select('.' + PARENTITEM, this.element);\n        firstUl.setAttribute('role', treeAriaAttr.treeRole);\n        this.setMultiSelect(this.allowMultiSelection);\n        var firstNode = select('.' + LISTITEM, this.element);\n        if (firstNode) {\n            addClass([firstNode], FOCUS);\n            this.updateIdAttr(null, firstNode);\n        }\n        this.hasPid = this.rootData[0] ? this.rootData[0].hasOwnProperty(this.fields.parentID) : false;\n        this.doExpandAction();\n    };\n    TreeView.prototype.doExpandAction = function () {\n        var eUids = this.expandedNodes;\n        if (this.isInitalExpand && eUids.length > 0) {\n            this.setProperties({ expandedNodes: [] }, true);\n            if (this.fields.dataSource instanceof DataManager) {\n                this.expandGivenNodes(eUids);\n            }\n            else {\n                for (var i = 0; i < eUids.length; i++) {\n                    var eNode = select('[data-uid=\"' + eUids[i] + '\"]', this.element);\n                    if (!isNOU(eNode)) {\n                        var icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, eNode));\n                        if (!isNOU(icon)) {\n                            this.expandAction(eNode, icon, null);\n                        }\n                    }\n                }\n                this.afterFinalized();\n            }\n        }\n        else {\n            this.afterFinalized();\n        }\n    };\n    TreeView.prototype.expandGivenNodes = function (arr) {\n        var proxy = this;\n        this.expandCallback(arr[this.index], function () {\n            proxy.index++;\n            if (proxy.index < arr.length) {\n                proxy.expandGivenNodes(arr);\n            }\n            else {\n                proxy.afterFinalized();\n            }\n        });\n    };\n    TreeView.prototype.expandCallback = function (eUid, callback) {\n        var eNode = select('[data-uid=\"' + eUid + '\"]', this.element);\n        if (!isNOU(eNode)) {\n            var icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, eNode));\n            if (!isNOU(icon)) {\n                this.expandAction(eNode, icon, null, false, callback);\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            callback();\n        }\n    };\n    TreeView.prototype.afterFinalized = function () {\n        this.doSelectionAction();\n        this.updateCheckedProp();\n        this.isLoaded = true;\n        this.isAnimate = true;\n        this.isInitalExpand = false;\n        var eventArgs = { data: this.treeData };\n        this.trigger('dataBound', eventArgs);\n    };\n    TreeView.prototype.doSelectionAction = function () {\n        var sNodes = selectAll('.' + SELECTED, this.element);\n        var sUids = this.selectedNodes;\n        if (sUids.length > 0) {\n            this.setProperties({ selectedNodes: [] }, true);\n            for (var i = 0; i < sUids.length; i++) {\n                var sNode = select('[data-uid=\"' + sUids[i] + '\"]', this.element);\n                this.selectNode(sNode, null, true);\n                if (!this.allowMultiSelection) {\n                    break;\n                }\n            }\n        }\n        else {\n            this.selectGivenNodes(sNodes);\n        }\n        removeClass(sNodes, SELECTED);\n    };\n    TreeView.prototype.selectGivenNodes = function (sNodes) {\n        for (var i = 0; i < sNodes.length; i++) {\n            if (!sNodes[i].classList.contains('e-disable')) {\n                this.selectNode(sNodes[i], null, true);\n            }\n            if (!this.allowMultiSelection) {\n                break;\n            }\n        }\n    };\n    TreeView.prototype.clickHandler = function (event) {\n        var target = event.originalEvent.target;\n        EventHandler.remove(this.element, 'contextmenu', this.preventContextMenu);\n        if (!target || this.dragStartAction) {\n            return;\n        }\n        else {\n            var classList = target.classList;\n            var li = closest(target, '.' + LISTITEM);\n            if (!li) {\n                return;\n            }\n            else {\n                this.removeHover();\n                this.setFocusElement(li);\n                if (this.showCheckBox && !li.classList.contains('e-disable')) {\n                    var checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n                    if (!isNOU(checkWrapper)) {\n                        var checkElement = select('.' + CHECKBOXFRAME, checkWrapper);\n                        this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK), li, event.originalEvent);\n                        this.triggerClickEvent(event.originalEvent, li);\n                        return;\n                    }\n                }\n                if (classList.contains(EXPANDABLE)) {\n                    this.expandAction(li, target, event);\n                }\n                else if (classList.contains(COLLAPSIBLE)) {\n                    this.collapseNode(li, target, event);\n                }\n                else {\n                    if (!classList.contains(PARENTITEM) && !classList.contains(LISTITEM)) {\n                        this.toggleSelect(li, event.originalEvent, false);\n                    }\n                }\n                this.triggerClickEvent(event.originalEvent, li);\n            }\n        }\n    };\n    TreeView.prototype.nodeCheckingEvent = function (wrapper, isCheck, e) {\n        var currLi = closest(wrapper, '.' + LISTITEM);\n        this.checkActionNodes = [];\n        var ariaState = !isCheck ? 'true' : 'false';\n        if (!isNOU(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n        var eventArgs = this.getCheckEvent(currLi, isCheck ? 'uncheck' : 'check', e);\n        this.trigger('nodeChecking', eventArgs);\n        return eventArgs;\n    };\n    TreeView.prototype.nodeCheckedEvent = function (wrapper, isCheck, e) {\n        var currLi = closest(wrapper, '.' + LISTITEM);\n        var eventArgs = this.getCheckEvent(wrapper, isCheck ? 'uncheck' : 'check', e);\n        eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);\n        this.trigger('nodeChecked', eventArgs);\n    };\n    TreeView.prototype.triggerClickEvent = function (e, li) {\n        var eventArgs = {\n            event: e,\n            node: li,\n        };\n        this.trigger('nodeClicked', eventArgs);\n    };\n    TreeView.prototype.expandNode = function (currLi, icon) {\n        var _this = this;\n        if (icon.classList.contains(LOAD)) {\n            this.hideSpinner(icon);\n        }\n        if (!this.initialRender) {\n            icon.classList.add('interaction');\n        }\n        if (this.preventExpand !== true) {\n            removeClass([icon], EXPANDABLE);\n            addClass([icon], COLLAPSIBLE);\n            var start_1 = 0;\n            var end_1 = 0;\n            var proxy_1 = this;\n            var ul_1 = select('.' + PARENTITEM, currLi);\n            var liEle_1 = currLi;\n            this.setHeight(liEle_1, ul_1);\n            if (this.isAnimate) {\n                this.aniObj.animate(ul_1, {\n                    name: this.animation.expand.effect,\n                    duration: this.animation.expand.duration,\n                    timingFunction: this.animation.expand.easing,\n                    begin: function (args) {\n                        liEle_1.style.overflow = 'hidden';\n                        start_1 = liEle_1.offsetHeight;\n                        end_1 = select('.' + TEXTWRAP, currLi).offsetHeight;\n                    },\n                    progress: function (args) {\n                        args.element.style.display = 'block';\n                        proxy_1.animateHeight(args, start_1, end_1);\n                    },\n                    end: function (args) {\n                        args.element.style.display = 'block';\n                        _this.expandedNode(liEle_1, ul_1, icon);\n                    }\n                });\n            }\n            else {\n                this.expandedNode(liEle_1, ul_1, icon);\n            }\n        }\n        else {\n            var ul = select('.' + PARENTITEM, currLi);\n            ul.style.display = 'none';\n            if (this.fields.dataSource instanceof DataManager === true) {\n                this.preventExpand = false;\n            }\n        }\n        if (this.initialRender) {\n            icon.classList.add('interaction');\n        }\n    };\n    TreeView.prototype.expandedNode = function (currLi, ul, icon) {\n        ul.style.display = 'block';\n        currLi.style.display = 'block';\n        currLi.style.overflow = '';\n        currLi.style.height = '';\n        removeClass([icon], PROCESS);\n        this.addExpand(currLi);\n        if (this.isLoaded && this.expandArgs) {\n            this.expandArgs = this.getExpandEvent(currLi, null);\n            this.trigger('nodeExpanded', this.expandArgs);\n        }\n    };\n    TreeView.prototype.addExpand = function (liEle) {\n        liEle.setAttribute('aria-expanded', 'true');\n        removeClass([liEle], NODECOLLAPSED);\n        var id = liEle.getAttribute('data-uid');\n        if (!isNOU(id) && this.expandedNodes.indexOf(id) === -1) {\n            this.expandedNodes.push(id);\n        }\n    };\n    TreeView.prototype.collapseNode = function (currLi, icon, e) {\n        var _this = this;\n        if (icon.classList.contains(PROCESS)) {\n            return;\n        }\n        else {\n            addClass([icon], PROCESS);\n        }\n        var colArgs;\n        if (this.isLoaded) {\n            colArgs = this.getExpandEvent(currLi, e);\n            this.trigger('nodeCollapsing', colArgs);\n            if (colArgs.cancel) {\n                removeClass([icon], PROCESS);\n                return;\n            }\n        }\n        removeClass([icon], COLLAPSIBLE);\n        addClass([icon], EXPANDABLE);\n        var start = 0;\n        var end = 0;\n        var proxy = this;\n        var ul = select('.' + PARENTITEM, currLi);\n        var liEle = currLi;\n        if (this.isAnimate) {\n            this.aniObj.animate(ul, {\n                name: this.animation.collapse.effect,\n                duration: this.animation.collapse.duration,\n                timingFunction: this.animation.collapse.easing,\n                begin: function (args) {\n                    liEle.style.overflow = 'hidden';\n                    start = select('.' + TEXTWRAP, currLi).offsetHeight;\n                    end = liEle.offsetHeight;\n                },\n                progress: function (args) {\n                    proxy.animateHeight(args, start, end);\n                },\n                end: function (args) {\n                    args.element.style.display = 'none';\n                    _this.collapsedNode(liEle, ul, icon, colArgs);\n                }\n            });\n        }\n        else {\n            this.collapsedNode(liEle, ul, icon, colArgs);\n        }\n    };\n    TreeView.prototype.collapsedNode = function (liEle, ul, icon, colArgs) {\n        ul.style.display = 'none';\n        liEle.style.overflow = '';\n        liEle.style.height = '';\n        removeClass([icon], PROCESS);\n        this.removeExpand(liEle);\n        if (this.isLoaded) {\n            this.trigger('nodeCollapsed', colArgs);\n        }\n    };\n    TreeView.prototype.removeExpand = function (liEle, toRemove) {\n        if (toRemove) {\n            liEle.removeAttribute('aria-expanded');\n        }\n        else {\n            this.disableExpandAttr(liEle);\n        }\n        var index = this.expandedNodes.indexOf(liEle.getAttribute('data-uid'));\n        if (index > -1) {\n            this.expandedNodes.splice(index, 1);\n        }\n    };\n    TreeView.prototype.disableExpandAttr = function (liEle) {\n        liEle.setAttribute('aria-expanded', 'false');\n        addClass([liEle], NODECOLLAPSED);\n    };\n    TreeView.prototype.setHeight = function (currLi, ul) {\n        ul.style.display = 'block';\n        ul.style.visibility = 'hidden';\n        currLi.style.height = currLi.offsetHeight + 'px';\n        ul.style.display = 'none';\n        ul.style.visibility = '';\n    };\n    TreeView.prototype.animateHeight = function (args, start, end) {\n        var remaining = (args.duration - args.timeStamp) / args.duration;\n        var currentHeight = (end - start) * remaining + start;\n        args.element.parentElement.style.height = currentHeight + 'px';\n    };\n    TreeView.prototype.renderChildNodes = function (parentLi, expandChild, callback) {\n        var _this = this;\n        var eicon = select('div.' + ICON, parentLi);\n        if (isNOU(eicon)) {\n            return;\n        }\n        this.showSpinner(eicon);\n        var childItems;\n        if (this.fields.dataSource instanceof DataManager) {\n            var level = this.parents(parentLi, '.' + PARENTITEM).length;\n            var mapper_1 = this.getChildFields(this.fields, level, 1);\n            if (isNOU(mapper_1) || isNOU(mapper_1.dataSource)) {\n                detach(eicon);\n                this.removeExpand(parentLi, true);\n                return;\n            }\n            this.treeList.push('false');\n            mapper_1.dataSource.executeQuery(this.getQuery(mapper_1, parentLi.getAttribute('data-uid'))).then(function (e) {\n                _this.treeList.pop();\n                childItems = e.result;\n                _this.currentLoadData = childItems;\n                if (isNOU(childItems) || childItems.length === 0) {\n                    detach(eicon);\n                    _this.removeExpand(parentLi, true);\n                }\n                else {\n                    _this.updateListProp(mapper_1);\n                    if (_this.fields.dataSource instanceof DataManager && !(_this.fields.dataSource.dataSource.offline &&\n                        _this.fields.dataSource.dataSource.dataType !== 'json')) {\n                        var id = parentLi.getAttribute('data-uid');\n                        var nodeData = _this.getNodeObject(id);\n                        setValue('child', childItems, nodeData);\n                    }\n                    _this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n                    parentLi.appendChild(ListBase.createList(_this.createElement, childItems, _this.listBaseOption));\n                    _this.expandNode(parentLi, eicon);\n                    _this.ensureCheckNode(parentLi);\n                    _this.finalizeNode(parentLi);\n                    _this.renderSubChild(parentLi, expandChild);\n                }\n                if (callback) {\n                    callback();\n                }\n                if (_this.treeList.length === 0 && !_this.isLoaded) {\n                    _this.finalize();\n                }\n            });\n        }\n        else {\n            childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n            this.currentLoadData = childItems;\n            if (isNOU(childItems) || childItems.length === 0) {\n                detach(eicon);\n                this.removeExpand(parentLi, true);\n                return;\n            }\n            else {\n                this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n                parentLi.appendChild(ListBase.createList(this.createElement, this.getSortedData(childItems), this.listBaseOption));\n                this.expandNode(parentLi, eicon);\n                this.ensureCheckNode(parentLi);\n                this.finalizeNode(parentLi);\n                this.renderSubChild(parentLi, expandChild);\n            }\n        }\n    };\n    TreeView.prototype.ensureCheckNode = function (element) {\n        if (this.showCheckBox) {\n            this.ele = (this.checkedElement) ? this.checkedElement.indexOf(element.getAttribute('data-uid')) : null;\n            this.ensureChildCheckState(element);\n            this.ensureParentCheckState(element);\n        }\n        this.currentLoadData = null;\n    };\n    TreeView.prototype.getFields = function (mapper, nodeLevel, dataLevel) {\n        if (nodeLevel === dataLevel) {\n            return mapper;\n        }\n        else {\n            return this.getFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n        }\n    };\n    TreeView.prototype.getChildFields = function (mapper, nodeLevel, dataLevel) {\n        var childData;\n        if (nodeLevel === dataLevel) {\n            return this.getChildMapper(mapper);\n        }\n        else {\n            return this.getChildFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n        }\n    };\n    TreeView.prototype.getChildMapper = function (mapper) {\n        return (typeof mapper.child === 'string' || isNOU(mapper.child)) ? mapper : mapper.child;\n    };\n    TreeView.prototype.getChildNodes = function (obj, parentId, isRoot) {\n        if (isRoot === void 0) { isRoot = false; }\n        var childNodes;\n        if (isNOU(obj)) {\n            return childNodes;\n        }\n        else if (this.dataType === 1) {\n            return this.getChildGroup(this.groupedData, parentId, isRoot);\n        }\n        else {\n            if (typeof this.fields.child === 'string') {\n                for (var i = 0, objlen = obj.length; i < objlen; i++) {\n                    var dataId = getValue(this.fields.id, obj[i]);\n                    if (dataId && dataId.toString() === parentId) {\n                        return getValue(this.fields.child, obj[i]);\n                    }\n                    else if (!isNOU(getValue(this.fields.child, obj[i]))) {\n                        childNodes = this.getChildNodes(getValue(this.fields.child, obj[i]), parentId);\n                        if (childNodes !== undefined) {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return childNodes;\n    };\n    TreeView.prototype.getChildGroup = function (data, parentId, isRoot) {\n        var childNodes;\n        if (isNOU(data)) {\n            return childNodes;\n        }\n        for (var i = 0, objlen = data.length; i < objlen; i++) {\n            if (!isNOU(data[i][0]) && !isNOU(getValue(this.fields.parentID, data[i][0]))) {\n                if (getValue(this.fields.parentID, data[i][0]).toString() === parentId) {\n                    return data[i];\n                }\n            }\n            else if (isRoot) {\n                return data[i];\n            }\n            else {\n                return [];\n            }\n        }\n        return childNodes;\n    };\n    TreeView.prototype.renderSubChild = function (element, expandChild) {\n        if (expandChild) {\n            var cIcons = selectAll('.' + EXPANDABLE, element);\n            for (var i = 0, len = cIcons.length; i < len; i++) {\n                var icon = cIcons[i];\n                var curLi = closest(icon, '.' + LISTITEM);\n                this.expandArgs = this.getExpandEvent(curLi, null);\n                this.trigger('nodeExpanding', this.expandArgs);\n                this.renderChildNodes(curLi, expandChild);\n            }\n        }\n    };\n    TreeView.prototype.toggleSelect = function (li, e, multiSelect) {\n        if (!li.classList.contains('e-disable')) {\n            if (this.allowMultiSelection && ((e && e.ctrlKey) || multiSelect) && this.isActive(li)) {\n                this.unselectNode(li, e);\n            }\n            else {\n                this.selectNode(li, e, multiSelect);\n            }\n        }\n    };\n    TreeView.prototype.isActive = function (li) {\n        return li.classList.contains(ACTIVE) ? true : false;\n    };\n    TreeView.prototype.selectNode = function (li, e, multiSelect) {\n        if (isNOU(li) || (!this.allowMultiSelection && this.isActive(li) && !isNOU(e))) {\n            this.setFocusElement(li);\n            return;\n        }\n        var eventArgs;\n        if (this.isLoaded) {\n            eventArgs = this.getSelectEvent(li, 'select', e);\n            this.trigger('nodeSelecting', eventArgs);\n            if (eventArgs.cancel) {\n                return;\n            }\n        }\n        if (!this.allowMultiSelection || (!multiSelect && (!e || (e && !e.ctrlKey)))) {\n            this.removeSelectAll();\n        }\n        if (this.allowMultiSelection && e && e.shiftKey) {\n            if (!this.startNode) {\n                this.startNode = li;\n            }\n            var startIndex = this.liList.indexOf(this.startNode);\n            var endIndex = this.liList.indexOf(li);\n            if (startIndex > endIndex) {\n                var temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (var i = startIndex; i <= endIndex; i++) {\n                var currNode = this.liList[i];\n                if (isVisible(currNode) && !currNode.classList.contains('e-disable')) {\n                    this.addSelect(currNode);\n                }\n            }\n        }\n        else {\n            this.startNode = li;\n            this.addSelect(li);\n        }\n        this.setFocusElement(li);\n        if (this.isLoaded) {\n            eventArgs.nodeData = this.getNodeData(li);\n            this.trigger('nodeSelected', eventArgs);\n        }\n    };\n    TreeView.prototype.unselectNode = function (li, e) {\n        var eventArgs;\n        if (this.isLoaded) {\n            eventArgs = this.getSelectEvent(li, 'un-select', e);\n            this.trigger('nodeSelecting', eventArgs);\n            if (eventArgs.cancel) {\n                return;\n            }\n        }\n        this.removeSelect(li);\n        this.setFocusElement(li);\n        if (this.isLoaded) {\n            eventArgs.nodeData = this.getNodeData(li);\n            this.trigger('nodeSelected', eventArgs);\n        }\n    };\n    TreeView.prototype.setFocusElement = function (li) {\n        if (!isNOU(li)) {\n            var focusedNode = this.getFocusedNode();\n            if (focusedNode) {\n                removeClass([focusedNode], FOCUS);\n            }\n            addClass([li], FOCUS);\n            this.updateIdAttr(focusedNode, li);\n        }\n    };\n    TreeView.prototype.addSelect = function (liEle) {\n        liEle.setAttribute('aria-selected', 'true');\n        addClass([liEle], ACTIVE);\n        var id = liEle.getAttribute('data-uid');\n        if (!isNOU(id) && this.selectedNodes.indexOf(id) === -1) {\n            this.selectedNodes.push(id);\n        }\n    };\n    TreeView.prototype.removeSelect = function (liEle) {\n        if (this.allowMultiSelection) {\n            liEle.setAttribute('aria-selected', 'false');\n        }\n        else {\n            liEle.removeAttribute('aria-selected');\n        }\n        removeClass([liEle], ACTIVE);\n        var index = this.selectedNodes.indexOf(liEle.getAttribute('data-uid'));\n        if (index > -1) {\n            this.selectedNodes.splice(index, 1);\n        }\n    };\n    TreeView.prototype.removeSelectAll = function () {\n        var selectedLI = this.element.querySelectorAll('.' + ACTIVE);\n        for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {\n            var ele = selectedLI_1[_i];\n            if (this.allowMultiSelection) {\n                ele.setAttribute('aria-selected', 'false');\n            }\n            else {\n                ele.removeAttribute('aria-selected');\n            }\n        }\n        removeClass(selectedLI, ACTIVE);\n        this.setProperties({ selectedNodes: [] }, true);\n    };\n    TreeView.prototype.getSelectEvent = function (currLi, action, e) {\n        var nodeData = this.getNodeData(currLi);\n        return { action: action, cancel: false, isInteracted: isNOU(e) ? false : true, node: currLi, nodeData: nodeData };\n    };\n    TreeView.prototype.setExpandOnType = function () {\n        this.expandOnType = (this.expandOn === 'Auto') ? (Browser.isDevice ? 'Click' : 'DblClick') : this.expandOn;\n    };\n    TreeView.prototype.expandHandler = function (e) {\n        var target = e.originalEvent.target;\n        if (!target || target.classList.contains(INPUT) || target.classList.contains(ROOT) ||\n            target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) ||\n            target.classList.contains(ICON) || this.showCheckBox && closest(target, '.' + CHECKBOXWRAP)) {\n            return;\n        }\n        else {\n            this.expandCollapseAction(closest(target, '.' + LISTITEM), e);\n        }\n    };\n    TreeView.prototype.expandCollapseAction = function (currLi, e) {\n        var icon = select('div.' + ICON, currLi);\n        if (!icon || icon.classList.contains(PROCESS)) {\n            return;\n        }\n        else {\n            var classList = icon.classList;\n            if (classList.contains(EXPANDABLE)) {\n                this.expandAction(currLi, icon, e);\n            }\n            else {\n                this.collapseNode(currLi, icon, e);\n            }\n        }\n    };\n    TreeView.prototype.expandAction = function (currLi, icon, e, expandChild, callback) {\n        if (icon.classList.contains(PROCESS)) {\n            return;\n        }\n        else {\n            addClass([icon], PROCESS);\n        }\n        if (this.isLoaded) {\n            this.expandArgs = this.getExpandEvent(currLi, e);\n            this.trigger('nodeExpanding', this.expandArgs);\n            if (this.expandArgs.cancel) {\n                removeClass([icon], PROCESS);\n                return;\n            }\n        }\n        var ul = select('.' + PARENTITEM, currLi);\n        if (ul && ul.nodeName === 'UL') {\n            this.expandNode(currLi, icon);\n        }\n        else {\n            this.renderChildNodes(currLi, expandChild, callback);\n        }\n    };\n    TreeView.prototype.keyActionHandler = function (e) {\n        var target = e.target;\n        var focusedNode = this.getFocusedNode();\n        if (target && target.classList.contains(INPUT)) {\n            var inpEle = target;\n            if (e.action === 'enter') {\n                inpEle.blur();\n                this.element.focus();\n                addClass([focusedNode], HOVER);\n            }\n            else if (e.action === 'escape') {\n                inpEle.value = this.oldText;\n                inpEle.blur();\n                this.element.focus();\n                addClass([focusedNode], HOVER);\n            }\n            return;\n        }\n        e.preventDefault();\n        var eventArgs = {\n            cancel: false,\n            event: e,\n            node: focusedNode,\n        };\n        this.trigger('keyPress', eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n        switch (e.action) {\n            case 'space':\n                if (this.showCheckBox) {\n                    this.checkNode(e);\n                }\n                break;\n            case 'moveRight':\n                this.openNode(this.enableRtl ? false : true, e);\n                break;\n            case 'moveLeft':\n                this.openNode(this.enableRtl ? true : false, e);\n                break;\n            case 'shiftDown':\n                this.shiftKeySelect(true, e);\n                break;\n            case 'moveDown':\n            case 'ctrlDown':\n            case 'csDown':\n                this.navigateNode(true);\n                break;\n            case 'shiftUp':\n                this.shiftKeySelect(false, e);\n                break;\n            case 'moveUp':\n            case 'ctrlUp':\n            case 'csUp':\n                this.navigateNode(false);\n                break;\n            case 'home':\n            case 'shiftHome':\n            case 'ctrlHome':\n            case 'csHome':\n                this.navigateRootNode(true);\n                break;\n            case 'end':\n            case 'shiftEnd':\n            case 'ctrlEnd':\n            case 'csEnd':\n                this.navigateRootNode(false);\n                break;\n            case 'enter':\n            case 'ctrlEnter':\n            case 'shiftEnter':\n            case 'csEnter':\n                this.toggleSelect(focusedNode, e);\n                break;\n            case 'f2':\n                if (this.allowEditing && !focusedNode.classList.contains('e-disable')) {\n                    this.createTextbox(focusedNode, e);\n                }\n                break;\n            case 'ctrlA':\n                if (this.allowMultiSelection) {\n                    var sNodes = selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);\n                    this.selectGivenNodes(sNodes);\n                }\n                break;\n        }\n    };\n    TreeView.prototype.navigateToFocus = function (isUp) {\n        var focusNode = this.getFocusedNode().querySelector('.' + TEXTWRAP);\n        var pos = focusNode.getBoundingClientRect();\n        var parent = this.getScrollParent(this.element);\n        if (!isNOU(parent)) {\n            var parentPos = parent.getBoundingClientRect();\n            if (pos.bottom > parentPos.bottom) {\n                parent.scrollTop += pos.bottom - parentPos.bottom;\n            }\n            else if (pos.top < parentPos.top) {\n                parent.scrollTop -= parentPos.top - pos.top;\n            }\n        }\n        var isVisible = this.isVisibleInViewport(focusNode);\n        if (!isVisible) {\n            focusNode.scrollIntoView(isUp);\n        }\n    };\n    TreeView.prototype.isVisibleInViewport = function (txtWrap) {\n        var pos = txtWrap.getBoundingClientRect();\n        return (pos.top >= 0 && pos.left >= 0 && pos.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            pos.right <= (window.innerWidth || document.documentElement.clientWidth));\n    };\n    TreeView.prototype.getScrollParent = function (node) {\n        if (isNOU(node)) {\n            return null;\n        }\n        return (node.scrollHeight > node.clientHeight) ? node : this.getScrollParent(node.parentElement);\n    };\n    TreeView.prototype.shiftKeySelect = function (isTowards, e) {\n        if (this.allowMultiSelection) {\n            var focusedNode = this.getFocusedNode();\n            var nextNode = isTowards ? this.getNextNode(focusedNode) : this.getPrevNode(focusedNode);\n            this.removeHover();\n            this.setFocusElement(nextNode);\n            this.toggleSelect(nextNode, e, false);\n            this.navigateToFocus(!isTowards);\n        }\n        else {\n            this.navigateNode(isTowards);\n        }\n    };\n    TreeView.prototype.checkNode = function (e) {\n        var focusedNode = this.getFocusedNode();\n        var checkWrap = select('.' + CHECKBOXWRAP, focusedNode);\n        var isChecked = select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);\n        if (!focusedNode.classList.contains('e-disable')) {\n            this.validateCheckNode(checkWrap, isChecked, focusedNode, e);\n        }\n    };\n    TreeView.prototype.validateCheckNode = function (checkWrap, isCheck, li, e) {\n        var eventArgs = this.nodeCheckingEvent(checkWrap, isCheck, e);\n        if (eventArgs.cancel) {\n            return;\n        }\n        if (this.checkedElement.indexOf(li.getAttribute('data-uid')) === -1) {\n            this.checkedElement.push(li.getAttribute('data-uid'));\n            var child = this.getChildNodes(this.treeData, li.getAttribute('data-uid'));\n            (child !== null) ? this.allCheckNode(child, this.checkedElement, null, null, false) : child = null;\n        }\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true);\n        this.ensureChildCheckState(li);\n        this.ensureParentCheckState(closest(closest(li, '.' + PARENTITEM), '.' + LISTITEM));\n        this.nodeCheckedEvent(checkWrap, isCheck, e);\n    };\n    //This method can be used to get all child nodes of a parent by passing the children of a parent along with 'validateCheck' set to false\n    TreeView.prototype.allCheckNode = function (child, newCheck, checked, childCheck, validateCheck) {\n        if (child) {\n            for (var length_1 = 0; length_1 < child.length; length_1++) {\n                var childId = getValue(this.fields.id, child[length_1]);\n                var check = this.element.querySelector('[data-uid=\"' + childId + '\"]');\n                //Validates isChecked case while no UI interaction has been performed on the node or it's parent\n                if (validateCheck !== false && this.checkedElement.indexOf(childId.toString()) === -1) {\n                    if (((check === null && !isNOU(child[length_1][this.fields.isChecked]) && newCheck.indexOf(childId.toString()) === -1)\n                        || childCheck === 0 || checked === 2)) {\n                        (child[length_1][this.fields.isChecked] !== false || checked === 2) ? newCheck.push(childId.toString())\n                            : childCheck = null;\n                        childCheck = (child[length_1][this.fields.isChecked] !== false || checked === 2) ? 0 : null;\n                    }\n                }\n                //Pushes child checked node done thro' UI interaction\n                if (newCheck.indexOf(childId.toString()) === -1 && isNOU(checked)) {\n                    newCheck.push(childId.toString());\n                }\n                //Gets if any next level children are available for child nodes\n                if (getValue(this.fields.hasChildren, child[length_1]) === true ||\n                    getValue(this.fields.child.toString(), child[length_1])) {\n                    var id = getValue(this.fields.id, child[length_1]);\n                    var childId_1 = this.getChildNodes(this.treeData, id.toString());\n                    if (childId_1) {\n                        (isNOU(validateCheck)) ? this.allCheckNode(childId_1, newCheck, checked, childCheck) :\n                            this.allCheckNode(childId_1, newCheck, checked, childCheck, validateCheck);\n                        childCheck = null;\n                    }\n                }\n                childCheck = null;\n            }\n        }\n    };\n    TreeView.prototype.openNode = function (toBeOpened, e) {\n        var focusedNode = this.getFocusedNode();\n        var icon = select('div.' + ICON, focusedNode);\n        if (toBeOpened) {\n            if (!icon) {\n                return;\n            }\n            else if (icon.classList.contains(EXPANDABLE)) {\n                this.expandAction(focusedNode, icon, e);\n            }\n            else {\n                this.focusNextNode(focusedNode, true);\n            }\n        }\n        else {\n            if (icon && icon.classList.contains(COLLAPSIBLE)) {\n                this.collapseNode(focusedNode, icon, e);\n            }\n            else {\n                var parentLi = closest(closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);\n                if (!parentLi) {\n                    return;\n                }\n                else {\n                    if (!parentLi.classList.contains('e-disable')) {\n                        this.setFocus(focusedNode, parentLi);\n                        this.navigateToFocus(true);\n                    }\n                }\n            }\n        }\n    };\n    TreeView.prototype.navigateNode = function (isTowards) {\n        var focusedNode = this.getFocusedNode();\n        this.focusNextNode(focusedNode, isTowards);\n    };\n    TreeView.prototype.navigateRootNode = function (isBackwards) {\n        var focusedNode = this.getFocusedNode();\n        var rootNode = isBackwards ? this.getRootNode() : this.getEndNode();\n        if (!rootNode.classList.contains('e-disable')) {\n            this.setFocus(focusedNode, rootNode);\n            this.navigateToFocus(isBackwards);\n        }\n    };\n    TreeView.prototype.getFocusedNode = function () {\n        var selectedItem;\n        var fNode = select('.' + LISTITEM + '.' + FOCUS, this.element);\n        if (isNOU(fNode)) {\n            selectedItem = select('.' + LISTITEM, this.element);\n        }\n        return isNOU(fNode) ? (isNOU(selectedItem) ? this.element.firstElementChild : selectedItem) : fNode;\n    };\n    TreeView.prototype.focusNextNode = function (li, isTowards) {\n        var nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);\n        this.setFocus(li, nextNode);\n        this.navigateToFocus(!isTowards);\n        if (nextNode.classList.contains('e-disable')) {\n            var lastChild = nextNode.lastChild;\n            if (nextNode.previousSibling == null && nextNode.classList.contains('e-level-1')) {\n                this.focusNextNode(nextNode, true);\n            }\n            else if (nextNode.nextSibling == null && nextNode.classList.contains('e-node-collapsed')) {\n                this.focusNextNode(nextNode, false);\n            }\n            else if (nextNode.nextSibling == null && lastChild.classList.contains('e-text-content')) {\n                this.focusNextNode(nextNode, false);\n            }\n            else {\n                this.focusNextNode(nextNode, isTowards);\n            }\n        }\n    };\n    TreeView.prototype.getNextNode = function (li) {\n        var index = this.liList.indexOf(li);\n        var nextNode;\n        do {\n            index++;\n            nextNode = this.liList[index];\n            if (isNOU(nextNode)) {\n                return li;\n            }\n        } while (!isVisible(nextNode));\n        return nextNode;\n    };\n    TreeView.prototype.getPrevNode = function (li) {\n        var index = this.liList.indexOf(li);\n        var prevNode;\n        do {\n            index--;\n            prevNode = this.liList[index];\n            if (isNOU(prevNode)) {\n                return li;\n            }\n        } while (!isVisible(prevNode));\n        return prevNode;\n    };\n    TreeView.prototype.getRootNode = function () {\n        var index = 0;\n        var rootNode;\n        do {\n            rootNode = this.liList[index];\n            index++;\n        } while (!isVisible(rootNode));\n        return rootNode;\n    };\n    TreeView.prototype.getEndNode = function () {\n        var index = this.liList.length - 1;\n        var endNode;\n        do {\n            endNode = this.liList[index];\n            index--;\n        } while (!isVisible(endNode));\n        return endNode;\n    };\n    TreeView.prototype.setFocus = function (preNode, nextNode) {\n        removeClass([preNode], [HOVER, FOCUS]);\n        if (!nextNode.classList.contains('e-disable')) {\n            addClass([nextNode], [HOVER, FOCUS]);\n            this.updateIdAttr(preNode, nextNode);\n        }\n    };\n    TreeView.prototype.updateIdAttr = function (preNode, nextNode) {\n        this.element.removeAttribute('aria-activedescendant');\n        if (preNode) {\n            preNode.removeAttribute('id');\n        }\n        nextNode.setAttribute('id', this.element.id + '_active');\n        this.element.setAttribute('aria-activedescendant', this.element.id + '_active');\n    };\n    TreeView.prototype.focusIn = function () {\n        if (!this.mouseDownStatus) {\n            addClass([this.getFocusedNode()], HOVER);\n        }\n        this.mouseDownStatus = false;\n    };\n    TreeView.prototype.focusOut = function () {\n        removeClass([this.getFocusedNode()], HOVER);\n    };\n    TreeView.prototype.onMouseOver = function (e) {\n        var target = e.target;\n        var classList = target.classList;\n        var currentLi = closest(target, '.' + LISTITEM);\n        if (!currentLi || classList.contains(PARENTITEM) || classList.contains(LISTITEM)) {\n            this.removeHover();\n            return;\n        }\n        else {\n            if (currentLi && !currentLi.classList.contains('e-disable')) {\n                this.setHover(currentLi);\n            }\n        }\n    };\n    TreeView.prototype.setHover = function (li) {\n        if (!li.classList.contains(HOVER)) {\n            this.removeHover();\n            addClass([li], HOVER);\n        }\n    };\n    ;\n    TreeView.prototype.onMouseLeave = function (e) {\n        this.removeHover();\n    };\n    TreeView.prototype.removeHover = function () {\n        var hoveredNode = selectAll('.' + HOVER, this.element);\n        if (hoveredNode && hoveredNode.length) {\n            removeClass(hoveredNode, HOVER);\n        }\n    };\n    ;\n    TreeView.prototype.getNodeData = function (currLi, fromDS) {\n        if (!isNOU(currLi) && currLi.classList.contains(LISTITEM) && closest(currLi, '.' + CONTROL).classList.contains(ROOT)) {\n            var id = currLi.getAttribute('data-uid');\n            var text = this.getText(currLi, fromDS);\n            var pNode = closest(currLi.parentNode, '.' + LISTITEM);\n            var pid = pNode ? pNode.getAttribute('data-uid') : null;\n            var selected = currLi.classList.contains(ACTIVE);\n            var expanded = (currLi.getAttribute('aria-expanded') === 'true') ? true : false;\n            var checked = null;\n            if (this.showCheckBox) {\n                checked = select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');\n            }\n            return { id: id, text: text, parentID: pid, selected: selected, expanded: expanded, isChecked: checked };\n        }\n        return { id: '', text: '', parentID: '', selected: '', expanded: '', isChecked: '' };\n    };\n    TreeView.prototype.getText = function (currLi, fromDS) {\n        if (fromDS) {\n            var nodeData = this.getNodeObject(currLi.getAttribute('data-uid'));\n            var level = parseFloat(currLi.getAttribute('aria-level'));\n            var nodeFields = this.getFields(this.fields, level, 1);\n            return getValue(nodeFields.text, nodeData);\n        }\n        return select('.' + LISTTEXT, currLi).textContent;\n    };\n    TreeView.prototype.getExpandEvent = function (currLi, e) {\n        var nodeData = this.getNodeData(currLi);\n        return { cancel: false, isInteracted: isNOU(e) ? false : true, node: currLi, nodeData: nodeData, event: e };\n    };\n    TreeView.prototype.reRenderNodes = function () {\n        this.element.innerHTML = '';\n        this.setTouchClass();\n        this.setProperties({ selectedNodes: [], checkedNodes: [], expandedNodes: [] }, true);\n        this.isLoaded = false;\n        this.setDataBinding();\n    };\n    TreeView.prototype.setCssClass = function (oldClass, newClass) {\n        if (!isNOU(oldClass) && oldClass !== '') {\n            removeClass([this.element], oldClass.split(' '));\n        }\n        if (!isNOU(newClass) && newClass !== '') {\n            addClass([this.element], newClass.split(' '));\n        }\n    };\n    TreeView.prototype.editingHandler = function (e) {\n        var target = e.target;\n        if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) ||\n            target.classList.contains(LISTITEM) || target.classList.contains(ICON) ||\n            target.classList.contains(INPUT) || target.classList.contains(INPUTGROUP)) {\n            return;\n        }\n        else {\n            var liEle = closest(target, '.' + LISTITEM);\n            this.createTextbox(liEle, e);\n        }\n    };\n    TreeView.prototype.createTextbox = function (liEle, e) {\n        var oldInpEle = select('.' + TREEINPUT, this.element);\n        if (oldInpEle) {\n            oldInpEle.blur();\n        }\n        var textEle = select('.' + LISTTEXT, liEle);\n        this.updateOldText(liEle);\n        var innerEle = this.createElement('input', { className: TREEINPUT, attrs: { value: this.oldText } });\n        var eventArgs = this.getEditEvent(liEle, null, innerEle.outerHTML);\n        this.trigger('nodeEditing', eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n        var inpWidth = textEle.offsetWidth + 5;\n        var style = 'width:' + inpWidth + 'px';\n        addClass([liEle], EDITING);\n        textEle.innerHTML = eventArgs.innerHtml;\n        var inpEle = select('.' + TREEINPUT, textEle);\n        this.inputObj = Input.createInput({\n            element: inpEle,\n            properties: {\n                enableRtl: this.enableRtl,\n            }\n        }, this.createElement);\n        this.inputObj.container.setAttribute('style', style);\n        inpEle.focus();\n        var inputEle = inpEle;\n        inputEle.setSelectionRange(0, inputEle.value.length);\n        this.wireInputEvents(inpEle);\n    };\n    TreeView.prototype.updateOldText = function (liEle) {\n        var id = liEle.getAttribute('data-uid');\n        this.editData = this.getNodeObject(id);\n        var level = parseFloat(liEle.getAttribute('aria-level'));\n        this.editFields = this.getFields(this.fields, level, 1);\n        this.oldText = getValue(this.editFields.text, this.editData);\n    };\n    TreeView.prototype.inputFocusOut = function (e) {\n        if (!select('.' + TREEINPUT, this.element)) {\n            return;\n        }\n        var target = e.target;\n        var newText = target.value;\n        var txtEle = closest(target, '.' + LISTTEXT);\n        var liEle = closest(target, '.' + LISTITEM);\n        detach(this.inputObj.container);\n        this.appendNewText(liEle, txtEle, newText, true);\n    };\n    TreeView.prototype.appendNewText = function (liEle, txtEle, newText, isInput) {\n        var eventArgs = this.getEditEvent(liEle, newText, null);\n        this.trigger('nodeEdited', eventArgs);\n        newText = eventArgs.cancel ? eventArgs.oldText : eventArgs.newText;\n        var newData = setValue(this.editFields.text, newText, this.editData);\n        if (!isNOU(this.nodeTemplateFn)) {\n            txtEle.innerHTML = '';\n            append(this.nodeTemplateFn(newData), txtEle);\n        }\n        else {\n            txtEle.innerHTML = newText;\n        }\n        if (isInput) {\n            removeClass([liEle], EDITING);\n            txtEle.focus();\n        }\n        if (eventArgs.oldText !== newText) {\n            this.triggerEvent();\n        }\n    };\n    TreeView.prototype.getElement = function (ele) {\n        if (isNOU(ele)) {\n            return null;\n        }\n        else if (typeof ele === 'string') {\n            return this.element.querySelector('[data-uid=\"' + ele + '\"]');\n        }\n        else if (typeof ele === 'object') {\n            return ele;\n        }\n        else {\n            return null;\n        }\n    };\n    TreeView.prototype.getId = function (ele) {\n        if (isNOU(ele)) {\n            return null;\n        }\n        else if (typeof ele === 'string') {\n            return ele;\n        }\n        else if (typeof ele === 'object') {\n            return ele.getAttribute('data-uid');\n        }\n        else {\n            return null;\n        }\n    };\n    TreeView.prototype.getEditEvent = function (liEle, newText, inpEle) {\n        var data = this.getNodeData(liEle);\n        return { cancel: false, newText: newText, node: liEle, nodeData: data, oldText: this.oldText, innerHtml: inpEle };\n    };\n    TreeView.prototype.getNodeObject = function (id) {\n        var childNodes;\n        if (isNOU(id)) {\n            return childNodes;\n        }\n        else if (this.dataType === 1) {\n            for (var i = 0, objlen = this.treeData.length; i < objlen; i++) {\n                var dataId = getValue(this.fields.id, this.treeData[i]);\n                if (!isNOU(this.treeData[i]) && !isNOU(dataId) && dataId.toString() === id) {\n                    return this.treeData[i];\n                }\n            }\n        }\n        else {\n            return this.getChildNodeObject(this.treeData, this.fields, id);\n        }\n        return childNodes;\n    };\n    TreeView.prototype.getChildNodeObject = function (obj, mapper, id) {\n        var newList;\n        if (isNOU(obj)) {\n            return newList;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var dataId = getValue(mapper.id, obj[i]);\n            if (obj[i] && dataId && dataId.toString() === id) {\n                return obj[i];\n            }\n            else if (typeof mapper.child === 'string' && !isNOU(getValue(mapper.child, obj[i]))) {\n                var childData = getValue(mapper.child, obj[i]);\n                newList = this.getChildNodeObject(childData, this.getChildMapper(mapper), id);\n                if (newList !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNOU(getValue('child', obj[i]))) {\n                var child = 'child';\n                newList = this.getChildNodeObject(getValue(child, obj[i]), this.getChildMapper(mapper), id);\n                if (newList !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newList;\n    };\n    TreeView.prototype.setDragAndDrop = function (toBind) {\n        if (toBind) {\n            this.initializeDrag();\n        }\n        else {\n            this.destroyDrag();\n        }\n    };\n    TreeView.prototype.initializeDrag = function () {\n        var _this = this;\n        var virtualEle;\n        var proxy = this;\n        this.dragObj = new Draggable(this.element, {\n            enableTailMode: true,\n            enableAutoScroll: true,\n            dragTarget: '.' + TEXTWRAP,\n            helper: function (e) {\n                _this.dragTarget = e.sender.target;\n                var dragRoot = closest(_this.dragTarget, '.' + ROOT);\n                var dragWrap = closest(_this.dragTarget, '.' + TEXTWRAP);\n                _this.dragLi = closest(_this.dragTarget, '.' + LISTITEM);\n                if (_this.fullRowSelect && !dragWrap && _this.dragTarget.classList.contains(FULLROW)) {\n                    dragWrap = _this.dragTarget.nextElementSibling;\n                }\n                if (!_this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap ||\n                    _this.dragTarget.classList.contains(ROOT) || _this.dragTarget.classList.contains(PARENTITEM) ||\n                    _this.dragTarget.classList.contains(LISTITEM) || _this.dragLi.classList.contains('e-disable')) {\n                    return false;\n                }\n                var cloneEle = (dragWrap.cloneNode(true));\n                if (isNOU(select('div.' + ICON, cloneEle))) {\n                    var icon = proxy.createElement('div', { className: ICON + ' ' + EXPANDABLE });\n                    cloneEle.insertBefore(icon, cloneEle.children[0]);\n                }\n                var cssClass = DRAGITEM + ' ' + ROOT + ' ' + _this.cssClass + ' ' + (_this.enableRtl ? RTL : '');\n                virtualEle = proxy.createElement('div', { className: cssClass });\n                virtualEle.appendChild(cloneEle);\n                var nLen = _this.selectedNodes.length;\n                if (nLen > 1 && _this.allowMultiSelection && _this.dragLi.classList.contains(ACTIVE)) {\n                    var cNode = proxy.createElement('span', { className: DROPCOUNT, innerHTML: '' + nLen });\n                    virtualEle.appendChild(cNode);\n                }\n                document.body.appendChild(virtualEle);\n                document.body.style.cursor = '';\n                _this.dragData = _this.getNodeData(_this.dragLi);\n                return virtualEle;\n            },\n            dragStart: function (e) {\n                addClass([_this.element], DRAGGING);\n                var listItem = closest(e.target, '.e-list-item');\n                var level;\n                if (listItem) {\n                    level = parseInt(listItem.getAttribute('aria-level'), 10);\n                }\n                var eventArgs = _this.getDragEvent(e.event, _this, null, e.target, null, virtualEle, level);\n                if (eventArgs.draggedNode.classList.contains(EDITING)) {\n                    eventArgs.cancel = true;\n                }\n                else {\n                    _this.trigger('nodeDragStart', eventArgs);\n                }\n                if (eventArgs.cancel) {\n                    detach(virtualEle);\n                    removeClass([_this.element], DRAGGING);\n                    _this.dragStartAction = false;\n                }\n                else {\n                    _this.dragStartAction = true;\n                }\n            },\n            drag: function (e) {\n                _this.dragObj.setProperties({ cursorAt: { top: (!isNOU(e.event.targetTouches) || Browser.isDevice) ? 60 : -20 } });\n                _this.dragAction(e, virtualEle);\n            },\n            dragStop: function (e) {\n                removeClass([_this.element], DRAGGING);\n                _this.removeVirtualEle();\n                var dropTarget = e.target;\n                var preventTargetExpand = false;\n                var dropRoot = (closest(dropTarget, '.' + DROPPABLE));\n                if (!dropTarget || !dropRoot) {\n                    detach(e.helper);\n                    document.body.style.cursor = '';\n                }\n                var listItem = closest(dropTarget, '.e-list-item');\n                var level;\n                if (listItem) {\n                    level = parseInt(listItem.getAttribute('aria-level'), 10);\n                }\n                var eventArgs = _this.getDragEvent(e.event, _this, dropTarget, dropTarget, null, e.helper, level);\n                eventArgs.preventTargetExpand = preventTargetExpand;\n                _this.trigger('nodeDragStop', eventArgs);\n                _this.dragParent = eventArgs.draggedParentNode;\n                _this.preventExpand = eventArgs.preventTargetExpand;\n                if (eventArgs.cancel) {\n                    if (e.helper.parentNode) {\n                        detach(e.helper);\n                    }\n                    document.body.style.cursor = '';\n                }\n                _this.dragStartAction = false;\n            }\n        });\n        this.dropObj = new Droppable(this.element, {\n            out: function (e) {\n                if (!isNOU(e) && !e.target.classList.contains(SIBLING)) {\n                    document.body.style.cursor = 'not-allowed';\n                }\n            },\n            over: function (e) {\n                document.body.style.cursor = '';\n            },\n            drop: function (e) {\n                _this.dropAction(e);\n            }\n        });\n    };\n    TreeView.prototype.dragAction = function (e, virtualEle) {\n        var dropRoot = closest(e.target, '.' + DROPPABLE);\n        var dropWrap = closest(e.target, '.' + TEXTWRAP);\n        var icon = select('div.' + ICON, virtualEle);\n        removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);\n        this.removeVirtualEle();\n        document.body.style.cursor = '';\n        var classList = e.target.classList;\n        if (this.fullRowSelect && !dropWrap && !isNOU(classList) && classList.contains(FULLROW)) {\n            dropWrap = e.target.nextElementSibling;\n        }\n        if (dropRoot) {\n            var dropLi = closest(e.target, '.' + LISTITEM);\n            if (!dropRoot.classList.contains(ROOT) || (dropWrap &&\n                (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)))) {\n                if (dropLi && e && (e.event.offsetY < 7)) {\n                    addClass([icon], DROPNEXT);\n                    var virEle = this.createElement('div', { className: SIBLING });\n                    var index = this.fullRowSelect ? (1) : (0);\n                    dropLi.insertBefore(virEle, dropLi.children[index]);\n                }\n                else if (dropLi && e && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))) {\n                    addClass([icon], DROPNEXT);\n                    var virEle = this.createElement('div', { className: SIBLING });\n                    var index = this.fullRowSelect ? (2) : (1);\n                    dropLi.insertBefore(virEle, dropLi.children[index]);\n                }\n                else {\n                    addClass([icon], DROPIN);\n                }\n            }\n            else if (e.target.nodeName === 'LI' && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {\n                addClass([icon], DROPNEXT);\n                this.renderVirtualEle(e);\n            }\n            else if (e.target.classList.contains(SIBLING)) {\n                addClass([icon], DROPNEXT);\n            }\n            else {\n                addClass([icon], DROPOUT);\n            }\n        }\n        else {\n            addClass([icon], NODROP);\n            document.body.style.cursor = 'not-allowed';\n        }\n        var listItem = closest(e.target, '.e-list-item');\n        var level;\n        if (listItem) {\n            level = parseInt(listItem.getAttribute('aria-level'), 10);\n        }\n        var eventArgs = this.getDragEvent(e.event, this, e.target, e.target, null, virtualEle, level);\n        if (eventArgs.dropIndicator) {\n            removeClass([icon], eventArgs.dropIndicator);\n        }\n        this.trigger('nodeDragging', eventArgs);\n        if (eventArgs.dropIndicator) {\n            addClass([icon], eventArgs.dropIndicator);\n        }\n    };\n    TreeView.prototype.dropAction = function (e) {\n        var offsetY = e.event.offsetY;\n        var dropTarget = e.target;\n        var dragObj;\n        var level;\n        var drop = false;\n        var dragInstance = e.dragData.draggable;\n        for (var i = 0; i < dragInstance.ej2_instances.length; i++) {\n            if (dragInstance.ej2_instances[i] instanceof TreeView_1) {\n                dragObj = dragInstance.ej2_instances[i];\n                break;\n            }\n        }\n        if (dragObj && dragObj.dragTarget) {\n            var dragTarget = dragObj.dragTarget;\n            var dragLi = (closest(dragTarget, '.' + LISTITEM));\n            var dropLi = (closest(dropTarget, '.' + LISTITEM));\n            if (dropLi == null && dropTarget.classList.contains(ROOT)) {\n                dropLi = dropTarget.firstElementChild;\n            }\n            detach(e.droppedElement);\n            document.body.style.cursor = '';\n            if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n                if (this.fields.dataSource instanceof DataManager === false) {\n                    this.preventExpand = false;\n                }\n                return;\n            }\n            if (dragObj.allowMultiSelection && dragLi.classList.contains(ACTIVE)) {\n                var sNodes = selectAll('.' + ACTIVE, dragObj.element);\n                for (var i = 0; i < sNodes.length; i++) {\n                    if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n                        continue;\n                    }\n                    this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);\n                }\n            }\n            else {\n                this.appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY);\n            }\n            level = parseInt(dragLi.getAttribute('aria-level'), 10);\n            drop = true;\n        }\n        if (this.fields.dataSource instanceof DataManager === false) {\n            this.preventExpand = false;\n        }\n        this.trigger('nodeDropped', this.getDragEvent(e.event, dragObj, dropTarget, e.target, e.dragData.draggedElement, null, level, drop));\n        this.triggerEvent();\n    };\n    TreeView.prototype.appendNode = function (dropTarget, dragLi, dropLi, e, dragObj, offsetY) {\n        if (!dragLi.classList.contains('e-disable') && !dropLi.classList.contains('e-disable')) {\n            if (dropTarget.nodeName === 'LI') {\n                this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n            }\n            else if (dropTarget.firstElementChild && dropTarget.classList.contains(ROOT)) {\n                if (dropTarget.firstElementChild.nodeName === 'UL') {\n                    this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n                }\n            }\n            else {\n                this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY);\n            }\n        }\n    };\n    TreeView.prototype.dropAsSiblingNode = function (dragLi, dropLi, e, dragObj) {\n        var dropUl = closest(dropLi, '.' + PARENTITEM);\n        var dragParentUl = closest(dragLi, '.' + PARENTITEM);\n        var dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n        var pre;\n        if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {\n            pre = false;\n        }\n        else if (e.event.offsetY < 2) {\n            pre = true;\n        }\n        dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);\n        this.moveData(dragLi, dropLi, dropUl, pre, dragObj);\n        this.updateElement(dragParentUl, dragParentLi);\n        this.updateAriaLevel(dragLi);\n        if (dragObj.element.id === this.element.id) {\n            this.updateList();\n        }\n        else {\n            dragObj.updateInstance();\n            this.updateInstance();\n        }\n    };\n    TreeView.prototype.dropAsChildNode = function (dragLi, dropLi, dragObj, index, e, pos) {\n        var dragParentUl = closest(dragLi, '.' + PARENTITEM);\n        var dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n        var dropParentUl = closest(dropLi, '.' + PARENTITEM);\n        if (e && (pos < 7)) {\n            dropParentUl.insertBefore(dragLi, dropLi);\n            this.moveData(dragLi, dropLi, dropParentUl, true, dragObj);\n        }\n        else if (e && (e.target.offsetHeight > 0 && pos > (e.target.offsetHeight - 10))) {\n            dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n            this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);\n        }\n        else {\n            var dropUl = this.expandParent(dropLi);\n            var childLi = dropUl.childNodes[index];\n            dropUl.insertBefore(dragLi, childLi);\n            this.moveData(dragLi, childLi, dropUl, true, dragObj);\n        }\n        this.updateElement(dragParentUl, dragParentLi);\n        this.updateAriaLevel(dragLi);\n        if (dragObj.element.id === this.element.id) {\n            this.updateList();\n        }\n        else {\n            dragObj.updateInstance();\n            this.updateInstance();\n        }\n    };\n    TreeView.prototype.moveData = function (dragLi, dropLi, dropUl, pre, dragObj) {\n        var dropParentLi = closest(dropUl, '.' + LISTITEM);\n        var id = this.getId(dragLi);\n        var removedData = dragObj.updateChildField(dragObj.treeData, dragObj.fields, id, null, null, true);\n        var refId = this.getId(dropLi);\n        var index = this.getDataPos(this.treeData, this.fields, refId);\n        var parentId = this.getId(dropParentLi);\n        if (this.dataType === 1) {\n            this.updateField(this.treeData, this.fields, parentId, 'hasChildren', true);\n            var pos = isNOU(index) ? this.treeData.length : (pre ? index : index + 1);\n            if (isNOU(parentId) && !this.hasPid) {\n                delete removedData[0][this.fields.parentID];\n            }\n            else {\n                var currPid = this.isNumberTypeId ? parseFloat(parentId) : parentId;\n                setValue(this.fields.parentID, currPid, removedData[0]);\n            }\n            this.treeData.splice(pos, 0, removedData[0]);\n            if (dragObj.element.id !== this.element.id) {\n                var childData = dragObj.removeChildNodes(id);\n                pos++;\n                for (var i = 0, len = childData.length; i < len; i++) {\n                    this.treeData.splice(pos, 0, childData[i]);\n                    pos++;\n                }\n                dragObj.groupedData = dragObj.getGroupedData(dragObj.treeData, dragObj.fields.parentID);\n            }\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n        }\n        else {\n            this.addChildData(this.treeData, this.fields, parentId, removedData, pre ? index : index + 1);\n        }\n    };\n    TreeView.prototype.expandParent = function (dropLi) {\n        var dropIcon = select('div.' + ICON, dropLi);\n        if (dropIcon && dropIcon.classList.contains(EXPANDABLE) && this.preventExpand !== true) {\n            this.expandAction(dropLi, dropIcon, null);\n        }\n        var dropUl = select('.' + PARENTITEM, dropLi);\n        if (this.preventExpand === true && !dropUl && dropIcon) {\n            this.renderChildNodes(dropLi);\n        }\n        dropUl = select('.' + PARENTITEM, dropLi);\n        if (isNOU(dropUl) && this.preventExpand === true) {\n            if (isNOU(dropIcon)) {\n                ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);\n            }\n            var icon = select('div.' + ICON, dropLi);\n            icon.classList.add('e-icon-expandable');\n            dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);\n            dropLi.appendChild(dropUl);\n            removeClass([icon], COLLAPSIBLE);\n            dropLi.setAttribute('aria-expanded', 'false');\n            dropUl.style.display = 'none';\n        }\n        if (isNOU(dropUl)) {\n            this.trigger('nodeExpanding', this.getExpandEvent(dropLi, null));\n            if (isNOU(dropIcon)) {\n                ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);\n            }\n            var icon = select('div.' + ICON, dropLi);\n            removeClass([icon], EXPANDABLE);\n            dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);\n            dropLi.appendChild(dropUl);\n            this.addExpand(dropLi);\n            this.trigger('nodeExpanded', this.getExpandEvent(dropLi, null));\n        }\n        return dropUl;\n    };\n    TreeView.prototype.updateElement = function (dragParentUl, dragParentLi) {\n        if (dragParentLi && dragParentUl.childElementCount === 0) {\n            var dragIcon = select('div.' + ICON, dragParentLi);\n            detach(dragParentUl);\n            detach(dragIcon);\n            var parentId = this.getId(dragParentLi);\n            this.updateField(this.treeData, this.fields, parentId, 'hasChildren', null);\n            this.removeExpand(dragParentLi, true);\n        }\n    };\n    TreeView.prototype.updateAriaLevel = function (dragLi) {\n        var level = this.parents(dragLi, '.' + PARENTITEM).length;\n        dragLi.setAttribute('aria-level', '' + level);\n        this.updateChildAriaLevel(select('.' + PARENTITEM, dragLi), level + 1);\n    };\n    TreeView.prototype.updateChildAriaLevel = function (element, level) {\n        if (!isNOU(element)) {\n            var cNodes = element.childNodes;\n            for (var i = 0, len = cNodes.length; i < len; i++) {\n                var liEle = cNodes[i];\n                liEle.setAttribute('aria-level', '' + level);\n                this.updateChildAriaLevel(select('.' + PARENTITEM, liEle), level + 1);\n            }\n        }\n    };\n    TreeView.prototype.renderVirtualEle = function (e) {\n        var pre;\n        if (e.event.offsetY > e.target.offsetHeight - 2) {\n            pre = false;\n        }\n        else if (e.event.offsetY < 2) {\n            pre = true;\n        }\n        var virEle = this.createElement('div', { className: SIBLING });\n        var index = this.fullRowSelect ? (pre ? 1 : 2) : (pre ? 0 : 1);\n        e.target.insertBefore(virEle, e.target.children[index]);\n    };\n    TreeView.prototype.removeVirtualEle = function () {\n        var sibEle = select('.' + SIBLING);\n        if (sibEle) {\n            detach(sibEle);\n        }\n    };\n    TreeView.prototype.destroyDrag = function () {\n        if (this.dragObj && this.dropObj) {\n            this.dragObj.destroy();\n            this.dropObj.destroy();\n        }\n    };\n    TreeView.prototype.getDragEvent = function (event, obj, dropTarget, target, dragNode, cloneEle, level, drop) {\n        var dropLi = dropTarget ? closest(dropTarget, '.' + LISTITEM) : null;\n        var dropData = dropLi ? this.getNodeData(dropLi) : null;\n        var draggedNode = obj ? obj.dragLi : dragNode;\n        var draggedNodeData = obj ? obj.dragData : null;\n        var newParent = dropTarget ? this.parents(dropTarget, '.' + LISTITEM) : null;\n        var dragLiParent = obj.dragLi.parentElement;\n        var dragParent = obj.dragLi ? closest(dragLiParent, '.' + LISTITEM) : null;\n        var targetParent = null;\n        var indexValue = null;\n        var iconCss = [DROPNEXT, DROPIN, DROPOUT, NODROP];\n        var iconClass = null;\n        var node = (drop === true) ? draggedNode : dropLi;\n        var index = node ? closest(node, '.e-list-parent') : null;\n        var i = 0;\n        dragParent = (obj.dragLi && dragParent === null) ? closest(dragLiParent, '.' + ROOT) : dragParent;\n        dragParent = (drop === true) ? this.dragParent : dragParent;\n        if (cloneEle) {\n            while (i < 4) {\n                if (select('.' + ICON, cloneEle).classList.contains(iconCss[i])) {\n                    iconClass = iconCss[i];\n                    break;\n                }\n                i++;\n            }\n        }\n        if (index) {\n            var dropTar = 0;\n            for (i = 0; i < index.childElementCount; i++) {\n                dropTar = (drop !== true && index.children[i] === draggedNode && dropLi !== draggedNode) ? ++dropTar : dropTar;\n                if ((drop !== true && index.children[i].classList.contains('e-hover'))) {\n                    indexValue = (event.offsetY >= 23) ? i + 1 : i;\n                    break;\n                }\n                else if (index.children[i] === node) {\n                    indexValue = (event.offsetY >= 23) ? i : i;\n                    break;\n                }\n            }\n            indexValue = (dropTar !== 0) ? --indexValue : indexValue;\n        }\n        if (dropTarget) {\n            if (newParent.length === 0) {\n                targetParent = null;\n            }\n            else if (dropTarget.classList.contains(LISTITEM)) {\n                targetParent = newParent[0];\n            }\n            else {\n                targetParent = newParent[1];\n            }\n        }\n        if (dropLi === draggedNode) {\n            targetParent = dropLi;\n        }\n        if (dropTarget && target.offsetHeight <= 33 && event.offsetY < target.offsetHeight - 10 && event.offsetY > 6) {\n            targetParent = dropLi;\n            if (drop !== true) {\n                level = ++level;\n                var parent_1 = targetParent ? select('.e-list-parent', targetParent) : null;\n                indexValue = (parent_1) ? parent_1.children.length : 0;\n                if (!(this.fields.dataSource instanceof DataManager) && parent_1 === null && targetParent) {\n                    var parent_2 = targetParent.hasAttribute('data-uid') ?\n                        this.getChildNodes(this.fields.dataSource, targetParent.getAttribute('data-uid').toString()) : null;\n                    indexValue = (parent_2) ? parent_2.length : 0;\n                }\n            }\n        }\n        return {\n            cancel: false,\n            clonedNode: cloneEle,\n            event: event,\n            draggedNode: draggedNode,\n            draggedNodeData: draggedNodeData,\n            droppedNode: dropLi,\n            droppedNodeData: dropData,\n            dropIndex: indexValue,\n            dropLevel: level,\n            draggedParentNode: dragParent,\n            dropTarget: targetParent,\n            dropIndicator: iconClass,\n            target: target,\n        };\n    };\n    TreeView.prototype.addFullRow = function (toAdd) {\n        var len = this.liList.length;\n        if (toAdd) {\n            for (var i = 0; i < len; i++) {\n                this.createFullRow(this.liList[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len; i++) {\n                var rowDiv = select('.' + FULLROW, this.liList[i]);\n                detach(rowDiv);\n            }\n        }\n    };\n    TreeView.prototype.createFullRow = function (item) {\n        var rowDiv = this.createElement('div', { className: FULLROW });\n        item.insertBefore(rowDiv, item.childNodes[0]);\n    };\n    TreeView.prototype.addMultiSelect = function (toAdd) {\n        if (toAdd) {\n            var liEles = selectAll('.' + LISTITEM + ':not([aria-selected=\"true\"])', this.element);\n            for (var _i = 0, liEles_1 = liEles; _i < liEles_1.length; _i++) {\n                var ele = liEles_1[_i];\n                ele.setAttribute('aria-selected', 'false');\n            }\n        }\n        else {\n            var liEles = selectAll('.' + LISTITEM + '[aria-selected=\"false\"]', this.element);\n            for (var _a = 0, liEles_2 = liEles; _a < liEles_2.length; _a++) {\n                var ele = liEles_2[_a];\n                ele.removeAttribute('aria-selected');\n            }\n        }\n    };\n    TreeView.prototype.collapseByLevel = function (element, level, excludeHiddenNodes) {\n        if (level > 0 && !isNOU(element)) {\n            var cNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n            for (var i = 0, len = cNodes.length; i < len; i++) {\n                var liEle = cNodes[i];\n                var icon = select('.' + COLLAPSIBLE, select('.' + TEXTWRAP, liEle));\n                if (!isNOU(icon)) {\n                    this.collapseNode(liEle, icon, null);\n                }\n                this.collapseByLevel(select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n            }\n        }\n    };\n    TreeView.prototype.collapseAllNodes = function (excludeHiddenNodes) {\n        var cIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll('.' + COLLAPSIBLE, this.element));\n        for (var i = 0, len = cIcons.length; i < len; i++) {\n            var icon = cIcons[i];\n            var liEle = closest(icon, '.' + LISTITEM);\n            this.collapseNode(liEle, icon, null);\n        }\n    };\n    TreeView.prototype.expandByLevel = function (element, level, excludeHiddenNodes) {\n        if (level > 0 && !isNOU(element)) {\n            var eNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n            for (var i = 0, len = eNodes.length; i < len; i++) {\n                var liEle = eNodes[i];\n                var icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, liEle));\n                if (!isNOU(icon)) {\n                    this.expandAction(liEle, icon, null);\n                }\n                this.expandByLevel(select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n            }\n        }\n    };\n    TreeView.prototype.expandAllNodes = function (excludeHiddenNodes) {\n        var eIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll('.' + EXPANDABLE, this.element));\n        for (var i = 0, len = eIcons.length; i < len; i++) {\n            var icon = eIcons[i];\n            var liEle = closest(icon, '.' + LISTITEM);\n            this.expandAction(liEle, icon, null, true);\n        }\n    };\n    TreeView.prototype.getVisibleNodes = function (excludeHiddenNodes, nodes) {\n        var vNodes = Array.prototype.slice.call(nodes);\n        if (excludeHiddenNodes) {\n            for (var i = 0; i < vNodes.length; i++) {\n                if (!isVisible(vNodes[i])) {\n                    vNodes.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        return vNodes;\n    };\n    TreeView.prototype.removeNode = function (node) {\n        var dragParentUl = closest(node, '.' + PARENTITEM);\n        var dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n        detach(node);\n        this.updateElement(dragParentUl, dragParentLi);\n        this.updateInstance();\n        this.removeData(node);\n    };\n    TreeView.prototype.updateInstance = function () {\n        this.updateList();\n        this.updateSelectedNodes();\n        this.updateExpandedNodes();\n    };\n    TreeView.prototype.updateList = function () {\n        this.liList = Array.prototype.slice.call(selectAll('.' + LISTITEM, this.element));\n    };\n    TreeView.prototype.updateSelectedNodes = function () {\n        this.setProperties({ selectedNodes: [] }, true);\n        var sNodes = selectAll('.' + ACTIVE, this.element);\n        this.selectGivenNodes(sNodes);\n    };\n    TreeView.prototype.updateExpandedNodes = function () {\n        this.setProperties({ expandedNodes: [] }, true);\n        var eNodes = selectAll('[aria-expanded=\"true\"]', this.element);\n        for (var i = 0, len = eNodes.length; i < len; i++) {\n            this.addExpand(eNodes[i]);\n        }\n    };\n    TreeView.prototype.removeData = function (node) {\n        if (this.dataType === 1) {\n            var dm = new DataManager(this.treeData);\n            var id = this.getId(node);\n            var data = {};\n            var newId = this.isNumberTypeId ? parseFloat(id) : id;\n            data[this.fields.id] = newId;\n            dm.remove(this.fields.id, data);\n            this.removeChildNodes(id);\n        }\n        else {\n            var id = this.getId(node);\n            this.updateChildField(this.treeData, this.fields, id, null, null, true);\n        }\n    };\n    TreeView.prototype.removeChildNodes = function (parentId) {\n        var cNodes = this.getChildGroup(this.groupedData, parentId, false);\n        var childData = [];\n        if (cNodes) {\n            for (var i = 0, len = cNodes.length; i < len; i++) {\n                var dm = new DataManager(this.treeData);\n                var id = getValue(this.fields.id, cNodes[i]).toString();\n                var data = {};\n                var currId = this.isNumberTypeId ? parseFloat(id) : id;\n                data[this.fields.id] = currId;\n                var nodeData = dm.remove(this.fields.id, data);\n                childData.push(nodeData[0]);\n                this.removeChildNodes(id);\n            }\n        }\n        return childData;\n    };\n    TreeView.prototype.doGivenAction = function (nodes, selector, toExpand) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            var liEle = this.getElement(nodes[i]);\n            if (isNOU(liEle)) {\n                continue;\n            }\n            var icon = select('.' + selector, select('.' + TEXTWRAP, liEle));\n            if (!isNOU(icon)) {\n                toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);\n            }\n        }\n    };\n    TreeView.prototype.addGivenNodes = function (nodes, dropLi, index, isRemote, dropEle) {\n        var sNodes = this.getSortedData(nodes);\n        var level = dropLi ? parseFloat(dropLi.getAttribute('aria-level')) + 1 : 1;\n        if (isRemote) {\n            this.updateMapper(level);\n        }\n        var li = ListBase.createListItemFromJson(this.createElement, sNodes, this.listBaseOption, level);\n        var dropUl;\n        if (!dropEle) {\n            dropUl = dropLi ? this.expandParent(dropLi) : select('.' + PARENTITEM, this.element);\n        }\n        else {\n            dropUl = dropEle;\n        }\n        var refNode = dropUl.childNodes[index];\n        for (var i = 0; i < li.length; i++) {\n            dropUl.insertBefore(li[i], refNode);\n        }\n        var id = this.getId(dropLi);\n        if (this.dataType === 1) {\n            this.updateField(this.treeData, this.fields, id, 'hasChildren', true);\n            var refId = this.getId(refNode);\n            var pos = isNOU(refId) ? this.treeData.length : this.getDataPos(this.treeData, this.fields, refId);\n            for (var j = 0; j < nodes.length; j++) {\n                if (!isNOU(id)) {\n                    var currId = this.isNumberTypeId ? parseFloat(id) : id;\n                    setValue(this.fields.parentID, currId, nodes[j]);\n                }\n                this.treeData.splice(pos, 0, nodes[j]);\n                pos++;\n            }\n        }\n        else {\n            this.addChildData(this.treeData, this.fields, id, nodes, index);\n        }\n        this.finalizeNode(dropUl);\n    };\n    TreeView.prototype.updateMapper = function (level) {\n        var mapper = (level === 1) ? this.fields : this.getChildFields(this.fields, level - 1, 1);\n        this.updateListProp(mapper);\n    };\n    TreeView.prototype.updateListProp = function (mapper) {\n        var prop = this.getActualProperties(mapper);\n        this.listBaseOption.fields = prop;\n        this.listBaseOption.fields.url = prop.hasOwnProperty('navigateUrl') ? prop.navigateUrl : 'navigateUrl';\n    };\n    TreeView.prototype.getDataPos = function (obj, mapper, id) {\n        var pos = null;\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var nodeId = getValue(mapper.id, obj[i]);\n            if (obj[i] && nodeId && nodeId.toString() === id) {\n                return i;\n            }\n            else if (typeof mapper.child === 'string' && !isNOU(getValue(mapper.child, obj[i]))) {\n                var data = getValue(mapper.child, obj[i]);\n                pos = this.getDataPos(data, this.getChildMapper(mapper), id);\n                if (pos !== null) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNOU(getValue('child', obj[i]))) {\n                var items = getValue('child', obj[i]);\n                pos = this.getDataPos(items, this.getChildMapper(mapper), id);\n                if (pos !== null) {\n                    break;\n                }\n            }\n        }\n        return pos;\n    };\n    TreeView.prototype.addChildData = function (obj, mapper, id, data, index) {\n        var updated;\n        if (isNOU(id)) {\n            index = isNOU(index) ? obj.length : index;\n            for (var k = 0, len = data.length; k < len; k++) {\n                obj.splice(index, 0, data[k]);\n                index++;\n            }\n            return updated;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var nodeId = getValue(mapper.id, obj[i]);\n            if (obj[i] && nodeId && nodeId.toString() === id) {\n                if ((typeof mapper.child === 'string' && obj[i].hasOwnProperty(mapper.child)) ||\n                    (this.fields.dataSource instanceof DataManager && obj[i].hasOwnProperty('child'))) {\n                    var key = (typeof mapper.child === 'string') ? mapper.child : 'child';\n                    var childData = getValue(key, obj[i]);\n                    index = isNOU(index) ? childData.length : index;\n                    for (var k = 0, len = data.length; k < len; k++) {\n                        childData.splice(index, 0, data[k]);\n                        index++;\n                    }\n                }\n                else {\n                    var key = (typeof mapper.child === 'string') ? mapper.child : 'child';\n                    obj[i][key] = data;\n                }\n                return true;\n            }\n            else if (typeof mapper.child === 'string' && !isNOU(getValue(mapper.child, obj[i]))) {\n                var childObj = getValue(mapper.child, obj[i]);\n                updated = this.addChildData(childObj, this.getChildMapper(mapper), id, data, index);\n                if (updated !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNOU(getValue('child', obj[i]))) {\n                var childData = getValue('child', obj[i]);\n                updated = this.addChildData(childData, this.getChildMapper(mapper), id, data, index);\n                if (updated !== undefined) {\n                    break;\n                }\n            }\n        }\n        return updated;\n    };\n    TreeView.prototype.doDisableAction = function (nodes) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            var liEle = this.getElement(nodes[i]);\n            if (isNOU(liEle)) {\n                continue;\n            }\n            liEle.setAttribute('aria-disabled', 'true');\n            addClass([liEle], DISABLE);\n        }\n    };\n    TreeView.prototype.doEnableAction = function (nodes) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            var liEle = this.getElement(nodes[i]);\n            if (isNOU(liEle)) {\n                continue;\n            }\n            liEle.removeAttribute('aria-disabled');\n            removeClass([liEle], DISABLE);\n        }\n    };\n    TreeView.prototype.setTouchClass = function () {\n        var ele = closest(this.element, '.' + BIGGER);\n        this.touchClass = isNOU(ele) ? '' : SMALL;\n    };\n    TreeView.prototype.updatePersistProp = function () {\n        this.removeField(this.treeData, this.fields, ['selected', 'expanded']);\n        var sleNodes = this.selectedNodes;\n        for (var l = 0, slelen = sleNodes.length; l < slelen; l++) {\n            this.updateField(this.treeData, this.fields, sleNodes[l], 'selected', true);\n        }\n        var enodes = this.expandedNodes;\n        for (var k = 0, nodelen = enodes.length; k < nodelen; k++) {\n            this.updateField(this.treeData, this.fields, enodes[k], 'expanded', true);\n        }\n        if (this.showCheckBox) {\n            this.removeField(this.treeData, this.fields, ['isChecked']);\n            var cnodes = this.checkedNodes;\n            for (var m = 0, nodelen = cnodes.length; m < nodelen; m++) {\n                this.updateField(this.treeData, this.fields, cnodes[m], 'isChecked', true);\n            }\n        }\n    };\n    TreeView.prototype.removeField = function (obj, mapper, names) {\n        if (isNOU(obj) || isNOU(mapper)) {\n            return;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            for (var j = 0; j < names.length; j++) {\n                var field = this.getMapperProp(mapper, names[j]);\n                if (!isNOU(obj[i][field])) {\n                    delete obj[i][field];\n                }\n            }\n            if (typeof mapper.child === 'string' && !isNOU(getValue(mapper.child, obj[i]))) {\n                this.removeField(getValue(mapper.child, obj[i]), this.getChildMapper(mapper), names);\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNOU(getValue('child', obj[i]))) {\n                this.removeField(getValue('child', obj[i]), this.getChildMapper(mapper), names);\n            }\n        }\n    };\n    TreeView.prototype.getMapperProp = function (mapper, fieldName) {\n        switch (fieldName) {\n            case 'selected':\n                return !isNOU(mapper.selected) ? mapper.selected : 'selected';\n            case 'expanded':\n                return !isNOU(mapper.expanded) ? mapper.expanded : 'expanded';\n            case 'isChecked':\n                return !isNOU(mapper.isChecked) ? mapper.isChecked : 'isChecked';\n            case 'hasChildren':\n                return !isNOU(mapper.hasChildren) ? mapper.hasChildren : 'hasChildren';\n            default:\n                return fieldName;\n        }\n    };\n    TreeView.prototype.updateField = function (obj, mapper, id, key, value) {\n        var childNodes;\n        if (isNOU(id)) {\n            return;\n        }\n        else if (this.dataType === 1) {\n            var newId = this.isNumberTypeId ? parseFloat(id) : id;\n            var resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', newId, false));\n            setValue(this.getMapperProp(mapper, key), value, resultData[0]);\n        }\n        else {\n            this.updateChildField(obj, mapper, id, key, value);\n        }\n    };\n    TreeView.prototype.updateChildField = function (obj, mapper, id, key, value, remove) {\n        var removedData;\n        if (isNOU(obj)) {\n            return removedData;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var nodeId = getValue(mapper.id, obj[i]);\n            if (obj[i] && nodeId && nodeId.toString() === id) {\n                if (remove) {\n                    removedData = obj.splice(i, 1);\n                }\n                else {\n                    setValue(this.getMapperProp(mapper, key), value, obj[i]);\n                    removedData = [];\n                }\n                return removedData;\n            }\n            else if (typeof mapper.child === 'string' && !isNOU(getValue(mapper.child, obj[i]))) {\n                var childData = getValue(mapper.child, obj[i]);\n                removedData = this.updateChildField(childData, this.getChildMapper(mapper), id, key, value, remove);\n                if (removedData !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNOU(getValue('child', obj[i]))) {\n                var childItems = getValue('child', obj[i]);\n                removedData = this.updateChildField(childItems, this.getChildMapper(mapper), id, key, value, remove);\n                if (removedData !== undefined) {\n                    break;\n                }\n            }\n        }\n        return removedData;\n    };\n    TreeView.prototype.triggerEvent = function () {\n        var eventArgs = { data: this.treeData };\n        this.trigger('dataSourceChanged', eventArgs);\n    };\n    TreeView.prototype.wireInputEvents = function (inpEle) {\n        EventHandler.add(inpEle, 'blur', this.inputFocusOut, this);\n    };\n    TreeView.prototype.wireEditingEvents = function (toBind) {\n        if (toBind) {\n            var proxy_2 = this;\n            this.touchEditObj = new Touch(this.element, {\n                tap: function (e) {\n                    if (e.tapCount === 2) {\n                        e.originalEvent.preventDefault();\n                        proxy_2.editingHandler(e.originalEvent);\n                    }\n                }\n            });\n        }\n        else {\n            if (this.touchEditObj) {\n                this.touchEditObj.destroy();\n            }\n        }\n    };\n    TreeView.prototype.wireClickEvent = function (toBind) {\n        if (toBind) {\n            var proxy_3 = this;\n            this.touchClickObj = new Touch(this.element, {\n                tap: function (e) {\n                    e.originalEvent.preventDefault();\n                    proxy_3.clickHandler(e);\n                }\n            });\n        }\n        else {\n            if (this.touchClickObj) {\n                this.touchClickObj.destroy();\n            }\n        }\n    };\n    TreeView.prototype.wireExpandOnEvent = function (toBind) {\n        var _this = this;\n        if (toBind) {\n            var proxy_4 = this;\n            this.touchExpandObj = new Touch(this.element, {\n                tap: function (e) {\n                    if (_this.expandOnType === 'Click' || (_this.expandOnType === 'DblClick' && e.tapCount === 2)) {\n                        proxy_4.expandHandler(e);\n                    }\n                }\n            });\n        }\n        else {\n            if (this.touchExpandObj) {\n                this.touchExpandObj.destroy();\n            }\n        }\n    };\n    TreeView.prototype.mouseDownHandler = function (e) {\n        this.mouseDownStatus = true;\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (e.ctrlKey && this.allowMultiSelection) {\n            EventHandler.add(this.element, 'contextmenu', this.preventContextMenu, this);\n        }\n    };\n    ;\n    TreeView.prototype.preventContextMenu = function (e) {\n        e.preventDefault();\n    };\n    TreeView.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n        this.wireClickEvent(true);\n        if (this.expandOnType !== 'None') {\n            this.wireExpandOnEvent(true);\n        }\n        EventHandler.add(this.element, 'focus', this.focusIn, this);\n        EventHandler.add(this.element, 'blur', this.focusOut, this);\n        EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.element, 'mouseout', this.onMouseLeave, this);\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown',\n        });\n    };\n    TreeView.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n        this.wireClickEvent(false);\n        this.wireExpandOnEvent(false);\n        EventHandler.remove(this.element, 'focus', this.focusIn);\n        EventHandler.remove(this.element, 'blur', this.focusOut);\n        EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.element, 'mouseout', this.onMouseLeave);\n        this.keyboardModule.destroy();\n    };\n    TreeView.prototype.parents = function (element, selector) {\n        var matched = [];\n        var el = element.parentNode;\n        while (!isNOU(el)) {\n            if (matches(el, selector)) {\n                matched.push(el);\n            }\n            el = el.parentNode;\n        }\n        return matched;\n    };\n    TreeView.prototype.isDescendant = function (parent, child) {\n        var node = child.parentNode;\n        while (!isNOU(node)) {\n            if (node === parent) {\n                return true;\n            }\n            node = node.parentNode;\n        }\n        return false;\n    };\n    TreeView.prototype.showSpinner = function (element) {\n        addClass([element], LOAD);\n        createSpinner({\n            target: element,\n            width: Browser.isDevice ? 16 : 14\n        }, this.createElement);\n        showSpinner(element);\n    };\n    TreeView.prototype.hideSpinner = function (element) {\n        hideSpinner(element);\n        element.innerHTML = '';\n        removeClass([element], LOAD);\n    };\n    TreeView.prototype.setCheckedNodes = function (nodes) {\n        nodes = JSON.parse(JSON.stringify(nodes));\n        this.uncheckAll(this.checkedNodes);\n        if (nodes.length > 0) {\n            this.checkAll(nodes);\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @param  {TreeView} newProp\n     * @param  {TreeView} oldProp\n     * @returns void\n     * @private\n     */\n    TreeView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowDragAndDrop':\n                    this.setDragAndDrop(this.allowDragAndDrop);\n                    break;\n                case 'allowEditing':\n                    this.wireEditingEvents(this.allowEditing);\n                    break;\n                case 'allowMultiSelection':\n                    if (this.selectedNodes.length > 1) {\n                        var sNode = this.getElement(this.selectedNodes[0]);\n                        this.isLoaded = false;\n                        this.removeSelectAll();\n                        this.selectNode(sNode, null);\n                        this.isLoaded = true;\n                    }\n                    this.setMultiSelect(this.allowMultiSelection);\n                    this.addMultiSelect(this.allowMultiSelection);\n                    break;\n                case 'checkedNodes':\n                    if (this.showCheckBox) {\n                        this.checkedNodes = oldProp.checkedNodes;\n                        this.setCheckedNodes(newProp.checkedNodes);\n                    }\n                    break;\n                case 'cssClass':\n                    this.setCssClass(oldProp.cssClass, newProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'expandedNodes':\n                    this.isAnimate = false;\n                    this.setProperties({ expandedNodes: [] }, true);\n                    this.collapseAll();\n                    this.isInitalExpand = true;\n                    this.setProperties({ expandedNodes: isNOU(newProp.expandedNodes) ? [] : newProp.expandedNodes }, true);\n                    this.doExpandAction();\n                    this.isInitalExpand = false;\n                    this.isAnimate = true;\n                    break;\n                case 'expandOn':\n                    this.wireExpandOnEvent(false);\n                    this.setExpandOnType();\n                    if (this.expandOnType !== 'None') {\n                        this.wireExpandOnEvent(true);\n                    }\n                    break;\n                case 'fields':\n                    this.isAnimate = false;\n                    this.initialRender = true;\n                    this.updateListProp(this.fields);\n                    this.reRenderNodes();\n                    this.initialRender = false;\n                    this.isAnimate = true;\n                    break;\n                case 'fullRowSelect':\n                    this.setFullRow(this.fullRowSelect);\n                    this.addFullRow(this.fullRowSelect);\n                    break;\n                case 'nodeTemplate':\n                    this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n                    this.reRenderNodes();\n                    break;\n                case 'selectedNodes':\n                    this.removeSelectAll();\n                    this.setProperties({ selectedNodes: newProp.selectedNodes }, true);\n                    this.doSelectionAction();\n                    break;\n                case 'showCheckBox':\n                    this.reRenderNodes();\n                    break;\n                case 'sortOrder':\n                    this.reRenderNodes();\n                    break;\n            }\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     */\n    TreeView.prototype.destroy = function () {\n        this.element.removeAttribute('aria-activedescendant');\n        this.element.removeAttribute('tabindex');\n        this.unWireEvents();\n        this.wireEditingEvents(false);\n        this.rippleFn();\n        this.rippleIconFn();\n        this.setCssClass(this.cssClass, null);\n        this.setDragAndDrop(false);\n        this.setFullRow(false);\n        this.element.innerHTML = '';\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Adds the collection of TreeView nodes based on target and index position. If target node is not specified,\n     * then the nodes are added as children of the given parentID or in the root level of TreeView.\n     * @param  { { [key: string]: Object }[] } nodes - Specifies the array of JSON data that has to be added.\n     * @param  { string | Element } target - Specifies ID of TreeView node/TreeView node as target element.\n     * @param  { number } index - Specifies the index to place the newly added nodes in the target element.\n     * @param { boolean } preventTargetExpand - If set to true, the target parent node will be prevented from auto expanding.\n     */\n    TreeView.prototype.addNodes = function (nodes, target, index, preventTargetExpand) {\n        if (isNOU(nodes)) {\n            return;\n        }\n        nodes = JSON.parse(JSON.stringify(nodes));\n        var dropLi = this.getElement(target);\n        this.preventExpand = preventTargetExpand;\n        if (this.fields.dataSource instanceof DataManager) {\n            var dropUl_1;\n            var icon = dropLi ? dropLi.querySelector('.' + ICON) : null;\n            var proxy_5 = this;\n            if (dropLi && icon && icon.classList.contains(EXPANDABLE) &&\n                dropLi.querySelector('.' + PARENTITEM) === null) {\n                proxy_5.renderChildNodes(dropLi, null, function () {\n                    dropUl_1 = dropLi.querySelector('.' + PARENTITEM);\n                    proxy_5.addGivenNodes(nodes, dropLi, index, true, dropUl_1);\n                    proxy_5.triggerEvent();\n                });\n            }\n            else {\n                this.addGivenNodes(nodes, dropLi, index, true);\n                this.triggerEvent();\n            }\n        }\n        else if (this.dataType === 2) {\n            this.addGivenNodes(nodes, dropLi, index);\n        }\n        else {\n            if (dropLi) {\n                this.addGivenNodes(nodes, dropLi, index);\n            }\n            else {\n                nodes = this.getSortedData(nodes);\n                for (var i = 0; i < nodes.length; i++) {\n                    var pid = getValue(this.fields.parentID, nodes[i]);\n                    dropLi = pid ? this.getElement(pid.toString()) : pid;\n                    this.addGivenNodes([nodes[i]], dropLi, index);\n                }\n            }\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n        }\n        if (this.fields.dataSource instanceof DataManager === false) {\n            this.preventExpand = false;\n            this.triggerEvent();\n        }\n    };\n    /**\n     * Instead of clicking on the TreeView node for editing, we can enable it by using\n     * `beginEdit` property. On passing the node ID or element through this property, the edit textBox\n     * will be created for the particular node thus allowing us to edit it.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n     */\n    TreeView.prototype.beginEdit = function (node) {\n        var ele = this.getElement(node);\n        if (!isNOU(ele)) {\n            this.createTextbox(ele, null);\n        }\n    };\n    /**\n     * Checks all the unchecked nodes. You can also check specific nodes by passing array of unchecked nodes\n     * as argument to this method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     */\n    TreeView.prototype.checkAll = function (nodes) {\n        if (this.showCheckBox) {\n            this.doCheckBoxAction(nodes, true);\n        }\n    };\n    /**\n     * Collapses all the expanded TreeView nodes. You can collapse specific nodes by passing array of nodes as argument to this method.\n     * You can also collapse all the nodes excluding the hidden nodes by setting **excludeHiddenNodes** to true. If you want to collapse\n     * a specific level of nodes, set **level** as argument to collapseAll method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/ array of TreeView node.\n     * @param  {number} level - TreeView nodes will collapse up to the given level.\n     * @param  {boolean} excludeHiddenNodes - Whether or not to exclude hidden nodes of TreeView when collapsing all nodes.\n     */\n    TreeView.prototype.collapseAll = function (nodes, level, excludeHiddenNodes) {\n        if (!isNOU(nodes)) {\n            this.doGivenAction(nodes, COLLAPSIBLE, false);\n        }\n        else {\n            if (level > 0) {\n                this.collapseByLevel(select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n            }\n            else {\n                this.collapseAllNodes(excludeHiddenNodes);\n            }\n        }\n    };\n    /**\n     * Disables the collection of nodes by passing the ID of nodes or node elements in the array.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n     */\n    TreeView.prototype.disableNodes = function (nodes) {\n        if (!isNOU(nodes)) {\n            this.doDisableAction(nodes);\n        }\n    };\n    /**\n     * Enables the collection of disabled nodes by passing the ID of nodes or node elements in the array.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n     */\n    TreeView.prototype.enableNodes = function (nodes) {\n        if (!isNOU(nodes)) {\n            this.doEnableAction(nodes);\n        }\n    };\n    /**\n     * Ensures visibility of the TreeView node by using node ID or node element.\n     * When many TreeView nodes are present and we need to find a particular node, `ensureVisible` property\n     * helps bring the node to visibility by expanding the TreeView and scrolling to the specific node.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView nodes.\n     */\n    TreeView.prototype.ensureVisible = function (node) {\n        var liEle = this.getElement(node);\n        if (isNOU(liEle)) {\n            return;\n        }\n        var parents = this.parents(liEle, '.' + LISTITEM);\n        this.expandAll(parents);\n        setTimeout(function () { liEle.scrollIntoView(true); }, 450);\n    };\n    /**\n     * Expands all the collapsed TreeView nodes. You can expand the specific nodes by passing the array of collapsed nodes\n     * as argument to this method. You can also expand all the collapsed nodes by excluding the hidden nodes by setting\n     * **excludeHiddenNodes** to true to this method. To expand a specific level of nodes, set **level** as argument to expandAll method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n     * @param  {number} level - TreeView nodes will expand up to the given level.\n     * @param  {boolean} excludeHiddenNodes - Whether or not to exclude hidden nodes when expanding all nodes.\n     */\n    TreeView.prototype.expandAll = function (nodes, level, excludeHiddenNodes) {\n        if (!isNOU(nodes)) {\n            this.doGivenAction(nodes, EXPANDABLE, true);\n        }\n        else {\n            if (level > 0) {\n                this.expandByLevel(select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n            }\n            else {\n                this.expandAllNodes(excludeHiddenNodes);\n            }\n        }\n    };\n    /**\n     * Gets all the checked nodes including child, whether it is loaded or not.\n     */\n    TreeView.prototype.getAllCheckedNodes = function () {\n        var checkNodes = this.checkedNodes;\n        var newCheck = [];\n        var i = 0;\n        var id = this.fields.id;\n        for (i; i < this.treeData.length; i++) {\n            //Checks if isChecked is enabled while node is not loaded in DOM\n            var checked = null;\n            var childNode = null;\n            var isLoaded = this.element.querySelector('[data-uid=\"' + this.treeData[i][id].toString() + '\"]');\n            if (isLoaded && isLoaded.querySelector('.e-list-item') === null) {\n                //Checks if isChecked is enabled for parent\n                if (this.treeData[i][this.fields.isChecked] === true\n                    && this.checkedElement.indexOf(this.treeData[i][id].toString()) === -1) {\n                    newCheck.push(this.treeData[i][id].toString());\n                    checked = 2;\n                }\n                //Checks for child nodes with isChecked enabled\n                if (checked !== 2) {\n                    checked = 1;\n                }\n                childNode = this.getChildNodes(this.treeData, this.treeData[i][id].toString());\n                (childNode !== null) ? this.allCheckNode(childNode, newCheck, checked) : childNode = null;\n            }\n        }\n        i = 0;\n        //Gets checked nodes based on UI interaction\n        while (i < checkNodes.length) {\n            if (newCheck.indexOf(checkNodes[i]) !== -1) {\n                i++;\n                continue;\n            }\n            newCheck.push(checkNodes[i]);\n            //Gets all child which is not loaded while parent is checked\n            var parentNode = this.element.querySelector('[data-uid=\"' + checkNodes[i] + '\"]');\n            if (parentNode && parentNode.querySelector('.e-list-item') === null) {\n                var child = this.getChildNodes(this.treeData, checkNodes[i].toString());\n                (child) ? this.allCheckNode(child, newCheck) : child = null;\n            }\n            i++;\n        }\n        return newCheck;\n    };\n    /**\n     * Get the node's data such as id, text, parentID, selected, isChecked, and expanded by passing the node element or it's ID.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n     */\n    TreeView.prototype.getNode = function (node) {\n        var ele = this.getElement(node);\n        return this.getNodeData(ele, true);\n    };\n    /**\n     * To get the updated data source of TreeView after performing some operation like drag and drop, node editing,\n     * node selecting/unSelecting, node expanding/collapsing, node checking/unChecking, adding and removing node.\n     * * If you pass the ID of TreeView node as arguments for this method then it will return the updated data source\n     * of the corresponding node otherwise it will return the entire updated data source of TreeView.\n     * * The updated data source also contains custom attributes if you specified in data source.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n     */\n    TreeView.prototype.getTreeData = function (node) {\n        var id = this.getId(node);\n        this.updatePersistProp();\n        if (isNOU(id)) {\n            return this.treeData;\n        }\n        else {\n            var data = this.getNodeObject(id);\n            return isNOU(data) ? [] : [data];\n        }\n    };\n    /**\n     * Moves the collection of nodes within the same TreeView based on target or its index position.\n     * @param  {string[] | Element[]} sourceNodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     * @param  {string | Element} target - Specifies ID of TreeView node/TreeView node as target element.\n     * @param  {number} index - Specifies the index to place the moved nodes in the target element.\n     * @param { boolean } preventTargetExpand - If set to true, the target parent node will be prevented from auto expanding.\n     */\n    TreeView.prototype.moveNodes = function (sourceNodes, target, index, preventTargetExpand) {\n        var dropLi = this.getElement(target);\n        if (isNOU(dropLi)) {\n            return;\n        }\n        for (var i = 0; i < sourceNodes.length; i++) {\n            var dragLi = this.getElement(sourceNodes[i]);\n            if (isNOU(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n                continue;\n            }\n            this.preventExpand = preventTargetExpand;\n            this.dropAsChildNode(dragLi, dropLi, this, index);\n        }\n        if (this.fields.dataSource instanceof DataManager === false) {\n            this.preventExpand = false;\n        }\n        this.triggerEvent();\n    };\n    /**\n     * Removes the collection of TreeView nodes by passing the array of node details as argument to this method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     */\n    TreeView.prototype.removeNodes = function (nodes) {\n        if (!isNOU(nodes)) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                var liEle = this.getElement(nodes[i]);\n                if (isNOU(liEle)) {\n                    continue;\n                }\n                this.removeNode(liEle);\n            }\n            this.triggerEvent();\n        }\n    };\n    /**\n     * Replaces the text of the TreeView node with the given text.\n     * @param  {string | Element} target - Specifies ID of TreeView node/TreeView node as target element.\n     * @param  {string} newText - Specifies the new text of TreeView node.\n     */\n    TreeView.prototype.updateNode = function (target, newText) {\n        if (isNOU(target) || isNOU(newText) || !this.allowEditing) {\n            return;\n        }\n        var liEle = this.getElement(target);\n        if (isNOU(liEle)) {\n            return;\n        }\n        var txtEle = select('.' + LISTTEXT, liEle);\n        this.updateOldText(liEle);\n        var eventArgs = this.getEditEvent(liEle, null, null);\n        this.trigger('nodeEditing', eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n        this.appendNewText(liEle, txtEle, newText, false);\n    };\n    /**\n     * Unchecks all the checked nodes. You can also uncheck the specific nodes by passing array of checked nodes\n     * as argument to this method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     */\n    TreeView.prototype.uncheckAll = function (nodes) {\n        if (this.showCheckBox) {\n            this.doCheckBoxAction(nodes, false);\n        }\n    };\n    __decorate([\n        Property(false)\n    ], TreeView.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property(false)\n    ], TreeView.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], TreeView.prototype, \"allowMultiSelection\", void 0);\n    __decorate([\n        Complex({}, NodeAnimationSettings)\n    ], TreeView.prototype, \"animation\", void 0);\n    __decorate([\n        Property()\n    ], TreeView.prototype, \"checkedNodes\", void 0);\n    __decorate([\n        Property('')\n    ], TreeView.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], TreeView.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(false)\n    ], TreeView.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property()\n    ], TreeView.prototype, \"expandedNodes\", void 0);\n    __decorate([\n        Property('Auto')\n    ], TreeView.prototype, \"expandOn\", void 0);\n    __decorate([\n        Complex({}, FieldsSettings)\n    ], TreeView.prototype, \"fields\", void 0);\n    __decorate([\n        Property(true)\n    ], TreeView.prototype, \"fullRowSelect\", void 0);\n    __decorate([\n        Property()\n    ], TreeView.prototype, \"nodeTemplate\", void 0);\n    __decorate([\n        Property()\n    ], TreeView.prototype, \"selectedNodes\", void 0);\n    __decorate([\n        Property('None')\n    ], TreeView.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property(false)\n    ], TreeView.prototype, \"showCheckBox\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"dataSourceChanged\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"drawNode\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"keyPress\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeChecked\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeChecking\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeClicked\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeCollapsed\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeCollapsing\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeDragging\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeDragStart\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeDragStop\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeDropped\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeEdited\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeEditing\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeExpanded\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeExpanding\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeSelected\", void 0);\n    __decorate([\n        Event()\n    ], TreeView.prototype, \"nodeSelecting\", void 0);\n    TreeView = TreeView_1 = __decorate([\n        NotifyPropertyChanges\n    ], TreeView);\n    return TreeView;\n    var TreeView_1;\n}(Component));\nexport { TreeView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, formatUnit, EventHandler, Event, isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport { Property, NotifyPropertyChanges, Browser } from '@syncfusion/ej2-base';\nimport { setStyleAttribute as setStyle, addClass, removeClass, Touch } from '@syncfusion/ej2-base';\nvar CONTROL = 'e-control';\nvar ROOT = 'e-sidebar';\nvar DOCKER = 'e-dock';\nvar CLOSE = 'e-close';\nvar OPEN = 'e-open';\nvar TRASITION = 'e-transition';\nvar DEFAULTBACKDROP = 'e-sidebar-overlay';\nvar CONTEXTBACKDROP = 'e-backdrop';\nvar RTL = 'e-rtl';\nvar RIGHT = 'e-right';\nvar LEFT = 'e-left';\nvar OVER = 'e-over';\nvar PUSH = 'e-push';\nvar SLIDE = 'e-slide';\nvar VISIBILITY = 'e-visibility';\nvar MAINCONTENTANIMATION = 'e-content-animation';\nvar DISABLEANIMATION = 'e-disable-animation';\nvar CONTEXT = 'e-sidebar-context';\nvar SIDEBARABSOLUTE = 'e-sidebar-absolute';\n/**\n * Sidebar is an expandable or collapsible\n * component that typically act as a side container to place the primary or secondary content alongside of the main content.\n * ```html\n * <aside id=\"sidebar\">\n * </aside>\n * ```\n * ```typescript\n * <script>\n *   let sidebarObject: Sidebar = new Sidebar();\n *   sidebarObject.appendTo(\"#sidebar\");\n * </script>\n * ```\n */\nvar Sidebar = /** @class */ (function (_super) {\n    __extends(Sidebar, _super);\n    function Sidebar(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    Sidebar.prototype.preRender = function () {\n        this.setWidth();\n    };\n    Sidebar.prototype.render = function () {\n        this.initialize();\n        this.wireEvents();\n    };\n    Sidebar.prototype.initialize = function () {\n        this.setTarget();\n        this.addClass();\n        this.setZindex();\n        if (this.enableDock) {\n            this.setDock();\n        }\n        if (this.isOpen) {\n            this.show();\n        }\n        else {\n            this.setMediaQuery();\n        }\n        this.setType(this.type);\n        this.setCloseOnDocumentClick();\n        this.setEnableRTL();\n    };\n    Sidebar.prototype.setEnableRTL = function () {\n        this.enableRtl ? (addClass([this.element], RTL)) :\n            (removeClass([this.element], RTL));\n    };\n    Sidebar.prototype.setTarget = function () {\n        if (typeof (this.target) === 'string') {\n            this.setProperties({ target: document.querySelector(this.target) }, true);\n        }\n        if (this.target) {\n            this.target.insertBefore(this.element, this.target.children[0]);\n            addClass([this.element], SIDEBARABSOLUTE);\n            addClass([this.target], CONTEXT);\n        }\n    };\n    Sidebar.prototype.setCloseOnDocumentClick = function () {\n        if (this.closeOnDocumentClick) {\n            EventHandler.add(document, 'mousedown touchstart', this.documentclickHandler, this);\n        }\n        else {\n            EventHandler.remove(document, 'mousedown touchstart', this.documentclickHandler);\n        }\n    };\n    Sidebar.prototype.setWidth = function () {\n        if (this.enableDock && this.position === 'Left') {\n            setStyle(this.element, { 'width': this.setDimension(this.dockSize) });\n        }\n        else if (this.enableDock && this.position === 'Right') {\n            setStyle(this.element, { 'width': this.setDimension(this.dockSize) });\n        }\n        else if (!this.enableDock) {\n            setStyle(this.element, { 'width': this.setDimension(this.width) });\n        }\n    };\n    Sidebar.prototype.setDimension = function (width) {\n        if (typeof width === 'number') {\n            width = formatUnit(width);\n        }\n        else if (typeof width === 'string') {\n            width = (width.match(/px|%|em/)) ? width : formatUnit(width);\n        }\n        else {\n            width = '100%';\n        }\n        return width;\n    };\n    Sidebar.prototype.setZindex = function () {\n        setStyle(this.element, { 'z-index': '' + this.zIndex });\n    };\n    Sidebar.prototype.addClass = function () {\n        var classELement = document.querySelector('.e-main-content');\n        if (!isNullOrUndefined((classELement ||\n            this.element.nextElementSibling))) {\n            addClass([classELement || this.element.nextElementSibling], [MAINCONTENTANIMATION]);\n        }\n        if (!this.enableDock && this.type !== 'Auto') {\n            addClass([this.element], [VISIBILITY]);\n        }\n        removeClass([this.element], [OPEN, CLOSE, RIGHT, LEFT, SLIDE, PUSH, OVER]);\n        this.element.classList.add(ROOT);\n        addClass([this.element], (this.position === 'Right') ? RIGHT : LEFT);\n        if (this.type === 'Auto' && !Browser.isDevice && !this.enableDock) {\n            addClass([this.element], OPEN);\n        }\n        else {\n            addClass([this.element], CLOSE);\n        }\n    };\n    Sidebar.prototype.destroyBackDrop = function () {\n        var sibling = document.querySelector('.e-main-content') ||\n            this.element.nextElementSibling;\n        if (this.target && this.showBackdrop && sibling) {\n            removeClass([sibling], CONTEXTBACKDROP);\n        }\n        else if (this.showBackdrop && this.modal) {\n            this.modal.style.display = 'none';\n            this.modal.outerHTML = '';\n            this.modal = null;\n        }\n    };\n    /**\n     * Hide the Sidebar component, if it is in an open state.\n     * @returns void\n     */\n    Sidebar.prototype.hide = function () {\n        var closeArguments = { model: this, element: this.element, cancel: false };\n        this.trigger('close', closeArguments);\n        if (!closeArguments.cancel) {\n            if (this.element.classList.contains(CLOSE)) {\n                return;\n            }\n            if (this.element.classList.contains(OPEN)) {\n                var changeArguments = { name: 'change', element: this.element };\n                this.trigger('change', changeArguments);\n            }\n            addClass([this.element], CLOSE);\n            removeClass([this.element], OPEN);\n            this.enableDock ? setStyle(this.element, { 'width': formatUnit(this.dockSize) }) :\n                setStyle(this.element, { 'width': formatUnit(this.width) });\n            this.setDock();\n            this.setType(this.type);\n            var sibling = document.querySelector('.e-main-content') ||\n                this.element.nextElementSibling;\n            if (!this.enableDock && sibling) {\n                sibling.style.transform = 'translateX(' + 0 + 'px)';\n                this.position === 'Left' ? sibling.style.marginLeft = '0px' : sibling.style.marginRight = '0px';\n            }\n            this.destroyBackDrop();\n            this.setCloseOnDocumentClick();\n            this.setAnimation();\n            if (this.type === 'Slide') {\n                document.body.classList.remove('e-sidebar-overflow');\n            }\n            this.setProperties({ isOpen: false }, true);\n        }\n    };\n    /**\n     * Shows the Sidebar component, if it is in closed state.\n     * @returns void\n     */\n    Sidebar.prototype.show = function () {\n        var openArguments = { model: this, element: this.element, cancel: false };\n        this.trigger('open', openArguments);\n        if (!openArguments.cancel) {\n            removeClass([this.element], VISIBILITY);\n            if (this.element.classList.contains(OPEN)) {\n                return;\n            }\n            if (this.element.classList.contains(CLOSE)) {\n                var changeArguments = { name: 'change', element: this.element };\n                this.trigger('change', changeArguments);\n            }\n            addClass([this.element], [OPEN, TRASITION]);\n            setStyle(this.element, { 'transform': '' });\n            removeClass([this.element], CLOSE);\n            setStyle(this.element, { 'width': formatUnit(this.width) });\n            var elementWidth = this.element.getBoundingClientRect().width;\n            this.setType(this.type);\n            this.createBackDrop();\n            this.setCloseOnDocumentClick();\n            this.setAnimation();\n            if (this.type === 'Slide') {\n                document.body.classList.add('e-sidebar-overflow');\n            }\n            this.setProperties({ isOpen: true }, true);\n        }\n    };\n    Sidebar.prototype.setAnimation = function () {\n        if (this.animate) {\n            removeClass([this.element], DISABLEANIMATION);\n        }\n        else {\n            addClass([this.element], DISABLEANIMATION);\n        }\n    };\n    Sidebar.prototype.setDock = function () {\n        if (this.enableDock && this.position === 'Left' && !this.getState()) {\n            setStyle(this.element, { 'transform': 'translateX(' + -100 + '%) translateX(' + this.setDimension(this.dockSize) + ')' });\n        }\n        else if (this.enableDock && this.position === 'Right' && !this.getState()) {\n            setStyle(this.element, { 'transform': 'translateX(' + 100 + '%) translateX(' + '-' + this.setDimension(this.dockSize) + ')' });\n        }\n        if (this.element.classList.contains(CLOSE) && this.enableDock) {\n            setStyle(this.element, { 'width': this.setDimension(this.dockSize) });\n        }\n    };\n    Sidebar.prototype.createBackDrop = function () {\n        if (this.target && this.showBackdrop) {\n            var sibling = document.querySelector('.e-main-content') ||\n                this.element.nextElementSibling;\n            addClass([sibling], CONTEXTBACKDROP);\n        }\n        else if (this.showBackdrop && !this.modal && this.getState()) {\n            this.modal = this.createElement('div');\n            this.modal.className = DEFAULTBACKDROP;\n            this.modal.style.display = 'block';\n            document.body.appendChild(this.modal);\n        }\n    };\n    Sidebar.prototype.getPersistData = function () {\n        return this.addOnPersist(['type', 'position', 'isOpen']);\n    };\n    /**\n     * Returns the current module name.\n     * @returns string\n     * @private\n     */\n    Sidebar.prototype.getModuleName = function () {\n        return 'sidebar';\n    };\n    /**\n     * Shows or hides the Sidebar based on the current state.\n     * @returns void\n     */\n    Sidebar.prototype.toggle = function (e) {\n        this.element.classList.contains(OPEN) ? this.hide() : this.show();\n    };\n    Sidebar.prototype.getState = function () {\n        return this.element.classList.contains(OPEN) ? true : false;\n    };\n    Sidebar.prototype.setMediaQuery = function () {\n        if (this.mediaQuery && this.mediaQuery.matches) {\n            this.show();\n        }\n        else if (this.mediaQuery && this.getState()) {\n            this.hide();\n        }\n    };\n    Sidebar.prototype.resize = function (e) {\n        if (this.type === 'Auto') {\n            if (Browser.isDevice) {\n                addClass([this.element], OVER);\n            }\n            else {\n                addClass([this.element], PUSH);\n            }\n        }\n        this.setMediaQuery();\n    };\n    Sidebar.prototype.documentclickHandler = function (e) {\n        if (closest(e.target, '.' + CONTROL + '' + '.' + ROOT)) {\n            return;\n        }\n        this.hide();\n    };\n    Sidebar.prototype.enableGestureHandler = function (args) {\n        if (this.position === 'Left' && args.swipeDirection === 'Right' &&\n            (args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {\n            this.show();\n        }\n        else if (this.position === 'Left' && args.swipeDirection === 'Left') {\n            this.hide();\n        }\n        else if (this.position === 'Right' && args.swipeDirection === 'Right') {\n            this.hide();\n        }\n        else if (this.position === 'Right' && args.swipeDirection === 'Left'\n            && (window.innerWidth - args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {\n            this.show();\n        }\n    };\n    Sidebar.prototype.setEnableGestures = function () {\n        if (this.enableGestures) {\n            this.mainContentEle = new Touch(document.body, { swipe: this.enableGestureHandler.bind(this) });\n            this.sidebarEle = new Touch(this.element, { swipe: this.enableGestureHandler.bind(this) });\n        }\n        else {\n            if (this.mainContentEle && this.sidebarEle) {\n                this.mainContentEle.destroy();\n                this.sidebarEle.destroy();\n            }\n        }\n    };\n    Sidebar.prototype.wireEvents = function () {\n        this.setEnableGestures();\n        window.addEventListener('resize', this.resize.bind(this));\n    };\n    Sidebar.prototype.unWireEvents = function () {\n        window.removeEventListener('resize', this.resize.bind(this));\n        EventHandler.remove(document, 'mousedown touchstart', this.documentclickHandler);\n        if (this.mainContentEle) {\n            this.mainContentEle.destroy();\n        }\n        if (this.sidebarEle) {\n            this.sidebarEle.destroy();\n        }\n    };\n    Sidebar.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var sibling = document.querySelector('.e-main-content') ||\n            this.element.nextElementSibling;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'isOpen':\n                    this.isOpen ? this.show() : this.hide();\n                    break;\n                case 'width':\n                    this.setWidth();\n                    if (!this.getState()) {\n                        this.setDock();\n                    }\n                    break;\n                case 'animate':\n                    this.setAnimation();\n                    break;\n                case 'type':\n                    removeClass([this.element], [VISIBILITY]);\n                    this.addClass();\n                    this.setType(this.type);\n                    break;\n                case 'position':\n                    this.element.style.transform = '';\n                    this.setDock();\n                    if (sibling) {\n                        this.position === 'Left' ? sibling.style.marginRight = '0px' : sibling.style.marginLeft = '0px';\n                    }\n                    if (this.position === 'Right') {\n                        removeClass([this.element], LEFT);\n                        addClass([this.element], RIGHT);\n                    }\n                    else {\n                        removeClass([this.element], RIGHT);\n                        addClass([this.element], LEFT);\n                    }\n                    this.setType(this.type);\n                    break;\n                case 'showBackdrop':\n                    if (this.showBackdrop) {\n                        this.createBackDrop();\n                    }\n                    else {\n                        if (this.modal) {\n                            this.modal.style.display = 'none';\n                            this.modal.outerHTML = '';\n                            this.modal = null;\n                        }\n                    }\n                    break;\n                case 'target':\n                    if (typeof (this.target) === 'string') {\n                        this.setProperties({ target: document.querySelector(this.target) }, true);\n                    }\n                    if (isNullOrUndefined(this.target)) {\n                        removeClass([this.element], SIDEBARABSOLUTE);\n                        removeClass([oldProp.target], CONTEXT);\n                        setStyle(sibling, { 'margin-left': 0, 'margin-right': 0 });\n                        document.body.insertAdjacentElement('afterbegin', this.element);\n                    }\n                    else {\n                        _super.prototype.refresh.call(this);\n                    }\n                    break;\n                case 'closeOnDocumentClick':\n                    this.setCloseOnDocumentClick();\n                    break;\n                case 'enableDock':\n                    if (!this.getState()) {\n                        this.setDock();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setZindex();\n                    break;\n                case 'mediaQuery':\n                    this.setMediaQuery();\n                    break;\n                case 'enableGestures':\n                    this.setEnableGestures();\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL();\n                    break;\n            }\n        }\n    };\n    Sidebar.prototype.setType = function (type) {\n        var elementWidth = this.element.getBoundingClientRect().width;\n        this.setZindex();\n        if (this.enableDock) {\n            addClass([this.element], DOCKER);\n        }\n        var sibling = document.querySelector('.e-main-content') ||\n            this.element.nextElementSibling;\n        if (sibling) {\n            sibling.style.transform = 'translateX(' + 0 + 'px)';\n            if (!Browser.isDevice && this.type !== 'Auto') {\n                this.position === 'Left' ? sibling.style.marginLeft = '0px' : sibling.style.marginRight = '0px';\n            }\n        }\n        var margin = this.position === 'Left' ? elementWidth + 'px' : elementWidth + 'px';\n        var eleWidth = this.position === 'Left' ? elementWidth : -(elementWidth);\n        removeClass([this.element], [PUSH, OVER, SLIDE]);\n        switch (type) {\n            case 'Push':\n                addClass([this.element], [PUSH]);\n                if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n                    this.position === 'Left' ? sibling.style.marginLeft = margin : sibling.style.marginRight = margin;\n                }\n                break;\n            case 'Slide':\n                addClass([this.element], [SLIDE]);\n                if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n                    sibling.style.transform = 'translateX(' + eleWidth + 'px)';\n                }\n                break;\n            case 'Over':\n                addClass([this.element], [OVER]);\n                if (this.enableDock && this.element.classList.contains(CLOSE)) {\n                    if (sibling) {\n                        this.position === 'Left' ? sibling.style.marginLeft = margin : sibling.style.marginRight = margin;\n                    }\n                }\n                break;\n            case 'Auto':\n                addClass([this.element], [TRASITION]);\n                if (Browser.isDevice) {\n                    if (sibling && (this.enableDock) && !this.getState()) {\n                        this.position === 'Left' ? sibling.style.marginLeft = margin : sibling.style.marginRight = margin;\n                        addClass([this.element], PUSH);\n                    }\n                    else {\n                        addClass([this.element], OVER);\n                    }\n                }\n                else {\n                    addClass([this.element], PUSH);\n                    if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n                        this.position === 'Left' ? sibling.style.marginLeft = margin : sibling.style.marginRight = margin;\n                    }\n                    this.setProperties({ isOpen: true }, true);\n                }\n                this.createBackDrop();\n        }\n    };\n    /**\n     * Removes the control from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     * @returns void\n     */\n    Sidebar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        removeClass([this.element], [OPEN, CLOSE, PUSH, SLIDE, OVER, LEFT, RIGHT, TRASITION]);\n        if (this.target) {\n            removeClass([this.element], SIDEBARABSOLUTE);\n            removeClass([this.target], CONTEXT);\n        }\n        this.destroyBackDrop();\n        this.element.style.width = '';\n        this.element.style.zIndex = '';\n        this.element.style.transform = '';\n        var sibling = document.querySelector('.e-main-content')\n            || this.element.nextElementSibling;\n        if (!isNullOrUndefined(sibling)) {\n            sibling.style.margin = '';\n            sibling.style.transform = '';\n        }\n        this.unWireEvents();\n    };\n    __decorate([\n        Property('auto')\n    ], Sidebar.prototype, \"dockSize\", void 0);\n    __decorate([\n        Property(null)\n    ], Sidebar.prototype, \"mediaQuery\", void 0);\n    __decorate([\n        Property(false)\n    ], Sidebar.prototype, \"enableDock\", void 0);\n    __decorate([\n        Property('en-US')\n    ], Sidebar.prototype, \"locale\", void 0);\n    __decorate([\n        Property(false)\n    ], Sidebar.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(true)\n    ], Sidebar.prototype, \"enableGestures\", void 0);\n    __decorate([\n        Property(false)\n    ], Sidebar.prototype, \"isOpen\", void 0);\n    __decorate([\n        Property(false)\n    ], Sidebar.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property(true)\n    ], Sidebar.prototype, \"animate\", void 0);\n    __decorate([\n        Property('auto')\n    ], Sidebar.prototype, \"height\", void 0);\n    __decorate([\n        Property(false)\n    ], Sidebar.prototype, \"closeOnDocumentClick\", void 0);\n    __decorate([\n        Property('Left')\n    ], Sidebar.prototype, \"position\", void 0);\n    __decorate([\n        Property(null)\n    ], Sidebar.prototype, \"target\", void 0);\n    __decorate([\n        Property(false)\n    ], Sidebar.prototype, \"showBackdrop\", void 0);\n    __decorate([\n        Property('Auto')\n    ], Sidebar.prototype, \"type\", void 0);\n    __decorate([\n        Property('auto')\n    ], Sidebar.prototype, \"width\", void 0);\n    __decorate([\n        Property(1000)\n    ], Sidebar.prototype, \"zIndex\", void 0);\n    __decorate([\n        Event()\n    ], Sidebar.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Sidebar.prototype, \"close\", void 0);\n    __decorate([\n        Event()\n    ], Sidebar.prototype, \"open\", void 0);\n    __decorate([\n        Event()\n    ], Sidebar.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], Sidebar.prototype, \"destroyed\", void 0);\n    Sidebar = __decorate([\n        NotifyPropertyChanges\n    ], Sidebar);\n    return Sidebar;\n}(Component));\nexport { Sidebar };\n"],"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","CLS_RTL","CLS_DISABLE","CLS_NAVARROW","CLS_NAVRIGHTARROW","CLS_NAVLEFTARROW","CLS_HSCROLLNAV","CLS_HSCROLLNAVRIGHT","CLS_HSCROLLNAVLEFT","CLS_DEVICE","CLS_OVERLAY","CLS_RIGHTOVERLAY","CLS_LEFTOVERLAY","HScroll","_super","options","element","call","preRender","browser","Browser","info","name","browserCheck","isDevice","customStep","ieCheck","initialize","id","getUniqueID","uniqueId","style","display","enableRtl","classList","add","render","touchModule","Touch","scroll","touchHandler","bind","swipe","swipeHandler","EventHandler","scrollEle","scrollHandler","createOverlay","createNavIcon","isNullOrUndefined","scrollStep","offsetWidth","createElement","className","scrollDiv","setAttribute","ele","_i","innerEle_1","slice","children","ele_1","appendChild","overflowX","scrollItems","getPersistData","addOnPersist","getModuleName","destroy","remove","nav","selectAll","forEach","detach","_a","elem","removeAttribute","disable","value","navEles","el","concat","rightOverlayEle","clsRight","rightEle","navItem","leftEle","insertBefore","firstChild","eventBinding","clsLeft","navEle","navLeftItem","onKeyPress","e","_this","keyTimer","window","setTimeout","keyTimeout","eleScrolling","onKeyUp","click","clearTimeout","tapHold","tabHoldHandler","tapHoldThreshold","addEventListener","repeatScroll","preventDefault","clickEventHandler","clearInterval","timeout","trgt","originalEvent","contains","firstElementChild","setInterval","scrollDis","isContinuous","rootEle","querySelector","scrollLeft","frameScrollRequest","distance","swipeEle","velocity","distanceX","start","animate","step","Math","sin","cancelAnimationFrame","swipeDirection","requestAnimationFrame","scrollUpdating","scrollVal","action","scrollDirection","arrowDisabling","addDisable","removeDisable","arrowIcon","width","navLeftEle","navRightEle","leftOverlay","rightOverlay","scrollWidth","ceil","disEle","onPropertyChanged","newProp","oldProp","keys","Property","NotifyPropertyChanges","Component","CLS_ITEMS","CLS_ITEM","CLS_SEPARATOR","CLS_POPUPICON","CLS_POPUPDOWN","CLS_POPUPTEXT","CLS_TBARTEXT","CLS_TBAROVERFLOW","CLS_POPOVERFLOW","CLS_TBARNAV","CLS_TBARCENTER","CLS_TBARPOS","CLS_POPUPCLASS","CLS_POPUP","CLS_TBARNAVACT","CLS_TBARIGNORE","CLS_POPPRI","CLS_MULTIROW_SEPARATOR","CLS_EXTENDABLE_SEPARATOR","CLS_EXTENDEDPOPOPEN","Item","apply","ChildProperty","Toolbar","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","unwireEvents","tempId","isNOU","document","body","removeChild","trgtEle","ctrlTem","clearProperty","popObj","tbarAlign","attrb","eventArgs","enableCollision","trigger","scrollModule","tbarItemsCol","items","popupPriCount","wireEvents","clickHandler","resize","keyModule","KeyboardEvents","keyAction","keyActionHandler","docKeyDown","tagName","popCheck","isVisible","overflowMode","keyCode","hide","duration","destroyHScroll","docEvent","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","closest","destroyItems","querySelectorAll","tbarItems","destroyMode","popupRefresh","val","elementFocus","fChild","focus","activeEleSwitch","clstElement","tbrNavChk","keyHandling","clst","navChk","scrollChk","popAnimate","eleFocus","nodes","popupCheck","popFrstEle","lastElementChild","activeEle","activeEleRemove","top","offsetHeight","show","tbarScrollChk","pos","sib","skipEle","parentElement","clsList","isPopupElement","popupNav","popupClickHandler","itemObj","indexOf","item","cancel","position","X","Y","offsetX","dataBind","refreshPosition","getElementOffsetY","minHeight","renderControl","separator","formatUnit","height","setStyle","attributes","role","aria-disabled","aria-haspopup","aria-orientation","renderItems","renderOverflowMode","itemPositioning","childElementCount","checkPopupRefresh","initHScroll","innerItems","checkOverflow","appendTo","overflow","itemWidthCal","getComputedStyle","parseFloat","marginRight","marginLeft","innerItem","eleWidth","itemWidth","popNav","scrollNav","refreshOverflow","priorityCheck","offsetWid","getElementsByClassName","removePositioning","createPopupEle","eleInlineItem","eleItem","multiVar","extendVar","offsetLeft","innerEle","innerNav","createPopupIcon","direction","checkPriority","removeProperty","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","sepHeight","nodeIndex","nodePri","index","tbResize","push","childNodes","tbarElement","sepItem","extendEle","popupEle","popupInit","getPropertyValue","clientHeight","maxHeight","eleStyles","popup","Popup","relateTo","offsetY","open","close","collision","borderRightWidth","tbarPopupHandler","isOpen","toolEle","popupElePos","offsetTop","calculatePosition","popIcon","scrollY","innerHeight","overflowHeight","inEle","pre","popPriority","eleWid","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","fstEleCheck","tbarEleMrgn","eleWid_1","minWidth","sepEle","popedEle","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","priEleCnt","eleSep","ignoreCheck","eleSepWidth","prevSep","previousElementSibling","popupEleWidth","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","root","tbarWidth","tbarItemsWid","elWidth","btnText","btn","eleSplice","_loop_1","this_1","align","toLowerCase","sepBeforePri_1","refreshPositioning","margin","tbarWid","popWid","left","right","tbarItemAlign","itemEle","showAlwaysInPopup","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","itemEleDom","innerPos","renderSubComponent","setAttr","attr","keyVal","enableItems","isEnable","elements","len","enable","removeClass","addClass","addItems","itemsDiv","itemsRerender","itemAgn","items_1","type","algIndex","splice","parentNode","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","templateRender","templateProp","isComponent","itemType","eleObj","templateFn","trim","tempStr","outerHTML","templateCompiler","tempArray","buttonRendering","dom","iconCss","iconPos","textStr","text","btnTxt","innerHTML","prefixIcon","suffixIcon","btnObj","Button","iconPosition","htmlAttributes","tooltipText","tempDom","textContent","cssClass","template","itemClick","showTextOn","sTxt","currentTarget","curEle","tEle","changedProb","property","newProperty","refresh","popupPriCheck","booleanCheck","itemCol","hideItem","Collection","Event","CLS_ACRDN_ROOT","CLS_ROOT","CLS_HEADER","CLS_HEADERCTN","CLS_CONTENT","CLS_CTENT","CLS_TOOGLEICN","CLS_EXPANDICN","CLS_CTNHIDE","CLS_SLCT","CLS_SLCTED","CLS_ACTIVE","CLS_TOGANIMATE","CLS_EXPANDSTATE","AccordionActionSettings","AccordionAnimationSettings","Complex","effect","easing","AccordionItem","undefined","Accordion","enter","space","isDestroy","templateEle","eleStr","nested","isNested","enablePersistence","expandedItems","initExpand","aria-multiselectable","expandMode","select","initItemExpand","rippleEffect","selector","eventName","focusIn","focusOut","content","innerEles","header","tabindex","aria-level","headerEle","toggleIconGenerate","aria-labelledby","aria-hidden","tglIcon","hdrColIcon","expandItem","renderInnerItem","acrdnItem","acrdnHdr","acrdnCtn","acrdnCtnItem","acrdActive","getIndexByItem","contentRendering","ariaAttrUpdate","cntclkCheck","acrdAniEle","acrdAniEle_1","sameContentCheck","getAttribute","sameHeader","acrdnCtn_1","expandState","collapse","expand","eleMoveFocus","clstItem","nextElementSibling","headerEleGenerate","ariaAttr","aria-expanded","aria-selected","ctnEle","hdrEle","fetchElement","hdr","expanded","hdrIcnEle","icon","hdrIcon","isHeader","temString","eleVal","itemcnt","ctn","trgtItemEle","animation","timingFunction","isExpanded","eff","expandedItemsPush","expandProgress","expandAnimation","ef","icn","lastActiveItemId","begin","progress","Animation","expandedItemsPop","collapseProgress","collapseAnimation","trgtItEl","trgtHeight","itemHeight","remain","itemAttribUpdate","itemLen","addItem","innerItemEle","expandedItemRefresh","removeItem","isHidden","enableItem","eleHeader","isExpand","itemExpand","expandedItem","updateItem","acrdn","changedProp","j","oldVal","newVal","FOCUSED","HEADER","SELECTED","SEPARATOR","UPARROW","DOWNARROW","LEFTARROW","RIGHTARROW","DISABLED","HIDE","FieldSettings","MenuItem","MenuBase","navIdx","isTapHold","ejInst","getValue","ul","ngElement","setValue","ejInstance","wrapper","idx","nodeName","nodeValue","getWrapper","isMenu","zIndex","getZindexPartial","ListBase","createJsonFromElement","fields","child","setProperties","createItems","append","targetElems","isIos","cmenuHandler","targetElement","getScrollableParent","parent_1","moverHandler","mouseDownHandler","delegateClickHandler","downarrow","uparrow","leftarrow","rightarrow","escape","keyBoardHandler","rippleFn","closeMenu","actionName","actionNeeded","upDownKeyHandler","rightEnterKeyHandler","leftEscKeyHandler","cul","defaultIdx","fliIdx","fli","getLIByClass","getIdx","cli","isValidLI","getItem","openMenu","sli","canOpen","changedTouches","pageY","pageX","ulIndex","isMenuVisible","closeArgs","beforeCloseArgs","cnt","parentItem","event","toggleAnimation","valueOf","filter","split","li","getField","lastChild","data","ICONS","hdata","hli","getIndex","pop","setPosition","toggleVisiblity","collide","isCollide","offset","fit","isRelative","offsetParent","Number","replace","x","y","xCollision","yCollision","getBoundingClientRect","boundRect","pageYOffset","pageXOffset","visibility","level","showIcon","hasField","listBaseOptions","moduleName","getFields","itemCreating","curData","clearChanges","itemCreated","span","createList","getLI","showItemOnClick","propName","fieldName","url","field","cliWrapper","isInstLI","setLISelected","showSubMenu","cliIdx","culIdx","classname","getItems","skipHdr","toggle","unWireEvents","getChangedItemIndex","insertAfter","uls","getInstance","parent_2","keyboardModule","isMenuOpen","animationSettings","isUniqueId","nIndex","isCallBack","unshift","disabled","showItems","showHideItems","hideItems","ishide","iitems","insertItems","isAfter","menuitem","ContextMenu","VMENU","Menu","tempItems","map","createMenuItems","orientation","pIdField","record","CLS_HIDDEN","CLS_ICON_CLOSE","CLS_WRAP","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POPUP","CLS_PROGRESS","TabActionSettings","TabAnimationSettings","Header","TabItem","Tab","animateOptions","animObj","title","lastIndex","delete","tbObj","expTemplateContent","isTemplate","cntEle","prevIndex","isPopup","initRender","isSwipeed","itemIndexArray","css","setCssClass","aria-activedescendant","btnCls","CLS_ICONS","attrs","renderContainer","setOrientation","headerPlacement","renderHeader","tbItems","renderContent","bdrLine","CLS_INDICATOR","scrCnt","setContentHeight","selectedItem","setRTL","tabItems","hdrItems","aria-controls","txt","cont","wrap","tabIndex","parseObject","clicked","setCloseButton","showCloseButton","hdrItem","contents","reRenderItems","txtWrapEle","tbCount","tItems","tHtml","txtEmpty","headerTextCompile","tCont","wrapAttrs","tItem","removeActiveClass","hdrActEle","no","extIndex","findEle","checkPopupOverflow","tbPop","tbrItems","popupHandler","ripEle","tbItem","actEleId","prevEle","trg","refreshActElePosition","prevCtnAnimation","prev","current","previous","next","triggerPrevAnimation","oldCnt","animateObj","triggerAnimation","prevActiveEle","newCnt","getTrgContent","idNo","openEff","clsEff","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","templateCompile","tempEle","compileElement","prop","templateFUN","compile","getContent","callType","place","list","heightAdjustMode","max","getHeight","cs","hsCnt","bar","tbWidth","setActive","isNaN","trg_1","enableAnimation","eleTrg","itemIndex","curActItem","refreshItemVisibility","eventArg","previousItem","prevItem","previousIndex","selectedIndex","isSwiped","setItems","isReplace","refreshActiveBorder","hoverHandler","spaceKeyDown","keyHandler","tabKeyModule","openPopup","shiftTab","removeEventListener","removeTab","k","which","clstHead","actEle","ej2_instances","activeElement","nxtSib","nextSibling","scrBar","scrStart","scrEnd","eleStart","eleEnd","eleViewRange","L10n","closeButtonTitle","locale","getConstant","enableTab","addTab","lastEleIndex","addedItems","itemsCount","removeArgs","removedItem","removedIndex","cntTrg","hideTab","selectingItem","selectingIndex","cntItem","arr","isHiddenEle","tempHdrEle","ROOT","COLLAPSIBLE","EXPANDABLE","LISTITEM","LISTTEXT","PARENTITEM","HOVER","ACTIVE","LOAD","PROCESS","ICON","TEXTWRAP","TREEINPUT","DRAGGING","SIBLING","DROPNEXT","DROPOUT","FULLROW","EXPANDED","NODECOLLAPSED","CHECK","CHECKBOXWRAP","CHECKBOXFRAME","FOCUS","treeAriaAttr","treeRole","itemRole","listRole","itemText","wrapperRole","FieldsSettings","ActionSettings","NodeAnimationSettings","TreeView","preventExpand","checkedElement","mouseDownStatus","TreeView_1","checkActionNodes","dragStartAction","isAnimate","f2","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","ctrlA","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","listBaseOption","expandCollapse","expandIconClass","ariaAttributes","expandIconPosition","beforeNodeCreate","updateListProp","aniObj","treeList","isLoaded","isInitalExpand","setTouchClass","selectedNodes","checkedNodes","expandedNodes","initialRender","setDataBinding","setExpandOnType","setRipple","wireEditingEvents","allowEditing","setDragAndDrop","allowDragAndDrop","setEnableRtl","setFullRow","fullRowSelect","nodeTemplateFn","templateComplier","nodeTemplate","rippleModel","ignore","iconModel","isCenterRipple","rippleIconFn","isEnabled","setMultiSelect","firstUl","dataSource","DataManager","executeQuery","getQuery","then","treeData","result","isNumberTypeId","getType","setRootData","finalize","rootData","JSON","parse","stringify","mapper","query","columns","clone","Query","getActualProperties","col","from","tableName","addSorting","sortOrder","parentID","where","dataType","getDataType","groupedData","getGroupedData","rootItems","getChildNodes","isSorted","ulElement","getSortedData","finalizeNode","showCheckBox","checkboxEle","createCheckBox","touchClass","checkValue","isChecked","addCheck","frame","frameMouseHandler","createFullRow","allowMultiSelection","addActionClass","selected","textEle","node","nodeData","rippleSpan","rippleMouseHandler","actionValue","ds","hasChildren","groupBy","cusQuery","group","getDataSource","grpItem","iNodes","sNodes","selectNode","cNodes","disableExpandAttr","eNodes","renderChildNodes","updateList","updateCheckedProp","nodes_1","checkBox","ensureParentCheckState","checkBoxEle","changeState","parentUL","currentParent","ensureChildCheckState","childElement","checkBoxes","checkedState","currentLoadData","isNodeChecked","doCheckBoxAction","doCheck","liEle","getElement","validateCheckNode","state","isPrevent","isAdd","ariaState","currLi","getCheckEvent","frameSpan","removeCheck","isUndefined","checked","getNodeData","isInteracted","firstNode","updateIdAttr","hasPid","doExpandAction","eUids","expandGivenNodes","eNode","expandAction","afterFinalized","proxy","expandCallback","eUid","callback","doSelectionAction","sUids","sNode","selectGivenNodes","preventContextMenu","removeHover","setFocusElement","checkWrapper","checkElement","triggerClickEvent","collapseNode","toggleSelect","nodeCheckingEvent","isCheck","nodeCheckedEvent","expandNode","hideSpinner","start_1","end_1","proxy_1","ul_1","liEle_1","setHeight","animateHeight","expandedNode","addExpand","expandArgs","getExpandEvent","colArgs","collapsedNode","removeExpand","toRemove","currentHeight","timeStamp","parentLi","expandChild","eicon","showSpinner","childItems","parents","mapper_1","getChildFields","offline","getNodeObject","ensureCheckNode","renderSubChild","nodeLevel","dataLevel","getChildMapper","obj","parentId","isRoot","getChildGroup","objlen","dataId","cIcons","curLi","multiSelect","ctrlKey","isActive","unselectNode","getSelectEvent","removeSelectAll","shiftKey","startNode","startIndex","liList","endIndex","temp","currNode","addSelect","removeSelect","focusedNode","getFocusedNode","selectedLI","selectedLI_1","expandOnType","expandOn","expandHandler","expandCollapseAction","inpEle","blur","oldText","checkNode","openNode","shiftKeySelect","navigateNode","navigateRootNode","createTextbox","navigateToFocus","isUp","focusNode","parent","getScrollParent","parentPos","bottom","scrollTop","isVisibleInViewport","scrollIntoView","txtWrap","documentElement","innerWidth","clientWidth","scrollHeight","isTowards","nextNode","getNextNode","getPrevNode","checkWrap","allCheckNode","newCheck","childCheck","validateCheck","length_1","childId","check","childId_1","toBeOpened","focusNextNode","setFocus","isBackwards","rootNode","getRootNode","getEndNode","fNode","previousSibling","prevNode","endNode","preNode","onMouseOver","currentLi","setHover","onMouseLeave","hoveredNode","fromDS","getText","pNode","pid","nodeFields","reRenderNodes","oldClass","newClass","editingHandler","oldInpEle","updateOldText","getEditEvent","innerHtml","inputObj","Input","createInput","properties","container","inputEle","setSelectionRange","wireInputEvents","editData","editFields","inputFocusOut","newText","txtEle","appendNewText","isInput","newData","triggerEvent","getId","getChildNodeObject","newList","childData","toBind","initializeDrag","destroyDrag","virtualEle","dragObj","Draggable","enableTailMode","enableAutoScroll","dragTarget","helper","sender","dragRoot","dragWrap","dragLi","isSameNode","cloneEle","DRAGITEM","nLen","cNode","cursor","dragData","dragStart","listItem","getDragEvent","draggedNode","drag","cursorAt","targetTouches","dragAction","dragStop","removeVirtualEle","dropTarget","dropRoot","preventTargetExpand","dragParent","draggedParentNode","dropObj","Droppable","out","over","drop","dropAction","dropWrap","dropLi","isDescendant","virEle","renderVirtualEle","dropIndicator","dragInstance","draggable","droppedElement","appendNode","draggedElement","dropAsSiblingNode","dropAsChildNode","dropUl","dragParentUl","dragParentLi","moveData","updateElement","updateAriaLevel","updateInstance","dropParentUl","expandParent","childLi","dropParentLi","removedData","updateChildField","refId","getDataPos","updateField","currPid","removeChildNodes","addChildData","dropIcon","generateIcon","generateUL","dragIcon","updateChildAriaLevel","sibEle","dragNode","dropData","draggedNodeData","newParent","dragLiParent","targetParent","indexValue","iconClass","dropTar","hasAttribute","clonedNode","droppedNode","droppedNodeData","dropIndex","dropLevel","addFullRow","toAdd","rowDiv","addMultiSelect","liEles_1","liEles_2","collapseByLevel","excludeHiddenNodes","getVisibleNodes","collapseAllNodes","expandByLevel","expandAllNodes","eIcons","vNodes","removeNode","removeData","updateSelectedNodes","updateExpandedNodes","dm","newId","currId","doGivenAction","toExpand","addGivenNodes","isRemote","dropEle","updateMapper","createListItemFromJson","refNode","navigateUrl","nodeId","updated","childObj","doDisableAction","doEnableAction","updatePersistProp","removeField","sleNodes","l","slelen","enodes","nodelen","cnodes","m","names","getMapperProp","resultData","executeLocal","proxy_2","touchEditObj","tap","tapCount","wireClickEvent","proxy_3","touchClickObj","wireExpandOnEvent","proxy_4","touchExpandObj","matched","matches","createSpinner","setCheckedNodes","uncheckAll","checkAll","collapseAll","addNodes","dropUl_1","proxy_5","beginEdit","disableNodes","enableNodes","ensureVisible","expandAll","getAllCheckedNodes","checkNodes","childNode","getNode","getTreeData","moveNodes","sourceNodes","removeNodes","updateNode","CLOSE","OPEN","TRASITION","RIGHT","OVER","PUSH","VISIBILITY","DISABLEANIMATION","CONTEXT","SIDEBARABSOLUTE","Sidebar","setWidth","setTarget","setZindex","enableDock","setDock","setMediaQuery","setType","setCloseOnDocumentClick","setEnableRTL","closeOnDocumentClick","documentclickHandler","setDimension","dockSize","match","z-index","classELement","destroyBackDrop","sibling","showBackdrop","modal","closeArguments","model","changeArguments","transform","setAnimation","openArguments","createBackDrop","getState","mediaQuery","enableGestureHandler","startX","setEnableGestures","enableGestures","mainContentEle","sidebarEle","margin-left","margin-right","insertAdjacentElement","elementWidth"],"mappings":"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"}