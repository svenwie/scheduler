{"version":3,"file":"ej2-maps.umd.min.js","sources":["../src/maps/utils/helper.js","../src/maps/model/theme.js","../src/maps/model/base.js","../src/maps/model/constants.js","../src/maps/layers/bing-map.js","../src/maps/layers/color-mapping.js","../src/maps/layers/layer-panel.js","../src/maps/user-interaction/annotation.js","../src/maps/utils/export.js","../src/maps/maps.js","../src/maps/layers/bubble.js","../src/maps/layers/marker.js","../src/maps/layers/data-label.js","../src/maps/layers/navigation-selected-line.js","../src/maps/layers/legend.js","../src/maps/user-interaction/highlight.js","../src/maps/user-interaction/selection.js","../src/maps/user-interaction/tooltip.js","../src/maps/user-interaction/zoom.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Helper functions for maps control\n */\nimport { SvgRenderer, createElement, isNullOrUndefined, remove, compile as templateComplier, merge } from '@syncfusion/ej2-base';\nimport { Animation } from '@syncfusion/ej2-base';\nimport { animationComplete } from '../index';\n/**\n * Maps internal use of `Size` type\n */\nvar Size = /** @class */ (function () {\n    function Size(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    return Size;\n}());\nexport { Size };\n/**\n * To find number from string\n * @private\n */\nexport function stringToNumber(value, containerSize) {\n    if (value !== null && value !== undefined) {\n        return value.indexOf('%') !== -1 ? (containerSize / 100) * parseInt(value, 10) : parseInt(value, 10);\n    }\n    return null;\n}\n/**\n * Method to calculate the width and height of the maps\n */\nexport function calculateSize(maps) {\n    var containerWidth = maps.element.clientWidth;\n    var containerHeight = maps.element.clientHeight;\n    maps.availableSize = new Size(stringToNumber(maps.width, containerWidth) || containerWidth || 600, stringToNumber(maps.height, containerHeight) || containerHeight || (maps.isDevice ?\n        Math.min(window.innerWidth, window.innerHeight) : 450));\n}\n/**\n * Method to create svg for maps.\n */\nexport function createSvg(maps) {\n    maps.renderer = new SvgRenderer(maps.element.id);\n    calculateSize(maps);\n    maps.svgObject = maps.renderer.createSvg({\n        id: maps.element.id + '_svg',\n        width: maps.availableSize.width,\n        height: maps.availableSize.height\n    });\n}\nexport function getMousePosition(pageX, pageY, element) {\n    var elementRect = element.getBoundingClientRect();\n    var pageXOffset = element.ownerDocument.defaultView.pageXOffset;\n    var pageYOffset = element.ownerDocument.defaultView.pageYOffset;\n    var clientTop = element.ownerDocument.documentElement.clientTop;\n    var clientLeft = element.ownerDocument.documentElement.clientLeft;\n    var positionX = elementRect.left + pageXOffset - clientLeft;\n    var positionY = elementRect.top + pageYOffset - clientTop;\n    return new MapLocation((pageX - positionX), (pageY - positionY));\n}\n/**\n * Method to convert degrees to radians\n */\nexport function degreesToRadians(deg) {\n    return deg * (Math.PI / 180);\n}\n/**\n * Convert radians to degrees method\n */\nexport function radiansToDegrees(radian) {\n    return radian * (180 / Math.PI);\n}\n/**\n * Method for converting from latitude and longitude values to points\n */\nexport function convertGeoToPoint(latitude, longitude, factor, layer, mapModel) {\n    var mapSize = new Size(mapModel.mapAreaRect.width, mapModel.mapAreaRect.height);\n    var x;\n    var y;\n    var value;\n    var lat;\n    var lng;\n    var temp;\n    var longitudeMinMax = mapModel.baseMapBounds.longitude;\n    var latitudeMinMax = mapModel.baseMapBounds.latitude;\n    var latRadian = degreesToRadians(latitude);\n    var lngRadian = degreesToRadians(longitude);\n    var type = mapModel.projectionType;\n    var size = (mapModel.isTileMap) ? Math.pow(2, 1) * 256 : (isNullOrUndefined(factor)) ? Math.min(mapSize.width, mapSize.height) :\n        (Math.min(mapSize.width, mapSize.height) * factor);\n    if (layer.geometryType === 'Normal') {\n        x = isNullOrUndefined(factor) ? longitude : Math.abs((longitude - longitudeMinMax.min) * factor);\n        y = isNullOrUndefined(factor) ? latitude : Math.abs((latitudeMinMax.max - latitude) * factor);\n    }\n    else if (layer.geometryType === 'Geographic') {\n        switch (type) {\n            case 'Mercator':\n                var pixelOrigin = new Point(size / 2, size / 2);\n                x = pixelOrigin.x + longitude * (size / 360);\n                var sinY = calculateBound(Math.sin(degreesToRadians(latitude)), -0.9999, 0.9999);\n                y = pixelOrigin.y + 0.5 * (Math.log((1 + sinY) / (1 - sinY))) * (-(size / (2 * Math.PI)));\n                break;\n            case 'Winkel3':\n                value = aitoff(lngRadian, latRadian);\n                lng = (value.x + lngRadian / (Math.PI / 2)) / 2;\n                lat = (value.y + latRadian) / 2;\n                break;\n            case 'Miller':\n                lng = lngRadian;\n                lat = (1.25 * Math.log(Math.tan((Math.PI / 4) + (.4 * latRadian))));\n                break;\n            case 'Eckert3':\n                temp = Math.sqrt(Math.PI * (4 + Math.PI));\n                lng = 2 / temp * lngRadian * (1 + Math.sqrt(1 - 4 * latRadian * latRadian / (Math.PI * Math.PI)));\n                lat = 4 / temp * latRadian;\n                break;\n            case 'AitOff':\n                value = aitoff(lngRadian, latRadian);\n                lng = value.x;\n                lat = value.y;\n                break;\n            case 'Eckert5':\n                lng = lngRadian * (1 + Math.cos(latRadian)) / Math.sqrt(2 + Math.PI);\n                lat = 2 * latRadian / Math.sqrt(2 + Math.PI);\n                break;\n            case 'Equirectangular':\n                lng = lngRadian;\n                lat = latRadian;\n                break;\n            case 'Eckert6':\n                var epsilon = 1e-6;\n                temp = (1 + (Math.PI / 2)) * Math.sin(latRadian);\n                var delta = Infinity;\n                for (var i = 0; i < 10 && Math.abs(delta) > epsilon; i++) {\n                    delta = (latRadian + (Math.sin(latRadian)) - temp) / (1 + Math.cos(latRadian));\n                    latRadian = latRadian - delta;\n                }\n                temp = Math.sqrt(2 + Math.PI);\n                lng = lngRadian * (1 + Math.cos(latRadian)) / temp;\n                lat = 2 * latRadian / temp;\n                break;\n        }\n        x = (type === 'Mercator') ? x : roundTo(xToCoordinate(mapModel, radiansToDegrees(lng)), 3);\n        y = (type === 'Mercator') ? y : (-(roundTo(yToCoordinate(mapModel, radiansToDegrees(lat)), 3)));\n    }\n    return new Point(x, y);\n}\n/**\n * Converting tile latitude and longitude to point\n */\nexport function convertTileLatLongToPoint(center, zoomLevel, tileTranslatePoint, isMapCoordinates) {\n    var size = Math.pow(2, zoomLevel) * 256;\n    var x = (center.x + 180) / 360;\n    var sinLatitude = Math.sin(center.y * Math.PI / 180);\n    var y = 0.5 - Math.log((1 + sinLatitude) / (1 - sinLatitude)) / (4 * Math.PI);\n    var pixelX = center.x;\n    var pixelY = center.y;\n    if (isMapCoordinates) {\n        pixelX = (x * size + 0.5) + tileTranslatePoint.x;\n        pixelY = (y * size + 0.5) + tileTranslatePoint.y;\n    }\n    return { x: pixelX, y: pixelY };\n}\n/**\n * Method for calculate x point\n */\nexport function xToCoordinate(mapObject, val) {\n    var longitudeMinMax = mapObject.baseMapBounds.longitude;\n    var totalSize = isNullOrUndefined(mapObject.baseSize) ? mapObject.mapAreaRect.width : mapObject.mapAreaRect.width +\n        (Math.abs(mapObject.baseSize.width - mapObject.mapAreaRect.width) / 2);\n    return Math.round(totalSize * (val - longitudeMinMax.min) / (longitudeMinMax.max - longitudeMinMax.min) * 100) / 100;\n}\n/**\n * Method for calculate y point\n */\nexport function yToCoordinate(mapObject, val) {\n    var latitudeMinMax = mapObject.baseMapBounds.latitude;\n    return Math.round(mapObject.mapAreaRect.height * (val - latitudeMinMax.min) / (latitudeMinMax.max - latitudeMinMax.min) * 100) / 100;\n}\n/**\n * Method for calculate aitoff projection\n */\nexport function aitoff(x, y) {\n    var cosy = Math.cos(y);\n    var sincia = sinci(acos(cosy * Math.cos(x /= 2)));\n    return new Point(2 * cosy * Math.sin(x) * sincia, Math.sin(y) * sincia);\n}\n/**\n * Method to round the number\n */\nexport function roundTo(a, b) {\n    var c = Math.pow(10, b);\n    return (Math.round(a * c) / c);\n}\nexport function sinci(x) {\n    return x / Math.sin(x);\n}\nexport function acos(a) {\n    return Math.acos(a);\n}\n/**\n * Method to calculate bound\n */\nexport function calculateBound(value, min, max) {\n    if (!isNullOrUndefined(min)) {\n        value = Math.max(value, min);\n    }\n    if (!(isNullOrUndefined(max))) {\n        value = Math.min(value, max);\n    }\n    return value;\n}\n/**\n * Map internal class for point\n */\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return Point;\n}());\nexport { Point };\n/**\n * Map internal class for min and max\n *\n */\nvar MinMax = /** @class */ (function () {\n    function MinMax(min, max) {\n        this.min = min;\n        this.max = max;\n    }\n    return MinMax;\n}());\nexport { MinMax };\n/**\n * Map internal class locations\n */\nvar GeoLocation = /** @class */ (function () {\n    function GeoLocation(latitude, longitude) {\n        this.latitude = new MinMax(latitude.min, latitude.max);\n        this.longitude = new MinMax(longitude.min, longitude.max);\n    }\n    return GeoLocation;\n}());\nexport { GeoLocation };\n/**\n * Function to measure the height and width of the text.\n * @param  {string} text\n * @param  {FontModel} font\n * @param  {string} id\n * @returns no\n * @private\n */\nexport function measureText(text, font) {\n    var htmlObject = document.getElementById('mapsmeasuretext');\n    if (htmlObject === null) {\n        htmlObject = createElement('text', { id: 'mapsmeasuretext' });\n        document.body.appendChild(htmlObject);\n    }\n    htmlObject.innerHTML = text;\n    htmlObject.style.position = 'absolute';\n    htmlObject.style.fontSize = font.size;\n    htmlObject.style.fontWeight = font.fontWeight;\n    htmlObject.style.fontStyle = font.fontStyle;\n    htmlObject.style.fontFamily = font.fontFamily;\n    htmlObject.style.visibility = 'hidden';\n    htmlObject.style.top = '-100';\n    htmlObject.style.left = '0';\n    htmlObject.style.whiteSpace = 'nowrap';\n    // For bootstrap line height issue\n    htmlObject.style.lineHeight = 'normal';\n    return new Size(htmlObject.clientWidth, htmlObject.clientHeight);\n}\n/**\n * Internal use of text options\n * @private\n */\nvar TextOption = /** @class */ (function () {\n    function TextOption(id, x, y, anchor, text, transform, baseLine) {\n        if (transform === void 0) { transform = ''; }\n        this.transform = '';\n        this.baseLine = 'auto';\n        this.id = id;\n        this.x = x;\n        this.y = y;\n        this.anchor = anchor;\n        this.text = text;\n        this.transform = transform;\n        this.baseLine = baseLine;\n    }\n    return TextOption;\n}());\nexport { TextOption };\n/**\n * Internal use of path options\n * @private\n */\nvar PathOption = /** @class */ (function () {\n    function PathOption(id, fill, width, color, opacity, dashArray, d) {\n        this.id = id;\n        this.opacity = opacity;\n        this.fill = fill;\n        this.stroke = color;\n        this['stroke-width'] = width;\n        this['stroke-dasharray'] = dashArray;\n        this.d = d;\n    }\n    return PathOption;\n}());\nexport { PathOption };\n/**\n * Internal use of rectangle options\n * @private\n */\nvar RectOption = /** @class */ (function (_super) {\n    __extends(RectOption, _super);\n    function RectOption(id, fill, border, opacity, rect, rx, ry, transform, dashArray) {\n        var _this = _super.call(this, id, fill, border.width, border.color, opacity, dashArray) || this;\n        _this.y = rect.y;\n        _this.x = rect.x;\n        _this.height = rect.height;\n        _this.width = rect.width;\n        _this.rx = rx ? rx : 0;\n        _this.ry = ry ? ry : 0;\n        _this.transform = transform ? transform : '';\n        _this['stroke-dasharray'] = dashArray;\n        return _this;\n    }\n    return RectOption;\n}(PathOption));\nexport { RectOption };\n/**\n * Internal use of circle options\n * @private\n */\nvar CircleOption = /** @class */ (function (_super) {\n    __extends(CircleOption, _super);\n    function CircleOption(id, fill, border, opacity, cx, cy, r, dashArray) {\n        var _this = _super.call(this, id, fill, border.width, border.color, opacity) || this;\n        _this.cy = cy;\n        _this.cx = cx;\n        _this.r = r;\n        _this['stroke-dasharray'] = dashArray;\n        return _this;\n    }\n    return CircleOption;\n}(PathOption));\nexport { CircleOption };\n/**\n * Internal use of polygon options\n * @private\n */\nvar PolygonOption = /** @class */ (function (_super) {\n    __extends(PolygonOption, _super);\n    function PolygonOption(id, points, fill, width, color, opacity, dashArray) {\n        if (opacity === void 0) { opacity = 1; }\n        if (dashArray === void 0) { dashArray = ''; }\n        var _this = _super.call(this, id, fill, width, color, opacity, dashArray) || this;\n        _this.points = points;\n        return _this;\n    }\n    return PolygonOption;\n}(PathOption));\nexport { PolygonOption };\n/**\n * Internal use of polyline options\n * @private\n */\nvar PolylineOption = /** @class */ (function (_super) {\n    __extends(PolylineOption, _super);\n    function PolylineOption(id, points, fill, width, color, opacity, dashArray) {\n        if (opacity === void 0) { opacity = 1; }\n        if (dashArray === void 0) { dashArray = ''; }\n        return _super.call(this, id, points, fill, width, color, opacity, dashArray) || this;\n    }\n    return PolylineOption;\n}(PolygonOption));\nexport { PolylineOption };\n/**\n * Internal use of line options\n * @private\n */\nvar LineOption = /** @class */ (function (_super) {\n    __extends(LineOption, _super);\n    function LineOption(id, line, fill, width, color, opacity, dashArray) {\n        if (opacity === void 0) { opacity = 1; }\n        if (dashArray === void 0) { dashArray = ''; }\n        var _this = _super.call(this, id, fill, width, color, opacity, dashArray) || this;\n        _this.x1 = line.x1;\n        _this.y1 = line.y1;\n        _this.x2 = line.x2;\n        _this.y2 = line.y2;\n        return _this;\n    }\n    return LineOption;\n}(PathOption));\nexport { LineOption };\n/**\n * Internal use of line\n * @property\n */\nvar Line = /** @class */ (function () {\n    function Line(x1, y1, x2, y2) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    return Line;\n}());\nexport { Line };\n/**\n * Internal use of map location type\n */\nvar MapLocation = /** @class */ (function () {\n    function MapLocation(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return MapLocation;\n}());\nexport { MapLocation };\n/**\n * Internal use of type rect\n * @private\n */\nvar Rect = /** @class */ (function () {\n    function Rect(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    return Rect;\n}());\nexport { Rect };\n/**\n * Internal use for pattern creation.\n * @property\n */\nvar PatternOptions = /** @class */ (function () {\n    function PatternOptions(id, x, y, width, height, patternUnits, patternContentUnits, patternTransform, href) {\n        if (patternUnits === void 0) { patternUnits = 'userSpaceOnUse'; }\n        if (patternContentUnits === void 0) { patternContentUnits = 'userSpaceOnUse'; }\n        if (patternTransform === void 0) { patternTransform = ''; }\n        if (href === void 0) { href = ''; }\n        this.id = id;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.patternUnits = patternUnits;\n        this.patternContentUnits = patternContentUnits;\n        this.patternTransform = patternTransform;\n        this.href = href;\n    }\n    return PatternOptions;\n}());\nexport { PatternOptions };\n/**\n * Internal rendering of text\n * @private\n */\nexport function renderTextElement(options, font, color, parent, isMinus) {\n    if (isMinus === void 0) { isMinus = false; }\n    var renderOptions = {\n        'id': options.id,\n        'x': options.x,\n        'y': options.y,\n        'fill': color,\n        'font-size': font.size,\n        'font-style': font.fontStyle,\n        'font-family': font.fontFamily,\n        'font-weight': font.fontWeight,\n        'text-anchor': options.anchor,\n        'transform': options.transform,\n        'opacity': font.opacity,\n        'dominant-baseline': options.baseLine\n    };\n    var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n    var tspanElement;\n    var renderer = new SvgRenderer('');\n    var height;\n    var htmlObject = renderer.createText(renderOptions, text);\n    htmlObject.style['user-select'] = 'none';\n    htmlObject.style['-moz-user-select'] = 'none';\n    htmlObject.style['-webkit-touch-callout'] = 'none';\n    htmlObject.style['-webkit-user-select'] = 'none';\n    htmlObject.style['-khtml-user-select'] = 'none';\n    htmlObject.style['-ms-user-select'] = 'none';\n    htmlObject.style['-o-user-select'] = 'none';\n    if (typeof options.text !== 'string' && options.text.length > 1) {\n        for (var i = 1, len = options.text.length; i < len; i++) {\n            height = (measureText(options.text[i], font).height);\n            tspanElement = renderer.createTSpan({\n                'x': options.x, 'id': options.id,\n                'y': (options.y) + ((isMinus) ? -(i * height) : (i * height))\n            }, isMinus ? options.text[options.text.length - (i + 1)] : options.text[i]);\n            htmlObject.appendChild(tspanElement);\n        }\n    }\n    parent.appendChild(htmlObject);\n    return htmlObject;\n}\n/**\n * @private\n */\nexport function convertElement(element, markerId, data, index, mapObj) {\n    var childElement = createElement('div', {\n        id: markerId,\n        styles: 'position: absolute;pointer-events: auto;'\n    });\n    while (element.length > 0) {\n        childElement.appendChild(element[0]);\n    }\n    var templateHtml = childElement.innerHTML;\n    var properties = Object.keys(data);\n    for (var i = 0; i < properties.length; i++) {\n        if (properties[i].toLowerCase() !== 'latitude' && properties[i].toLowerCase() !== 'longitude') {\n            templateHtml = templateHtml.replace(new RegExp('{{:' + properties[i] + '}}', 'g'), data[properties[i].toString()]);\n        }\n    }\n    childElement.innerHTML = templateHtml;\n    return childElement;\n}\nexport function convertElementFromLabel(element, labelId, data, index, mapObj) {\n    var labelEle = isNullOrUndefined(element.childElementCount) ? element[0] : element;\n    var templateHtml = labelEle.outerHTML;\n    var properties = Object.keys(data);\n    for (var i = 0; i < properties.length; i++) {\n        templateHtml = templateHtml.replace(new RegExp('{{:' + properties[i] + '}}', 'g'), data[properties[i].toString()]);\n    }\n    return createElement('div', {\n        id: labelId,\n        innerHTML: templateHtml,\n        styles: 'position: absolute'\n    });\n}\n/**\n * Internal use of append shape element\n * @private\n */\nexport function appendShape(shape, element) {\n    if (element) {\n        element.appendChild(shape);\n    }\n    return shape;\n}\n/**\n * Internal rendering of Circle\n * @private\n */\nexport function drawCircle(maps, options, element) {\n    return appendShape(maps.renderer.drawCircle(options), element);\n}\n/**\n * Internal rendering of Rectangle\n * @private\n */\nexport function drawRectangle(maps, options, element) {\n    return appendShape(maps.renderer.drawRectangle(options), element);\n}\n/**\n * Internal rendering of Path\n * @private\n */\nexport function drawPath(maps, options, element) {\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Polygon\n * @private\n */\nexport function drawPolygon(maps, options, element) {\n    return appendShape(maps.renderer.drawPolygon(options), element);\n}\n/**\n * Internal rendering of Polyline\n * @private\n */\nexport function drawPolyline(maps, options, element) {\n    return appendShape(maps.renderer.drawPolyline(options), element);\n}\n/**\n * Internal rendering of Line\n * @private\n */\nexport function drawLine(maps, options, element) {\n    return appendShape(maps.renderer.drawLine(options), element);\n}\n/**\n * @private\n * Calculate marker shapes\n */\nexport function calculateShapes(maps, shape, options, size, location, markerEle) {\n    var tempGroup;\n    switch (shape) {\n        case 'Balloon':\n            tempGroup = drawBalloon(maps, options, size, location, markerEle);\n            break;\n        case 'Cross':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height\n                / 2) + ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n            break;\n        case 'Diamond':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' '\n                + location.y + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2)\n                + ' ' + location.y + ' Z';\n            break;\n        case 'Star':\n            options.d = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2)\n                + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6)\n                + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' +\n                (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n            break;\n        case 'Triangle':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' +\n                (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 2) + ' Z';\n            break;\n        case 'HorizontalLine':\n            options.d = ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' '\n                + location.y;\n            break;\n        case 'VerticalLine':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' +\n                (location.y + size.height / 2);\n            break;\n    }\n    return shape === 'Balloon' ? tempGroup : maps.renderer.drawPath(options);\n}\n/**\n * Internal rendering of Diamond\n * @private\n */\nexport function drawDiamond(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + location.y +\n        ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + location.y + ' Z';\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Triangle\n * @private\n */\nexport function drawTriangle(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' +\n        (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 2) + ' Z';\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Cross\n * @private\n */\nexport function drawCross(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) +\n        ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of HorizontalLine\n * @private\n */\nexport function drawHorizontalLine(maps, options, size, location, element) {\n    options.d = ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of VerticalLine\n * @private\n */\nexport function drawVerticalLine(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2);\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Star\n * @private\n */\nexport function drawStar(maps, options, size, location, element) {\n    options.d = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2)\n        + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6) + ' L '\n        + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2)\n        + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Balloon\n * @private\n */\nexport function drawBalloon(maps, options, size, location, element) {\n    var width = size.width;\n    var height = size.height;\n    var padding = 5;\n    location.x -= width / 2;\n    location.y -= height;\n    options.d = 'M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16' +\n        'c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z';\n    var balloon = maps.renderer.drawPath(options);\n    var x = size.width / 22.5;\n    var y = size.height / 30;\n    balloon.setAttribute('transform', 'translate(' + location.x + ', ' + location.y + ') scale(' + x + ', ' + y + ')');\n    var g = maps.renderer.createGroup({ id: options.id });\n    appendShape(balloon, g);\n    return appendShape(g, element);\n}\n/**\n * Internal rendering of Pattern\n * @private\n */\nexport function drawPattern(maps, options, elements, element) {\n    var pattern = maps.renderer.createPattern(options, 'pattern');\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var ele = elements_1[_i];\n        appendShape(ele, pattern);\n    }\n    return appendShape(pattern, element);\n}\n/**\n * Method to get specific field and vaues from data.\n * @private\n */\n// tslint:disable:no-any\nexport function getFieldData(dataSource, fields) {\n    var newData = [];\n    var data;\n    for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n        var temp = dataSource_1[_i];\n        data = {};\n        for (var _a = 0, fields_1 = fields; _a < fields_1.length; _a++) {\n            var field = fields_1[_a];\n            if (temp[field]) {\n                data[field] = temp[field];\n            }\n        }\n        newData.push(data);\n    }\n    return newData;\n}\n/**\n * To find the index of dataSource from shape properties\n */\n// tslint:disable:no-string-literal\nexport function checkShapeDataFields(dataSource, properties, dataPath, propertyPath) {\n    if (!(isNullOrUndefined(properties))) {\n        for (var i = 0; i < dataSource.length; i++) {\n            if (dataSource[i][dataPath] === properties[propertyPath]) {\n                return i;\n            }\n        }\n    }\n    return null;\n}\nexport function filter(points, start, end) {\n    var pointObject = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        if (start <= point.y && end >= point.y) {\n            pointObject.push(point);\n        }\n    }\n    return pointObject;\n}\n/**\n * To find the midpoint of the polygon from points\n */\nexport function findMidPointOfPolygon(points) {\n    if (!points.length) {\n        return null;\n    }\n    var min = 0;\n    var max = points.length;\n    var startX;\n    var startY;\n    var startX1;\n    var startY1;\n    var sum = 0;\n    var xSum = 0;\n    var ySum = 0;\n    for (var i = min; i <= max - 1; i++) {\n        startX = points[i].x;\n        startY = points[i].y;\n        if (i === max - 1) {\n            startX1 = points[0].x;\n            startY1 = points[0].y;\n        }\n        else {\n            startX1 = points[i + 1].x;\n            startY1 = points[i + 1].y;\n        }\n        sum = sum + Math.abs(((startX * startY1)) - (startX1 * startY));\n        xSum = xSum + Math.abs(((startX + startX1) * (((startX * startY1) - (startX1 * startY)))));\n        ySum = ySum + Math.abs(((startY + startY1) * (((startX * startY1) - (startX1 * startY)))));\n    }\n    sum = 0.5 * sum;\n    xSum = (1 / (4 * sum)) * xSum;\n    ySum = (1 / (4 * sum)) * ySum;\n    /* Code for finding nearest points in polygon related to midPoint*/\n    var rightMinPoint = { x: 0, y: 0 };\n    var rightMaxPoint = { x: 0, y: 0 };\n    var leftMinPoint = { x: 0, y: 0 };\n    var leftMaxPoint = { x: 0, y: 0 };\n    var bottomMinPoint = { x: 0, y: 0 };\n    var bottomMaxPoint = { x: 0, y: 0 };\n    var topMinPoint = { x: 0, y: 0 };\n    var topMaxPoint = { x: 0, y: 0 };\n    var height = 0;\n    for (var i = min; i <= max - 1; i++) {\n        var point = points[i];\n        if (point.y > ySum) {\n            if (point.x < xSum && xSum - point.x < xSum - bottomMinPoint.x) {\n                bottomMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.x > xSum && (bottomMaxPoint.x === 0 || point.x - xSum < bottomMaxPoint.x - xSum)) {\n                bottomMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n        else {\n            if (point.x < xSum && xSum - point.x < xSum - topMinPoint.x) {\n                topMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.x > xSum && (topMaxPoint.x === 0 || point.x - xSum < topMaxPoint.x - xSum)) {\n                topMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n        height = (bottomMaxPoint.y - topMaxPoint.y) + ((bottomMaxPoint.y - topMaxPoint.y) / 4);\n        if (point.x > xSum) {\n            if (point.y < ySum && ySum - point.y < ySum - rightMinPoint.y) {\n                rightMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.y > ySum && (rightMaxPoint.y === 0 || point.y - ySum < rightMaxPoint.y - ySum)) {\n                rightMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n        else {\n            if (point.y < ySum && ySum - point.y < ySum - leftMinPoint.y) {\n                leftMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.y > ySum && (leftMaxPoint.y === 0 || point.y - ySum < leftMaxPoint.y - ySum)) {\n                leftMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n    }\n    return {\n        x: xSum, y: ySum, rightMin: rightMinPoint, rightMax: rightMaxPoint,\n        leftMin: leftMinPoint, leftMax: leftMaxPoint, points: points, topMax: topMaxPoint, topMin: topMinPoint,\n        bottomMax: bottomMaxPoint, bottomMin: bottomMinPoint, height: height\n    };\n}\n/**\n * @private\n * Check custom path\n */\n/* tslint:disable:no-string-literal */\nexport function isCustomPath(layerData) {\n    var customPath = false;\n    if (Object.prototype.toString.call(layerData) === '[object Array]') {\n        layerData.forEach(function (layer, index) {\n            if (!isNullOrUndefined(layer['geometry']) && layer['geometry']['type'] === 'Path') {\n                customPath = true;\n            }\n        });\n    }\n    return customPath;\n}\n/**\n * @private\n * Trim the title text\n */\nexport function textTrim(maxWidth, text, font) {\n    var label = text;\n    var size = measureText(text, font).width;\n    if (size > maxWidth) {\n        var textLength = text.length;\n        for (var i = textLength - 1; i >= 0; --i) {\n            label = text.substring(0, i) + '...';\n            size = measureText(label, font).width;\n            if (size <= maxWidth || label.length < 4) {\n                if (label.length < 4) {\n                    label = ' ';\n                }\n                return label;\n            }\n        }\n    }\n    return label;\n}\n/**\n * Method to calculate x position of title\n */\nexport function findPosition(location, alignment, textSize, type) {\n    var x;\n    var y;\n    switch (alignment) {\n        case 'Near':\n            x = location.x;\n            break;\n        case 'Center':\n            x = (type === 'title') ? (location.width / 2 - textSize.width / 2) :\n                ((location.x + (location.width / 2)) - textSize.width / 2);\n            break;\n        case 'Far':\n            x = (type === 'title') ? (location.width - location.y - textSize.width) :\n                ((location.x + location.width) - textSize.width);\n            break;\n    }\n    y = (type === 'title') ? location.y + (textSize.height / 2) : ((location.y + location.height / 2) + textSize.height / 2);\n    return new Point(x, y);\n}\n/**\n * To remove element by id\n */\nexport function removeElement(id) {\n    var element = document.getElementById(id);\n    return element ? remove(element) : null;\n}\n/**\n * @private\n */\nexport function getTranslate(mapObject, layer, animate) {\n    var zoomFactor = animate ? 1 : mapObject.zoomSettings.zoomFactor;\n    var min = mapObject.baseMapRectBounds['min'];\n    var max = mapObject.baseMapRectBounds['max'];\n    var size = mapObject.mapAreaRect;\n    var availSize = mapObject.availableSize;\n    var x;\n    var y;\n    var mapWidth = Math.abs(max['x'] - min['x']);\n    var mapHeight = Math.abs(min['y'] - max['y']);\n    var factor = animate ? 1 : mapObject.zoomSettings.zoomFactor;\n    var scaleFactor;\n    var scaleX;\n    var scaleY;\n    var center = mapObject.centerPosition;\n    if (!isNullOrUndefined(center.longitude) && !isNullOrUndefined(center.latitude)) {\n        var leftPosition = ((mapWidth + Math.abs(mapObject.mapAreaRect.width - mapWidth)) / 2) / factor;\n        var topPosition = ((mapHeight + Math.abs(mapObject.mapAreaRect.height - mapHeight)) / 2) / factor;\n        var point = convertGeoToPoint(center.latitude, center.longitude, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n        x = -point.x + leftPosition;\n        y = -point.y + topPosition;\n        scaleFactor = zoomFactor;\n    }\n    else {\n        scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n        mapWidth *= scaleFactor;\n        mapHeight *= scaleFactor;\n        x = size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2)));\n        y = size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2)));\n    }\n    return { scale: scaleFactor, location: new Point(x, y) };\n}\n/**\n * To get the html element by specified id\n */\nexport function getElementByID(id) {\n    return document.getElementById(id);\n}\n/**\n * To apply internalization\n */\nexport function Internalize(maps, value) {\n    maps.formatFunction =\n        maps.intl.getNumberFormat({ format: maps.format, useGrouping: maps.useGroupingSeparator });\n    return maps.formatFunction(value);\n}\n/**\n * Function     to compile the template function for maps.\n * @returns Function\n * @private\n */\nexport function getTemplateFunction(template) {\n    var templateFn = null;\n    var e;\n    try {\n        if (document.querySelectorAll(template).length) {\n            templateFn = templateComplier(document.querySelector(template).innerHTML.trim());\n        }\n    }\n    catch (e) {\n        templateFn = templateComplier(template);\n    }\n    return templateFn;\n}\n/**\n * Function to get element from id.\n * @returns Element\n * @private\n */\nexport function getElement(id) {\n    return document.getElementById(id);\n}\n/**\n * Function to get shape data using target id\n */\nexport function getShapeData(targetId, map) {\n    var layerIndex = parseInt(targetId.split('_LayerIndex_')[1].split('_')[0], 10);\n    var shapeIndex = parseInt(targetId.split('_ShapeIndex_')[1].split('_')[0], 10);\n    var layer = map.layers[layerIndex];\n    var shapeData = layer.layerData[shapeIndex]['property'];\n    var data;\n    if (layer.dataSource) {\n        data = layer.dataSource[checkShapeDataFields(layer.dataSource, shapeData, layer.shapeDataPath, layer.shapePropertyPath)];\n    }\n    return { shapeData: shapeData, data: data };\n}\n/**\n * Function to trigger shapeSelected event\n * @private\n */\nexport function triggerShapeEvent(targetId, selection, maps, eventName) {\n    var shape = getShapeData(targetId, maps);\n    var eventArgs = {\n        cancel: false,\n        name: eventName,\n        fill: selection.fill,\n        opacity: selection.opacity,\n        border: selection.border,\n        shapeData: shape.shapeData,\n        data: shape.data,\n        target: targetId\n    };\n    maps.trigger(eventName, eventArgs);\n    return eventArgs;\n}\n/**\n * Function to get elements using class name\n */\nexport function getElementsByClassName(className) {\n    return document.getElementsByClassName(className);\n}\n/**\n * Function to get elements using querySelectorAll\n */\n// export function querySelectorAll(args: string, element: Element): NodeListOf<Element> {\n//     return element.querySelectorAll('.' + args);\n// }\n/**\n * Function to get elements using querySelector\n */\nexport function querySelector(args, elementSelector) {\n    var targetEle = null;\n    if (document.getElementById(elementSelector)) {\n        targetEle = document.getElementById(elementSelector).querySelector('#' + args);\n    }\n    return targetEle;\n}\n/**\n * Function to get the element for selection and highlight using public method\n */\nexport function getTargetElement(layerIndex, name, enable, map) {\n    var shapeIndex;\n    var targetId;\n    var targetEle;\n    var shapeData = map.layers[layerIndex].shapeData['features'];\n    for (var i = 0; i < shapeData.length; i++) {\n        if (shapeData[i]['properties'].name === name) {\n            targetId = map.element.id + '_' + 'LayerIndex_' + layerIndex + '_ShapeIndex_' + i + '_dataIndex_undefined';\n            break;\n        }\n    }\n    targetEle = getElement(targetId);\n    return targetEle;\n}\n/**\n * Function to create style element for highlight and selection\n */\nexport function createStyle(id, className, eventArgs) {\n    return createElement('style', {\n        id: id, innerHTML: '.' + className + '{fill:'\n            + eventArgs.fill + ';' + 'opacity:' + eventArgs.opacity.toString() + ';' +\n            '}'\n    });\n}\n/**\n * Function to customize the style for highlight and selection\n */\nexport function customizeStyle(id, className, eventArgs) {\n    var styleEle = getElement(id);\n    styleEle.innerHTML = '.' + className + '{fill:'\n        + eventArgs.fill + ';' + 'opacity:' + eventArgs.opacity.toString() + ';' +\n        'stroke-width:' + eventArgs.border.width.toString() +\n        'stroke-color:' + eventArgs.border.color + '}';\n}\n/**\n * Function to remove class from element\n */\nexport function removeClass(element) {\n    element.removeAttribute('class');\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\nexport function elementAnimate(element, delay, duration, point, maps, ele, radius) {\n    if (radius === void 0) { radius = 0; }\n    var centerX = point.x;\n    var centerY = point.y;\n    var height = 0;\n    var transform = element.getAttribute('transform') || '';\n    new Animation({}).animate(element, {\n        duration: duration,\n        delay: delay,\n        progress: function (args) {\n            if (args.timeStamp > args.delay) {\n                height = ((args.timeStamp - args.delay) / args.duration);\n                element.setAttribute('transform', 'translate( ' + (centerX - (radius * height)) + ' ' + (centerY - (radius * height)) +\n                    ' ) scale(' + height + ')');\n            }\n        },\n        end: function (model) {\n            element.setAttribute('transform', transform);\n            if (!ele) {\n                return;\n            }\n            var event = {\n                cancel: false, name: animationComplete, element: ele, maps: maps\n            };\n            maps.trigger(animationComplete, event);\n        }\n    });\n}\nexport function timeout(id) {\n    removeElement(id);\n}\nexport function showTooltip(text, size, x, y, areaWidth, areaHeight, id, element, isTouch) {\n    var tooltip = document.getElementById(id);\n    var width = measureText(text, {\n        fontFamily: 'Segoe UI', size: '8px',\n        fontStyle: 'Normal', fontWeight: 'Regular'\n    }).width;\n    var str = text.split(' ');\n    var demo = str[0].length;\n    for (var i = 1; i < str.length; i++) {\n        if (demo < str[i].length) {\n            demo = str[i].length;\n        }\n    }\n    if (!tooltip) {\n        tooltip = createElement('div', {\n            id: id,\n            styles: 'background-color: rgb(255, 255, 255) !important; color:black !important; ' +\n                'position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;' +\n                'font-size:12px; font-family: \"Segoe UI\"; text-align:center'\n        });\n    }\n    if (x < (areaWidth - width)) {\n        x = x;\n    }\n    else if (x > (areaWidth - width) && x < areaWidth - (demo * 8)) {\n        width = (areaWidth - x);\n    }\n    else if (x >= areaWidth - demo * 8) {\n        if (x > width) {\n            x = x - width;\n        }\n        else {\n            width = x;\n            x = 0;\n        }\n    }\n    var size1 = size.split('px');\n    wordWrap(tooltip, text, x, y, size1, width, areaWidth, element);\n    var height = tooltip.clientHeight;\n    if ((height + parseInt(size1[0], 10) * 2) > areaHeight) {\n        width = x;\n        x = 0;\n    }\n    wordWrap(tooltip, text, x, y, size1, width, areaWidth, element);\n    if (isTouch) {\n        setTimeout(timeout, 5000, id);\n    }\n}\nexport function wordWrap(tooltip, text, x, y, size1, width, areaWidth, element) {\n    tooltip.innerHTML = text;\n    tooltip.style.top = (parseInt(size1[0], 10) * 2).toString() + 'px';\n    tooltip.style.left = (x).toString() + 'px';\n    tooltip.style.width = width.toString() + 'px';\n    tooltip.style.maxWidth = (areaWidth).toString() + 'px';\n    tooltip.style.wordWrap = 'break-word';\n    element.appendChild(tooltip);\n}\n// /**\n//  * \n//  * @param touchList \n//  * @param e \n//  * @param touches \n//  */\n// export function addTouchPointer(touchList: ITouches[], e: PointerEvent, touches: TouchList): ITouches[] {\n//     if (touches) {\n//         touchList = [];\n//         for (let i: number = 0, length: number = touches.length; i < length; i++) {\n//             touchList.push({ pageX: touches[i].clientX, pageY: touches[i].clientY, pointerId: null });\n//         }\n//     } else {\n//         touchList = touchList ? touchList : [];\n//         if (touchList.length === 0) {\n//             touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n//         } else {\n//             for (let i: number = 0, length: number = touchList.length; i < length; i++) {\n//                 if (touchList[i].pointerId === e.pointerId) {\n//                     touchList[i] = { pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId };\n//                 } else {\n//                     touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n//                 }\n//             }\n//         }\n//     }\n//     return touchList;\n// }\n/** @private */\nexport function createTooltip(id, text, top, left, fontSize) {\n    var tooltip = getElement(id);\n    var style = 'top:' + top.toString() + 'px;' +\n        'left:' + left.toString() + 'px;' +\n        'color: #000000; ' +\n        'background:' + '#FFFFFF' + ';' +\n        'position:absolute;border:1px solid #707070;font-size:' + fontSize + ';border-radius:2px;';\n    if (!tooltip) {\n        tooltip = createElement('div', {\n            id: id, innerHTML: '&nbsp;' + text + '&nbsp;', styles: style\n        });\n        document.body.appendChild(tooltip);\n    }\n    else {\n        tooltip.setAttribute('innerHTML', '&nbsp;' + text + '&nbsp;');\n        tooltip.setAttribute('styles', style);\n    }\n}\n/** @private */\nexport function drawSymbol(location, shape, size, url, options) {\n    var functionName = 'Path';\n    var renderer = new SvgRenderer('');\n    var temp = calculateLegendShapes(location, size, shape, options, url);\n    var htmlObject = renderer['draw' + temp.functionName](temp.renderOption);\n    return htmlObject;\n}\n/** @private */\nexport function calculateLegendShapes(location, size, shape, options, url) {\n    var path;\n    var functionName = 'Path';\n    var width = size.width;\n    var height = size.height;\n    var locX = location.x;\n    var locY = location.y;\n    var x = location.x + (-width / 2);\n    var y = location.y + (-height / 2);\n    switch (shape) {\n        case 'Circle':\n        case 'Bubble':\n            functionName = 'Ellipse';\n            merge(options, { 'rx': width / 2, 'ry': height / 2, 'cx': locX, 'cy': locY });\n            break;\n        case 'Star':\n            path = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2)\n                + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6)\n                + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' +\n                (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n            merge(options, { 'd': path });\n            break;\n        case 'Cross':\n            path = 'M' + ' ' + x + ' ' + locY + ' ' + 'L' + ' ' + (locX + (width / 2)) + ' ' + locY + ' ' +\n                'M' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + locX + ' ' +\n                (locY + (-height / 2));\n            merge(options, { 'd': path });\n            break;\n        case 'HorizontalLine':\n            path = 'M' + ' ' + x + ' ' + locY + ' ' + 'L' + ' ' + (locX + (width / 2)) + ' ' + locY;\n            merge(options, { 'd': path });\n            break;\n        case 'VerticalLine':\n            path = 'M' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + locX + ' ' + (locY + (-height / 2));\n            merge(options, { 'd': path });\n            break;\n        case 'Diamond':\n            path = 'M' + ' ' + x + ' ' + locY + ' ' +\n                'L' + ' ' + locX + ' ' + (locY + (-height / 2)) + ' ' +\n                'L' + ' ' + (locX + (width / 2)) + ' ' + locY + ' ' +\n                'L' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + locY + ' z';\n            merge(options, { 'd': path });\n            break;\n        case 'Rectangle':\n            path = 'M' + ' ' + x + ' ' + (locY + (-height / 2)) + ' ' +\n                'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (-height / 2)) + ' ' +\n                'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + (locY + (height / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + (locY + (-height / 2)) + ' z';\n            merge(options, { 'd': path });\n            break;\n        case 'Triangle':\n            path = 'M' + ' ' + x + ' ' + (locY + (height / 2)) + ' ' +\n                'L' + ' ' + locX + ' ' + (locY + (-height / 2)) + ' ' +\n                'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + (locY + (height / 2)) + ' z';\n            merge(options, { 'd': path });\n            break;\n        case 'InvertedTriangle':\n            path = 'M' + ' ' + (locX + (width / 2)) + ' ' + (locY - (height / 2)) + ' ' +\n                'L' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' +\n                'L' + ' ' + (locX - (width / 2)) + ' ' + (locY - (height / 2)) + ' ' +\n                'L' + ' ' + (locX + (width / 2)) + ' ' + (locY - (height / 2)) + ' z';\n            merge(options, { 'd': path });\n            break;\n        case 'Pentagon':\n            var eq = 72;\n            var xValue = void 0;\n            var yValue = void 0;\n            for (var i = 0; i <= 5; i++) {\n                xValue = (width / 2) * Math.cos((Math.PI / 180) * (i * eq));\n                yValue = (height / 2) * Math.sin((Math.PI / 180) * (i * eq));\n                if (i === 0) {\n                    path = 'M' + ' ' + (locX + xValue) + ' ' + (locY + yValue) + ' ';\n                }\n                else {\n                    path = path.concat('L' + ' ' + (locX + xValue) + ' ' + (locY + yValue) + ' ');\n                }\n            }\n            path = path.concat('Z');\n            merge(options, { 'd': path });\n            break;\n        case 'Image':\n            functionName = 'Image';\n            merge(options, { 'href': url, 'height': height, 'width': width, x: x, y: y });\n            break;\n    }\n    return { renderOption: options, functionName: functionName };\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\n// export function markerTemplateAnimate(element: Element, delay: number, duration: number, point: MapLocation): void {\n//     let delta: number = 0;\n//     let top: string = (element as HTMLElement).style.top;\n//     let y: number = parseInt(top, 10);\n//     new Animation({}).animate(<HTMLElement>element, {\n//         duration: duration,\n//         delay: delay,\n//         progress: (args: AnimationOptions): void => {\n//             if (args.timeStamp > args.delay) {\n//                 delta = ((args.timeStamp - args.delay) / args.duration);\n//                 (element as HTMLElement).style.top = y - 100 + (delta * 100) + 'px';\n//             }\n//         },\n//         end: (model: AnimationOptions) => {\n//             (element as HTMLElement).style.top = top;\n//         }\n//     });\n// }\n/** @private */\nexport function getElementOffset(childElement, parentElement) {\n    var width;\n    var height;\n    parentElement.appendChild(childElement);\n    width = childElement.offsetWidth;\n    height = childElement.offsetHeight;\n    parentElement.removeChild(childElement);\n    return new Size(width, height);\n}\n/** @private */\nexport function changeBorderWidth(element, index, scale, maps) {\n    var childNode;\n    for (var l = 0; l < element.childElementCount; l++) {\n        childNode = element.childNodes[l];\n        if (childNode.id.indexOf('_NavigationGroup') > -1) {\n            changeNavaigationLineWidth(childNode, index, scale, maps);\n        }\n        else {\n            var currentStroke = (maps.layersCollection[index].shapeSettings.border.width);\n            childNode.setAttribute('stroke-width', (currentStroke / scale).toString());\n        }\n    }\n}\n/** @private */\nexport function changeNavaigationLineWidth(element, index, scale, maps) {\n    var node;\n    for (var m = 0; m < element.childElementCount; m++) {\n        node = element.childNodes[m];\n        if (node.tagName === 'path') {\n            var currentStroke = (maps.layersCollection[index]\n                .navigationLineSettings[parseFloat(node.id.split('_')[2])].width);\n            node.setAttribute('stroke-width', (currentStroke / scale).toString());\n        }\n    }\n}\n// /** Pinch zoom helper methods */\n/** @private */\nexport function targetTouches(event) {\n    var targetTouches = [];\n    var touches = event.touches;\n    for (var i = 0; i < touches.length; i++) {\n        targetTouches.push({ pageX: touches[i].pageX, pageY: touches[i].pageY });\n    }\n    return targetTouches;\n}\n/** @private */\nexport function calculateScale(startTouches, endTouches) {\n    var startDistance = getDistance(startTouches[0], startTouches[1]);\n    var endDistance = getDistance(endTouches[0], endTouches[1]);\n    return (endDistance / startDistance);\n}\n/** @private */\nexport function getDistance(a, b) {\n    var x = a.pageX - b.pageX;\n    var y = a.pageY - b.pageY;\n    return Math.sqrt(x * x + y * y);\n}\n/** @private */\nexport function getTouches(touches, maps) {\n    var rect = maps.element.getBoundingClientRect();\n    var posTop = rect.top + document.defaultView.pageXOffset;\n    var posLeft = rect.left + document.defaultView.pageYOffset;\n    return Array.prototype.slice.call(touches).map(function (touch) {\n        return {\n            x: touch.pageX - posLeft,\n            y: touch.pageY - posTop,\n        };\n    });\n}\n/** @private */\nexport function getTouchCenter(touches) {\n    return {\n        x: touches.map(function (e) { return e['x']; }).reduce(sum) / touches.length,\n        y: touches.map(function (e) { return e['y']; }).reduce(sum) / touches.length\n    };\n}\n/** @private */\nexport function sum(a, b) {\n    return a + b;\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\nexport function zoomAnimate(element, delay, duration, point, scale, size, maps) {\n    var delta = 0;\n    var previousLocation = maps.previousPoint;\n    var preScale = maps.previousScale;\n    var diffScale = scale - preScale;\n    var currentLocation = new MapLocation(0, 0);\n    var currentScale = 1;\n    if (scale === preScale) {\n        element.setAttribute('transform', 'scale( ' + (scale) + ' ) translate( ' + point.x + ' ' + point.y + ' )');\n        return;\n    }\n    var slope = function (previousLocation, point) {\n        if (previousLocation.x === point.x) {\n            return null;\n        }\n        return (point.y - previousLocation.y) / (point.x - previousLocation.x);\n    };\n    var intercept = function (point, slopeValue) {\n        if (slopeValue === null) {\n            return point.x;\n        }\n        return point.y - slopeValue * point.x;\n    };\n    var slopeFactor = slope(previousLocation, point);\n    var slopeIntersection = intercept(previousLocation, slopeFactor);\n    var horizontalDifference = point.x - previousLocation.x;\n    var verticalDifference = point.y - previousLocation.y;\n    animate(element, delay, duration, function (args) {\n        if (args.timeStamp > args.delay) {\n            delta = ((args.timeStamp - args.delay) / args.duration);\n            currentScale = preScale + (delta * diffScale);\n            currentLocation.x = previousLocation.x + (delta * horizontalDifference) / (currentScale / scale);\n            if (slopeFactor == null) {\n                currentLocation.y = previousLocation.y + (delta * verticalDifference);\n            }\n            else {\n                currentLocation.y = ((slopeFactor * currentLocation.x) + slopeIntersection);\n            }\n            args.element.setAttribute('transform', 'scale( ' + currentScale + ' ) ' +\n                'translate( ' + currentLocation.x + ' ' + currentLocation.y + ' )');\n            maps.translatePoint = currentLocation;\n            maps.scale = currentScale;\n            maps.zoomModule.processTemplate(point.x, point.y, currentScale, maps);\n        }\n    }, function () {\n        maps.translatePoint = point;\n        maps.scale = scale;\n        element.setAttribute('transform', 'scale( ' + (scale) + ' ) translate( ' + point.x + ' ' + point.y + ' )');\n        maps.zoomModule.processTemplate(point.x, point.y, scale, maps);\n    });\n}\n/**\n * To process custom animation\n */\nexport function animate(element, delay, duration, process, end) {\n    var _this = this;\n    var start = null;\n    var clearAnimation;\n    var startAnimation = function (timestamp) {\n        if (!start) {\n            start = timestamp;\n        }\n        var progress = timestamp - start;\n        if (progress < duration) {\n            process.call(_this, { element: element, delay: 0, timeStamp: progress, duration: duration });\n            window.requestAnimationFrame(startAnimation);\n        }\n        else {\n            window.cancelAnimationFrame(clearAnimation);\n            end.call(_this, { element: element });\n        }\n    };\n    clearAnimation = window.requestAnimationFrame(startAnimation);\n}\n/**\n * To get shape data file using Ajax.\n */\nvar MapAjax = /** @class */ (function () {\n    function MapAjax(options, type, async, contentType, sendData) {\n        this.dataOptions = options;\n        this.type = type || 'GET';\n        this.async = async || true;\n        this.contentType = contentType;\n        this.sendData = sendData;\n    }\n    return MapAjax;\n}());\nexport { MapAjax };\n/**\n * Animation Translate\n * @private\n */\nexport function smoothTranslate(element, delay, duration, point) {\n    var delta = 0;\n    var transform = element.getAttribute('transform').split(' ');\n    if (transform.length === 2) {\n        transform[2] = transform[1].split(')')[0];\n        transform[1] = transform[0].split('(')[1];\n    }\n    var previousLocation = new MapLocation(parseInt(transform[1], 10), parseInt(transform[2], 10));\n    var diffx = point.x - previousLocation.x;\n    var diffy = point.y - previousLocation.y;\n    var currentLocation = new MapLocation(0, 0);\n    animate(element, delay, duration, function (args) {\n        if (args.timeStamp > args.delay) {\n            delta = ((args.timeStamp - args.delay) / args.duration);\n            currentLocation.x = previousLocation.x + (delta * diffx);\n            currentLocation.y = previousLocation.y + (delta * diffy);\n            args.element.setAttribute('transform', 'translate( ' + currentLocation.x + ' ' + currentLocation.y + ' )');\n        }\n    }, function () {\n        element.setAttribute('transform', 'translate( ' + point.x + ' ' + point.y + ' )');\n    });\n}\n","/**\n * Specifies Maps Themes\n */\nexport var Theme;\n(function (Theme) {\n    /** @private */\n    Theme.mapsTitleFont = {\n        size: '14px',\n        fontWeight: 'Medium',\n        color: '#424242',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    Theme.mapsSubTitleFont = {\n        size: '13px',\n        fontWeight: 'Medium',\n        color: '#424242',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    Theme.tooltipLabelFont = {\n        size: '12px',\n        fontWeight: 'Regular',\n        color: '#FFFFFF',\n        fontStyle: 'Regular',\n        fontFamily: 'Roboto'\n    };\n    /** @private */\n    Theme.legendTitleFont = {\n        size: '14px',\n        fontWeight: 'Regular',\n        color: '#757575',\n        fontStyle: 'Regular',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    Theme.legendLabelFont = {\n        size: '13px',\n        fontWeight: 'Medium',\n        color: '#757575',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    Theme.dataLabelFont = {\n        size: '12px',\n        fontWeight: 'Medium',\n        color: '#000000',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n})(Theme || (Theme = {}));\nexport var FabricTheme;\n(function (FabricTheme) {\n    /** @private */\n    FabricTheme.mapsTitleFont = {\n        size: '14px',\n        fontWeight: 'Semibold',\n        color: '#424242',\n        fontStyle: 'Semibold',\n        fontFamily: 'SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    FabricTheme.mapsSubTitleFont = {\n        size: '13px',\n        fontWeight: 'Regular',\n        color: '#424242',\n        fontStyle: 'Regular',\n        fontFamily: 'SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    FabricTheme.tooltipLabelFont = {\n        size: '12px',\n        fontWeight: 'Regular',\n        color: '#FFFFFF',\n        fontStyle: 'Regular',\n        fontFamily: 'Roboto'\n    };\n    /** @private */\n    FabricTheme.legendTitleFont = {\n        size: '14px',\n        fontWeight: 'Regular',\n        color: '#757575',\n        fontStyle: 'Regular',\n        fontFamily: 'SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    FabricTheme.legendLabelFont = {\n        size: '13px',\n        fontWeight: 'Medium',\n        color: '#757575',\n        fontStyle: 'Medium',\n        fontFamily: 'SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    FabricTheme.dataLabelFont = {\n        size: '12px',\n        fontWeight: 'Medium',\n        color: '#000000',\n        fontStyle: 'Medium',\n        fontFamily: 'SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n})(FabricTheme || (FabricTheme = {}));\nexport var BootstrapTheme;\n(function (BootstrapTheme) {\n    /** @private */\n    BootstrapTheme.mapsTitleFont = {\n        size: '14px',\n        fontWeight: 'Semibold',\n        color: '#424242',\n        fontStyle: 'Semibold',\n        fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    BootstrapTheme.mapsSubTitleFont = {\n        size: '13px',\n        fontWeight: 'Regular',\n        color: '#424242',\n        fontStyle: 'Regular',\n        fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    BootstrapTheme.tooltipLabelFont = {\n        size: '12px',\n        fontWeight: 'Regular',\n        color: '#FFFFFF',\n        fontStyle: 'Regular',\n        fontFamily: 'Roboto'\n    };\n    /** @private */\n    BootstrapTheme.legendTitleFont = {\n        size: '14px',\n        fontWeight: 'Regular',\n        color: '#757575',\n        fontStyle: 'Regular',\n        fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    BootstrapTheme.legendLabelFont = {\n        size: '13px',\n        fontWeight: 'Medium',\n        color: '#757575',\n        fontStyle: 'Medium',\n        fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n    /** @private */\n    BootstrapTheme.dataLabelFont = {\n        size: '12px',\n        fontWeight: 'Medium',\n        color: '#000000',\n        fontStyle: 'Medium',\n        fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif'\n    };\n})(BootstrapTheme || (BootstrapTheme = {}));\n/**\n * Internal use of Method to getting colors based on themes.\n * @private\n * @param theme\n */\nexport function getShapeColor(theme) {\n    return ['#B5E485', '#7BC1E8', '#DF819C', '#EC9B79', '#78D0D3',\n        '#D6D572', '#9178E3', '#A1E5B4', '#87A4B4', '#E4C16C'];\n}\n/**\n * HighContrast Theme configuration\n */\nexport var HighContrastTheme;\n(function (HighContrastTheme) {\n    /** @private */\n    HighContrastTheme.mapsTitleFont = {\n        size: '14px',\n        fontWeight: 'Medium',\n        color: '#FFFFFF',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    HighContrastTheme.mapsSubTitleFont = {\n        size: '13px',\n        fontWeight: 'Medium',\n        color: '#FFFFFF',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    HighContrastTheme.tooltipLabelFont = {\n        size: '12px',\n        fontWeight: 'Regular',\n        color: '#FFFFFF',\n        fontStyle: 'Regular',\n        fontFamily: 'Roboto'\n    };\n    /** @private */\n    HighContrastTheme.legendTitleFont = {\n        size: '14px',\n        fontWeight: 'Regular',\n        color: '#FFFFFF',\n        fontStyle: 'Regular',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    HighContrastTheme.legendLabelFont = {\n        size: '13px',\n        fontWeight: 'Medium',\n        color: '#FFFFFF',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n    /** @private */\n    HighContrastTheme.dataLabelFont = {\n        size: '12px',\n        fontWeight: 'Medium',\n        color: '#000000',\n        fontStyle: 'Medium',\n        fontFamily: 'Roboto, Noto, Sans-serif'\n    };\n})(HighContrastTheme || (HighContrastTheme = {}));\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * Maps base document\n */\nimport { Property, ChildProperty, Complex, Collection } from '@syncfusion/ej2-base';\nimport { Theme } from './theme';\nimport { Point } from '../utils/helper';\n/**\n * Options for customizing the annotation.\n */\nvar Annotation = /** @class */ (function (_super) {\n    __extends(Annotation, _super);\n    function Annotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Annotation.prototype, \"content\", void 0);\n    __decorate([\n        Property('0px')\n    ], Annotation.prototype, \"x\", void 0);\n    __decorate([\n        Property('0px')\n    ], Annotation.prototype, \"y\", void 0);\n    __decorate([\n        Property('None')\n    ], Annotation.prototype, \"verticalAlignment\", void 0);\n    __decorate([\n        Property('None')\n    ], Annotation.prototype, \"horizontalAlignment\", void 0);\n    __decorate([\n        Property('-1')\n    ], Annotation.prototype, \"zIndex\", void 0);\n    return Annotation;\n}(ChildProperty));\nexport { Annotation };\nvar Arrow = /** @class */ (function (_super) {\n    __extends(Arrow, _super);\n    function Arrow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Start')\n    ], Arrow.prototype, \"position\", void 0);\n    __decorate([\n        Property('false')\n    ], Arrow.prototype, \"showArrow\", void 0);\n    __decorate([\n        Property(2)\n    ], Arrow.prototype, \"size\", void 0);\n    __decorate([\n        Property('black')\n    ], Arrow.prototype, \"color\", void 0);\n    __decorate([\n        Property(0)\n    ], Arrow.prototype, \"offSet\", void 0);\n    return Arrow;\n}(ChildProperty));\nexport { Arrow };\n/**\n * Configures the fonts in maps.\n */\nvar Font = /** @class */ (function (_super) {\n    __extends(Font, _super);\n    function Font() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Font.prototype, \"size\", void 0);\n    __decorate([\n        Property(null)\n    ], Font.prototype, \"color\", void 0);\n    __decorate([\n        Property(null)\n    ], Font.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Property(null)\n    ], Font.prototype, \"fontWeight\", void 0);\n    __decorate([\n        Property(null)\n    ], Font.prototype, \"fontStyle\", void 0);\n    __decorate([\n        Property(1)\n    ], Font.prototype, \"opacity\", void 0);\n    return Font;\n}(ChildProperty));\nexport { Font };\n/**\n * Configures the borders in the maps.\n */\nvar Border = /** @class */ (function (_super) {\n    __extends(Border, _super);\n    function Border() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Border.prototype, \"color\", void 0);\n    __decorate([\n        Property(0)\n    ], Border.prototype, \"width\", void 0);\n    return Border;\n}(ChildProperty));\nexport { Border };\n/**\n * To configure the tooltip settings of the maps.\n */\nvar TooltipSettings = /** @class */ (function (_super) {\n    __extends(TooltipSettings, _super);\n    function TooltipSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], TooltipSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property('')\n    ], TooltipSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('#363F4C')\n    ], TooltipSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Complex({ color: 'transparent', width: 1 }, Border)\n    ], TooltipSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex(Theme.tooltipLabelFont, Font)\n    ], TooltipSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(null)\n    ], TooltipSettings.prototype, \"format\", void 0);\n    __decorate([\n        Property(null)\n    ], TooltipSettings.prototype, \"valuePath\", void 0);\n    return TooltipSettings;\n}(ChildProperty));\nexport { TooltipSettings };\n/**\n * Configures the maps margins.\n */\nvar Margin = /** @class */ (function (_super) {\n    __extends(Margin, _super);\n    function Margin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(10)\n    ], Margin.prototype, \"left\", void 0);\n    __decorate([\n        Property(10)\n    ], Margin.prototype, \"right\", void 0);\n    __decorate([\n        Property(10)\n    ], Margin.prototype, \"top\", void 0);\n    __decorate([\n        Property(10)\n    ], Margin.prototype, \"bottom\", void 0);\n    return Margin;\n}(ChildProperty));\nexport { Margin };\n/**\n * To configure ColorMapping in Maps\n */\nvar ColorMappingSettings = /** @class */ (function (_super) {\n    __extends(ColorMappingSettings, _super);\n    function ColorMappingSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], ColorMappingSettings.prototype, \"from\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorMappingSettings.prototype, \"to\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorMappingSettings.prototype, \"value\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorMappingSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorMappingSettings.prototype, \"label\", void 0);\n    return ColorMappingSettings;\n}(ChildProperty));\nexport { ColorMappingSettings };\n/**\n * To configure the selection settings\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property('#D2691E')\n    ], SelectionSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property(1)\n    ], SelectionSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enableMultiSelect\", void 0);\n    __decorate([\n        Complex({ color: 'transparent', width: 0 }, Border)\n    ], SelectionSettings.prototype, \"border\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * To configure the highlight settings\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#6B8E23')\n    ], HighlightSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property(false)\n    ], HighlightSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Complex({ color: 'transparent', width: 0 }, Border)\n    ], HighlightSettings.prototype, \"border\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * NavigationSelectedLine\n */\nvar NavigationLineSettings = /** @class */ (function (_super) {\n    __extends(NavigationLineSettings, _super);\n    function NavigationLineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], NavigationLineSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property(1)\n    ], NavigationLineSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property(null)\n    ], NavigationLineSettings.prototype, \"longitude\", void 0);\n    __decorate([\n        Property(null)\n    ], NavigationLineSettings.prototype, \"latitude\", void 0);\n    __decorate([\n        Property('')\n    ], NavigationLineSettings.prototype, \"dashArray\", void 0);\n    __decorate([\n        Property('black')\n    ], NavigationLineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property(0)\n    ], NavigationLineSettings.prototype, \"angle\", void 0);\n    __decorate([\n        Complex({ showArrow: false, position: 'Start', size: 5, color: 'black' }, Arrow)\n    ], NavigationLineSettings.prototype, \"arrowSettings\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], NavigationLineSettings.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Complex({}, HighlightSettings)\n    ], NavigationLineSettings.prototype, \"highlightSettings\", void 0);\n    return NavigationLineSettings;\n}(ChildProperty));\nexport { NavigationLineSettings };\n/**\n * Bubble settings model class\n */\nvar BubbleSettings = /** @class */ (function (_super) {\n    __extends(BubbleSettings, _super);\n    function BubbleSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({}, Border)\n    ], BubbleSettings.prototype, \"border\", void 0);\n    __decorate([\n        Property(false)\n    ], BubbleSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property([])\n    ], BubbleSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(1000)\n    ], BubbleSettings.prototype, \"animationDuration\", void 0);\n    __decorate([\n        Property(0)\n    ], BubbleSettings.prototype, \"animationDelay\", void 0);\n    __decorate([\n        Property('')\n    ], BubbleSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property(10)\n    ], BubbleSettings.prototype, \"minRadius\", void 0);\n    __decorate([\n        Property(20)\n    ], BubbleSettings.prototype, \"maxRadius\", void 0);\n    __decorate([\n        Property(1)\n    ], BubbleSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(null)\n    ], BubbleSettings.prototype, \"valuePath\", void 0);\n    __decorate([\n        Property('Circle')\n    ], BubbleSettings.prototype, \"bubbleType\", void 0);\n    __decorate([\n        Property(null)\n    ], BubbleSettings.prototype, \"colorValuePath\", void 0);\n    __decorate([\n        Collection([], ColorMappingSettings)\n    ], BubbleSettings.prototype, \"colorMapping\", void 0);\n    __decorate([\n        Complex({}, TooltipSettings)\n    ], BubbleSettings.prototype, \"tooltipSettings\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], BubbleSettings.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Complex({}, HighlightSettings)\n    ], BubbleSettings.prototype, \"highlightSettings\", void 0);\n    return BubbleSettings;\n}(ChildProperty));\nexport { BubbleSettings };\n/**\n * To configure title of the maps.\n */\nvar CommonTitleSettings = /** @class */ (function (_super) {\n    __extends(CommonTitleSettings, _super);\n    function CommonTitleSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], CommonTitleSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], CommonTitleSettings.prototype, \"description\", void 0);\n    return CommonTitleSettings;\n}(ChildProperty));\nexport { CommonTitleSettings };\n/**\n * To configure subtitle of the maps.\n */\nvar SubTitleSettings = /** @class */ (function (_super) {\n    __extends(SubTitleSettings, _super);\n    function SubTitleSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({}, Font)\n    ], SubTitleSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property('Center')\n    ], SubTitleSettings.prototype, \"alignment\", void 0);\n    return SubTitleSettings;\n}(CommonTitleSettings));\nexport { SubTitleSettings };\n/**\n * To configure title of the maps.\n */\nvar TitleSettings = /** @class */ (function (_super) {\n    __extends(TitleSettings, _super);\n    function TitleSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({}, Font)\n    ], TitleSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property('Center')\n    ], TitleSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Complex({}, SubTitleSettings)\n    ], TitleSettings.prototype, \"subtitleSettings\", void 0);\n    return TitleSettings;\n}(CommonTitleSettings));\nexport { TitleSettings };\n/**\n * Options to configure maps Zooming Settings.\n */\nvar ZoomSettings = /** @class */ (function (_super) {\n    __extends(ZoomSettings, _super);\n    function ZoomSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], ZoomSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property('Horizontal')\n    ], ZoomSettings.prototype, \"toolBarOrientation\", void 0);\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('#e61576')\n    ], ZoomSettings.prototype, \"highlightColor\", void 0);\n    __decorate([\n        Property('#e61576')\n    ], ZoomSettings.prototype, \"selectionColor\", void 0);\n    __decorate([\n        Property('Far')\n    ], ZoomSettings.prototype, \"horizontalAlignment\", void 0);\n    __decorate([\n        Property('Near')\n    ], ZoomSettings.prototype, \"verticalAlignment\", void 0);\n    __decorate([\n        Property(['ZoomIn', 'ZoomOut', 'Reset'])\n    ], ZoomSettings.prototype, \"toolbars\", void 0);\n    __decorate([\n        Property(true)\n    ], ZoomSettings.prototype, \"mouseWheelZoom\", void 0);\n    __decorate([\n        Property(false)\n    ], ZoomSettings.prototype, \"doubleClickZoom\", void 0);\n    __decorate([\n        Property(false)\n    ], ZoomSettings.prototype, \"pinchZooming\", void 0);\n    __decorate([\n        Property(false)\n    ], ZoomSettings.prototype, \"zoomOnClick\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"zoomFactor\", void 0);\n    __decorate([\n        Property(10)\n    ], ZoomSettings.prototype, \"maxZoom\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"minZoom\", void 0);\n    return ZoomSettings;\n}(ChildProperty));\nexport { ZoomSettings };\n/**\n * Configures the legend settings.\n */\nvar LegendSettings = /** @class */ (function (_super) {\n    __extends(LegendSettings, _super);\n    function LegendSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property('transparent')\n    ], LegendSettings.prototype, \"background\", void 0);\n    __decorate([\n        Property('Layers')\n    ], LegendSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"invertedPointer\", void 0);\n    __decorate([\n        Property('After')\n    ], LegendSettings.prototype, \"labelPosition\", void 0);\n    __decorate([\n        Property('None')\n    ], LegendSettings.prototype, \"labelDisplayMode\", void 0);\n    __decorate([\n        Property('Circle')\n    ], LegendSettings.prototype, \"shape\", void 0);\n    __decorate([\n        Property('')\n    ], LegendSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property('')\n    ], LegendSettings.prototype, \"height\", void 0);\n    __decorate([\n        Complex({}, Font)\n    ], LegendSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(15)\n    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n    __decorate([\n        Property(15)\n    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapePadding\", void 0);\n    __decorate([\n        Complex({ color: '#000000', width: 0 }, Border)\n    ], LegendSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex({ color: '#000000', width: 0 }, Border)\n    ], LegendSettings.prototype, \"shapeBorder\", void 0);\n    __decorate([\n        Complex({}, CommonTitleSettings)\n    ], LegendSettings.prototype, \"title\", void 0);\n    __decorate([\n        Complex({}, Font)\n    ], LegendSettings.prototype, \"titleStyle\", void 0);\n    __decorate([\n        Property('Bottom')\n    ], LegendSettings.prototype, \"position\", void 0);\n    __decorate([\n        Property('Center')\n    ], LegendSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Property('None')\n    ], LegendSettings.prototype, \"orientation\", void 0);\n    __decorate([\n        Property({ x: 0, y: 0 })\n    ], LegendSettings.prototype, \"location\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property('Default')\n    ], LegendSettings.prototype, \"mode\", void 0);\n    return LegendSettings;\n}(ChildProperty));\nexport { LegendSettings };\n/**\n * Customization for Data label settings.\n */\nvar DataLabelSettings = /** @class */ (function (_super) {\n    __extends(DataLabelSettings, _super);\n    function DataLabelSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], DataLabelSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Complex({ width: 0, color: 'transparent' }, Border)\n    ], DataLabelSettings.prototype, \"border\", void 0);\n    __decorate([\n        Property('black')\n    ], DataLabelSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property(1)\n    ], DataLabelSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(5)\n    ], DataLabelSettings.prototype, \"rx\", void 0);\n    __decorate([\n        Property(5)\n    ], DataLabelSettings.prototype, \"ry\", void 0);\n    __decorate([\n        Complex({}, Font)\n    ], DataLabelSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property('')\n    ], DataLabelSettings.prototype, \"labelPath\", void 0);\n    __decorate([\n        Property('None')\n    ], DataLabelSettings.prototype, \"smartLabelMode\", void 0);\n    __decorate([\n        Property('None')\n    ], DataLabelSettings.prototype, \"intersectionAction\", void 0);\n    __decorate([\n        Property('')\n    ], DataLabelSettings.prototype, \"template\", void 0);\n    return DataLabelSettings;\n}(ChildProperty));\nexport { DataLabelSettings };\n/**\n * To configure the shapeSettings in the maps.\n */\nvar ShapeSettings = /** @class */ (function (_super) {\n    __extends(ShapeSettings, _super);\n    function ShapeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#A6A6A6')\n    ], ShapeSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property([])\n    ], ShapeSettings.prototype, \"palette\", void 0);\n    __decorate([\n        Property(5)\n    ], ShapeSettings.prototype, \"circleRadius\", void 0);\n    __decorate([\n        Complex({ width: 0, color: '#000000' }, Border)\n    ], ShapeSettings.prototype, \"border\", void 0);\n    __decorate([\n        Property('')\n    ], ShapeSettings.prototype, \"dashArray\", void 0);\n    __decorate([\n        Property(1)\n    ], ShapeSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(null)\n    ], ShapeSettings.prototype, \"colorValuePath\", void 0);\n    __decorate([\n        Property(null)\n    ], ShapeSettings.prototype, \"valuePath\", void 0);\n    __decorate([\n        Collection([], ColorMappingSettings)\n    ], ShapeSettings.prototype, \"colorMapping\", void 0);\n    __decorate([\n        Property(false)\n    ], ShapeSettings.prototype, \"autofill\", void 0);\n    return ShapeSettings;\n}(ChildProperty));\nexport { ShapeSettings };\n/**\n * To configure the marker settings for the maps.\n */\nvar MarkerSettings = /** @class */ (function (_super) {\n    __extends(MarkerSettings, _super);\n    function MarkerSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({ color: 'transparent', width: 1 }, Border)\n    ], MarkerSettings.prototype, \"border\", void 0);\n    __decorate([\n        Property(null)\n    ], MarkerSettings.prototype, \"dashArray\", void 0);\n    __decorate([\n        Property(false)\n    ], MarkerSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property('#FF471A')\n    ], MarkerSettings.prototype, \"fill\", void 0);\n    __decorate([\n        Property(10)\n    ], MarkerSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(10)\n    ], MarkerSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property(1)\n    ], MarkerSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('Balloon')\n    ], MarkerSettings.prototype, \"shape\", void 0);\n    __decorate([\n        Property('')\n    ], MarkerSettings.prototype, \"legendText\", void 0);\n    __decorate([\n        Property(new Point(0, 0))\n    ], MarkerSettings.prototype, \"offset\", void 0);\n    __decorate([\n        Property('')\n    ], MarkerSettings.prototype, \"imageUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], MarkerSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], MarkerSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Complex({}, TooltipSettings)\n    ], MarkerSettings.prototype, \"tooltipSettings\", void 0);\n    __decorate([\n        Property(1000)\n    ], MarkerSettings.prototype, \"animationDuration\", void 0);\n    __decorate([\n        Property(0)\n    ], MarkerSettings.prototype, \"animationDelay\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], MarkerSettings.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Complex({}, HighlightSettings)\n    ], MarkerSettings.prototype, \"highlightSettings\", void 0);\n    return MarkerSettings;\n}(ChildProperty));\nexport { MarkerSettings };\n/**\n * To configure the layers of the maps.\n */\nvar LayerSettings = /** @class */ (function (_super) {\n    __extends(LayerSettings, _super);\n    function LayerSettings() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * @private\n         */\n        _this.isBaseLayer = false;\n        return _this;\n    }\n    __decorate([\n        Property(null)\n    ], LayerSettings.prototype, \"shapeData\", void 0);\n    __decorate([\n        Property()\n    ], LayerSettings.prototype, \"query\", void 0);\n    __decorate([\n        Complex({}, ShapeSettings)\n    ], LayerSettings.prototype, \"shapeSettings\", void 0);\n    __decorate([\n        Property([])\n    ], LayerSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property('Layer')\n    ], LayerSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property('Geographic')\n    ], LayerSettings.prototype, \"geometryType\", void 0);\n    __decorate([\n        Property('Aerial')\n    ], LayerSettings.prototype, \"bingMapType\", void 0);\n    __decorate([\n        Property('')\n    ], LayerSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('Geometry')\n    ], LayerSettings.prototype, \"layerType\", void 0);\n    __decorate([\n        Property('http://a.tile.openstreetmap.org/level/tileX/tileY.png')\n    ], LayerSettings.prototype, \"urlTemplate\", void 0);\n    __decorate([\n        Property(true)\n    ], LayerSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property('name')\n    ], LayerSettings.prototype, \"shapeDataPath\", void 0);\n    __decorate([\n        Property('name')\n    ], LayerSettings.prototype, \"shapePropertyPath\", void 0);\n    __decorate([\n        Property(0)\n    ], LayerSettings.prototype, \"animationDuration\", void 0);\n    __decorate([\n        Collection([], MarkerSettings)\n    ], LayerSettings.prototype, \"markerSettings\", void 0);\n    __decorate([\n        Complex({}, DataLabelSettings)\n    ], LayerSettings.prototype, \"dataLabelSettings\", void 0);\n    __decorate([\n        Collection([], BubbleSettings)\n    ], LayerSettings.prototype, \"bubbleSettings\", void 0);\n    __decorate([\n        Collection([], NavigationLineSettings)\n    ], LayerSettings.prototype, \"navigationLineSettings\", void 0);\n    __decorate([\n        Complex({}, TooltipSettings)\n    ], LayerSettings.prototype, \"tooltipSettings\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], LayerSettings.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Complex({}, HighlightSettings)\n    ], LayerSettings.prototype, \"highlightSettings\", void 0);\n    return LayerSettings;\n}(ChildProperty));\nexport { LayerSettings };\n/**\n * Internal use for bing type layer rendering\n */\nvar Tile = /** @class */ (function () {\n    function Tile(x, y, height, width, top, left, src) {\n        if (height === void 0) { height = 256; }\n        if (width === void 0) { width = 256; }\n        if (top === void 0) { top = 0; }\n        if (left === void 0) { left = 0; }\n        if (src === void 0) { src = null; }\n        this.x = x;\n        this.y = y;\n        this.top = top;\n        this.left = left;\n        this.height = height;\n        this.width = width;\n        this.src = src;\n    }\n    return Tile;\n}());\nexport { Tile };\n/**\n * Maps area configuration\n */\nvar MapsAreaSettings = /** @class */ (function (_super) {\n    __extends(MapsAreaSettings, _super);\n    function MapsAreaSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], MapsAreaSettings.prototype, \"background\", void 0);\n    __decorate([\n        Complex({ color: 'transparent', width: 1 }, Border)\n    ], MapsAreaSettings.prototype, \"border\", void 0);\n    return MapsAreaSettings;\n}(ChildProperty));\nexport { MapsAreaSettings };\n","/**\n * Maps constants doc\n */\n/**\n * Specifies maps load event name.\n * @private\n */\nexport var load = 'load';\n/**\n * Specifies maps loaded event name.\n * @private\n */\nexport var loaded = 'loaded';\n/**\n * Specifies maps click event name.\n * @private\n */\nexport var click = 'click';\n/**\n * Specifies maps loaded event name.\n * @private\n */\nexport var rightClick = 'rightClick';\n/**\n * Specifies maps double click event name.\n * @private\n */\nexport var doubleClick = 'doubleClick';\n/**\n * Specifies maps resize event name.\n * @private\n */\nexport var resize = 'resize';\n/**\n * Specifies the map tooltip render event\n */\nexport var tooltipRender = 'tooltipRender';\n/**\n * Specifies the map shapeSelected event\n */\nexport var shapeSelected = 'shapeSelected';\n/**\n * Specifies the map shapeHighlight event\n */\nexport var shapeHighlight = 'shapeHighlight';\n/**\n * Specifies maps mousemove event name.\n * @private\n */\nexport var mousemove = 'mousemove';\n/**\n * Specifies maps mouseup event name.\n * @private\n */\nexport var mouseup = 'mouseup';\n/**\n * Specifies maps mousedown event name.\n * @private\n */\nexport var mousedown = 'mousedown';\n/**\n * Specifies maps layerRendering event name.\n * @private\n */\nexport var layerRendering = 'layerRendering';\n/**\n * Specifies maps shapeRendering event name.\n * @private\n */\nexport var shapeRendering = 'shapeRendering';\n/**\n * Specifies maps markerRendering event name.\n * @private\n */\nexport var markerRendering = 'markerRendering';\n/**\n * Specifies maps markerClick event name.\n * @private\n */\nexport var markerClick = 'markerClick';\n/**\n * Specifies maps markerMouseMove event name.\n * @private\n */\nexport var markerMouseMove = 'markerMouseMove';\n/**\n * Specifies maps dataLabelRendering event name.\n * @private\n */\nexport var dataLabelRendering = 'dataLabelRendering';\n/**\n * Specifies maps bubbleRendering event name.\n * @private\n */\nexport var bubbleRendering = 'bubbleRendering';\n/**\n * Specifies maps bubbleClick event name.\n * @private\n */\nexport var bubbleClick = 'bubbleClick';\n/**\n * Specifies maps bubbleMouseMove event name.\n * @private\n */\nexport var bubbleMouseMove = 'bubbleMouseMove';\n/**\n * Specifies maps animationComplete event name.\n * @private\n */\nexport var animationComplete = 'animationComplete';\n/**\n * Specifies maps legendRendering event name.\n * @private\n */\nexport var legendRendering = 'legendRendering';\n/**\n * Specifies maps annotationRendering event name.\n * @private\n */\nexport var annotationRendering = 'annotationRendering';\n/**\n * Specifies maps itemSelection event name\n * @private\n */\nexport var itemSelection = 'itemSelection';\n/**\n * Specifies maps itemHighlight event name\n */\nexport var itemHighlight = 'itemHighlight';\n/**\n * Specifies maps beforePrint event name\n */\nexport var beforePrint = 'beforePrint';\n","/**\n * Bing map src doc\n */\nvar BingMap = /** @class */ (function () {\n    function BingMap(maps) {\n        this.maps = maps;\n    }\n    BingMap.prototype.getBingMap = function (tile, key, type, language, imageUrl, subDomains) {\n        var quadKey = '';\n        var subDomain;\n        var maxZoom = Math.min(this.maps.tileZoomLevel, parseInt(this.maxZoom, 10));\n        for (var i = maxZoom; i > 0; i--) {\n            var digit = 0;\n            var mask = 1 << (i - 1);\n            if ((tile.x & mask) !== 0) {\n                digit++;\n            }\n            if ((tile.y & mask) !== 0) {\n                digit += 2;\n            }\n            quadKey = quadKey + '' + digit;\n        }\n        subDomain = subDomains[Math.min(parseInt(quadKey.substr(quadKey.length - 1, 1), 10), subDomains.length)];\n        imageUrl = imageUrl.replace('{quadkey}', quadKey).replace('{subdomain}', subDomain);\n        return imageUrl += '&mkt=' + language + '&ur=IN&Key=' + key;\n    };\n    return BingMap;\n}());\nexport { BingMap };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ColorMapping class\n */\nvar ColorMapping = /** @class */ (function () {\n    function ColorMapping(maps) {\n        this.maps = maps;\n    }\n    /**\n     * To get color based on shape settings.\n     * @private\n     */\n    ColorMapping.prototype.getShapeColorMapping = function (shapeSettings, layerData, color) {\n        var colorValuePath = shapeSettings.colorValuePath ? shapeSettings.colorValuePath : shapeSettings.valuePath;\n        var equalValue = layerData[colorValuePath];\n        var colorValue = Number(equalValue);\n        var shapeColor = this.getColorByValue(shapeSettings.colorMapping, colorValue, equalValue);\n        return shapeColor ? shapeColor : color;\n    };\n    /**\n     * To color by value and color mapping\n     */\n    ColorMapping.prototype.getColorByValue = function (colorMapping, colorValue, equalValue) {\n        if (isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n            return null;\n        }\n        var fill = '';\n        for (var _i = 0, colorMapping_1 = colorMapping; _i < colorMapping_1.length; _i++) {\n            var colorMap = colorMapping_1[_i];\n            if ((colorMap.from && colorMap.to && (colorValue >= colorMap.from && colorValue <= colorMap.to)) ||\n                (colorMap.value === equalValue)) {\n                fill = colorMap.color;\n            }\n        }\n        return fill || ((!colorMapping.length) ? equalValue : null);\n    };\n    return ColorMapping;\n}());\nexport { ColorMapping };\n","import { isNullOrUndefined, extend, createElement, Ajax } from '@syncfusion/ej2-base';\nimport { getShapeColor } from '../model/theme';\nimport { GeoLocation, isCustomPath, convertGeoToPoint, Point, PathOption, Size, PolylineOption, getElementByID } from '../utils/helper';\nimport { MapLocation, RectOption, getTranslate, convertTileLatLongToPoint, checkShapeDataFields, CircleOption } from '../utils/helper';\nimport { Tile } from '../model/base';\nimport { BingMap } from './bing-map';\nimport { ColorMapping } from './color-mapping';\nimport { layerRendering, shapeRendering } from '../index';\n/**\n * To calculate and render the shape layer\n */\nvar LayerPanel = /** @class */ (function () {\n    function LayerPanel(map) {\n        this.tileTranslatePoint = new MapLocation(0, 0);\n        this.isMapCoordinates = true;\n        this.ajaxProcessCount = 0;\n        this.mapObject = map;\n        this.ajaxModule = new Ajax();\n        this.ajaxResponse = [];\n    }\n    /* tslint:disable:no-string-literal */\n    LayerPanel.prototype.measureLayerPanel = function () {\n        var _this = this;\n        var imageSize = 30;\n        var layerCollection = this.mapObject.layersCollection;\n        var areaRect = this.mapObject.mapAreaRect;\n        var padding = 10;\n        var secondaryEle = getElementByID(this.mapObject.element.id + '_Secondary_Element');\n        if (this.mapObject.isTileMap && secondaryEle) {\n            this.tileSvgObject = this.mapObject.renderer.createSvg({\n                id: this.mapObject.element.id + '_Tile_SVG', width: areaRect.width,\n                height: areaRect.height,\n                style: 'pointer-events:none'\n            });\n            secondaryEle.appendChild(this.tileSvgObject);\n        }\n        this.layerGroup = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_Layer_Collections',\n            'clip-path': 'url(#' + this.mapObject.element.id + '_MapArea_ClipRect)'\n        }));\n        this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', { width: 1, color: 'Gray' }, 1, {\n            x: this.mapObject.isTileMap ? 0 : areaRect.x, y: this.mapObject.isTileMap ? 0 : areaRect.y,\n            width: areaRect.width, height: areaRect.height\n        }));\n        this.layerGroup.appendChild(this.clipRectElement);\n        this.mapObject.baseMapBounds = null;\n        this.mapObject.baseMapRectBounds = null;\n        this.mapObject.baseSize = null;\n        var layerCount = layerCollection.length - 1;\n        layerCollection.forEach(function (layer, index) {\n            _this.currentLayer = layer;\n            _this.processLayers(layer, index);\n        });\n    };\n    LayerPanel.prototype.renderTileLayer = function (panel, layer, layerIndex, bing) {\n        var center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n        panel.currentFactor = panel.calculateFactor(layer);\n        if (isNullOrUndefined(panel.mapObject.tileZoomLevel)) {\n            panel.mapObject.tileZoomLevel = panel.mapObject.zoomSettings.zoomFactor;\n        }\n        panel.mapObject.tileTranslatePoint = panel.panTileMap(panel.mapObject.availableSize.width, panel.mapObject.availableSize.height, center);\n        panel.generateTiles(panel.mapObject.tileZoomLevel, panel.mapObject.tileTranslatePoint, bing);\n        if (panel.mapObject.markerModule) {\n            panel.mapObject.markerModule.markerRender(panel.layerObject, layerIndex, panel.mapObject.tileZoomLevel);\n        }\n        if (panel.mapObject.navigationLineModule) {\n            panel.layerObject.appendChild(panel.mapObject.navigationLineModule.renderNavigation(panel.currentLayer, panel.mapObject.tileZoomLevel, layerIndex));\n        }\n        panel.translateLayerElements(panel.layerObject, layerIndex);\n        panel.layerGroup.appendChild(panel.layerObject);\n    };\n    LayerPanel.prototype.processLayers = function (layer, layerIndex) {\n        this.layerObject = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex\n        }));\n        var eventArgs = {\n            cancel: false, name: layerRendering, index: layerIndex,\n            layer: layer, maps: this.mapObject\n        };\n        this.mapObject.trigger(layerRendering, eventArgs);\n        if (!eventArgs.cancel) {\n            if (layer.layerType !== 'Geometry') {\n                if (layer.layerType !== 'Bing' || this.bing) {\n                    this.renderTileLayer(this, layer, layerIndex);\n                }\n                else if (layer.key && layer.key.length > 1) {\n                    var proxy_1 = this;\n                    var bing_1 = new BingMap(this.mapObject);\n                    var url = 'http://dev.virtualearth.net/REST/V1/Imagery/Metadata/' + layer.bingMapType;\n                    var ajax = new Ajax({\n                        url: url + '?output=json&include=ImageryProviders&key=' + layer.key\n                    });\n                    ajax.onSuccess = function (json) {\n                        var jsonObject = JSON.parse(json);\n                        var resource = jsonObject['resourceSets'][0]['resources'][0];\n                        var imageUrl = resource['imageUrl'];\n                        var subDomains = resource['imageUrlSubdomains'];\n                        var maxZoom = resource['zoomMax'];\n                        if (imageUrl !== null && imageUrl !== undefined && imageUrl !== bing_1.imageUrl) {\n                            bing_1.imageUrl = imageUrl;\n                        }\n                        if (subDomains !== null && subDomains !== undefined && subDomains !== bing_1.subDomains) {\n                            bing_1.subDomains = subDomains;\n                        }\n                        if (maxZoom !== null && maxZoom !== undefined && maxZoom !== bing_1.maxZoom) {\n                            bing_1.maxZoom = maxZoom;\n                        }\n                        proxy_1.mapObject['bingMap'] = bing_1;\n                        proxy_1.renderTileLayer(proxy_1, layer, layerIndex, bing_1);\n                    };\n                    ajax.send();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(layer.shapeData) && (!isNullOrUndefined(layer.shapeData['geometries']) ||\n                    !isNullOrUndefined(layer.shapeData['features']))) {\n                    var featureData = (!isNullOrUndefined(layer.shapeData['geometries']) &&\n                        layer.shapeData['geometries'].length > 0 ? layer.shapeData['geometries'] :\n                        layer.shapeData['features']);\n                    layer.layerData = [];\n                    var bbox = layer.shapeData['bbox'];\n                    if (!isNullOrUndefined(bbox) && layer.isBaseLayer) {\n                        this.mapObject.baseMapBounds = new GeoLocation({ min: bbox[0][1], max: bbox[1][1] }, { min: bbox[0][0], max: bbox[1][0] });\n                    }\n                    else if (isNullOrUndefined(this.mapObject.baseMapBounds) && !isCustomPath(featureData)) {\n                        this.calculateRectBounds(featureData);\n                        // if (isNullOrUndefined(this.mapObject.baseSize)) {\n                        //     let minSize: Point = convertGeoToPoint(\n                        //         this.mapObject.baseMapBounds.latitude.min,\n                        //         this.mapObject.baseMapBounds.longitude.min, this.calculateFactor(layer), layer, this.mapObject\n                        //     );\n                        //     let maxSize: Point = convertGeoToPoint(\n                        //         this.mapObject.baseMapBounds.latitude.max,\n                        //         this.mapObject.baseMapBounds.longitude.max, this.calculateFactor(layer), layer, this.mapObject\n                        //     );\n                        //     this.mapObject.baseSize = new Size(Math.abs(minSize.x - maxSize.x), Math.abs(minSize.y - maxSize.y));\n                        // }\n                    }\n                    this.calculatePathCollection(layerIndex, featureData);\n                }\n            }\n        }\n        if (!this.mapObject.isTileMap) {\n            this.mapObject.svgObject.appendChild(this.layerGroup);\n        }\n        else if (this.tileSvgObject) {\n            this.tileSvgObject.appendChild(this.layerGroup);\n        }\n    };\n    //tslint:disable:max-func-body-length\n    LayerPanel.prototype.bubbleCalculation = function (bubbleSettings, range) {\n        if (bubbleSettings.dataSource != null && bubbleSettings != null) {\n            if (bubbleSettings.colorValuePath == null) {\n                return;\n            }\n            for (var i = 0; i < bubbleSettings.dataSource.length; i++) {\n                var bubbledata = parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]);\n                if (i !== 0) {\n                    if (bubbledata > range.max) {\n                        range.max = bubbledata;\n                    }\n                    else if (bubbledata < range.min) {\n                        range.min = bubbledata;\n                    }\n                }\n                else {\n                    range.max = range.min = bubbledata;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    LayerPanel.prototype.calculatePathCollection = function (layerIndex, renderData) {\n        var _this = this;\n        this.groupElements = [];\n        if ((!isCustomPath(renderData))) {\n            this.currentFactor = this.calculateFactor(this.currentLayer);\n        }\n        this.rectBounds = null;\n        var shapeSettings = this.currentLayer.shapeSettings;\n        renderData.forEach(function (geometryData, index) {\n            if (!isNullOrUndefined(geometryData['geometry']) || !isNullOrUndefined(geometryData['coordinates'])) {\n                var type = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['type'] : geometryData['type'];\n                var coords = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['coordinates'] :\n                    geometryData['coordinates'];\n                var data = geometryData['geometry'];\n                var properties = geometryData['properties'];\n                _this.generatePoints(type, coords, data, properties);\n            }\n        });\n        this.currentLayer.rectBounds = this.rectBounds;\n        if (isNullOrUndefined(this.mapObject.baseMapRectBounds) && this.currentLayer.isBaseLayer) {\n            this.mapObject.baseMapRectBounds = this.rectBounds;\n        }\n        var colors = shapeSettings.palette.length > 1 ? shapeSettings.palette : getShapeColor(this.mapObject.theme);\n        var labelTemplateEle = createElement('div', {\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_Label_Template_Group',\n            className: 'template',\n            styles: 'pointer-events: none; overflow: hidden; position: absolute;' +\n                'top:' + this.mapObject.mapAreaRect.y + 'px;' +\n                'left:' + this.mapObject.mapAreaRect.x + 'px;' +\n                'height:' + this.mapObject.mapAreaRect.height + 'px;' +\n                'width:' + this.mapObject.mapAreaRect.width + 'px;'\n        });\n        var _loop_1 = function (i) {\n            var k = void 0;\n            var currentShapeData = this_1.currentLayer.layerData[i];\n            var pathOptions = void 0;\n            var polyLineOptions = void 0;\n            var circleOptions = void 0;\n            var groupElement = void 0;\n            var drawObject = void 0;\n            var path = '';\n            var points = '';\n            var fill = (shapeSettings.autofill) ? colors[i % colors.length] : shapeSettings.fill;\n            if (shapeSettings.colorValuePath !== null && !isNullOrUndefined(currentShapeData['property'])) {\n                k = checkShapeDataFields(this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath);\n                if (k !== null && shapeSettings.colorMapping.length === 0) {\n                    fill = this_1.currentLayer.dataSource[k][shapeSettings.colorValuePath];\n                }\n                else if (currentShapeData['property'][shapeSettings.colorValuePath] &&\n                    this_1.currentLayer.dataSource.length === 0 && shapeSettings.colorMapping.length === 0) {\n                    fill = currentShapeData['property'][shapeSettings.colorValuePath];\n                }\n            }\n            var shapeID = this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_ShapeIndex_' + i + '_dataIndex_' + k;\n            fill = this_1.getShapeColorMapping(this_1.currentLayer, currentShapeData['property'], fill);\n            var eventArgs = {\n                cancel: false, name: shapeRendering, index: i,\n                data: this_1.currentLayer.dataSource ? this_1.currentLayer.dataSource[k] : null, maps: this_1.mapObject,\n                shape: shapeSettings, fill: fill, border: { width: shapeSettings.border.width, color: shapeSettings.border.color }\n            };\n            this_1.mapObject.trigger(shapeRendering, eventArgs);\n            var drawingType = !isNullOrUndefined(currentShapeData['_isMultiPolygon'])\n                ? 'MultiPolygon' : isNullOrUndefined(currentShapeData['type']) ? currentShapeData[0]['type'] : currentShapeData['type'];\n            drawingType = (drawingType === 'Polygon' || drawingType === 'MultiPolygon') ? 'Polygon' : drawingType;\n            if (this_1.groupElements.length < 1) {\n                groupElement = this_1.mapObject.renderer.createGroup({\n                    id: this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group', transform: ''\n                });\n                this_1.groupElements.push(groupElement);\n            }\n            else {\n                for (var i_1 = 0; i_1 < this_1.groupElements.length; i_1++) {\n                    var ele = this_1.groupElements[i_1];\n                    if (ele.id.indexOf(drawingType) > -1) {\n                        groupElement = ele;\n                        break;\n                    }\n                    else if (i_1 >= this_1.groupElements.length - 1) {\n                        groupElement = this_1.mapObject.renderer.createGroup({\n                            id: this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group'\n                        });\n                        this_1.groupElements.push(groupElement);\n                        break;\n                    }\n                }\n            }\n            var pathEle = void 0;\n            switch (drawingType) {\n                case 'Polygon':\n                    if (!currentShapeData['_isMultiPolygon']) {\n                        path += 'M' + (currentShapeData[0]['point']['x']) + ' ' + (currentShapeData[0]['point']['y']);\n                        currentShapeData.map(function (shapeData) {\n                            path += ' L ' + (shapeData['point']['x']) + ' ' + (shapeData['point']['y']);\n                        });\n                    }\n                    else {\n                        path = this_1.generateMultiPolygonPath(currentShapeData);\n                    }\n                    path += ' z ';\n                    if (path.length > 3) {\n                        pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, shapeSettings.opacity, shapeSettings.dashArray, path);\n                        pathEle = this_1.mapObject.renderer.drawPath(pathOptions);\n                    }\n                    break;\n                case 'LineString':\n                    currentShapeData.map(function (lineData) {\n                        points += lineData['point']['x'] + ' , ' + lineData['point']['y'] + ' ';\n                    });\n                    polyLineOptions = new PolylineOption(shapeID, points, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, shapeSettings.opacity, shapeSettings.dashArray);\n                    pathEle = this_1.mapObject.renderer.drawPolyline(polyLineOptions);\n                    break;\n                case 'Point':\n                    var pointData = currentShapeData['point'];\n                    circleOptions = new CircleOption(shapeID, eventArgs.fill, eventArgs.border, shapeSettings.opacity, pointData['x'], pointData['y'], shapeSettings.circleRadius, null);\n                    pathEle = this_1.mapObject.renderer.drawCircle(circleOptions);\n                    break;\n                case 'Path':\n                    path = currentShapeData['point'];\n                    pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, shapeSettings.opacity, shapeSettings.dashArray, path);\n                    pathEle = this_1.mapObject.renderer.drawPath(pathOptions);\n                    break;\n            }\n            if (!isNullOrUndefined(pathEle)) {\n                pathEle.setAttribute('aria-label', ((!isNullOrUndefined(currentShapeData['property'])) ?\n                    (currentShapeData['property'][this_1.currentLayer.shapePropertyPath]) : ''));\n                pathEle.setAttribute('tabindex', (this_1.mapObject.tabIndex + i + 2).toString());\n                groupElement.appendChild(pathEle);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < this.currentLayer.layerData.length; i++) {\n            _loop_1(i);\n        }\n        var bubbleG;\n        if (this.currentLayer.bubbleSettings.length && this.mapObject.bubbleModule) {\n            var length_1 = this.currentLayer.bubbleSettings.length;\n            var bubble_1;\n            var _loop_2 = function (j) {\n                bubble_1 = this_2.currentLayer.bubbleSettings[j];\n                bubbleG = this_2.mapObject.renderer.createGroup({\n                    id: this_2.mapObject.element.id + '_LayerIndex_' + layerIndex + '_bubble_Group_' + j\n                });\n                var range = { min: 0, max: 0 };\n                this_2.bubbleCalculation(bubble_1, range);\n                bubble_1.dataSource.map(function (bubbleData, i) {\n                    _this.renderBubble(_this.currentLayer, bubbleData, colors[i % colors.length], range, j, i, bubbleG, layerIndex, bubble_1);\n                });\n                this_2.groupElements.push(bubbleG);\n            };\n            var this_2 = this;\n            for (var j = 0; j < length_1; j++) {\n                _loop_2(j);\n            }\n        }\n        var group = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_layerIndex_' + layerIndex + '_dataLableIndex_Group', style: 'pointer-events: none;'\n        }));\n        if (this.mapObject.dataLabelModule && this.currentLayer.dataLabelSettings.visible) {\n            renderData.map(function (currentShapeData, i) {\n                _this.renderLabel(_this.currentLayer, layerIndex, currentShapeData, group, i, labelTemplateEle);\n            });\n            this.groupElements.push(group);\n        }\n        if (this.mapObject.navigationLineModule) {\n            this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer, this.currentFactor, layerIndex));\n        }\n        this.groupElements.map(function (element) {\n            _this.layerObject.appendChild(element);\n        });\n        if (this.mapObject.markerModule) {\n            this.mapObject.markerModule.markerRender(this.layerObject, layerIndex, this.currentFactor);\n        }\n        this.translateLayerElements(this.layerObject, layerIndex);\n        this.layerGroup.appendChild(this.layerObject);\n    };\n    /**\n     *  render datalabel\n     */\n    LayerPanel.prototype.renderLabel = function (layer, layerIndex, shape, group, shapeIndex, labelTemplateEle) {\n        this.mapObject.dataLabelModule.renderLabel(layer, layerIndex, shape, layer.layerData, group, labelTemplateEle, shapeIndex);\n    };\n    /**\n     * To render path for multipolygon\n     */\n    LayerPanel.prototype.generateMultiPolygonPath = function (currentShapeData) {\n        var path = '';\n        var shape;\n        for (var j = 0; j < currentShapeData.length; j++) {\n            path += 'M' + (currentShapeData[j][0]['point']['x']) + ' ' + (currentShapeData[j][0]['point']['y']);\n            shape = currentShapeData[j];\n            shape.map(function (shapeData) {\n                path += ' L ' + (shapeData['point']['x']) + ' ' + (shapeData['point']['y']);\n            });\n        }\n        return path;\n    };\n    /**\n     * To render bubble\n     */\n    LayerPanel.prototype.renderBubble = function (layer, bubbleData, color, range, bubbleIndex, dataIndex, group, layerIndex, bubbleSettings) {\n        if (isNullOrUndefined(this.mapObject.bubbleModule) || !bubbleSettings.visible) {\n            return null;\n        }\n        color = bubbleSettings.fill ? bubbleSettings.fill : color;\n        this.mapObject.bubbleModule.id = this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_BubbleIndex_' +\n            bubbleIndex + '_dataIndex_' + dataIndex;\n        this.mapObject.bubbleModule.renderBubble(bubbleSettings, bubbleData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group);\n    };\n    /**\n     * To get the shape color from color mapping module\n     */\n    LayerPanel.prototype.getShapeColorMapping = function (layer, shape, color) {\n        color = color ? color : layer.shapeSettings.fill;\n        if (layer.shapeSettings.colorMapping.length === 0 && isNullOrUndefined(layer.dataSource)) {\n            return color;\n        }\n        var index = checkShapeDataFields(layer.dataSource, shape, layer.shapeDataPath, layer.shapePropertyPath);\n        var colorMapping = new ColorMapping(this.mapObject);\n        if (isNullOrUndefined(layer.dataSource[index])) {\n            return color;\n        }\n        return colorMapping.getShapeColorMapping(layer.shapeSettings, layer.dataSource[index], color);\n    };\n    LayerPanel.prototype.generatePoints = function (type, coordinates, data, properties) {\n        var _this = this;\n        var latitude;\n        var longitude;\n        var newData = [];\n        switch (type.toLowerCase()) {\n            case 'polygon':\n                newData = this.calculatePolygonBox(coordinates[0], data, properties);\n                if (newData.length > 0) {\n                    newData['property'] = properties;\n                    newData['type'] = type;\n                    newData['_isMultiPolygon'] = false;\n                    this.currentLayer.layerData.push(newData);\n                }\n                break;\n            case 'multipolygon':\n                var multiPolygonDatas = [];\n                for (var i = 0; i < coordinates.length; i++) {\n                    newData = this.calculatePolygonBox(coordinates[i][0], data, properties);\n                    if (newData.length > 0) {\n                        multiPolygonDatas.push(newData);\n                    }\n                }\n                multiPolygonDatas['property'] = properties;\n                multiPolygonDatas['type'] = type;\n                multiPolygonDatas['_isMultiPolygon'] = true;\n                this.currentLayer.layerData.push(multiPolygonDatas);\n                break;\n            case 'linestring':\n                coordinates.map(function (points, index) {\n                    latitude = points[1];\n                    longitude = points[0];\n                    var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                    newData.push({\n                        point: point, lat: latitude, lng: longitude\n                    });\n                });\n                newData['property'] = properties;\n                newData['type'] = type;\n                this.currentLayer.layerData.push(newData);\n                break;\n            case 'point':\n                latitude = coordinates[1];\n                longitude = coordinates[0];\n                var point = convertGeoToPoint(latitude, longitude, this.currentFactor, this.currentLayer, this.mapObject);\n                this.currentLayer.layerData.push({\n                    point: point, type: type, lat: latitude, lng: longitude, property: properties\n                });\n                break;\n            case 'path':\n                this.currentLayer.layerData.push({\n                    point: data['d'], type: type, property: properties\n                });\n                break;\n        }\n    };\n    LayerPanel.prototype.calculateFactor = function (layer) {\n        var horFactor;\n        var verFactor = 1;\n        var divide = 10;\n        var exp = 'e+1';\n        var bounds = this.mapObject.baseMapBounds;\n        var mapSize = new Size(this.mapObject.mapAreaRect.width, this.mapObject.mapAreaRect.height - 5);\n        var mapHeight;\n        var mapWidth;\n        if (bounds) {\n            var start = convertGeoToPoint(bounds.latitude.min, bounds.longitude.min, null, layer, this.mapObject);\n            var end = convertGeoToPoint(bounds.latitude.max, bounds.longitude.max, null, layer, this.mapObject);\n            mapHeight = end.y - start.y;\n            mapWidth = end.x - start.x;\n        }\n        else {\n            mapHeight = mapWidth = 500;\n        }\n        if (mapHeight < mapSize.height) {\n            horFactor = parseFloat(Math.abs(Number(mapSize.height / Number(mapHeight.toString() + exp)) * 100).toString().split('.')[0])\n                / divide;\n        }\n        else {\n            horFactor = mapSize.height / mapHeight;\n        }\n        if (mapWidth < mapSize.width) {\n            verFactor = parseFloat(Math.abs(Number(mapSize.width / Number(mapWidth.toString() + exp)) * 100).toString().split('.')[0])\n                / divide;\n        }\n        else {\n            verFactor = mapSize.width / mapWidth;\n        }\n        return (Math.min(verFactor, horFactor));\n    };\n    LayerPanel.prototype.translateLayerElements = function (layerElement, index) {\n        var childNode;\n        if (!isNullOrUndefined(this.mapObject.baseMapRectBounds)) {\n            var duration = this.currentLayer.animationDuration;\n            var animate = duration !== 0 || isNullOrUndefined(this.mapObject.zoomModule);\n            var translate = getTranslate(this.mapObject, this.currentLayer, animate);\n            var scale = this.mapObject.previousScale = translate['scale'];\n            var location_1 = this.mapObject.previousPoint = translate['location'];\n            this.mapObject.baseTranslatePoint = this.mapObject.translatePoint = location_1;\n            this.mapObject.baseScale = this.mapObject.scale = scale;\n            for (var i = 0; i < layerElement.childElementCount; i++) {\n                childNode = layerElement.childNodes[i];\n                if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                    (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_dataLableIndex_Group') > -1))) {\n                    var transform = 'scale( ' + scale + ' ) '\n                        + 'translate( ' + location_1.x + ' ' + location_1.y + ' ) ';\n                    childNode.setAttribute('transform', transform);\n                    if (duration > 0 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n                        translate = getTranslate(this.mapObject, this.currentLayer);\n                        this.mapObject.scale = translate['scale'];\n                        this.mapObject.translatePoint = translate['location'];\n                    }\n                }\n            }\n        }\n        else if (this.mapObject.isTileMap) {\n            for (var j = 0; j < layerElement.childElementCount; j++) {\n                childNode = layerElement.childNodes[j];\n                if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                    (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_dataLableIndex_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_line_Group') > -1))) {\n                    var transform = 'scale( ' + this.mapObject.scale + ' ) ' + 'translate( ' + this.mapObject.translatePoint.x\n                        + ' ' + this.mapObject.translatePoint.y + ' ) ';\n                    childNode.setAttribute('transform', transform);\n                }\n            }\n        }\n    };\n    LayerPanel.prototype.calculateRectBounds = function (layerData) {\n        var _this = this;\n        layerData.forEach(function (obj, index) {\n            if (!isNullOrUndefined(obj['geometry']) || !isNullOrUndefined(obj['coordinates'])) {\n                var type = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['type'] : obj['type'];\n                var coordinates = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['coordinates'] : obj['coordinates'];\n                switch (type.toLowerCase()) {\n                    case 'polygon':\n                        _this.calculateRectBox(coordinates[0]);\n                        break;\n                    case 'multipolygon':\n                        coordinates.map(function (point, index) {\n                            _this.calculateRectBox(point[0]);\n                        });\n                        break;\n                }\n            }\n        });\n    };\n    LayerPanel.prototype.calculatePolygonBox = function (coordinates, data, properties) {\n        var _this = this;\n        var newData = [];\n        var bounds = this.mapObject.baseMapBounds;\n        coordinates.map(function (currentPoint, index) {\n            var latitude = currentPoint[1];\n            var longitude = currentPoint[0];\n            if ((longitude >= bounds.longitude.min && longitude <= bounds.longitude.max)\n                && (latitude >= bounds.latitude.min && latitude <= bounds.latitude.max)) {\n                var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                if (isNullOrUndefined(_this.rectBounds)) {\n                    _this.rectBounds = { min: { x: point.x, y: point.y }, max: { x: point.x, y: point.y } };\n                }\n                else {\n                    _this.rectBounds['min']['x'] = Math.min(_this.rectBounds['min']['x'], point.x);\n                    _this.rectBounds['min']['y'] = Math.min(_this.rectBounds['min']['y'], point.y);\n                    _this.rectBounds['max']['x'] = Math.max(_this.rectBounds['max']['x'], point.x);\n                    _this.rectBounds['max']['y'] = Math.max(_this.rectBounds['max']['y'], point.y);\n                }\n                newData.push({\n                    point: point,\n                    lat: latitude,\n                    lng: longitude\n                });\n            }\n        });\n        return newData;\n    };\n    LayerPanel.prototype.calculateRectBox = function (coordinates) {\n        var _this = this;\n        coordinates.forEach(function (currentCoords) {\n            if (isNullOrUndefined(_this.mapObject.baseMapBounds)) {\n                _this.mapObject.baseMapBounds = new GeoLocation({ min: currentCoords[1], max: currentCoords[1] }, { min: currentCoords[0], max: currentCoords[0] });\n            }\n            else {\n                _this.mapObject.baseMapBounds.latitude.min = Math.min(_this.mapObject.baseMapBounds.latitude.min, currentCoords[1]);\n                _this.mapObject.baseMapBounds.latitude.max = Math.max(_this.mapObject.baseMapBounds.latitude.max, currentCoords[1]);\n                _this.mapObject.baseMapBounds.longitude.min = Math.min(_this.mapObject.baseMapBounds.longitude.min, currentCoords[0]);\n                _this.mapObject.baseMapBounds.longitude.max = Math.max(_this.mapObject.baseMapBounds.longitude.max, currentCoords[0]);\n            }\n        });\n    };\n    LayerPanel.prototype.generateTiles = function (zoomLevel, tileTranslatePoint, bing) {\n        var userLang = this.mapObject.locale;\n        var size = this.mapObject.availableSize;\n        this.tiles = [];\n        var xcount;\n        var ycount;\n        xcount = ycount = Math.pow(2, zoomLevel);\n        var width = size.width / 2;\n        var height = size.height / 2;\n        var baseLayer = this.mapObject.layers[this.mapObject.baseLayerIndex];\n        this.urlTemplate = baseLayer.urlTemplate;\n        var endY = Math.min(ycount, ((-tileTranslatePoint.y + size.height) / 256) + 1);\n        var endX = Math.min(xcount, ((-tileTranslatePoint.x + size.width) / 256) + 1);\n        var startX = (-(tileTranslatePoint.x + 256) / 256);\n        var startY = (-(tileTranslatePoint.y + 256) / 256);\n        bing = bing || this.bing || this.mapObject['bingMap'];\n        for (var i = Math.round(startX); i < Math.round(endX); i++) {\n            for (var j = Math.round(startY); j < Math.round(endY); j++) {\n                var x = 256 * i + tileTranslatePoint.x;\n                var y = 256 * j + tileTranslatePoint.y;\n                if (x > -256 && x <= size.width && y > -256 && y < size.height) {\n                    if (i >= 0 && j >= 0) {\n                        var tile = new Tile(i, j);\n                        tile.left = x;\n                        tile.top = y;\n                        if (baseLayer.layerType === 'Bing') {\n                            var key = baseLayer.key;\n                            tile.src = bing.getBingMap(tile, key, baseLayer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n                        }\n                        else {\n                            tile.src = this.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', tile.x.toString())\n                                .replace('tileY', tile.y.toString());\n                        }\n                        this.tiles.push(tile);\n                    }\n                }\n            }\n        }\n        var proxTiles = extend([], this.tiles, [], true);\n        for (var _i = 0, _a = this.mapObject.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (!(layer.type === 'SubLayer' && layer.visible)) {\n                continue;\n            }\n            if (layer.layerType === 'OSM' || layer.layerType === 'Bing') {\n                for (var _b = 0, proxTiles_1 = proxTiles; _b < proxTiles_1.length; _b++) {\n                    var baseTile = proxTiles_1[_b];\n                    var subtile = extend(baseTile, {}, {}, true);\n                    if (layer.layerType === 'Bing') {\n                        subtile.src = bing.getBingMap(subtile, layer.key, layer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n                    }\n                    else {\n                        subtile.src = layer.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', baseTile.x.toString())\n                            .replace('tileY', baseTile.y.toString());\n                    }\n                    this.tiles.push(subtile);\n                }\n            }\n        }\n        this.arrangeTiles();\n    };\n    LayerPanel.prototype.arrangeTiles = function () {\n        var htmlString = this.templateCompiler(this.tiles);\n        if (getElementByID(this.mapObject.element.id + '_tile_parent')) {\n            document.getElementById(this.mapObject.element.id + '_tile_parent').innerHTML = htmlString;\n        }\n    };\n    LayerPanel.prototype.templateCompiler = function (tiles) {\n        var tileElment = '';\n        for (var _i = 0, tiles_1 = tiles; _i < tiles_1.length; _i++) {\n            var tile = tiles_1[_i];\n            tileElment += '<div><div style=\"position:absolute;left: ' + tile.left + 'px;top: ' + tile.top + 'px;height: ' + tile.height +\n                'px;width: ' + tile.width + 'px;\"><img src=\"' + tile.src + '\"></img></div></div>';\n        }\n        return tileElment;\n    };\n    LayerPanel.prototype.panTileMap = function (factorX, factorY, centerPosition) {\n        var level = this.mapObject.tileZoomLevel;\n        var padding = 20;\n        var x;\n        var y;\n        var totalSize = Math.pow(2, level) * 256;\n        x = (factorX / 2) - (totalSize / 2);\n        y = (factorY / 2) - (totalSize / 2);\n        var position = convertTileLatLongToPoint(centerPosition, level, { x: x, y: y }, this.isMapCoordinates);\n        x -= position.x - (factorX / 2);\n        y = (y - (position.y - (factorY / 2))) + padding;\n        this.mapObject.scale = Math.pow(2, level - 1);\n        this.mapObject.translatePoint = new Point(((x - (0.5 * this.mapObject.scale)) / this.mapObject.scale), ((y - (0.5 * this.mapObject.scale)) / this.mapObject.scale));\n        return new Point(x, y);\n    };\n    return LayerPanel;\n}());\nexport { LayerPanel };\n","import { annotationRendering } from '../index';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getTemplateFunction, getElementOffset, getElementByID } from '../utils/helper';\n/**\n * Represent the annotation rendering for map\n */\nvar Annotations = /** @class */ (function () {\n    function Annotations(map) {\n        this.map = map;\n    }\n    Annotations.prototype.renderAnnotationElements = function () {\n        var _this = this;\n        var secondaryID = this.map.element.id + '_Secondary_Element';\n        var annotationGroup = createElement('div', { id: this.map.element.id + '_Annotations_Group' });\n        annotationGroup.style.position = 'absolute';\n        annotationGroup.style.top = '0px';\n        annotationGroup.style.left = '0px';\n        this.map.annotations.map(function (annotation, index) {\n            if (annotation.content !== null) {\n                _this.createAnnotationTemplate(annotationGroup, annotation, index);\n            }\n        });\n        if (annotationGroup.childElementCount > 0 && !(isNullOrUndefined(getElementByID(secondaryID)))) {\n            getElementByID(secondaryID).appendChild(annotationGroup);\n        }\n    };\n    /**\n     * To create annotation elements\n     */\n    Annotations.prototype.createAnnotationTemplate = function (parentElement, annotation, annotationIndex) {\n        var left;\n        var top;\n        var templateFn;\n        var map = this.map;\n        var templateElement;\n        var availSize = map.availableSize;\n        var id = map.element.id + '_Annotation_' + annotationIndex;\n        var childElement = createElement('div', {\n            id: map.element.id + '_Annotation_' + annotationIndex, styles: 'position: absolute; z-index:' + annotation.zIndex + ';'\n        });\n        var argsData = {\n            cancel: false, name: annotationRendering, content: annotation.content,\n            annotation: annotation\n        };\n        this.map.trigger(annotationRendering, argsData);\n        templateFn = getTemplateFunction(argsData.content);\n        if (templateFn && templateFn(this.map).length) {\n            templateElement = templateFn(this.map);\n            while (templateElement.length > 0) {\n                childElement.appendChild(templateElement[0]);\n            }\n        }\n        else {\n            childElement.appendChild(createElement('div', {\n                innerHTML: argsData.content\n            }));\n        }\n        var offset = getElementOffset(childElement.cloneNode(true), map.element);\n        var elementRect = map.element.getBoundingClientRect();\n        var bounds = map.svgObject.getBoundingClientRect();\n        left = Math.abs(bounds.left - elementRect.left);\n        top = Math.abs(bounds.top - elementRect.top);\n        var annotationXValue = (annotation.x.indexOf('%') > -1) ? (availSize.width / 100) * parseFloat(annotation.x) :\n            parseFloat(annotation.x);\n        var annotationYValue = (annotation.y.indexOf('%') > -1) ? (availSize.height / 100) * parseFloat(annotation.y) :\n            parseFloat(annotation.y);\n        left = (annotation.horizontalAlignment === 'None') ? (left + annotationXValue) : left;\n        top = (annotation.verticalAlignment === 'None') ? (top + annotationYValue) : top;\n        switch (annotation.verticalAlignment) {\n            case 'Near':\n                top = (top + annotationYValue);\n                break;\n            case 'Center':\n                top = (top + annotationYValue) + ((bounds.height / 2) - (offset.height / 2));\n                break;\n            case 'Far':\n                top = (top + bounds.height + annotationYValue) - offset.height;\n                break;\n        }\n        switch (annotation.horizontalAlignment) {\n            case 'Near':\n                left = (left + annotationXValue);\n                break;\n            case 'Center':\n                left = (left + annotationXValue) + ((bounds.width / 2) - (offset.width / 2));\n                break;\n            case 'Far':\n                left = (left + bounds.width + annotationXValue) - offset.width;\n                break;\n        }\n        childElement.style.left = left + 'px';\n        childElement.style.top = top + 'px';\n        parentElement.appendChild(childElement);\n    };\n    /*\n   * Get module name.\n   */\n    Annotations.prototype.getModuleName = function () {\n        return 'Annotations';\n    };\n    /**\n     * To destroy the annotation.\n     * @return {void}\n     * @private\n     */\n    Annotations.prototype.destroy = function (map) {\n        // Destroy method performed here\n    };\n    return Annotations;\n}());\nexport { Annotations };\n","import { print as printWindow, createElement, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { getElement } from '../utils/helper';\nimport { beforePrint } from '../model/constants';\nimport { PdfPageOrientation, PdfDocument, PdfBitmap } from '@syncfusion/ej2-pdf-export';\n/**\n * Annotation Module handles the Annotation for Maps\n */\nvar ExportUtils = /** @class */ (function () {\n    /**\n     * Constructor for Maps\n     * @param control\n     */\n    function ExportUtils(control) {\n        this.control = control;\n    }\n    /**\n     * To print the Maps\n     * @param elements\n     */\n    ExportUtils.prototype.print = function (elements) {\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n        var argsData = {\n            cancel: false, htmlContent: this.getHTMLContent(elements), name: beforePrint\n        };\n        this.control.trigger(beforePrint, argsData);\n        if (!argsData.cancel) {\n            printWindow(argsData.htmlContent, this.printWindow);\n        }\n    };\n    /**\n     * To get the html string of the Maps\n     * @param elements\n     * @private\n     */\n    ExportUtils.prototype.getHTMLContent = function (elements) {\n        var div = createElement('div');\n        if (elements) {\n            if (elements instanceof Array) {\n                elements.forEach(function (value) {\n                    div.appendChild(getElement(value).cloneNode(true));\n                });\n            }\n            else if (elements instanceof Element) {\n                div.appendChild(elements.cloneNode(true));\n            }\n            else {\n                div.appendChild(getElement(elements).cloneNode(true));\n            }\n        }\n        else {\n            div.appendChild(this.control.element.cloneNode(true));\n        }\n        return div;\n    };\n    /**\n     * To export the file as image/svg format\n     * @param type\n     * @param fileName\n     */\n    ExportUtils.prototype.export = function (type, fileName, orientation) {\n        var _this = this;\n        var element = createElement('canvas', {\n            id: 'ej2-canvas',\n            attrs: {\n                'width': this.control.availableSize.width.toString(),\n                'height': this.control.availableSize.height.toString()\n            }\n        });\n        var isDownload = !(Browser.userAgent.toString().indexOf('HeadlessChrome') > -1);\n        orientation = isNullOrUndefined(orientation) ? PdfPageOrientation.Landscape : orientation;\n        var svgData = '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' +\n            this.control.svgObject.outerHTML +\n            '</svg>';\n        var url = window.URL.createObjectURL(new Blob(type === 'SVG' ? [svgData] :\n            [(new XMLSerializer()).serializeToString(this.control.svgObject)], { type: 'image/svg+xml' }));\n        if (type === 'SVG') {\n            this.triggerDownload(fileName, type, url, isDownload);\n        }\n        else {\n            var image_1 = new Image();\n            var ctx_1 = element.getContext('2d');\n            image_1.onload = (function () {\n                ctx_1.drawImage(image_1, 0, 0);\n                window.URL.revokeObjectURL(url);\n                if (type === 'PDF') {\n                    var document_1 = new PdfDocument();\n                    var imageString = element.toDataURL('image/jpeg').replace('image/jpeg', 'image/octet-stream');\n                    document_1.pageSettings.orientation = orientation;\n                    imageString = imageString.slice(imageString.indexOf(',') + 1);\n                    document_1.pages.add().graphics.drawImage(new PdfBitmap(imageString), 0, 0, (_this.control.availableSize.width - 60), _this.control.availableSize.height);\n                    if (isDownload) {\n                        document_1.save(fileName + '.pdf');\n                        document_1.destroy();\n                    }\n                }\n                else {\n                    _this.triggerDownload(fileName, type, element.toDataURL('image/png').replace('image/png', 'image/octet-stream'), isDownload);\n                }\n            });\n            image_1.src = url;\n        }\n    };\n    /**\n     * To trigger the download element\n     * @param fileName\n     * @param type\n     * @param url\n     */\n    ExportUtils.prototype.triggerDownload = function (fileName, type, url, isDownload) {\n        createElement('a', {\n            attrs: {\n                'download': fileName + '.' + type.toLocaleLowerCase(),\n                'href': url\n            }\n        }).dispatchEvent(new MouseEvent(isDownload ? 'click' : 'move', {\n            view: window,\n            bubbles: false,\n            cancelable: true\n        }));\n    };\n    return ExportUtils;\n}());\nexport { ExportUtils };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * Maps Component file\n */\nimport { Component, NotifyPropertyChanges, Property, Ajax } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, isNullOrUndefined, createElement } from '@syncfusion/ej2-base';\nimport { SvgRenderer, Event, remove, L10n, Collection, Internationalization, Complex } from '@syncfusion/ej2-base';\nimport { Size, createSvg, Point, removeElement, triggerShapeEvent, showTooltip, getElement } from './utils/helper';\nimport { ZoomSettings, LegendSettings } from './model/base';\nimport { LayerSettings, TitleSettings, Border, Margin, MapsAreaSettings, Annotation } from './model/base';\nimport { load, click, loaded, resize, shapeSelected } from './model/constants';\nimport { Theme, BootstrapTheme, FabricTheme, HighContrastTheme } from './model/theme';\nimport { LayerPanel } from './layers/layer-panel';\nimport { Rect, RectOption, measureText, getElementByID, MapAjax } from '../maps/utils/helper';\nimport { findPosition, textTrim, TextOption, renderTextElement, convertGeoToPoint } from '../maps/utils/helper';\nimport { Annotations } from '../maps/user-interaction/annotation';\nimport { MarkerSettings } from './index';\nimport { changeBorderWidth } from './index';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { ExportUtils } from '../maps/utils/export';\n/**\n * Represents the Maps control.\n * ```html\n * <div id=\"maps\"/>\n * <script>\n *   var maps = new Maps();\n *   maps.appendTo(\"#maps\");\n * </script>\n * ```\n */\nvar Maps = /** @class */ (function (_super) {\n    __extends(Maps, _super);\n    /**\n     * Constructor for creating the widget\n     */\n    function Maps(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Check layer whether is normal or tile\n         * @private\n         */\n        _this.isTileMap = false;\n        /** @private */\n        _this.baseSize = new Size(0, 0);\n        /** @private */\n        _this.translatePoint = new Point(0, 0);\n        /** @private */\n        _this.baseTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.tileTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.baseTileTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.isDevice = Browser.isDevice;\n        return _this;\n    }\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Maps.prototype.getLocalizedLabel = function (key) {\n        return this.localeObject.getConstant(key);\n    };\n    /**\n     * Initializing pre-required values.\n     */\n    Maps.prototype.preRender = function () {\n        this.initPrivateVariable();\n        this.trigger(load, { maps: this });\n        this.themeEffect();\n        this.unWireEVents();\n        this.createSVG();\n        this.wireEVents();\n        this.setCulture();\n    };\n    Maps.prototype.setTextStyle = function (theme, font) {\n        font.color = font.color || theme.color;\n        font.size = font.size || theme.size;\n        font.fontFamily = font.fontFamily || theme.fontFamily;\n        font.fontStyle = font.fontStyle || theme.fontStyle;\n        font.fontWeight = font.fontWeight || theme.fontWeight;\n    };\n    /**\n     * To change font styles of map based on themes\n     */\n    Maps.prototype.themeEffect = function () {\n        this.setBackgroundValue(this.theme);\n        switch (this.theme) {\n            case 'Material':\n                this.setTextStyle(Theme.mapsTitleFont, this.titleSettings.textStyle);\n                this.setTextStyle(Theme.mapsSubTitleFont, this.titleSettings.subtitleSettings.textStyle);\n                this.setTextStyle(Theme.legendLabelFont, this.legendSettings.textStyle);\n                this.setTextStyle(Theme.legendTitleFont, this.legendSettings.textStyle);\n                this.setLabelFont(this.layers, Theme.dataLabelFont);\n                break;\n            case 'Bootstrap':\n                this.setTextStyle(BootstrapTheme.mapsTitleFont, this.titleSettings.textStyle);\n                this.setTextStyle(BootstrapTheme.mapsSubTitleFont, this.titleSettings.subtitleSettings.textStyle);\n                this.setTextStyle(BootstrapTheme.legendLabelFont, this.legendSettings.textStyle);\n                this.setTextStyle(BootstrapTheme.legendTitleFont, this.legendSettings.textStyle);\n                this.setLabelFont(this.layers, BootstrapTheme.dataLabelFont);\n                break;\n            case 'Fabric':\n                this.setTextStyle(FabricTheme.mapsTitleFont, this.titleSettings.textStyle);\n                this.setTextStyle(FabricTheme.mapsSubTitleFont, this.titleSettings.subtitleSettings.textStyle);\n                this.setTextStyle(FabricTheme.legendLabelFont, this.legendSettings.textStyle);\n                this.setTextStyle(FabricTheme.legendTitleFont, this.legendSettings.textStyle);\n                this.setLabelFont(this.layers, FabricTheme.dataLabelFont);\n                break;\n            case 'Highcontrast':\n                this.setTextStyle(HighContrastTheme.mapsTitleFont, this.titleSettings.textStyle);\n                this.setTextStyle(HighContrastTheme.mapsSubTitleFont, this.titleSettings.subtitleSettings.textStyle);\n                this.setTextStyle(HighContrastTheme.legendLabelFont, this.legendSettings.textStyle);\n                this.setTextStyle(HighContrastTheme.legendTitleFont, this.legendSettings.textStyle);\n                this.setLabelFont(this.layers, HighContrastTheme.dataLabelFont);\n                break;\n        }\n    };\n    /**\n     * Maps background and area background colors change as per theme.\n     * @param theme based on theme background colors will change.\n     */\n    Maps.prototype.setBackgroundValue = function (theme) {\n        var color = theme === 'Highcontrast' ? '#000000' : '#FFFFFF';\n        this.background = this.background ? this.background : color;\n        this.mapsArea.background = this.mapsArea.background ? this.mapsArea.background : color;\n        color = theme !== 'Highcontrast' ? '#737373' : '#FFFFFF';\n        this.zoomSettings.color = (this.zoomSettings.color) ? this.zoomSettings.color : color;\n    };\n    /**\n     * To change datalabel font\n     * @param layers\n     * @param style\n     */\n    Maps.prototype.setLabelFont = function (layers, style) {\n        for (var _i = 0, layers_1 = layers; _i < layers_1.length; _i++) {\n            var layer = layers_1[_i];\n            this.setTextStyle(style, layer.dataLabelSettings.textStyle);\n        }\n    };\n    /**\n     * To Initialize the control rendering.\n     */\n    Maps.prototype.render = function () {\n        this.findBaseAndSubLayers();\n        this.createSecondaryElement();\n        this.addTabIndex();\n        this.renderBorder();\n        this.renderTitle(this.titleSettings, 'title', null, null);\n        this.renderArea();\n        this.processRequestJsonData();\n    };\n    /* tslint:disable:no-string-literal */\n    Maps.prototype.processRequestJsonData = function () {\n        var _this = this;\n        var length = this.layersCollection.length - 1;\n        this.serverProcess = { request: 0, response: 0 };\n        var queryModule;\n        var localAjax;\n        var ajaxModule;\n        var dataModule;\n        this.layersCollection.forEach(function (layer, layerIndex) {\n            if (layer.shapeData instanceof DataManager) {\n                _this.serverProcess['request']++;\n                dataModule = layer.shapeData;\n                queryModule = layer.query instanceof Query ? layer.query : new Query();\n                var dataManager = dataModule.executeQuery(queryModule);\n                dataManager.then(function (e) {\n                    _this.processResponseJsonData('DataManager', e, layer, 'ShapeData');\n                });\n            }\n            else if (layer.shapeData instanceof MapAjax) {\n                _this.processAjaxRequest(layer, layer.shapeData, 'ShapeData');\n            }\n            if (layer.dataSource instanceof MapAjax) {\n                _this.processAjaxRequest(layer, layer.dataSource, 'DataSource');\n            }\n            if (_this.serverProcess['request'] === _this.serverProcess['response'] && length === layerIndex) {\n                _this.processResponseJsonData(null);\n            }\n        });\n    };\n    Maps.prototype.processAjaxRequest = function (layer, localAjax, type) {\n        var _this = this;\n        var ajaxModule;\n        this.serverProcess['request']++;\n        ajaxModule = new Ajax(localAjax.dataOptions, localAjax.type, localAjax.async, localAjax.contentType);\n        ajaxModule.onSuccess = function (args) {\n            _this.processResponseJsonData('Ajax', args, layer, type);\n        };\n        ajaxModule.send(localAjax.sendData);\n    };\n    /* tslint:disable:no-eval */\n    Maps.prototype.processResponseJsonData = function (processType, data, layer, dataType) {\n        this.serverProcess['response']++;\n        if (processType) {\n            if (dataType === 'ShapeData') {\n                layer.shapeData = (processType === 'DataManager') ? !isNullOrUndefined(data['result']) ? data['result'] : data['actual'] :\n                    JSON.parse(data);\n            }\n            else {\n                layer.dataSource = (processType === 'DataManager') ? !isNullOrUndefined(data['result']) ? data['result'] : data['actual'] :\n                    JSON.parse('[' + data + ']')[0];\n            }\n        }\n        if (!isNullOrUndefined(processType) && this.serverProcess['request'] === this.serverProcess['response']) {\n            var collection = this.layersCollection;\n            this.layersCollection = [];\n            for (var i = 0; i < collection.length; i++) {\n                if (collection[i].isBaseLayer) {\n                    this.layersCollection.push(collection[i]);\n                }\n            }\n            for (var j = 0; j < collection.length; j++) {\n                if (!collection[j].isBaseLayer) {\n                    this.layersCollection.push(collection[j]);\n                }\n            }\n            this.renderMap();\n        }\n        else if (isNullOrUndefined(processType)) {\n            this.renderMap();\n        }\n    };\n    Maps.prototype.renderMap = function () {\n        if (this.legendModule && this.legendSettings.visible) {\n            this.legendModule.renderLegend();\n        }\n        this.createTile();\n        if (this.zoomSettings.enable && this.zoomModule) {\n            this.zoomModule.createZoomingToolbars();\n        }\n        this.mapLayerPanel.measureLayerPanel();\n        this.element.appendChild(this.svgObject);\n        //this.setSecondaryElementPosition();\n        this.arrangeTemplate();\n        if (this.annotationsModule) {\n            this.annotationsModule.renderAnnotationElements();\n        }\n        this.zoomingChange();\n        this.trigger(loaded, { maps: this });\n    };\n    /**\n     * Render the map area border\n     */\n    Maps.prototype.renderArea = function () {\n        var rect = new RectOption(this.element.id + '_MapAreaBorder', this.mapsArea.background, this.mapsArea.border, 1, this.mapAreaRect);\n        this.svgObject.appendChild(this.renderer.drawRectangle(rect));\n    };\n    /**\n     * To add tab index for map element\n     */\n    Maps.prototype.addTabIndex = function () {\n        this.element.setAttribute('aria-label', this.description || 'Maps Element');\n        this.element.setAttribute('tabindex', this.tabIndex.toString());\n    };\n    // private setSecondaryElementPosition(): void {\n    //     if (!this.isTileMap) {\n    //         let element: HTMLDivElement = getElementByID(this.element.id + '_Secondary_Element') as HTMLDivElement;\n    //         let rect: ClientRect = this.element.getBoundingClientRect();\n    //         let svgRect: ClientRect = getElementByID(this.element.id + '_svg').getBoundingClientRect();\n    //         element.style.marginLeft = Math.max(svgRect.left - rect.left, 0) + 'px';\n    //         element.style.marginTop = Math.max(svgRect.top - rect.top, 0) + 'px';\n    //     }\n    // }\n    Maps.prototype.zoomingChange = function () {\n        var left;\n        var top;\n        if (getElementByID(this.element.id + '_Layer_Collections') && this.zoomModule) {\n            this.zoomModule.layerCollectionEle = getElementByID(this.element.id + '_Layer_Collections');\n        }\n        if (this.isTileMap && getElementByID(this.element.id + '_Tile_SVG') && getElementByID(this.element.id + '_tile_parent')) {\n            var tileRect = getElementByID(this.element.id + '_tile_parent').getBoundingClientRect();\n            var tileSvgRect = getElementByID(this.element.id + '_Tile_SVG').getBoundingClientRect();\n            left = (tileRect.left - tileSvgRect.left);\n            top = (tileRect.top - tileSvgRect.top);\n            getElementByID(this.element.id + '_Tile_SVG').setAttribute('transform', 'translate(' + left + ' ' + top + ')');\n            var markerTemplateElements = document.getElementsByClassName('template');\n            if (!isNullOrUndefined(markerTemplateElements) && markerTemplateElements.length > 0) {\n                for (var i = 0; i < markerTemplateElements.length; i++) {\n                    var templateGroupEle = markerTemplateElements[i];\n                    templateGroupEle.style.left = left + 'px';\n                    templateGroupEle.style.top = top + 'px';\n                }\n            }\n        }\n        if (this.zoomSettings.zoomFactor >= 1) {\n            if (this.zoomModule && this.zoomModule.toolBarGroup && this.zoomSettings.enable) {\n                this.zoomModule.alignToolBar();\n            }\n            var elements = document.getElementById(this.element.id + '_Layer_Collections');\n            if (!isNullOrUndefined(elements) && elements.childElementCount > 0) {\n                for (var i = 0; i < elements.childNodes.length; i++) {\n                    var childElement = elements.childNodes[i];\n                    if (childElement.tagName === 'g') {\n                        var layerIndex = parseFloat(childElement.id.split('_')[2]);\n                        for (var j = 0; j < childElement.childNodes.length; j++) {\n                            var childNode = childElement.childNodes[j];\n                            if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                                (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                                (!(childNode.id.indexOf('_dataLableIndex_Group') > -1))) {\n                                changeBorderWidth(childNode, layerIndex, this.scale, this);\n                            }\n                        }\n                    }\n                }\n            }\n            if (this.zoomModule && (this.previousScale !== this.scale)) {\n                this.zoomModule.applyTransform(true);\n            }\n        }\n    };\n    Maps.prototype.createSecondaryElement = function () {\n        if (isNullOrUndefined(document.getElementById(this.element.id + '_Secondary_Element'))) {\n            var secondaryElement = createElement('div', {\n                id: this.element.id + '_Secondary_Element',\n                styles: 'position: absolute;z-index:1;'\n            });\n            this.element.appendChild(secondaryElement);\n        }\n    };\n    Maps.prototype.arrangeTemplate = function () {\n        var secondaryEle = getElementByID(this.element.id + '_Secondary_Element');\n        if (document.getElementById(this.element.id + '_Legend_Border')) {\n            document.getElementById(this.element.id + '_Legend_Border').style.pointerEvents = 'none';\n        }\n        var templateElements = document.getElementsByClassName('template');\n        if (!isNullOrUndefined(templateElements) && templateElements.length > 0 && getElementByID(this.element.id + '_Layer_Collections')) {\n            for (var i = 0; i < templateElements.length; i++) {\n                var templateGroupEle = templateElements[i];\n                if (!isNullOrUndefined(templateGroupEle) && templateGroupEle.childElementCount > 0) {\n                    var layerOffset = getElementByID(this.element.id + '_Layer_Collections').getBoundingClientRect();\n                    var elementOffset = getElementByID(templateGroupEle.id).getBoundingClientRect();\n                    for (var j = 0; j < templateGroupEle.childElementCount; j++) {\n                        var currentTemplate = templateGroupEle.childNodes[j];\n                        var templateOffset = currentTemplate.getBoundingClientRect();\n                        currentTemplate.style.left = ((this.isTileMap ? parseFloat(currentTemplate.style.left) :\n                            ((layerOffset.left < elementOffset.left ? (parseFloat(currentTemplate.style.left) -\n                                Math.abs(elementOffset.left - layerOffset.left)) : (parseFloat(currentTemplate.style.left) +\n                                Math.abs(elementOffset.left - layerOffset.left))))) - (templateOffset.width / 2)) + 'px';\n                        currentTemplate.style.top = ((this.isTileMap ? parseFloat(currentTemplate.style.top) :\n                            ((layerOffset.top < elementOffset.top ? (parseFloat(currentTemplate.style.top) -\n                                Math.abs(elementOffset.top - layerOffset.top)) : (parseFloat(currentTemplate.style.top) +\n                                Math.abs(elementOffset.top - layerOffset.top))))) - (templateOffset.height / 2)) + 'px';\n                    }\n                }\n            }\n        }\n    };\n    Maps.prototype.createTile = function () {\n        var mainLayer = this.layersCollection[0];\n        var padding = 0;\n        if (mainLayer.isBaseLayer && (mainLayer.layerType === 'OSM' || mainLayer.layerType === 'Bing')) {\n            removeElement(this.element.id + '_tile_parent');\n            var elementRect = this.element.getBoundingClientRect();\n            var parentRect = this.element.parentElement.getBoundingClientRect();\n            var left = Math.abs(elementRect.left - parentRect.left);\n            var top_1 = Math.abs(elementRect.top - parentRect.top);\n            var ele = createElement('div', {\n                id: this.element.id + '_tile_parent', styles: 'position: absolute; left: ' +\n                    (this.mapAreaRect.x + left) + 'px; top: ' + (this.mapAreaRect.y + top_1 + padding) + 'px; height: ' +\n                    (this.mapAreaRect.height) + 'px; width: '\n                    + (this.mapAreaRect.width) + 'px; overflow: hidden;'\n            });\n            this.element.appendChild(ele);\n        }\n    };\n    /**\n     * To initilize the private varibales of maps.\n     */\n    Maps.prototype.initPrivateVariable = function () {\n        this.renderer = new SvgRenderer(this.element.id);\n        this.mapLayerPanel = new LayerPanel(this);\n    };\n    Maps.prototype.findBaseAndSubLayers = function () {\n        var _this = this;\n        var baseIndex = this.baseLayerIndex;\n        var mainLayers = [];\n        var subLayers = [];\n        this.layersCollection = [];\n        this.layers.forEach(function (layer) {\n            (layer.type === 'Layer') ? mainLayers.push(layer) : subLayers.push(layer);\n        });\n        for (var i = 0; i < mainLayers.length; i++) {\n            var baseLayer = mainLayers[i];\n            if (baseLayer.visible && baseIndex === i) {\n                baseLayer.isBaseLayer = true;\n                this.isTileMap = (baseLayer.layerType === 'Geometry') ? false : true;\n                this.layersCollection.push(baseLayer);\n                break;\n            }\n            else if (i === mainLayers.length - 1) {\n                this.layersCollection.push(mainLayers[0]);\n                break;\n            }\n        }\n        subLayers.map(function (subLayer, subLayerIndex) {\n            if (subLayer.visible) {\n                _this.layersCollection.push(subLayer);\n            }\n        });\n    };\n    /**\n     * @private\n     * Render the map border\n     */\n    Maps.prototype.renderBorder = function () {\n        var width = this.border.width;\n        var borderElement = this.svgObject.querySelector('#' + this.element.id + '_MapBorder');\n        if ((width > 0 || this.background) && isNullOrUndefined(borderElement)) {\n            var borderRect = new RectOption(this.element.id + '_MapBorder', this.background, this.border, 1, new Rect(width / 2, width / 2, this.availableSize.width - width, this.availableSize.height - width));\n            this.svgObject.appendChild(this.renderer.drawRectangle(borderRect));\n        }\n        else {\n            borderElement.setAttribute('fill', this.background);\n        }\n    };\n    /**\n     * @private\n     * Render the title and subtitle\n     */\n    Maps.prototype.renderTitle = function (title, type, bounds, groupEle) {\n        var style = title.textStyle;\n        var height;\n        var width = Math.abs((this.margin.left + this.margin.right) - this.availableSize.width);\n        if (title.text) {\n            if (isNullOrUndefined(groupEle)) {\n                groupEle = this.renderer.createGroup({ id: this.element.id + '_Title_Group' });\n            }\n            var trimmedTitle = textTrim(width, title.text, style);\n            var elementSize = measureText(trimmedTitle, style);\n            var rect = (isNullOrUndefined(bounds)) ? new Rect(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height) : bounds;\n            var location_1 = findPosition(rect, title.alignment, elementSize, type);\n            var options = new TextOption(this.element.id + '_Map_' + type, location_1.x, location_1.y, 'start', trimmedTitle);\n            var titleBounds = new Rect(location_1.x, location_1.y, elementSize.width, elementSize.height);\n            var element = renderTextElement(options, style, style.color, groupEle);\n            element.setAttribute('aria-label', this.description || title.text);\n            element.setAttribute('tabindex', (this.tabIndex + (type === 'title' ? 1 : 2)).toString());\n            if ((type === 'title' && !title.subtitleSettings.text) || (type === 'subtitle')) {\n                height = Math.abs((titleBounds.y + this.margin.bottom) - this.availableSize.height);\n                this.mapAreaRect = new Rect(this.margin.left, titleBounds.y + 10, width, height - 10);\n            }\n            if (type !== 'subtitle' && title.subtitleSettings.text) {\n                this.renderTitle(title.subtitleSettings, 'subtitle', titleBounds, groupEle);\n            }\n            else {\n                this.svgObject.appendChild(groupEle);\n            }\n        }\n        else {\n            height = Math.abs((this.margin.top + this.margin.bottom) - this.availableSize.height);\n            this.mapAreaRect = new Rect(this.margin.left, this.margin.top, width, height);\n        }\n    };\n    /**\n     * To create svg element for maps\n     */\n    Maps.prototype.createSVG = function () {\n        this.removeSvg();\n        createSvg(this);\n    };\n    /**\n     * To Remove the SVG\n     */\n    Maps.prototype.removeSvg = function () {\n        removeElement(this.element.id + '_Secondary_Element');\n        removeElement(this.element.id + '_tile_parent');\n        if (document.getElementsByClassName('e-tooltip-wrap')[0]) {\n            remove(document.getElementsByClassName('e-tooltip-wrap')[0]);\n        }\n        if (this.svgObject) {\n            while (this.svgObject.childNodes.length > 0) {\n                this.svgObject.removeChild(this.svgObject.firstChild);\n            }\n            if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n                remove(this.svgObject);\n            }\n        }\n    };\n    /**\n     * To bind event handlers for maps.\n     */\n    Maps.prototype.wireEVents = function () {\n        //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.add(this.element, 'click', this.mapsOnClick, this);\n        // EventHandler.add(this.element, 'contextmenu', this.mapsOnRightClick, this);\n        EventHandler.add(this.element, 'dblclick', this.mapsOnDoubleClick, this);\n        EventHandler.add(this.element, Browser.touchStartEvent, this.mouseDownOnMap, this);\n        EventHandler.add(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap, this);\n        EventHandler.add(this.element, Browser.touchEndEvent, this.mouseEndOnMap, this);\n        //  EventHandler.add(this.element, cancelEvent, this.mouseLeaveOnMap, this);\n        window.addEventListener((Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.mapsOnResize.bind(this));\n    };\n    /**\n     * To unbind event handlers from maps.\n     */\n    Maps.prototype.unWireEVents = function () {\n        //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.remove(this.element, 'click', this.mapsOnClick);\n        // EventHandler.remove(this.element, 'contextmenu', this.mapsOnRightClick);\n        EventHandler.remove(this.element, 'dblclick', this.mapsOnDoubleClick);\n        EventHandler.remove(this.element, Browser.touchStartEvent, this.mouseDownOnMap);\n        EventHandler.remove(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap);\n        EventHandler.remove(this.element, Browser.touchEndEvent, this.mouseEndOnMap);\n        //EventHandler.remove(this.element, cancelEvent, this.mouseLeaveOnMap);\n        window.removeEventListener((Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.mapsOnResize);\n    };\n    /**\n     * To handle the click event for the maps.\n     */\n    /* tslint:disable:no-string-literal */\n    Maps.prototype.mapsOnClick = function (e) {\n        var targetEle = e.target;\n        var targetId = targetEle.id;\n        var eventArgs = {\n            cancel: false, name: click, target: targetId, x: e.clientX, y: e.clientY\n        };\n        this.trigger(click, eventArgs);\n        if (targetEle.id.indexOf('ShapeIndex') !== -1) {\n            var layerIndex = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n            triggerShapeEvent(targetId, this.layers[layerIndex].selectionSettings, this, shapeSelected);\n        }\n        if (this.markerModule) {\n            this.markerModule.markerClick(e);\n        }\n        if (this.bubbleModule) {\n            this.bubbleModule.bubbleClick(e);\n        }\n        if (!eventArgs.cancel) {\n            this.notify(click, targetEle);\n        }\n    };\n    /**\n     *\n     */\n    Maps.prototype.mouseEndOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        var rect = this.element.getBoundingClientRect();\n        var element = e.target;\n        if (e.type.indexOf('touch') !== -1) {\n            this.isTouch = true;\n            touchArg = e;\n            pageX = touchArg.changedTouches[0].pageX;\n            pageY = touchArg.changedTouches[0].pageY;\n            target = touchArg.target;\n        }\n        else {\n            this.isTouch = e.pointerType === 'touch';\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (this.isTouch) {\n            this.titleTooltip(e, pageX, pageY, true);\n        }\n        this.notify(Browser.touchEndEvent, e);\n        e.preventDefault();\n        return false;\n    };\n    /**\n     *\n     */\n    Maps.prototype.mouseDownOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        var rect = this.element.getBoundingClientRect();\n        var element = e.target;\n        this.notify(Browser.touchStartEvent, e);\n    };\n    /**\n     * To handle the double click event for the maps.\n     */\n    Maps.prototype.mapsOnDoubleClick = function (e) {\n        this.notify('dblclick', e);\n    };\n    /**\n     *\n     */\n    /* tslint:disable:no-string-literal */\n    Maps.prototype.mouseMoveOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var touchArg;\n        var target;\n        var touches = null;\n        target = (e.type === 'touchmove') ? e.target :\n            target = e.target;\n        // if (target.id.indexOf('ShapeIndex') !== -1 && !this.highlightSettings.enable) {\n        //     triggerShapeEvent(target.id, this.highlightSettings, this, shapeHighlight);\n        // }\n        if (this.markerModule) {\n            this.markerModule.markerMove(e);\n        }\n        if (this.bubbleModule) {\n            this.bubbleModule.bubbleMove(e);\n        }\n        this.onMouseMove(e);\n        this.notify(Browser.touchMoveEvent, e);\n    };\n    Maps.prototype.onMouseMove = function (e) {\n        var element = e.target;\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        if (!this.isTouch) {\n            this.titleTooltip(e, e.pageX, e.pageY);\n        }\n        return false;\n    };\n    Maps.prototype.titleTooltip = function (event, x, y, isTouch) {\n        var targetId = event.target.id;\n        if ((targetId === (this.element.id + '_Map_title')) && (event.target.textContent.indexOf('...') > -1)) {\n            showTooltip(this.titleSettings.text, this.titleSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Title_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n        }\n        else {\n            removeElement(this.element.id + '_EJ2_Title_Tooltip');\n        }\n    };\n    /*\n\n    /**\n     * To handle the window resize event on maps.\n     */\n    Maps.prototype.mapsOnResize = function (e) {\n        var _this = this;\n        var args = {\n            name: resize,\n            previousSize: this.availableSize,\n            currentSize: new Size(0, 0),\n            maps: this\n        };\n        if (this.resizeTo) {\n            clearTimeout(this.resizeTo);\n        }\n        if (this.element.classList.contains('e-maps')) {\n            this.resizeTo = setTimeout(function () {\n                _this.unWireEVents();\n                _this.createSVG();\n                _this.refreshing = true;\n                _this.wireEVents();\n                args.currentSize = _this.availableSize;\n                _this.trigger(resize, args);\n                _this.render();\n            }, 500);\n        }\n        return false;\n    };\n    Maps.prototype.zoomByPosition = function (centerPosition, zoomFactor) {\n        var lattitude = centerPosition.latitude;\n        var longitude = centerPosition.longitude;\n        var factor = this.mapLayerPanel.calculateFactor(this.layersCollection[0]);\n        var position = convertGeoToPoint(lattitude, longitude, factor, this.layersCollection[0], this);\n        if (this.zoomModule) {\n            this.zoomModule.performZooming(position, zoomFactor, 'ZoomIn');\n        }\n    };\n    /**\n     * To add layers to maps\n     */\n    Maps.prototype.addLayer = function (layer) {\n        this.layers.push(new LayerSettings(this.layers[0], 'layers', layer));\n        this.refresh();\n    };\n    /**\n     * To remove layers from maps\n     */\n    Maps.prototype.removeLayer = function (index) {\n        this.layers.splice(index, 1);\n        this.refresh();\n    };\n    /**\n     * To add marker to layers\n     */\n    Maps.prototype.addMarker = function (layerIndex, marker) {\n        var currentMarker = this.layers[layerIndex].markerSettings;\n        currentMarker.push(new MarkerSettings(currentMarker[0], 'markerSettings', marker));\n        this.refresh();\n    };\n    /**\n     * Method to set culture for maps\n     */\n    Maps.prototype.setCulture = function () {\n        this.intl = new Internationalization();\n        this.setLocaleConstants();\n        this.localeObject = new L10n(this.getModuleName(), this.defaultLocalConstants, this.locale);\n    };\n    /**\n     * Method to set locale constants\n     */\n    Maps.prototype.setLocaleConstants = function () {\n        // Need to modify after the api confirm\n        this.defaultLocalConstants = {\n            ZoomIn: 'Zoom In',\n            Zoom: 'Zoom',\n            ZoomOut: 'Zoom Out',\n            Pan: 'Pan',\n            Reset: 'Reset',\n        };\n    };\n    /**\n     * To destroy maps control.\n     */\n    Maps.prototype.destroy = function () {\n        this.unWireEVents();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Get component name\n     */\n    Maps.prototype.getModuleName = function () {\n        return 'maps';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @private\n     */\n    Maps.prototype.getPersistData = function () {\n        return '';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @private\n     */\n    Maps.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var render = false;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'background':\n                    this.renderBorder();\n                    break;\n                case 'height':\n                case 'width':\n                    this.createSVG();\n                    render = true;\n                    break;\n            }\n        }\n        if (render) {\n            this.render();\n        }\n    };\n    /**\n     * To provide the array of modules needed for maps rendering\n     * @return {ModuleDeclaration[]}\n     * @private\n     */\n    Maps.prototype.requiredModules = function () {\n        var modules = [];\n        var isVisible = this.findVisibleLayers(this.layers);\n        var annotationEnable = false;\n        this.annotations.map(function (annotation, index) {\n            annotationEnable = annotation.content != null;\n        });\n        if (this.isBubbleVisible()) {\n            modules.push({\n                member: 'Bubble',\n                args: [this]\n            });\n        }\n        if (isVisible.highlight) {\n            modules.push({\n                member: 'Highlight',\n                args: [this]\n            });\n        }\n        if (isVisible.selection) {\n            modules.push({\n                member: 'Selection',\n                args: [this]\n            });\n        }\n        if (this.legendSettings.visible) {\n            modules.push({\n                member: 'Legend',\n                args: [this]\n            });\n        }\n        if (this.zoomSettings.enable || this.zoomSettings.zoomFactor > this.zoomSettings.minZoom) {\n            modules.push({\n                member: 'Zoom',\n                args: [this]\n            });\n        }\n        if (this.isMarkersVisible()) {\n            modules.push({\n                member: 'Marker',\n                args: [this]\n            });\n        }\n        if (this.isDataLabelVisible()) {\n            modules.push({\n                member: 'DataLabel',\n                args: [this]\n            });\n        }\n        if (this.isNavigationVisible()) {\n            modules.push({\n                member: 'NavigationLine',\n                args: [this]\n            });\n        }\n        if (isVisible.tooltip) {\n            modules.push({\n                member: 'MapsTooltip',\n                args: [this]\n            });\n        }\n        if (annotationEnable) {\n            modules.push({\n                member: 'Annotations',\n                args: [this, Annotations]\n            });\n        }\n        return modules;\n    };\n    /**\n     * To find marker visibility\n     */\n    Maps.prototype.isMarkersVisible = function () {\n        var isVisible = false;\n        this.layers.forEach(function (layer, layerIndex) {\n            for (var i = 0; i < layer.markerSettings.length; i++) {\n                if (layer.markerSettings[i].visible) {\n                    isVisible = true;\n                    break;\n                }\n            }\n        });\n        return isVisible;\n    };\n    /**\n     * To find DataLabel visibility\n     */\n    Maps.prototype.isDataLabelVisible = function () {\n        var isVisible = false;\n        for (var i = 0; i < this.layers.length; i++) {\n            if (this.layers[i].dataLabelSettings.visible) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * To find navigation line visibility\n     */\n    Maps.prototype.isNavigationVisible = function () {\n        var isVisible = false;\n        this.layers.forEach(function (layer, layerIndex) {\n            for (var i = 0; i < layer.navigationLineSettings.length; i++) {\n                if (layer.navigationLineSettings[i].visible) {\n                    isVisible = true;\n                    break;\n                }\n            }\n        });\n        return isVisible;\n    };\n    /**\n     * To find marker visibility\n     */\n    Maps.prototype.isBubbleVisible = function () {\n        var isVisible = false;\n        for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (this.getBubbleVisible(layer)) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * To find the bubble visibility from layer\n     * @private\n     */\n    Maps.prototype.getBubbleVisible = function (layer) {\n        var isVisible = false;\n        for (var _i = 0, _a = layer.bubbleSettings; _i < _a.length; _i++) {\n            var bubble = _a[_i];\n            if (bubble.visible) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * Handles the print method for chart control.\n     */\n    Maps.prototype.print = function (id) {\n        var exportChart = new ExportUtils(this);\n        exportChart.print(id);\n    };\n    /**\n     * Handles the export method for chart control.\n     * @param type\n     * @param fileName\n     */\n    Maps.prototype.export = function (type, fileName, orientation) {\n        var exportMap = new ExportUtils(this);\n        exportMap.export(type, fileName, orientation);\n    };\n    /**\n     * To find visibility of layers and markers for required modules load.\n     */\n    Maps.prototype.findVisibleLayers = function (layers, isLayerVisible, isBubblevisible, istooltipVisible, isSelection, isHighlight) {\n        if (isLayerVisible === void 0) { isLayerVisible = false; }\n        if (isBubblevisible === void 0) { isBubblevisible = false; }\n        if (istooltipVisible === void 0) { istooltipVisible = false; }\n        if (isSelection === void 0) { isSelection = false; }\n        if (isHighlight === void 0) { isHighlight = false; }\n        var bubbles;\n        var markers;\n        var navigationLine;\n        for (var _i = 0, layers_2 = layers; _i < layers_2.length; _i++) {\n            var layer = layers_2[_i];\n            isLayerVisible = layer.visible || isLayerVisible;\n            if (layer.visible) {\n                bubbles = layer.bubbleSettings;\n                markers = layer.markerSettings;\n                navigationLine = layer.navigationLineSettings;\n                for (var _a = 0, navigationLine_1 = navigationLine; _a < navigationLine_1.length; _a++) {\n                    var navigation = navigationLine_1[_a];\n                    if (navigation.visible) {\n                        isSelection = navigation.highlightSettings.enable || isSelection;\n                        isHighlight = navigation.selectionSettings.enable || isHighlight;\n                    }\n                }\n                for (var _b = 0, markers_1 = markers; _b < markers_1.length; _b++) {\n                    var marker = markers_1[_b];\n                    if (marker.visible) {\n                        istooltipVisible = marker.tooltipSettings.visible || istooltipVisible;\n                        isSelection = marker.selectionSettings.enable || isSelection;\n                        isHighlight = marker.highlightSettings.enable || isHighlight;\n                    }\n                    if (istooltipVisible) {\n                        break;\n                    }\n                }\n                for (var _c = 0, bubbles_1 = bubbles; _c < bubbles_1.length; _c++) {\n                    var bubble = bubbles_1[_c];\n                    if (bubble.visible) {\n                        istooltipVisible = bubble.tooltipSettings.visible || istooltipVisible;\n                        isSelection = bubble.selectionSettings.enable || isSelection;\n                        isHighlight = bubble.highlightSettings.enable || isHighlight;\n                    }\n                    if (istooltipVisible) {\n                        break;\n                    }\n                }\n                istooltipVisible = layer.tooltipSettings.visible || istooltipVisible;\n                isSelection = layer.selectionSettings.enable || isSelection;\n                isHighlight = layer.highlightSettings.enable || isHighlight;\n            }\n            if (isLayerVisible && isBubblevisible && istooltipVisible) {\n                break;\n            }\n        }\n        return {\n            layer: isLayerVisible, bubble: isBubblevisible, tooltip: istooltipVisible,\n            selection: isSelection, highlight: isHighlight\n        };\n    };\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"background\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"useGroupingSeparator\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"format\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"width\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"height\", void 0);\n    __decorate([\n        Complex({}, TitleSettings)\n    ], Maps.prototype, \"titleSettings\", void 0);\n    __decorate([\n        Complex({}, ZoomSettings)\n    ], Maps.prototype, \"zoomSettings\", void 0);\n    __decorate([\n        Complex({}, LegendSettings)\n    ], Maps.prototype, \"legendSettings\", void 0);\n    __decorate([\n        Collection([], LayerSettings)\n    ], Maps.prototype, \"layers\", void 0);\n    __decorate([\n        Collection([], Annotation)\n    ], Maps.prototype, \"annotations\", void 0);\n    __decorate([\n        Complex({}, Margin)\n    ], Maps.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ color: '#DDDDDD', width: 0 }, Border)\n    ], Maps.prototype, \"border\", void 0);\n    __decorate([\n        Property('Material')\n    ], Maps.prototype, \"theme\", void 0);\n    __decorate([\n        Property('Mercator')\n    ], Maps.prototype, \"projectionType\", void 0);\n    __decorate([\n        Property(0)\n    ], Maps.prototype, \"baseLayerIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"description\", void 0);\n    __decorate([\n        Property(1)\n    ], Maps.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property({ latitude: null, longitude: null })\n    ], Maps.prototype, \"centerPosition\", void 0);\n    __decorate([\n        Complex({}, MapsAreaSettings)\n    ], Maps.prototype, \"mapsArea\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"loaded\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"doubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"rightClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"resize\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"tooltipRender\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeSelected\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"itemSelection\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"itemHighlight\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeHighlight\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"layerRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"dataLabelRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"animationComplete\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"annotationRendering\", void 0);\n    Maps = __decorate([\n        NotifyPropertyChanges\n    ], Maps);\n    return Maps;\n}(Component));\nexport { Maps };\n","import { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle } from '../utils/helper';\n/**\n * Bubble module class\n */\nvar Bubble = /** @class */ (function () {\n    function Bubble(maps) {\n        /**\n         * Bubble Id for current layer\n         */\n        this.id = '';\n        this.maps = maps;\n        this.bubbleCollection = [];\n    }\n    /**\n     * To render bubble\n     */\n    /* tslint:disable:no-string-literal */\n    Bubble.prototype.renderBubble = function (bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group) {\n        var layerData = layer.layerData;\n        var colorValuePath = bubbleSettings.colorValuePath;\n        var equalValue = shapeData[colorValuePath];\n        var colorValue = Number(shapeData[colorValuePath]);\n        var bubbleValue = Number(shapeData[bubbleSettings.valuePath]);\n        if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n            return null;\n        }\n        var radius = this.getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n        var colorMapping = new ColorMapping(this.maps);\n        var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue);\n        shapeColor = shapeColor ? shapeColor : color;\n        var shapePoints = [[]];\n        var midIndex = 0;\n        var pointsLength = 0;\n        var currentLength = 0;\n        for (var i = 0, len = layerData.length; i < len; i++) {\n            var shape = layerData[i];\n            shape = shape['property'];\n            if (shapeData[layer.shapeDataPath] === shape[layer.shapePropertyPath]) {\n                if (!layerData[i]['_isMultiPolygon']) {\n                    shapePoints.push(this.getPoints(layerData[i], []));\n                    currentLength = shapePoints[shapePoints.length - 1].length;\n                    if (pointsLength < currentLength) {\n                        pointsLength = currentLength;\n                        midIndex = shapePoints.length - 1;\n                    }\n                }\n                else {\n                    var layer_1 = layerData[i];\n                    for (var j = 0; j < layer_1.length; j++) {\n                        shapePoints.push(this.getPoints(layer_1[j], []));\n                        currentLength = shapePoints[shapePoints.length - 1].length;\n                        if (pointsLength < currentLength) {\n                            pointsLength = currentLength;\n                            midIndex = shapePoints.length - 1;\n                        }\n                    }\n                }\n            }\n        }\n        var center = findMidPointOfPolygon(shapePoints[midIndex]);\n        if (!isNullOrUndefined(center)) {\n            var centerY = this.maps.projectionType === 'Mercator' ? center['y'] : (-center['y']);\n            var eventArgs = {\n                cancel: false, name: bubbleRendering, border: bubbleSettings.border,\n                cx: center['x'], cy: centerY, data: shapeData, fill: shapeColor, maps: this.maps,\n                radius: radius\n            };\n            this.maps.trigger(bubbleRendering, eventArgs);\n            if (eventArgs.cancel) {\n                return;\n            }\n            var bubbleElement = void 0;\n            if (bubbleSettings.bubbleType === 'Circle') {\n                var circle = new CircleOption(this.id, eventArgs.fill, eventArgs.border, bubbleSettings.opacity, 0, 0, eventArgs.radius, null);\n                bubbleElement = drawCircle(this.maps, circle, group);\n            }\n            else {\n                var y = this.maps.projectionType === 'Mercator' ? (eventArgs.cy - radius) : (eventArgs.cy + radius);\n                var rectangle = new RectOption(this.id, eventArgs.fill, eventArgs.border, bubbleSettings.opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n                eventArgs.cx -= radius;\n                eventArgs.cy = y;\n                bubbleElement = drawRectangle(this.maps, rectangle, group);\n            }\n            this.bubbleCollection.push({\n                LayerIndex: layerIndex,\n                BubbleIndex: bubbleIndex,\n                DataIndex: dataIndex,\n                element: bubbleElement,\n                center: { x: eventArgs.cx, y: eventArgs.cy }\n            });\n            var animate = layer.animationDuration !== 0 || isNullOrUndefined(this.maps.zoomModule);\n            var translate = getTranslate(this.maps, layer, animate);\n            var scale = translate['scale'];\n            var transPoint = translate['location'];\n            var position = new MapLocation((this.maps.isTileMap ? (eventArgs.cx) : ((eventArgs.cx + transPoint.x) * scale)), (this.maps.isTileMap ? (eventArgs.cy) : ((eventArgs.cy + transPoint.y) * scale)));\n            bubbleElement.setAttribute('transform', 'translate( ' + (position.x) + ' ' + (position.y) + ' )');\n            var bubble = (bubbleSettings.dataSource.length - 1) === dataIndex ? 'bubble' : null;\n            if (bubbleSettings.bubbleType === 'Square') {\n                position.x += radius;\n                position.y += radius * (this.maps.projectionType === 'Mercator' ? 1 : -1);\n            }\n            else {\n                radius = 0;\n            }\n            if (bubbleSettings.animationDuration > 0) {\n                elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, this.maps, bubble, radius);\n            }\n        }\n    };\n    Bubble.prototype.getPoints = function (shape, points) {\n        shape.map(function (current, index) {\n            points.push(new Point(current['point']['x'], current['point']['y']));\n        });\n        return points;\n    };\n    Bubble.prototype.getRatioOfBubble = function (min, max, value, minValue, maxValue) {\n        var percent = (100 / (maxValue - minValue)) * (value - minValue);\n        var bubbleRadius = (((max - min) / 100) * percent) + min;\n        if (maxValue === minValue) {\n            bubbleRadius = (((max - min) / 100)) + min;\n        }\n        return bubbleRadius;\n    };\n    /**\n     * To check and trigger bubble click event\n     */\n    Bubble.prototype.bubbleClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleClick, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(bubbleClick, eventArgs);\n    };\n    /**\n     * To get bubble from target id\n     */\n    Bubble.prototype.getbubble = function (target) {\n        var id = target.split('_LayerIndex_');\n        var index = parseInt(id[1].split('_')[0], 10);\n        var layer = this.maps.layers[index];\n        var data;\n        if (target.indexOf('_BubbleIndex_') > -1) {\n            var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n            if (!isNaN(bubbleIndex)) {\n                data = layer.dataSource[bubbleIndex];\n                return data;\n            }\n        }\n        return null;\n    };\n    /**\n     * To check and trigger bubble move event\n     */\n    Bubble.prototype.bubbleMove = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleMouseMove, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(bubbleMouseMove, eventArgs);\n    };\n    /**\n     * Get module name.\n     */\n    Bubble.prototype.getModuleName = function () {\n        return 'Bubble';\n    };\n    /**\n     * To destroy the bubble.\n     * @return {void}\n     * @private\n     */\n    Bubble.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Bubble;\n}());\nexport { Bubble };\n","import { markerRendering, convertTileLatLongToPoint, MapLocation } from '../index';\nimport { markerClick, markerMouseMove } from '../index';\nimport { isNullOrUndefined, merge, createElement } from '@syncfusion/ej2-base';\nimport { CircleOption, PathOption, Point, getTranslate, convertGeoToPoint } from '../utils/helper';\nimport { getTemplateFunction, getElementByID, convertElement, calculateShapes, Size, RectOption, Rect, elementAnimate } from '../utils/helper';\n/**\n * Marker class\n */\nvar Marker = /** @class */ (function () {\n    function Marker(maps) {\n        this.maps = maps;\n        this.trackElements = [];\n    }\n    /* tslint:disable:no-string-literal */\n    Marker.prototype.markerRender = function (layerElement, layerIndex, factor) {\n        var _this = this;\n        var templateFn;\n        var currentLayer = this.maps.layersCollection[layerIndex];\n        this.markerSVGObject = this.maps.renderer.createGroup({ id: this.maps.element.id + '_Markers_Group',\n            style: 'pointer-events: auto;' });\n        var markerTemplateEle = createElement('div', {\n            id: this.maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n            className: 'template',\n            styles: 'overflow: hidden; position: absolute;pointer-events: none;' +\n                'top:' + (this.maps.isTileMap ? 0 : this.maps.mapAreaRect.y) + 'px;' +\n                'left:' + (this.maps.isTileMap ? 0 : this.maps.mapAreaRect.x) + 'px;' +\n                'height:' + this.maps.mapAreaRect.height + 'px;' +\n                'width:' + this.maps.mapAreaRect.width + 'px;'\n        });\n        currentLayer.markerSettings.map(function (markerSettings, markerIndex) {\n            var markerData = markerSettings.dataSource;\n            markerData.forEach(function (data, dataIndex) {\n                var eventArgs = {\n                    cancel: false, name: markerRendering, fill: markerSettings.fill, height: markerSettings.height,\n                    width: markerSettings.width, imageUrl: markerSettings.imageUrl, shape: markerSettings.shape,\n                    template: markerSettings.template, data: data, maps: _this.maps, marker: markerSettings,\n                    border: markerSettings.border\n                };\n                _this.maps.trigger(markerRendering, eventArgs);\n                var lng = data['longitude'];\n                var lat = data['latitude'];\n                var offset = markerSettings.offset;\n                if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(lng) && !isNullOrUndefined(lat)) {\n                    var markerID = _this.maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_'\n                        + markerIndex + '_DataIndex_' + dataIndex;\n                    var location_1 = (_this.maps.isTileMap) ? convertTileLatLongToPoint(new MapLocation(lng, lat), factor, _this.maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, currentLayer, _this.maps);\n                    var animate = currentLayer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n                    var translate = (_this.maps.isTileMap) ? new Object() : getTranslate(_this.maps, currentLayer, animate);\n                    var scale = translate['scale'];\n                    var transPoint = translate['location'];\n                    if (eventArgs.template) {\n                        templateFn = getTemplateFunction(eventArgs.template);\n                        if (templateFn && templateFn(_this.maps).length) {\n                            var templateElement = templateFn(_this.maps);\n                            var markerElement = convertElement(templateElement, markerID, data, markerIndex, _this.maps);\n                            for (var i = 0; i < markerElement.children.length; i++) {\n                                markerElement.children[i].style.pointerEvents = 'none';\n                            }\n                            markerElement.style.left = ((_this.maps.isTileMap ? location_1.x :\n                                ((Math.abs(_this.maps.baseMapRectBounds['min']['x'] - location_1.x)) * scale)) + offset.x) + 'px';\n                            markerElement.style.top = ((_this.maps.isTileMap ? location_1.y :\n                                ((Math.abs(_this.maps.baseMapRectBounds['min']['y'] - location_1.y)) * scale)) + offset.y) + 'px';\n                            markerTemplateEle.appendChild(markerElement);\n                        }\n                    }\n                    else {\n                        var shapeCustom = {\n                            size: new Size(eventArgs.width, eventArgs.height),\n                            fill: eventArgs.fill, borderColor: eventArgs.border.color,\n                            borderWidth: eventArgs.border.width, opacity: markerSettings.opacity,\n                            dashArray: markerSettings.dashArray\n                        };\n                        var ele = _this.drawSymbol(eventArgs.shape, eventArgs.imageUrl, { x: 0, y: 0 }, markerID, shapeCustom);\n                        var x = (_this.maps.isTileMap ? location_1.x : (location_1.x + transPoint.x) * scale) + offset.x;\n                        var y = (_this.maps.isTileMap ? location_1.y : (location_1.y + transPoint.y) * scale) + offset.y;\n                        ele.setAttribute('transform', 'translate( ' + x + ' ' + y + ' )');\n                        _this.markerSVGObject.appendChild(ele);\n                        var element = (markerData.length - 1) === dataIndex ? 'marker' : null;\n                        var markerPoint = new Point(x, y);\n                        if (markerSettings.animationDuration > 0) {\n                            elementAnimate(ele, markerSettings.animationDelay, markerSettings.animationDuration, markerPoint, _this.maps, element);\n                        }\n                    }\n                }\n            });\n        });\n        if (this.markerSVGObject.childElementCount > 0) {\n            layerElement.appendChild(this.markerSVGObject);\n        }\n        if (markerTemplateEle.childElementCount > 0 && getElementByID(this.maps.element.id + '_Secondary_Element')) {\n            getElementByID(this.maps.element.id + '_Secondary_Element').appendChild(markerTemplateEle);\n        }\n    };\n    Marker.prototype.drawSymbol = function (shape, imageUrl, location, markerID, shapeCustom) {\n        var markerEle;\n        var x;\n        var y;\n        var size = shapeCustom['size'];\n        var borderColor = shapeCustom['borderColor'];\n        var borderWidth = parseFloat(shapeCustom['borderWidth']);\n        var fill = shapeCustom['fill'];\n        var dashArray = shapeCustom['dashArray'];\n        var border = { color: borderColor, width: borderWidth };\n        var opacity = shapeCustom['opacity'];\n        var circleOptions;\n        var pathOptions;\n        var rectOptions;\n        pathOptions = new PathOption(markerID, fill, borderWidth, borderColor, opacity, dashArray, '');\n        if (shape === 'Circle') {\n            var radius = (size.width + size.height) / 4;\n            circleOptions = new CircleOption(markerID, fill, border, opacity, location.x, location.y, radius, dashArray);\n            markerEle = this.maps.renderer.drawCircle(circleOptions);\n        }\n        else if (shape === 'Rectangle') {\n            x = location.x - (size.width / 2);\n            y = location.y - (size.height / 2);\n            rectOptions = new RectOption(markerID, fill, border, opacity, new Rect(x, y, size.width, size.height), null, null, '', dashArray);\n            markerEle = this.maps.renderer.drawRectangle(rectOptions);\n        }\n        else if (shape === 'Image') {\n            x = location.x - (size.width / 2);\n            y = location.y - (size.height / 2);\n            merge(pathOptions, { 'href': imageUrl, 'height': size.height, 'width': size.width, x: x, y: y });\n            markerEle = this.maps.renderer.drawImage(pathOptions);\n        }\n        else {\n            markerEle = calculateShapes(this.maps, shape, pathOptions, size, location, this.markerSVGObject);\n        }\n        return markerEle;\n    };\n    /**\n     * To check and trigger marker click event\n     */\n    Marker.prototype.markerClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        var options = this.getMarker(target);\n        if (isNullOrUndefined(options)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: markerClick, data: options.data, maps: this.maps, marker: options.marker,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(markerClick, eventArgs);\n    };\n    /**\n     * To get marker from target id\n     */\n    Marker.prototype.getMarker = function (target) {\n        var id = target.split('_LayerIndex_');\n        var index = parseInt(id[1].split('_')[0], 10);\n        var layer = this.maps.layers[index];\n        var data;\n        var marker;\n        if (target.indexOf('_MarkerIndex_') > -1) {\n            var markerIndex = parseInt(id[1].split('_MarkerIndex_')[1].split('_')[0], 10);\n            var dataIndex = parseInt(id[1].split('_DataIndex_')[1].split('_')[0], 10);\n            marker = layer.markerSettings[markerIndex];\n            if (!isNaN(markerIndex)) {\n                data = marker.dataSource[dataIndex];\n                return { marker: marker, data: data };\n            }\n        }\n        return null;\n    };\n    /**\n     * To check and trigger marker move event\n     */\n    Marker.prototype.markerMove = function (e) {\n        var targetId = e.target.id;\n        if (targetId.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        var options = this.getMarker(targetId);\n        if (isNullOrUndefined(options)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: markerMouseMove, data: options.data, maps: this.maps,\n            target: targetId, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(markerMouseMove, eventArgs);\n    };\n    /**\n     * Get module name.\n     */\n    Marker.prototype.getModuleName = function () {\n        return 'Marker';\n    };\n    /**\n     * To destroy the layers.\n     * @return {void}\n     * @private\n     */\n    Marker.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Marker;\n}());\nexport { Marker };\n","import { findMidPointOfPolygon, Rect, filter, getTemplateFunction, getTranslate, RectOption, convertElementFromLabel, Point, TextOption, renderTextElement, textTrim, measureText, Internalize } from '../utils/helper';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { dataLabelRendering } from '../model/constants';\n/**\n * DataLabel Module used to render the maps datalabel\n */\nvar DataLabel = /** @class */ (function () {\n    function DataLabel(maps) {\n        this.intersect = [];\n        this.value = { rightWidth: 0, leftWidth: 0, heightTop: 0, heightBottom: 0 };\n        this.maps = maps;\n        this.dataLabelCollections = [];\n    }\n    //tslint:disable:max-func-body-length\n    DataLabel.prototype.getDataLabel = function (dataSource, labelPath, shapeName, shapeDataPath) {\n        var text;\n        for (var i = 0; i < dataSource.length; i++) {\n            var data = dataSource[i];\n            if ((data[shapeDataPath]) === shapeName) {\n                text = data;\n                break;\n            }\n        }\n        return text;\n    };\n    /**\n     * To render label for maps\n     * @param layer\n     * @param layerIndex\n     * @param shape\n     * @param layerData\n     * @param group\n     * @param labelTemplateElement\n     * @param index\n     */\n    DataLabel.prototype.renderLabel = function (layer, layerIndex, shape, layerData, group, labelTemplateElement, index) {\n        var dataLabel = layer.dataLabelSettings;\n        var style = layer.dataLabelSettings.textStyle;\n        var markerEle;\n        var templateFn;\n        var options;\n        var dataLabelSettings = layer.dataLabelSettings;\n        var labelpath = layer.dataLabelSettings.labelPath;\n        var shapePoint = [[]];\n        var midIndex = 0;\n        var pointsLength = 0;\n        var shapeData = shape;\n        var element;\n        var data;\n        var text = '';\n        var datasrcObj;\n        var currentLength = 0;\n        var location;\n        var labelId = this.maps.element.id + '_LayerIndex_' + layerIndex + '_shapeIndex_' + index + '_LabelIndex_' + index;\n        var textLocation = new Point(0, 0);\n        /* tslint:disable:no-string-literal */\n        for (var i = 0, len = layerData.length; i < len; i++) {\n            var shapes = layerData[i];\n            shape = shapes['property'];\n            if (!isNullOrUndefined(shapes['property']) &&\n                (shapeData['properties'][layer.shapePropertyPath] === shape[layer.shapePropertyPath])) {\n                if (!layerData[i]['_isMultiPolygon']) {\n                    shapePoint.push(this.getPoint(layerData[i], []));\n                    currentLength = shapePoint[shapePoint.length - 1].length;\n                    if (pointsLength < currentLength) {\n                        pointsLength = currentLength;\n                        midIndex = shapePoint.length - 1;\n                    }\n                }\n                else {\n                    var layer_1 = layerData[i];\n                    for (var j = 0; j < layer_1.length; j++) {\n                        shapePoint.push(this.getPoint(layer_1[j], []));\n                        currentLength = shapePoint[shapePoint.length - 1].length;\n                        if (pointsLength < currentLength) {\n                            pointsLength = currentLength;\n                            midIndex = shapePoint.length - 1;\n                        }\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(layer.dataSource) && layer.dataSource.length > 0) {\n            var localData = extend([], layer.dataSource, null, true);\n            datasrcObj = this.getDataLabel(localData, labelpath, shapeData['properties'][layer.shapePropertyPath], layer.shapeDataPath);\n            if (isNullOrUndefined(datasrcObj) || isNullOrUndefined(datasrcObj[labelpath])) {\n                text = undefined;\n            }\n            else {\n                datasrcObj[labelpath] = datasrcObj[labelpath];\n                text = datasrcObj[labelpath].toString();\n            }\n        }\n        else {\n            text = shapeData['properties'][labelpath] ? shapeData['properties'][labelpath].toString() : undefined;\n        }\n        location = findMidPointOfPolygon(shapePoint[midIndex]);\n        if (!isNullOrUndefined(text) && !isNullOrUndefined(location)) {\n            location['y'] = (this.maps.projectionType === 'Mercator') ? location['y'] : (-location['y']);\n            data = location;\n            if (!isNullOrUndefined(this.maps.format) && !isNaN(parseFloat(text))) {\n                text = Internalize(this.maps, parseFloat(text));\n                if (!isNullOrUndefined(datasrcObj)) {\n                    datasrcObj[labelpath] = text;\n                }\n            }\n            var eventargs = {\n                name: dataLabelRendering, maps: this.maps, cancel: false, border: dataLabel.border, datalabel: dataLabel,\n                fill: dataLabel.fill, template: dataLabel.template, text: text\n            };\n            this.maps.trigger(dataLabelRendering, eventargs);\n            var border = { color: 'yellow' };\n            var position = [];\n            var width = location['rightMax']['x'] - location['leftMax']['x'];\n            var textSize = measureText(text, style);\n            var trimmedLable = textTrim(width, text, style);\n            var elementSize = measureText(trimmedLable, style);\n            var startY = location['y'] - textSize['height'] / 4;\n            var endY = location['y'] + textSize['height'] / 4;\n            var start = location['y'] - textSize['height'] / 4;\n            var end = location['y'] + textSize['height'] / 4;\n            position = filter(shapePoint[midIndex], startY, endY);\n            if (position.length > 5 && (!isNullOrUndefined(shapeData['geometry']) ? shapeData['geometry']['type'] !== 'MultiPolygon' :\n                shapeData['type'] !== 'MultiPolygon')) {\n                var location1 = findMidPointOfPolygon(position);\n                location['x'] = location1['x'];\n                width = location1['rightMax']['x'] - location1['leftMax']['x'];\n            }\n            var xpositionEnds = location['x'] + textSize['width'] / 2;\n            var xpositionStart = location['x'] - textSize['width'] / 2;\n            trimmedLable = textTrim(width, text, style);\n            elementSize = measureText(trimmedLable, style);\n            this.value[index] = { rightWidth: xpositionEnds, leftWidth: xpositionStart, heightTop: start, heightBottom: end };\n            var animate = layer.animationDuration !== 0 || isNullOrUndefined(this.maps.zoomModule);\n            var translate = getTranslate(this.maps, layer, animate);\n            var scale = translate['scale'];\n            var transPoint = translate['location'];\n            var labelElement = void 0;\n            if (eventargs.template !== '') {\n                templateFn = getTemplateFunction(eventargs.template);\n                var templateElement = templateFn(this.maps);\n                labelElement = convertElementFromLabel(templateElement, labelId, !isNullOrUndefined(datasrcObj) ? datasrcObj : shapeData['properties'], index, this.maps);\n                labelElement.style.left = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - location['x'])) * scale) + 'px';\n                labelElement.style.top = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - location['y'])) * scale) + 'px';\n                labelTemplateElement.appendChild(labelElement);\n                var labelWidth = labelElement.offsetWidth;\n                var labelHeight = labelElement.offsetHeight;\n                // if (labelWidth > width || labelWidth === 0 || labelHeight > location['height']) {\n                //     labelElement.style.display = 'None';\n                // }\n            }\n            else {\n                if (dataLabelSettings.smartLabelMode === 'Trim') {\n                    options = new TextOption(labelId, textLocation.x, textLocation.y, 'middle', trimmedLable, '', '');\n                }\n                if (dataLabelSettings.smartLabelMode === 'None') {\n                    options = new TextOption(labelId, (textLocation.x), textLocation.y, 'middle', text, '', '');\n                }\n                if (dataLabelSettings.smartLabelMode === 'Hide') {\n                    text = (width >= textSize['width']) ? text : '';\n                    options = new TextOption(labelId, (textLocation.x), (textLocation.y), 'middle', text, '', '');\n                }\n                text = options['text'];\n                if (dataLabelSettings.intersectionAction === 'Hide') {\n                    for (var i = 0; i < this.intersect.length; i++) {\n                        if (!isNullOrUndefined(this.intersect[i])) {\n                            if (this.value[index]['leftWidth'] > this.intersect[i]['rightWidth']\n                                || this.value[index]['rightWidth'] < this.intersect[i]['leftWidth']\n                                || this.value[index]['heightTop'] > this.intersect[i]['heightBottom']\n                                || this.value[index]['heightBottom'] < this.intersect[i]['heightTop']) {\n                                text = text;\n                            }\n                            else {\n                                text = '';\n                                break;\n                            }\n                        }\n                    }\n                    this.intersect.push(this.value[index]);\n                    options = new TextOption(labelId, textLocation.x, textLocation.y, 'middle', text, '', '');\n                }\n                var difference = void 0;\n                if (dataLabelSettings.intersectionAction === 'Trim') {\n                    for (var j = 0; j < this.intersect.length; j++) {\n                        if (!isNullOrUndefined(this.intersect[j])) {\n                            if (this.intersect[j]['rightWidth'] < this.value[index]['leftWidth']\n                                || this.intersect[j]['leftWidth'] > this.value[index]['rightWidth']\n                                || this.intersect[j]['heightBottom'] < this.value[index]['heightTop']\n                                || this.intersect[j]['heightTop'] > this.value[index]['heightBottom']) {\n                                trimmedLable = text;\n                                difference = 0;\n                            }\n                            else {\n                                if (this.value[index]['leftWidth'] > this.intersect[j]['leftWidth']) {\n                                    width = this.intersect[j]['rightWidth'] - this.value[index]['leftWidth'];\n                                    difference = width - (this.value[index]['rightWidth'] - this.value[index]['leftWidth']);\n                                    trimmedLable = textTrim(difference, text, style);\n                                    break;\n                                }\n                                if (this.value[index]['leftWidth'] < this.intersect[j]['leftWidth']) {\n                                    width = this.value[index]['rightWidth'] - this.intersect[j]['leftWidth'];\n                                    difference = Math.abs(width - (this.value[index]['rightWidth'] - this.value[index]['leftWidth']));\n                                    trimmedLable = textTrim(difference, text, style);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    this.intersect.push(this.value[index]);\n                    options = new TextOption(labelId, textLocation.x, (textLocation.y), 'middle', trimmedLable, '', '');\n                }\n                if (dataLabelSettings.intersectionAction === 'None') {\n                    options = new TextOption(labelId, (textLocation.x), (textLocation.y), 'middle', text, '', '');\n                }\n                if (trimmedLable.length > 1) {\n                    var border_1 = eventargs.border;\n                    if (border_1['width'] > 1) {\n                        var fill = eventargs.fill;\n                        var opacity = dataLabelSettings.opacity;\n                        var rx = dataLabelSettings.rx;\n                        var ry = dataLabelSettings.ry;\n                        var x = location['x'] - textSize['width'] / 2;\n                        var y = location['y'] - textSize['height'] / 2;\n                        var rectOptions = new RectOption(this.maps.element.id + '_LayerIndex_' + layerIndex + '_shapeIndex_' + index + '_rectIndex_' + index, fill, border_1, opacity, new Rect(x, y, textSize['width'], textSize['height']), rx, ry);\n                        var rect = this.maps.renderer.drawRectangle(rectOptions);\n                        group.appendChild(rect);\n                    }\n                }\n                element = renderTextElement(options, style, style.color, group);\n                element.setAttribute('transform', 'translate( ' + ((location['x'] + transPoint.x) * scale) + ' '\n                    + (((location['y'] + transPoint.y) * scale) + (elementSize.height / 4)) + ' )');\n                group.appendChild(element);\n            }\n            this.dataLabelCollections.push({\n                location: { x: location['x'], y: (location['y'] + elementSize.height / 4) },\n                element: isNullOrUndefined(labelElement) ? element : labelElement,\n                layerIndex: layerIndex,\n                shapeIndex: index,\n                labelIndex: index\n            });\n            if (labelTemplateElement.childElementCount > 0 && !this.maps.element.contains(labelTemplateElement)) {\n                document.getElementById(this.maps.element.id + '_Secondary_Element').appendChild(labelTemplateElement);\n            }\n        }\n    };\n    DataLabel.prototype.getPoint = function (shapes, points) {\n        shapes.map(function (current, index) {\n            points.push(new Point(current['point']['x'], current['point']['y']));\n        });\n        return points;\n    };\n    /**\n     * Get module name.\n     */\n    DataLabel.prototype.getModuleName = function () {\n        return 'DataLabel';\n    };\n    /**\n     * To destroy the layers.\n     * @return {void}\n     * @private\n     */\n    DataLabel.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return DataLabel;\n}());\nexport { DataLabel };\n","import { convertTileLatLongToPoint } from '../index';\nimport { convertGeoToPoint, Point, PathOption } from '../utils/helper';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * navigation-selected-line\n */\nvar NavigationLine = /** @class */ (function () {\n    function NavigationLine(maps) {\n        this.maps = maps;\n    }\n    /* tslint:disable:no-string-literal */\n    //tslint:disable:max-func-body-length\n    /**\n     * To render navigation line for maps\n     */\n    NavigationLine.prototype.renderNavigation = function (layer, factor, layerIndex) {\n        var navigationEle;\n        var navigation;\n        navigation = layer.navigationLineSettings;\n        var longitude;\n        var point = [];\n        var latitude;\n        var visible;\n        var angle;\n        var width;\n        var color;\n        var dashArray;\n        var pathOption;\n        var direction;\n        var markerWidth;\n        var arcId;\n        var radius;\n        var showArrow;\n        var arrowColor;\n        var arrowSize;\n        var arrowSettings;\n        var arrowPosition;\n        var startArrow;\n        var endArrow;\n        var offSet;\n        var offSetValue;\n        var navigationGroup;\n        var d;\n        var group = (this.maps.renderer.createGroup({\n            id: this.maps.element.id + '_layerIndex_' + layerIndex + '_line_Group'\n        }));\n        for (var i = 0; i < navigation.length; i++) {\n            latitude = navigation[i]['properties']['latitude'];\n            longitude = navigation[i]['properties']['longitude'];\n            visible = navigation[i]['properties']['visible'];\n            angle = navigation[i]['properties']['angle'];\n            width = navigation[i]['width'] || 1;\n            color = navigation[i]['color'];\n            dashArray = navigation[i]['properties']['dashArray'];\n            arrowSettings = navigation[i]['properties']['arrowSettings'];\n            showArrow = (isNullOrUndefined(arrowSettings)) ? false : arrowSettings['properties']['showArrow'];\n            if (longitude['length'] === latitude['length'] && visible) {\n                for (var i_1 = 0; i_1 < longitude['length']; i_1++) {\n                    var location_1 = (this.maps.isTileMap) ? convertTileLatLongToPoint(new Point(longitude[i_1], latitude[i_1]), factor, this.maps.tileTranslatePoint, true) : convertGeoToPoint(latitude[i_1], longitude[i_1], factor, layer, this.maps);\n                    point.push(location_1);\n                }\n            }\n            navigationGroup = (this.maps.renderer.createGroup({\n                id: this.maps.element.id + '_layerIndex_' + layerIndex + '_NavigationGroup' + i + ''\n            }));\n            for (var j = 0; j < point['length'] - 1; j++) {\n                angle = (-1 > angle) ? -1 : angle;\n                angle = (1 < angle) ? 1 : angle;\n                var arcId_1 = this.maps.element.id + '_LayerIndex_' + layerIndex + '_NavigationIndex_' + i + '_Line' + j + '';\n                var radius_1 = this.convertRadius(point[j], point[j + 1]);\n                if (angle <= 1 && angle > 0) {\n                    direction = 0;\n                    if (point[j]['x'] > point[j + 1]['x']) {\n                        direction = 1;\n                    }\n                }\n                if (angle >= -1 && angle < 0) {\n                    direction = 1;\n                    if (point[j]['x'] > point[j + 1]['x']) {\n                        direction = 0;\n                    }\n                }\n                if (point[j]['x'] !== point[j + 1]['x']) {\n                    if (showArrow) {\n                        arrowColor = arrowSettings['properties']['color'];\n                        arrowSize = arrowSettings['properties']['size'];\n                        offSetValue = (arrowSettings['properties']['offSet'] === undefined) ? 0 : arrowSettings['properties']['offSet'];\n                        var divide = (Math.round(arrowSize / 2));\n                        arrowPosition = arrowSettings['properties']['position'];\n                        startArrow = (arrowPosition === 'Start') ? 'url(#triangle' + i + ')' : null;\n                        endArrow = (arrowPosition === 'End') ? 'url(#triangle' + i + ')' : null;\n                        if (offSet !== 0 && angle === 0) {\n                            offSet = (arrowPosition === 'Start') ? offSetValue : -(offSetValue);\n                        }\n                        offSet = (isNullOrUndefined(offSet)) ? 0 : offSet;\n                        var triId = this.maps.element.id + '_triangle';\n                        var defElement = this.maps.renderer.createDefs();\n                        var xmlns = 'http://www.w3.org/2000/svg';\n                        var markerEle = document.createElementNS(xmlns, 'marker');\n                        markerEle.setAttribute('id', 'triangle' + i);\n                        markerEle.setAttribute('markerWidth', (arrowSize.toString()));\n                        markerEle.setAttribute('markerHeight', (arrowSize.toString()));\n                        markerEle.setAttribute('refX', (divide - offSet).toString());\n                        markerEle.setAttribute('refY', divide.toString());\n                        markerEle.setAttribute('orient', 'auto');\n                        var d2 = 'M 0,0  L 0,' + arrowSize + ' L ' + divide + ', ' + divide + ' Z';\n                        pathOption = new PathOption(triId, arrowColor, width, color, 1, dashArray, d2);\n                        navigationEle = this.maps.renderer.drawPath(pathOption);\n                        markerEle.appendChild(navigationEle);\n                        defElement.appendChild(markerEle);\n                        navigationGroup.appendChild(defElement);\n                    }\n                    d = (angle === 0) ? 'M ' + point[j]['x'] + ',' + point[j]['y'] + 'L ' + point[j + 1]['x']\n                        + ',' + point[j + 1]['y'] + '' :\n                        'M ' + point[j]['x'] + ',' + point[j]['y'] + ' A ' + (angle * radius_1) + ' ' +\n                            (angle * radius_1) + ' ' + 0 + ',' + 0 + ',' + direction + ' , ' + point[j + 1]['x'] + ',' + point[j + 1]['y'] + ' ';\n                    pathOption = new PathOption(arcId_1, 'none', 2, color, 1, dashArray, d);\n                    navigationEle = this.maps.renderer.drawPath(pathOption);\n                    if (!isNullOrUndefined(arrowPosition)) {\n                        (arrowPosition === 'Start') ? navigationEle.setAttribute('marker-start', startArrow)\n                            : navigationEle.setAttribute('marker-end', endArrow);\n                    }\n                    navigationGroup.appendChild(navigationEle);\n                    group.appendChild(navigationGroup);\n                }\n            }\n            point = [];\n        }\n        return group;\n    };\n    NavigationLine.prototype.convertRadius = function (point1, point2) {\n        var value1 = point2['x'] - point1['x'];\n        var value2 = point2['y'] - point1['y'];\n        var value = Math.sqrt((Math.pow(value1, 2) + Math.pow(value2, 2)));\n        return value;\n    };\n    /**\n     * Get module name.\n     */\n    NavigationLine.prototype.getModuleName = function () {\n        return 'NavigationLine';\n    };\n    /**\n     * To destroy the layers.\n     * @return {void}\n     * @private\n     */\n    NavigationLine.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return NavigationLine;\n}());\nexport { NavigationLine };\n","import { legendRendering } from '../index';\nimport { Rect, measureText, PathOption, textTrim, querySelector, getTemplateFunction } from '../utils/helper';\nimport { RectOption, Size, TextOption, Point, renderTextElement, drawSymbol } from '../utils/helper';\nimport { isNullOrUndefined, Browser, EventHandler, remove } from '@syncfusion/ej2-base';\n/**\n * Legend module is used to render legend for the maps\n */\nvar Legend = /** @class */ (function () {\n    function Legend(maps) {\n        this.legendBorderRect = new Rect(0, 0, 0, 0);\n        this.totalPages = [];\n        this.page = 0;\n        this.currentPage = 0;\n        this.interactiveLocation = new Point(0, 0);\n        this.legendItemRect = new Rect(0, 0, 0, 0);\n        this.heightIncrement = 0;\n        this.widthIncrement = 0;\n        this.textMaxWidth = 0;\n        this.areaRect = new Rect(0, 0, 0, 0);\n        this.maps = maps;\n        this.addEventListener();\n    }\n    /**\n     * To calculate legend bounds and draw the legend shape and text.\n     */\n    Legend.prototype.renderLegend = function () {\n        this.calculateLegendBounds();\n        this.drawLegend();\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Legend.prototype.calculateLegendBounds = function () {\n        var _this = this;\n        var map = this.maps;\n        var legend = map.legendSettings;\n        this.legendCollection = [];\n        var spacing = 10;\n        var leftPadding = 10;\n        var topPadding = map.mapAreaRect.y;\n        this.legendRenderingCollections = [];\n        map.layersCollection.forEach(function (layer, layerIndex) {\n            if (!isNullOrUndefined(layer.shapeData)) {\n                var layerData = layer.shapeData['features'];\n                var dataPath = layer.shapeDataPath;\n                var propertyPath = layer.shapePropertyPath;\n                var dataSource = layer.dataSource;\n                var colorValuePath = void 0;\n                var colorMapping = void 0;\n                if (legend.type === 'Layers' && layer.visible) {\n                    colorValuePath = layer.shapeSettings.colorValuePath;\n                    colorMapping = layer.shapeSettings.colorMapping;\n                    _this.getLegends(layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath);\n                }\n                else if (legend.type === 'Bubbles') {\n                    for (var _i = 0, _a = layer.bubbleSettings; _i < _a.length; _i++) {\n                        var bubble = _a[_i];\n                        if (bubble.visible) {\n                            colorValuePath = bubble.colorValuePath;\n                            colorMapping = bubble.colorMapping;\n                            dataSource = bubble.dataSource;\n                            _this.getLegends(layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath);\n                        }\n                    }\n                }\n                else {\n                    _this.getMarkersLegendCollections(layerIndex, layer.markerSettings);\n                }\n            }\n        });\n        var defaultSize = 25;\n        var legendTitle = map.legendSettings.title.text;\n        var titleTextStyle = map.legendSettings.titleStyle;\n        if (this.legendCollection.length > 0) {\n            var legendMode = legend.mode;\n            var shapeX = 0;\n            var shapeY = 0;\n            var textX = 0;\n            var textY = 0;\n            var shapePadding = legend.shapePadding;\n            var textPadding = 10;\n            var shapeHeight = legend.shapeHeight;\n            var shapeWidth = legend.shapeWidth;\n            var shapeLocation = [];\n            var textLocation = [];\n            var legendRectCollection = [];\n            var location_1;\n            var position = legend.position;\n            var labelAction = legend.labelDisplayMode;\n            var arrangement = (legend.orientation === 'None') ? ((position === 'Top' || position === 'Bottom')\n                ? 'Horizontal' : 'Vertical') : legend.orientation;\n            var legendWidth = (legend.width.length > 1) ? (legend.width.indexOf('%') > -1) ? (map.availableSize.width / 100)\n                * parseInt(legend.width, 10) : parseInt(legend.width, 10) : null;\n            var legendHeight = (legend.height.length > 1) ? (legend.height.indexOf('%') > -1) ? (map.availableSize.height / 100) *\n                parseInt(legend.height, 10) : parseInt(legend.height, 10) : null;\n            var legendItemStartX_1;\n            var legendItemStartY_1;\n            var startX = 0;\n            var startY = 0;\n            var legendtitleSize = measureText(legendTitle, titleTextStyle);\n            if (legendMode === 'Interactive') {\n                var itemTextStyle = legend.textStyle;\n                var rectWidth = void 0;\n                var rectHeight = void 0;\n                var legendLength = this.legendCollection.length;\n                rectWidth = (arrangement === 'Horizontal') ? (isNullOrUndefined(legendWidth)) ? (map.mapAreaRect.width / legendLength) :\n                    (legendWidth / legendLength) : (isNullOrUndefined(legendWidth)) ? defaultSize : legendWidth;\n                rectHeight = (arrangement === 'Horizontal') ? (isNullOrUndefined(legendHeight)) ? defaultSize : legendHeight :\n                    (isNullOrUndefined(legendHeight)) ? (map.mapAreaRect.height / legendLength) : (legendHeight / legendLength);\n                startX = 0;\n                startY = legendtitleSize.height + spacing;\n                var position_1 = legend.labelPosition;\n                var textX_1 = 0;\n                var textY_1 = 0;\n                var textPadding_1 = 10;\n                var itemStartX = 0;\n                var itemStartY = 0;\n                var maxTextHeight = 0;\n                var maxTextWidth = 0;\n                for (var i = 0; i < this.legendCollection.length; i++) {\n                    startX = (arrangement === 'Horizontal') ? (startX + rectWidth) : startX;\n                    startY = (arrangement === 'Horizontal') ? startY : (startY + rectHeight);\n                    var legendText = this.legendCollection[i]['text'];\n                    var itemTextSize = new Size(0, 0);\n                    if (labelAction === 'None') {\n                        itemTextSize = measureText(legendText, itemTextStyle);\n                    }\n                    else if (labelAction === 'Trim') {\n                        legendText = textTrim((arrangement === 'Horizontal' ? rectWidth : rectHeight), legendText, itemTextStyle);\n                        itemTextSize = measureText(legendText, itemTextStyle);\n                    }\n                    else {\n                        legendText = '';\n                    }\n                    maxTextHeight = Math.max(maxTextHeight, itemTextSize.height);\n                    maxTextWidth = Math.max(maxTextWidth, itemTextSize.width);\n                    if (itemTextSize.width > 0 && itemTextSize.height > 0) {\n                        if (arrangement === 'Horizontal') {\n                            textX_1 = startX + (rectWidth / 2);\n                            textY_1 = (position_1 === 'After') ? (startY + rectHeight + (itemTextSize.height / 2)) + textPadding_1 :\n                                (startY - textPadding_1);\n                        }\n                        else {\n                            textX_1 = (position_1 === 'After') ? startX - (itemTextSize.width / 2) - textPadding_1\n                                : (startX + rectWidth + itemTextSize.width / 2) + textPadding_1;\n                            textY_1 = startY + (rectHeight / 2) + (itemTextSize.height / 4);\n                        }\n                    }\n                    if (i === 0) {\n                        itemStartX = (arrangement === 'Horizontal') ? startX : (position_1 === 'After') ?\n                            textX_1 - (itemTextSize.width / 2) : startX;\n                        itemStartY = (arrangement === 'Horizontal') ? (position_1 === 'After') ? startY :\n                            textY_1 - (itemTextSize.height / 2) : startY;\n                    }\n                    else if (i === this.legendCollection.length - 1) {\n                        legendWidth = (arrangement === 'Horizontal') ? Math.abs((startX + rectWidth) - itemStartX) :\n                            (rectWidth + maxTextWidth + textPadding_1);\n                        legendHeight = (arrangement === 'Horizontal') ? (rectHeight + (maxTextHeight / 2) + textPadding_1) :\n                            Math.abs((startY + rectHeight) - itemStartY);\n                    }\n                    this.legendRenderingCollections.push({\n                        fill: this.legendCollection[i]['fill'], x: startX, y: startY,\n                        width: rectWidth, height: rectHeight,\n                        text: legendText, textX: textX_1, textY: textY_1,\n                        textWidth: itemTextSize.width, textHeight: itemTextSize.height\n                    });\n                }\n                this.legendItemRect = { x: itemStartX, y: itemStartY, width: legendWidth, height: legendHeight };\n            }\n            else {\n                legendWidth = (isNullOrUndefined(legendWidth)) ? map.mapAreaRect.width : legendWidth;\n                legendHeight = (isNullOrUndefined(legendHeight)) ? map.mapAreaRect.height : legendHeight;\n                var j = 0;\n                for (var i = 0; i < this.legendCollection.length; i++) {\n                    var legendItem = this.legendCollection[i];\n                    if (isNullOrUndefined(this.totalPages[this.page])) {\n                        this.totalPages[this.page] = { Page: (this.page + 1), Collection: [] };\n                    }\n                    var legendTextSize = measureText(legendItem['text'], legend.textStyle);\n                    this.textMaxWidth = Math.max(this.textMaxWidth, legendTextSize.width);\n                    if (i === 0) {\n                        startX = shapeX = (leftPadding + (shapeWidth / 2));\n                        startY = shapeY = topPadding + legendtitleSize.height + (shapeHeight > legendTextSize.height ? shapeHeight / 2\n                            : (legendTextSize.height / 4));\n                    }\n                    else {\n                        var maxSize = (legendTextSize.height > shapeHeight) ? legendTextSize.height : shapeHeight;\n                        if (arrangement === 'Horizontal') {\n                            var prvePositionX = (textLocation[j - 1].x + textLocation[j - 1].width) + textPadding + shapeWidth;\n                            if ((prvePositionX + shapePadding + legendTextSize.width) > legendWidth) {\n                                var nextPositionY = (textLocation[j - 1].y > (shapeLocation[j - 1].y + (shapeHeight / 2)) ?\n                                    textLocation[j - 1].y : (shapeLocation[j - 1].y + (shapeHeight / 2))) + topPadding;\n                                if ((nextPositionY + maxSize) > legendHeight) {\n                                    this.getPageChanged();\n                                    j = 0;\n                                    shapeLocation = [];\n                                    textLocation = [];\n                                    legendRectCollection = [];\n                                    shapeX = startX;\n                                    shapeY = startY;\n                                }\n                                else {\n                                    shapeX = (shapeLocation[0].x);\n                                    shapeY = (nextPositionY + (maxSize / 2));\n                                }\n                            }\n                            else {\n                                shapeX = (prvePositionX - (shapeWidth / 2));\n                                shapeY = (shapeLocation[j - 1]).y;\n                            }\n                        }\n                        else {\n                            var prevPositionY = textLocation[j - 1].y > shapeLocation[j - 1].y + (shapeHeight / 2) ?\n                                textLocation[j - 1].y : shapeLocation[j - 1].y + (shapeHeight / 2);\n                            if ((prevPositionY + topPadding + maxSize) > legendHeight) {\n                                var nextPositionX = (textLocation[j - 1].x + this.textMaxWidth + textPadding);\n                                if ((nextPositionX + shapePadding + legendTextSize.width) > legendWidth) {\n                                    shapeX = startX;\n                                    shapeY = startY;\n                                    legendRectCollection = [];\n                                    textLocation = [];\n                                    shapeLocation = [];\n                                    this.getPageChanged();\n                                    j = 0;\n                                }\n                                else {\n                                    shapeX = nextPositionX + (shapeWidth / 2);\n                                    shapeY = (shapeLocation[0].y);\n                                }\n                            }\n                            else {\n                                shapeX = shapeLocation[j - 1].x;\n                                shapeY = prevPositionY + topPadding + (shapeHeight / 2);\n                            }\n                        }\n                    }\n                    textX = shapeX + (shapeWidth / 2) + shapePadding;\n                    textY = shapeY + (legendTextSize.height / 4);\n                    shapeLocation.push({ x: shapeX, y: shapeY });\n                    textLocation.push({ x: textX, y: textY, width: legendTextSize.width, height: (legendTextSize.height / 2) });\n                    this.totalPages[this.page]['Collection'].push({\n                        DisplayText: legendItem['text'],\n                        ImageSrc: legendItem['imageSrc'],\n                        Shape: { x: shapeX, y: shapeY },\n                        Text: { x: textX, y: textY },\n                        Fill: legendItem['fill'],\n                        Rect: {\n                            x: shapeLocation[j].x - (shapeWidth / 2),\n                            y: (shapeLocation[j].y - (shapeHeight / 2)) < (textY - legendTextSize.height) ?\n                                (shapeLocation[j].y - (shapeHeight / 2)) : (textY - legendTextSize.height),\n                            width: Math.abs((shapeLocation[j].x - (shapeWidth / 2)) - (textX + legendTextSize.width)),\n                            height: ((shapeHeight > legendTextSize.height) ? shapeHeight : legendTextSize.height)\n                        }\n                    });\n                    j++;\n                }\n                var collection = this.totalPages[0]['Collection'];\n                collection.forEach(function (legendObj, index) {\n                    var legendRect = new Rect(legendObj['Rect']['x'], legendObj['Rect']['y'], legendObj['Rect']['width'], legendObj['Rect']['height']);\n                    if (index === 0) {\n                        legendItemStartX_1 = legendRect.x;\n                        legendItemStartY_1 = legendRect.y;\n                    }\n                    _this.widthIncrement = Math.max(_this.widthIncrement, Math.abs(legendItemStartX_1 - (legendRect.x + legendRect.width)));\n                    _this.heightIncrement = Math.max(_this.heightIncrement, Math.abs(legendItemStartY_1 - (legendRect.y + legendRect.height)));\n                });\n                legendWidth = ((this.widthIncrement < legendWidth) ? this.widthIncrement : legendWidth);\n                legendHeight = ((this.heightIncrement < legendHeight) ? this.heightIncrement : legendHeight);\n                this.legendItemRect = {\n                    x: collection[0]['Rect']['x'], y: collection[0]['Rect']['y'],\n                    width: legendWidth, height: legendHeight\n                };\n            }\n        }\n    };\n    /**\n     *\n     */\n    Legend.prototype.getLegends = function (layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath) {\n        this.getRangeLegendCollection(layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath);\n        this.getEqualLegendCollection(layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath);\n        this.getDataLegendCollection(layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath);\n    };\n    Legend.prototype.getPageChanged = function () {\n        this.page++;\n        if (isNullOrUndefined(this.totalPages[this.page])) {\n            this.totalPages[this.page] = { Page: (this.page + 1), Collection: [] };\n        }\n    };\n    /**\n     * To draw the legend shape and text.\n     */\n    Legend.prototype.drawLegend = function () {\n        var map = this.maps;\n        var legend = map.legendSettings;\n        var render = map.renderer;\n        var textOptions;\n        var textFont = legend.textStyle;\n        this.legendGroup = render.createGroup({ id: map.element.id + '_Legend_Group' });\n        var eventArgs = {\n            name: legendRendering, cancel: false, fill: '', shape: legend.shape,\n            shapeBorder: legend.shapeBorder\n        };\n        if (legend.mode === 'Interactive') {\n            for (var i = 0; i < this.legendRenderingCollections.length; i++) {\n                var itemId = map.element.id + '_Legend_Index_' + i;\n                var textId = map.element.id + '_Legend_Index_' + i + '_Text';\n                var item = this.legendRenderingCollections[i];\n                var bounds = new Rect(item['x'], item['y'], item['width'], item['height']);\n                var textLocation = new Point(item['textX'], item['textY']);\n                eventArgs.fill = item['fill'];\n                map.trigger(legendRendering, eventArgs);\n                var rectOptions = new RectOption(itemId, eventArgs.fill, eventArgs.shapeBorder, 1, bounds);\n                textOptions = new TextOption(textId, textLocation.x, textLocation.y, 'middle', item['text'], '', '');\n                renderTextElement(textOptions, textFont, textFont.color, this.legendGroup);\n                this.legendGroup.appendChild(render.drawRectangle(rectOptions));\n            }\n            this.renderLegendBorder();\n        }\n        else {\n            this.drawLegendItem(this.currentPage);\n        }\n    };\n    Legend.prototype.drawLegendItem = function (page) {\n        var map = this.maps;\n        var legend = map.legendSettings;\n        var spacing = 10;\n        var shapeSize = new Size(legend.shapeWidth, legend.shapeHeight);\n        var textOptions;\n        var renderOptions;\n        var render = map.renderer;\n        var shapeBorder = legend.shapeBorder;\n        var eventArgs = {\n            name: legendRendering, cancel: false, fill: '', shape: legend.shape\n        };\n        if (page >= 0 && page < this.totalPages.length) {\n            if (querySelector(this.legendGroup.id, this.maps.element.id)) {\n                remove(querySelector(this.legendGroup.id, this.maps.element.id));\n            }\n            var strokeColor = (legend.shape === 'HorizontalLine' || legend.shape === 'VerticalLine'\n                || legend.shape === 'Cross') ? isNullOrUndefined(legend.fill) ? '#000000' : legend.fill : shapeBorder.color;\n            var strokeWidth = (legend.shape === 'HorizontalLine' || legend.shape === 'VerticalLine'\n                || legend.shape === 'Cross') ? (shapeBorder.width === 0) ?\n                1 : shapeBorder.width : shapeBorder.width;\n            eventArgs.shapeBorder = { width: strokeWidth, color: strokeColor };\n            for (var i = 0; i < this.totalPages[page]['Collection'].length; i++) {\n                var collection = this.totalPages[page]['Collection'][i];\n                var legendElement = render.createGroup({ id: map.element.id + '_Legend_Index_' + i });\n                var legendText = collection['DisplayText'];\n                eventArgs.fill = collection['Fill'];\n                eventArgs.shape = ((legend.type === 'Markers') ? ((isNullOrUndefined(collection['ImageSrc'])) ?\n                    legend.shape : 'Image') : legend.shape);\n                map.trigger(legendRendering, eventArgs);\n                var shapeId = map.element.id + '_Legend_Shape_Index_' + i;\n                var textId = map.element.id + '_Legend_Text_Index_' + i;\n                var shapeLocation = collection['Shape'];\n                var textLocation = collection['Text'];\n                var imageUrl = ((isNullOrUndefined(collection['ImageSrc'])) ? legend.shape : collection['ImageSrc']);\n                var renderOptions_1 = new PathOption(shapeId, eventArgs.fill, eventArgs.shapeBorder.width, eventArgs.shapeBorder.color, 1, '');\n                legendElement.appendChild(drawSymbol(shapeLocation, eventArgs.shape, shapeSize, collection['ImageSrc'], renderOptions_1));\n                textOptions = new TextOption(textId, textLocation.x, textLocation.y, 'start', legendText, '', '');\n                renderTextElement(textOptions, legend.textStyle, legend.textStyle.color, legendElement);\n                this.legendGroup.appendChild(legendElement);\n            }\n            var pagingGroup = void 0;\n            var width = spacing;\n            var height = (spacing / 2);\n            if (this.page !== 0) {\n                var pagingText = (page + 1) + '/' + this.totalPages.length;\n                var pagingFont = legend.textStyle;\n                var pagingTextSize = measureText(pagingText, pagingFont);\n                var leftPageX = (this.legendItemRect.x + this.legendItemRect.width) - pagingTextSize.width -\n                    (width * 2) - spacing;\n                var rightPageX = (this.legendItemRect.x + this.legendItemRect.width);\n                var locY = (this.legendItemRect.y + this.legendItemRect.height) + (height / 2) + spacing;\n                var pageTextX = rightPageX - width - (pagingTextSize.width / 2) - (spacing / 2);\n                pagingGroup = render.createGroup({ id: map.element.id + '_Legend_Paging_Group' });\n                var leftPageElement = render.createGroup({ id: map.element.id + '_Legend_Left_Paging_Group' });\n                var rightPageElement = render.createGroup({ id: map.element.id + '_Legend_Right_Paging_Group' });\n                var rightPath = ' M ' + rightPageX + ' ' + locY + ' L ' + (rightPageX - width) + ' ' + (locY - height) +\n                    ' L ' + (rightPageX - width) + ' ' + (locY + height) + ' z ';\n                var leftPath = ' M ' + leftPageX + ' ' + locY + ' L ' + (leftPageX + width) + ' ' + (locY - height) +\n                    ' L ' + (leftPageX + width) + ' ' + (locY + height) + ' z ';\n                var leftPageOptions = new PathOption(map.element.id + '_Left_Page', '#a6a6a6', 0, '#a6a6a6', 1, '', leftPath);\n                leftPageElement.appendChild(render.drawPath(leftPageOptions));\n                var leftRectPageOptions = new RectOption(map.element.id + '_Left_Page_Rect', 'transparent', {}, 1, new Rect(leftPageX - (width / 2), (locY - (height * 2)), width * 2, spacing * 2), null, null, '', '');\n                leftPageElement.appendChild(render.drawRectangle(leftRectPageOptions));\n                this.wireEvents(leftPageElement);\n                var rightPageOptions = new PathOption(map.element.id + '_Right_Page', '#a6a6a6', 0, '#a6a6a6', 1, '', rightPath);\n                rightPageElement.appendChild(render.drawPath(rightPageOptions));\n                var rightRectPageOptions = new RectOption(map.element.id + '_Right_Page_Rect', 'transparent', {}, 1, new Rect((rightPageX - width), (locY - height), width, spacing), null, null, '', '');\n                rightPageElement.appendChild(render.drawRectangle(rightRectPageOptions));\n                this.wireEvents(rightPageElement);\n                pagingGroup.appendChild(leftPageElement);\n                pagingGroup.appendChild(rightPageElement);\n                var pageTextOptions = {\n                    'id': map.element.id + '_Paging_Text',\n                    'x': pageTextX,\n                    'y': locY + (pagingTextSize.height / 4),\n                    'fill': '#a6a6a6',\n                    'font-size': '14px',\n                    'font-style': pagingFont.fontStyle,\n                    'font-family': pagingFont.fontFamily,\n                    'font-weight': pagingFont.fontWeight,\n                    'text-anchor': 'middle',\n                    'transform': '',\n                    'opacity': 1,\n                    'dominant-baseline': ''\n                };\n                pagingGroup.appendChild(render.createText(pageTextOptions, pagingText));\n                this.legendGroup.appendChild(pagingGroup);\n            }\n            this.renderLegendBorder();\n        }\n    };\n    Legend.prototype.renderLegendBorder = function () {\n        var map = this.maps;\n        var legend = map.legendSettings;\n        var legendTitle = legend.title.text;\n        var textStyle = legend.titleStyle;\n        var textOptions;\n        var spacing = 10;\n        var trimTitle = textTrim((this.legendItemRect.width + (spacing * 2)), legendTitle, textStyle);\n        var textSize = measureText(trimTitle, textStyle);\n        this.legendBorderRect = new Rect((this.legendItemRect.x - spacing), (this.legendItemRect.y - spacing - textSize.height), (this.legendItemRect.width) + (spacing * 2), (this.legendItemRect.height) + (spacing * 2) + textSize.height +\n            (legend.mode === 'Interactive' ? 0 : (this.page !== 0) ? spacing : 0));\n        if (legendTitle) {\n            textOptions = new TextOption(map.element.id + '_LegendTitle', (this.legendItemRect.x) + (this.legendItemRect.width / 2), this.legendItemRect.y - (textSize.height / 2), 'middle', trimTitle, '');\n            renderTextElement(textOptions, textStyle, textStyle.color, this.legendGroup);\n        }\n        var renderOptions = new RectOption(map.element.id + '_Legend_Border', legend.background, legend.border, 1, this.legendBorderRect, null, null, '', '');\n        this.legendGroup.appendChild(map.renderer.drawRectangle(renderOptions));\n        this.translate = (legend.position !== 'Float') ?\n            this.getLegendAlignment(map, this.legendBorderRect.width, this.legendBorderRect.height, legend) : legend.location;\n        this.legendGroup.setAttribute('transform', 'translate( ' + (this.translate.x + (-(this.legendBorderRect.x))) + ' ' +\n            (this.translate.y + (-(this.legendBorderRect.y))) + ' )');\n        map.svgObject.appendChild(this.legendGroup);\n    };\n    Legend.prototype.changeNextPage = function (e) {\n        this.currentPage = (e.target.id.indexOf('_Left_Page_') > -1) ? (this.currentPage - 1) :\n            (this.currentPage + 1);\n        this.legendGroup = this.maps.renderer.createGroup({ id: this.maps.element.id + '_Legend_Group' });\n        this.drawLegendItem(this.currentPage);\n        if (querySelector(this.maps.element.id + '_Legend_Border', this.maps.element.id)) {\n            querySelector(this.maps.element.id + '_Legend_Border', this.maps.element.id).style.pointerEvents = 'none';\n        }\n    };\n    Legend.prototype.getLegendAlignment = function (map, width, height, legend) {\n        var x;\n        var y;\n        var spacing = 10;\n        var totalWidth = map.availableSize.width;\n        var totalHeight = map.availableSize.height;\n        switch (legend.position) {\n            case 'Top':\n            case 'Bottom':\n                map.mapAreaRect.height = (map.mapAreaRect.height - height);\n                x = (totalWidth / 2) - (width / 2);\n                y = (legend.position === 'Top') ? map.mapAreaRect.y : (map.mapAreaRect.y + map.mapAreaRect.height);\n                map.mapAreaRect.y = (legend.position === 'Top') ? map.mapAreaRect.y + height + spacing : map.mapAreaRect.y;\n                break;\n            case 'Left':\n            case 'Right':\n                map.mapAreaRect.width = (map.mapAreaRect.width - width);\n                x = (legend.position === 'Left') ? map.mapAreaRect.x : map.mapAreaRect.x + map.mapAreaRect.width;\n                y = (totalHeight / 2) - (height / 2);\n                map.mapAreaRect.x = (legend.position === 'Left') ? map.mapAreaRect.x + width : map.mapAreaRect.x;\n                break;\n        }\n        switch (legend.alignment) {\n            case 'Near':\n                if (legend.position === 'Top' || legend.position === 'Bottom') {\n                    x = map.mapAreaRect.x;\n                }\n                else {\n                    y = map.mapAreaRect.y;\n                }\n                break;\n            case 'Far':\n                if (legend.position === 'Top' || legend.position === 'Bottom') {\n                    x = totalWidth - width;\n                }\n                else {\n                    y = totalHeight - height;\n                }\n                break;\n        }\n        return new Point(x, y);\n    };\n    Legend.prototype.getMarkersLegendCollections = function (layerIndex, markers) {\n        var _this = this;\n        markers.forEach(function (marker, markerIndex) {\n            var dataSource = marker.dataSource;\n            var field = marker.legendText;\n            var templateFn;\n            dataSource.forEach(function (data, dataIndex) {\n                var imageSrc = null;\n                if (marker.visible && (!isNullOrUndefined(data['latitude'])) && (!isNullOrUndefined(data['longitude']))) {\n                    if (marker.template) {\n                        templateFn = getTemplateFunction(marker.template);\n                        var templateElement = templateFn(_this.maps);\n                        var markerEle = isNullOrUndefined(templateElement.childElementCount) ? templateElement[0] :\n                            templateElement;\n                        imageSrc = markerEle.querySelector('img').src;\n                    }\n                    var text = isNullOrUndefined(data[field]) ? '' : data[field];\n                    _this.legendCollection.push({\n                        layerIndex: layerIndex, markerIndex: markerIndex, dataIndex: dataIndex,\n                        fill: marker.fill, text: text, imageSrc: imageSrc\n                    });\n                }\n            });\n        });\n    };\n    Legend.prototype.getRangeLegendCollection = function (layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath) {\n        var _this = this;\n        var legendText;\n        var fill = this.maps.legendSettings.fill;\n        var _loop_1 = function (colorMap) {\n            if (!isNullOrUndefined(colorMap.from) && !isNullOrUndefined(colorMap.to)) {\n                legendText = !isNullOrUndefined(colorMap.label) ? colorMap.label : colorMap.from + ' - ' + colorMap.to;\n                var rangeData_1 = [];\n                var colorMapProcess_1 = false;\n                dataSource.forEach(function (data, dataIndex) {\n                    var colorValue = parseFloat(data[colorValuePath]);\n                    if (colorValue >= colorMap.from && colorValue <= colorMap.to) {\n                        colorMapProcess_1 = true;\n                        rangeData_1.push(_this.getLegendData(layerIndex, dataIndex, data, dataPath, layerData, propertyPath, colorValue));\n                    }\n                });\n                if (!colorMapProcess_1) {\n                    rangeData_1.push({\n                        layerIndex: layerIndex, shapeIndex: null, dataIndex: null,\n                        name: null, value: null\n                    });\n                }\n                var legendFill = (isNullOrUndefined(fill)) ? colorMap.color : fill;\n                this_1.getOverallLegendItemsCollection(legendText, legendFill, rangeData_1);\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, colorMapping_1 = colorMapping; _i < colorMapping_1.length; _i++) {\n            var colorMap = colorMapping_1[_i];\n            _loop_1(colorMap);\n        }\n    };\n    Legend.prototype.getOverallLegendItemsCollection = function (legendText, legendFill, legendData) {\n        var newColllection = [];\n        if (legendData.length > 0) {\n            for (var i = 0; i < legendData.length; i++) {\n                var collection = legendData[i];\n                if (collection.length > 0) {\n                    for (var j = 0; j < collection.length; j++) {\n                        newColllection.push(collection[j]);\n                    }\n                }\n                else {\n                    newColllection.push(legendData[i]);\n                }\n                newColllection['_isVisible'] = true;\n            }\n            this.legendCollection.push({ text: legendText, fill: legendFill, data: newColllection });\n        }\n    };\n    Legend.prototype.getEqualLegendCollection = function (layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath) {\n        var _this = this;\n        var fill = this.maps.legendSettings.fill;\n        var legendText;\n        var _loop_2 = function (colorMap) {\n            if (!isNullOrUndefined(colorMap.value)) {\n                legendText = !isNullOrUndefined(colorMap.label) ? colorMap.label : colorMap.value;\n                var equalData_1 = [];\n                var eqaulColorProcess_1 = false;\n                dataSource.forEach(function (data, dataIndex) {\n                    var equalValue = data[colorValuePath];\n                    if (equalValue === colorMap.value) {\n                        eqaulColorProcess_1 = true;\n                        equalData_1.push(_this.getLegendData(layerIndex, dataIndex, data, dataPath, layerData, propertyPath, equalValue));\n                    }\n                });\n                if (!eqaulColorProcess_1) {\n                    equalData_1.push({\n                        layerIndex: layerIndex, shapeIndex: null, dataIndex: null,\n                        name: null, value: null\n                    });\n                }\n                var legendFill = (isNullOrUndefined(fill)) ? colorMap.color : fill;\n                this_2.getOverallLegendItemsCollection(legendText, legendFill, equalData_1);\n            }\n        };\n        var this_2 = this;\n        for (var _i = 0, colorMapping_2 = colorMapping; _i < colorMapping_2.length; _i++) {\n            var colorMap = colorMapping_2[_i];\n            _loop_2(colorMap);\n        }\n    };\n    Legend.prototype.getDataLegendCollection = function (layerIndex, layerData, colorMapping, dataSource, dataPath, colorValuePath, propertyPath) {\n        var _this = this;\n        var legendText;\n        var fill = this.maps.legendSettings.fill;\n        if (!isNullOrUndefined(colorValuePath)) {\n            dataSource.forEach(function (data, dataIndex) {\n                var dataValue = data[colorValuePath];\n                var newData = [];\n                var legendFill = (isNullOrUndefined(fill)) ? dataValue : fill;\n                if (!isNullOrUndefined(dataValue) && colorMapping.length === 0) {\n                    legendText = data[dataPath];\n                    newData.push(_this.getLegendData(layerIndex, dataIndex, data, dataPath, layerData, propertyPath, dataValue));\n                }\n                _this.getOverallLegendItemsCollection(legendText, legendFill, newData);\n            });\n        }\n    };\n    Legend.prototype.interactiveHandler = function (e) {\n        var target = e.target;\n        var legend = this.maps.legendSettings;\n        var id = this.maps.element.id + '_Interactive_Legend';\n        var hoverId = legend.type === 'Layers' ? '_ShapeIndex_' : (legend.type === 'Markers') ? '_MarkerIndex_' :\n            '_BubbleIndex_';\n        if (target.id.indexOf(hoverId) > 1) {\n            var layerIndex = parseFloat(target.id.split('_')[2]);\n            var dataIndex = parseFloat(target.id.split('_')[6]);\n            var fill = void 0;\n            var stroke = void 0;\n            var strokeWidth = void 0;\n            if (!(isNullOrUndefined(querySelector(id, this.maps.element.id)))) {\n                remove(querySelector(id, this.maps.element.id));\n            }\n            var layer = this.maps.layersCollection[layerIndex];\n            if (legend.visible && this.legendRenderingCollections.length > 0\n                && legend.mode === 'Interactive' && (legend.type === 'Layers' ? layer.visible :\n                legend.type === 'Markers' ? layer.markerSettings[parseFloat(target.id.split('_')[4])].visible :\n                    (this.maps.getBubbleVisible(this.maps.layersCollection[layerIndex])))) {\n                var svgRect = this.maps.svgObject.getBoundingClientRect();\n                for (var i = 0; i < this.legendCollection.length; i++) {\n                    var currentData = this.legendCollection[i];\n                    var legendElement = querySelector(this.maps.element.id + '_Legend_Index_' + i, this.maps.element.id);\n                    var legendRect = legendElement.getBoundingClientRect();\n                    var rect = new Rect(Math.abs(legendRect.left - svgRect.left), Math.abs(legendRect.top - svgRect.top), legendRect.width, legendRect.height);\n                    fill = legendElement.getAttribute('fill');\n                    stroke = legend.shapeBorder.color;\n                    strokeWidth = legend.shapeBorder.width;\n                    if (!isNullOrUndefined(currentData['data'])) {\n                        var data = currentData['data'];\n                        for (var j = 0; j < data.length; j++) {\n                            if (dataIndex === data[j]['dataIndex'] && layerIndex === data[j]['layerIndex']) {\n                                this.renderInteractivePointer(legend, fill, stroke, id, strokeWidth, rect);\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (!(isNullOrUndefined(querySelector(id, this.maps.element.id)))) {\n                remove(querySelector(id, this.maps.element.id));\n            }\n        }\n    };\n    Legend.prototype.renderInteractivePointer = function (legend, fill, stroke, id, strokeWidth, rect) {\n        var path;\n        var pathOptions;\n        var locX;\n        var locY;\n        var height = 10;\n        var width = 10;\n        var direction = (legend.orientation === 'None') ? (legend.position === 'Top' || legend.position === 'Bottom')\n            ? 'Horizontal' : 'Vertical' : legend.orientation;\n        if (direction === 'Horizontal') {\n            if (!legend.invertedPointer) {\n                locX = rect.x + (rect.width / 2);\n                locY = rect.y;\n                path = ' M ' + locX + ' ' + locY + ' L ' + (locX - width) + ' ' + (locY - height) +\n                    ' L ' + (locX + width) + ' ' + (locY - height) + ' Z ';\n            }\n            else {\n                locX = rect.x + (rect.width / 2);\n                locY = rect.y + (rect.height);\n                path = ' M ' + locX + ' ' + locY + ' L ' + (locX - width) + ' ' + (locY + height) +\n                    ' L ' + (locX + width) + ' ' + (locY + height) + ' Z ';\n            }\n        }\n        else {\n            if (!legend.invertedPointer) {\n                locX = rect.x + (rect.width);\n                locY = rect.y + (rect.height / 2);\n                path = ' M ' + locX + ' ' + locY + ' L ' + (locX + width) + ' ' + (locY - height) +\n                    ' L ' + (locX + width) + ' ' + (locY + height) + ' z ';\n            }\n            else {\n                locX = rect.x;\n                locY = rect.y + (rect.height / 2);\n                path = ' M ' + locX + ' ' + locY + ' L ' + (locX - width) + ' ' + (locY - height) +\n                    ' L ' + (locX - width) + ' ' + (locY + height) + ' z ';\n            }\n        }\n        pathOptions = new PathOption(id, fill, strokeWidth, stroke, 1, '', path);\n        this.maps.svgObject.appendChild(this.maps.renderer.drawPath(pathOptions));\n    };\n    Legend.prototype.wireEvents = function (element) {\n        EventHandler.add(element, Browser.touchStartEvent, this.changeNextPage, this);\n    };\n    Legend.prototype.addEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.on(Browser.touchMoveEvent, this.interactiveHandler, this);\n        this.maps.on(Browser.touchEndEvent, this.interactiveHandler, this);\n        // this.maps.on(click, this.legendClick, this);\n    };\n    // private legendClick(targetEle: Element): void {\n    //     if (targetEle.parentElement.id.indexOf(this.maps.element.id + '_Legend_Index_') > -1) {\n    //         let mapElement: Element;\n    //         let data: object;\n    //         let legendIndex: number = parseFloat(targetEle.parentElement.id.substr((this.maps.element.id + '_Legend_Index_').length));\n    //         let selectedItem: object[] = this.legendCollection[legendIndex]['data'];\n    //         let childElement: Element;\n    //         let isVisible: boolean = selectedItem['_isVisible'];\n    //         if (this.maps.legendSettings.toggleVisibility) {\n    //             for (let i: number = 0; i < selectedItem.length; i++) {\n    //                 data = this.legendCollection[legendIndex]['data'][i];\n    //                 mapElement = querySelector(\n    //                     this.maps.element.id + '_LayerIndex_' + data['layerIndex'] +\n    //                     '_ShapeIndex_' + data['shapeIndex'] + '_dataIndex_' + data['dataIndex'],\n    //                     this.maps.element.id);\n    //                 if (isVisible) {\n    //                     mapElement.setAttribute('opacity', '0');\n    //                 } else {\n    //                     mapElement.setAttribute('opacity', '1');\n    //                 }\n    //             }\n    //             selectedItem['_isVisible'] = isVisible ? false : true;\n    //         } else if (this.maps.legendSettings.legendSelection && this.maps.selectionSettings.enable) {\n    //             this.selectShapes(targetEle, legendIndex);\n    //         }\n    //     }\n    // }\n    // private selectShapes(targetEle: Element, legendIndex: number): void {\n    //     let mapElement: Element;\n    //     let selectedElements: NodeListOf<Element>;\n    //     let selectedLength: number;\n    //     let childElement: HTMLElement = targetEle.parentElement.childNodes[0] as HTMLElement;\n    //     let legendSelected: boolean = targetEle.parentElement.id.indexOf('_Legend_Index_') &&\n    //         childElement.getAttribute('class') ? true : false;\n    //     if (!this.maps.selectionSettings.enableMultiSelect) {\n    //         selectedElements = querySelectorAll('selectionMapStyle', document.body);\n    //         selectedLength = selectedElements.length;\n    //         for (let i: number = 0; i < selectedLength; i++) {\n    //             removeClass(selectedElements[selectedElements.length - 1]);\n    //         }\n    //         if (!legendSelected) {\n    //             this.select(legendIndex, targetEle);\n    //         }\n    //     } else {\n    //         if (legendSelected) {\n    //             for (let data of this.legendCollection[legendIndex]['data']) {\n    //                 mapElement = querySelector(\n    //                     this.maps.element.id + '_LayerIndex_' + data['layerIndex'] +\n    //                     '_ShapeIndex_' + data['shapeIndex'] + '_dataIndex_' + data['dataIndex'],\n    //                     this.maps.element.id);\n    //                 removeClass(mapElement);\n    //             }\n    //             removeClass(childElement);\n    //         } else {\n    //             this.select(legendIndex, targetEle);\n    //         }\n    //     }\n    // }\n    // private select(legendIndex: number, targetEle: Element): void {\n    //     let mapElement: Element;\n    //     let childElement: HTMLElement = targetEle.parentElement.childNodes[0] as HTMLElement;\n    //     for (let i: number = 0; i < this.legendCollection.length; i++) {\n    //         if (i === legendIndex && !childElement.getAttribute('class')) {\n    //             for (let data of this.legendCollection[i]['data']) {\n    //                 mapElement = querySelector(\n    //                     this.maps.element.id + '_LayerIndex_' + data['layerIndex'] +\n    //                     '_ShapeIndex_' + data['shapeIndex'] + '_dataIndex_' + data['dataIndex'],\n    //                     this.maps.element.id);\n    //                 let eventArgs: IShapeSelectedEventArgs = {\n    //                     cancel: false,\n    //                     name: shapeSelected,\n    //                     fill: this.maps.selectionSettings.fill,\n    //                     opacity: this.maps.selectionSettings.opacity,\n    //                     border: this.maps.selectionSettings.border\n    //                 };\n    //                 if (!document.getElementById('selectionMap')) {\n    //                     document.body.appendChild(createStyle('selectionMap', 'selectionMapStyle', eventArgs));\n    //                 }\n    //                 mapElement.setAttribute('class', 'selectionMapStyle');\n    //             }\n    //             childElement.setAttribute('class', 'selectionMapStyle');\n    //         }\n    //     }\n    // }\n    Legend.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.off(Browser.touchMoveEvent, this.interactiveHandler);\n        this.maps.off(Browser.touchEndEvent, this.interactiveHandler);\n        // this.maps.off(click, this.legendClick);\n    };\n    Legend.prototype.getLegendData = function (layerIndex, dataIndex, data, dataPath, layerData, shapePropertyPath, value) {\n        var legendData = [];\n        if (Object.prototype.toString.call(layerData) === '[object Array]') {\n            for (var i = 0; i < layerData.length; i++) {\n                var shapeData = layerData[i];\n                if (shapeData['properties'][shapePropertyPath] === data[dataPath]) {\n                    legendData.push({\n                        layerIndex: layerIndex, shapeIndex: i, dataIndex: dataIndex,\n                        name: data[dataPath], value: value\n                    });\n                }\n            }\n        }\n        return legendData;\n    };\n    /**\n     * Get module name.\n     */\n    Legend.prototype.getModuleName = function () {\n        return 'Legend';\n    };\n    /**\n     * To destroy the legend.\n     * @return {void}\n     * @private\n     */\n    Legend.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n        this.removeEventListener();\n    };\n    return Legend;\n}());\nexport { Legend };\n","import { itemHighlight } from '../index';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getElementsByClassName, getElement, removeClass, createStyle, customizeStyle, getTargetElement } from '../utils/helper';\n/**\n * Highlight module class\n */\n/* tslint:disable:no-string-literal */\nvar Highlight = /** @class */ (function () {\n    function Highlight(maps) {\n        this.maps = maps;\n        this.addEventListener();\n    }\n    /**\n     * To bind events for highlight module\n     */\n    Highlight.prototype.addEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.on(Browser.touchMoveEvent, this.mouseMove, this);\n        this.maps.on(Browser.touchStartEvent, this.mouseMove, this);\n    };\n    /**\n     * To unbind events for highlight module\n     */\n    Highlight.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.off(Browser.touchMoveEvent, this.mouseMove);\n        this.maps.off(Browser.touchStartEvent, this.mouseMove);\n    };\n    /**\n     * Public method for highlight module\n     */\n    Highlight.prototype.addHighlight = function (layerIndex, name, enable) {\n        var targetEle = getTargetElement(layerIndex, name, enable, this.maps);\n        if (enable) {\n            this.mapHighlight(targetEle, null, null);\n        }\n        else {\n            removeClass(targetEle);\n        }\n    };\n    Highlight.prototype.mouseMove = function (e) {\n        var targetEle = e.target;\n        var layerIndex;\n        var isTouch = e.pointerType === 'touch' || e.pointerType === '2' || (e.type.indexOf('touch') > -1);\n        if ((targetEle.id.indexOf('LayerIndex') !== -1 || targetEle.id.indexOf('NavigationIndex') > -1) &&\n            targetEle.getAttribute('class') !== 'ShapeselectionMapStyle' && !isTouch) {\n            layerIndex = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n            var shapeData = void 0;\n            var data = void 0;\n            var shapeIn = void 0;\n            var dataIndex = void 0;\n            if (targetEle.id.indexOf('ShapeIndex') > -1) {\n                shapeIn = parseInt(targetEle.id.split('_ShapeIndex_')[1].split('_')[0], 10);\n                shapeData = this.maps.layers[layerIndex].shapeData['features'] ?\n                    this.maps.layers[layerIndex].shapeData['features'][shapeIn]['properties'] : null;\n                dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n                data = isNullOrUndefined(dataIndex) ? null : this.maps.layers[layerIndex].dataSource[dataIndex];\n                this.highlightSettings = this.maps.layers[layerIndex].highlightSettings;\n            }\n            else if (targetEle.id.indexOf('BubbleIndex') > -1) {\n                var bubble = parseInt(targetEle.id.split('_BubbleIndex_')[1].split('_')[0], 10);\n                dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n                data = this.maps.layers[layerIndex].bubbleSettings[bubble].dataSource[dataIndex];\n                this.highlightSettings = this.maps.layers[layerIndex].bubbleSettings[bubble].highlightSettings;\n            }\n            else if (targetEle.id.indexOf('MarkerIndex') > -1) {\n                var marker = parseInt(targetEle.id.split('_MarkerIndex_')[1].split('_')[0], 10);\n                dataIndex = parseInt(targetEle.id.split('_DataIndex_')[1].split('_')[0], 10);\n                data = this.maps.layers[layerIndex].markerSettings[marker].dataSource[dataIndex];\n                this.highlightSettings = this.maps.layers[layerIndex].markerSettings[marker].highlightSettings;\n            }\n            else {\n                var index = parseInt(targetEle.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                layerIndex = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n                shapeData = null;\n                data = {\n                    latitude: this.maps.layers[layerIndex].navigationLineSettings[index].latitude,\n                    longitude: this.maps.layers[layerIndex].navigationLineSettings[index].longitude\n                };\n                this.highlightSettings = this.maps.layers[layerIndex].navigationLineSettings[index].highlightSettings;\n            }\n            if (this.highlightSettings.enable) {\n                this.mapHighlight(targetEle, shapeData, data);\n            }\n            else {\n                var element = document.getElementsByClassName('highlightMapStyle')[0];\n                if (!isNullOrUndefined(element)) {\n                    removeClass(element);\n                    if (element.id.indexOf('NavigationIndex') > -1) {\n                        var index = parseInt(element.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                        var layerIndex_1 = parseInt(element.parentElement.id.split('_layerIndex_')[1].split('_')[0], 10);\n                        element.setAttribute('stroke-width', this.maps.layers[layerIndex_1].navigationLineSettings[index].width.toString());\n                        element.setAttribute('stroke', this.maps.layers[layerIndex_1].navigationLineSettings[index].color);\n                    }\n                }\n            }\n        }\n        else if (getElementsByClassName('highlightMapStyle').length > 0) {\n            targetEle = getElementsByClassName('highlightMapStyle')[0];\n            if (targetEle.id.indexOf('NavigationIndex') > -1) {\n                var index = parseInt(targetEle.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                layerIndex = parseInt(targetEle.parentElement.id.split('_layerIndex_')[1].split('_')[0], 10);\n                targetEle.setAttribute('stroke-width', this.maps.layers[layerIndex].navigationLineSettings[index].width.toString());\n                targetEle.setAttribute('stroke', this.maps.layers[layerIndex].navigationLineSettings[index].color);\n            }\n            removeClass(targetEle);\n        }\n    };\n    Highlight.prototype.mapHighlight = function (targetEle, shapeData, data) {\n        var eventArgs = {\n            opacity: this.highlightSettings.opacity,\n            fill: targetEle.id.indexOf('NavigationIndex') === -1 ? this.highlightSettings.fill : 'none',\n            border: { color: this.highlightSettings.border.color, width: this.highlightSettings.border.width },\n            name: itemHighlight,\n            target: targetEle.id,\n            cancel: false,\n            shapeData: shapeData,\n            data: data\n        };\n        this.maps.trigger(itemHighlight, eventArgs);\n        this.highlightMap(targetEle, eventArgs);\n    };\n    Highlight.prototype.highlightMap = function (targetEle, eventArgs) {\n        var parentElement;\n        var children;\n        if (targetEle.getAttribute('class') === 'highlightMapStyle') {\n            return;\n        }\n        else {\n            if (getElementsByClassName('highlightMapStyle').length > 0) {\n                var elem = getElementsByClassName('highlightMapStyle')[0];\n                removeClass(elem);\n                if (elem.id.indexOf('NavigationIndex') > -1) {\n                    var index = parseInt(elem.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                    var layerIndex = parseInt(elem.parentElement.id.split('_layerIndex_')[1].split('_')[0], 10);\n                    elem.setAttribute('stroke-width', this.maps.layers[layerIndex].navigationLineSettings[index].width.toString());\n                    elem.setAttribute('stroke', this.maps.layers[layerIndex].navigationLineSettings[index].color);\n                }\n            }\n            if (!getElement('highlightMap')) {\n                document.body.appendChild(createStyle('highlightMap', 'highlightMapStyle', eventArgs));\n            }\n            else {\n                customizeStyle('highlightMap', 'highlightMapStyle', eventArgs);\n            }\n            targetEle.setAttribute('stroke-width', eventArgs.border.width.toString());\n            targetEle.setAttribute('stroke', eventArgs.border.color);\n            targetEle.setAttribute('class', 'highlightMapStyle');\n        }\n    };\n    /**\n     * Get module name.\n     */\n    Highlight.prototype.getModuleName = function () {\n        return 'Highlight';\n    };\n    /**\n     * To destroy the highlight.\n     * @return {void}\n     * @private\n     */\n    Highlight.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n        this.removeEventListener();\n    };\n    return Highlight;\n}());\nexport { Highlight };\n","import { click, itemSelection } from '../index';\nimport { getElementsByClassName, getElement, createStyle, customizeStyle, removeClass, getTargetElement } from '../utils/helper';\nimport { isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\n/**\n * Selection module class\n */\nvar Selection = /** @class */ (function () {\n    /* tslint:disable:no-string-literal */\n    function Selection(maps) {\n        this.maps = maps;\n        this.addEventListener();\n    }\n    /**\n     * For binding events to selection module\n     */\n    Selection.prototype.addEventListener = function () {\n        if (!this.maps.isDestroyed) {\n            this.maps.on(click, this.mouseClick, this);\n            this.maps.on(Browser.touchEndEvent, this.mouseClick, this);\n        }\n    };\n    /**\n     * For removing events from selection modue\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.off(click, this.mouseClick);\n        this.maps.off(Browser.touchEndEvent, this.mouseClick);\n    };\n    Selection.prototype.mouseClick = function (targetEle) {\n        if (!isNullOrUndefined(targetEle['type']) && targetEle['type'].indexOf('touch') !== -1 && isNullOrUndefined(targetEle.id)) {\n            targetEle = targetEle['target'];\n        }\n        if (!isNullOrUndefined(targetEle.id) && (targetEle.id.indexOf('LayerIndex') > -1 || targetEle.id.indexOf('NavigationIndex') > -1)) {\n            var layerIndex = void 0;\n            var shapeData = void 0;\n            var data = void 0;\n            var shapeIndex = void 0;\n            var dataIndex = void 0;\n            layerIndex = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n            if (targetEle.id.indexOf('ShapeIndex') > -1) {\n                shapeIndex = parseInt(targetEle.id.split('_ShapeIndex_')[1].split('_')[0], 10);\n                shapeData = this.maps.layers[layerIndex].shapeData['features'] ?\n                    this.maps.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n                dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n                data = isNullOrUndefined(dataIndex) ? null : this.maps.layers[layerIndex].dataSource[dataIndex];\n                this.selectionsettings = this.maps.layers[layerIndex].selectionSettings;\n                this.selectionType = 'Shape';\n            }\n            else if (targetEle.id.indexOf('BubbleIndex') > -1) {\n                var bubbleIndex = parseInt(targetEle.id.split('_BubbleIndex_')[1].split('_')[0], 10);\n                dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n                data = this.maps.layers[layerIndex].bubbleSettings[bubbleIndex].dataSource[dataIndex];\n                this.selectionsettings = this.maps.layers[layerIndex].bubbleSettings[bubbleIndex].selectionSettings;\n                this.selectionType = 'Bubble';\n            }\n            else if (targetEle.id.indexOf('MarkerIndex') > -1) {\n                var markerIndex = parseInt(targetEle.id.split('_MarkerIndex_')[1].split('_')[0], 10);\n                dataIndex = parseInt(targetEle.id.split('_DataIndex_')[1].split('_')[0], 10);\n                data = this.maps.layers[layerIndex].markerSettings[markerIndex].dataSource[dataIndex];\n                this.selectionsettings = this.maps.layers[layerIndex].markerSettings[markerIndex].selectionSettings;\n                this.selectionType = 'Marker';\n            }\n            else {\n                var index = parseInt(targetEle.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                shapeData = null;\n                data = {\n                    latitude: this.maps.layers[layerIndex].navigationLineSettings[index].latitude,\n                    longitude: this.maps.layers[layerIndex].navigationLineSettings[index].longitude\n                };\n                this.selectionsettings = this.maps.layers[layerIndex].navigationLineSettings[index].selectionSettings;\n                this.selectionType = 'navigationline';\n            }\n            if (this.selectionsettings.enable) {\n                this.selectMap(targetEle, shapeData, data);\n            }\n        }\n    };\n    /**\n     * Public method for selection\n     */\n    Selection.prototype.addSelection = function (layerIndex, name, enable) {\n        var targetEle = getTargetElement(layerIndex, name, enable, this.maps);\n        if (enable) {\n            this.selectMap(targetEle, null, null);\n        }\n        else {\n            removeClass(targetEle);\n        }\n    };\n    /**\n     * Method for selection\n     */\n    Selection.prototype.selectMap = function (targetEle, shapeData, data) {\n        var parentElement;\n        var children;\n        var selectionsettings = this.selectionsettings;\n        var eventArgs = {\n            opacity: this.selectionsettings.opacity,\n            fill: this.selectionType !== 'navigationline' ? this.selectionsettings.fill : 'none',\n            border: { color: this.selectionsettings.border.color, width: this.selectionsettings.border.width },\n            name: itemSelection,\n            target: targetEle.id,\n            cancel: false,\n            shapeData: shapeData,\n            data: data\n        };\n        this.maps.trigger(itemSelection, eventArgs);\n        // if (this.maps.legendSettings.visible && !this.maps.legendSettings.toggleVisibility && this.maps.legendSettings.legendSelection) {\n        //     this.removeLegendSelection(this.maps.legendModule.legendCollection, targetEle);\n        // }\n        if (targetEle.getAttribute('class') === this.selectionType + 'selectionMapStyle') {\n            removeClass(targetEle);\n            if (targetEle.id.indexOf('NavigationIndex') > -1) {\n                var index = parseInt(targetEle.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                var layerIndex = parseInt(targetEle.parentElement.id.split('_layerIndex_')[1].split('_')[0], 10);\n                targetEle.setAttribute('stroke-width', this.maps.layers[layerIndex].navigationLineSettings[index].width.toString());\n                targetEle.setAttribute('stroke', this.maps.layers[layerIndex].navigationLineSettings[index].color);\n            }\n        }\n        else {\n            if (!this.selectionsettings.enableMultiSelect && getElementsByClassName(this.selectionType + 'selectionMapStyle').length > 0) {\n                var ele = getElementsByClassName(this.selectionType + 'selectionMapStyle')[0];\n                removeClass(ele);\n                if (ele.id.indexOf('NavigationIndex') > -1) {\n                    var index = parseInt(targetEle.id.split('_NavigationIndex_')[1].split('_')[0], 10);\n                    var layerIndex = parseInt(targetEle.parentElement.id.split('_layerIndex_')[1].split('_')[0], 10);\n                    ele.setAttribute('stroke-width', this.maps.layers[layerIndex].navigationLineSettings[index].width.toString());\n                    ele.setAttribute('stroke', this.maps.layers[layerIndex].navigationLineSettings[index].color);\n                }\n            }\n            if (!getElement(this.selectionType + 'selectionMap')) {\n                document.body.appendChild(createStyle(this.selectionType + 'selectionMap', this.selectionType + 'selectionMapStyle', eventArgs));\n            }\n            else {\n                customizeStyle(this.selectionType + 'selectionMap', this.selectionType + 'selectionMapStyle', eventArgs);\n            }\n            targetEle.setAttribute('stroke-width', eventArgs.border.width.toString());\n            targetEle.setAttribute('stroke', eventArgs.border.color);\n            targetEle.setAttribute('class', this.selectionType + 'selectionMapStyle');\n        }\n    };\n    /**\n     * Remove legend selection\n     */\n    // private removeLegendSelection(legendCollection: Object[], targetEle: Element): void {\n    //     let shape: Element;\n    //     if (!this.selectionsettings.enableMultiSelect) {\n    //        for (let i: number = 0; i < legendCollection.length; i++) {\n    //             for (let data of legendCollection[i]['data']) {\n    //                 shape = getElement(this.maps.element.id + '_LayerIndex_' + data['layerIndex'] +\n    //                            '_ShapeIndex_' + data['shapeIndex'] + '_dataIndex_' + data['dataIndex']);\n    //                 removeClass(shape);\n    //             }\n    //         }\n    //     }\n    // }\n    /**\n     * Get module name.\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'Selection';\n    };\n    /**\n     * To destroy the selection.\n     * @return {void}\n     * @private\n     */\n    Selection.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n        this.removeEventListener();\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { tooltipRender } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-svg-base';\nimport { createElement, Browser, isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { checkShapeDataFields, getMousePosition, Internalize } from '../utils/helper';\n/**\n * Map Tooltip\n */\nvar MapsTooltip = /** @class */ (function () {\n    function MapsTooltip(maps) {\n        this.maps = maps;\n        this.tooltipId = this.maps.element.id + '_mapsTooltip';\n        this.addEventListener();\n    }\n    /* tslint:disable:no-string-literal */\n    //tslint:disable:max-func-body-length\n    MapsTooltip.prototype.renderTooltip = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        var tootipArgs;\n        if (e.type.indexOf('touch') !== -1) {\n            this.isTouch = true;\n            touchArg = e;\n            pageX = touchArg.changedTouches[0].pageX;\n            pageY = touchArg.changedTouches[0].pageY;\n            target = touchArg.target;\n        }\n        else {\n            this.isTouch = e.pointerType === 'touch';\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        var formatFunction;\n        var value;\n        var option;\n        var currentData = '';\n        var targetId = target.id;\n        var item = {};\n        var tooltipEle;\n        var location;\n        var toolTipData = {};\n        var templateData = [];\n        var index = parseFloat(targetId.split('_')[2]);\n        var layer = this.maps.layersCollection[index];\n        var tooltipContent = [];\n        var markerFill;\n        location = getMousePosition(pageX, pageY, this.maps.svgObject);\n        var istooltipRender = (targetId.indexOf('_ShapeIndex_') > -1)\n            || (targetId.indexOf('_MarkerIndex_') > -1) || (targetId.indexOf('_BubbleIndex_') > -1);\n        if (istooltipRender) {\n            if (targetId.indexOf('_ShapeIndex_') > -1) {\n                option = layer.tooltipSettings;\n                var shape = parseInt(targetId.split('_')[4], 10);\n                if (isNullOrUndefined(layer.shapeData['features'])) {\n                    return;\n                }\n                var value_1 = layer.shapeData['features'][shape]['properties'];\n                index = checkShapeDataFields(layer.dataSource, value_1, layer.shapeDataPath, layer.shapePropertyPath);\n                templateData = layer.dataSource[index];\n                if (option.visible && ((!isNullOrUndefined(index) && !isNaN(index)) || (!isNullOrUndefined(value_1)))) {\n                    if (layer.tooltipSettings.format) {\n                        currentData = this.formatter(layer.tooltipSettings.format, layer.dataSource[index]);\n                    }\n                    else {\n                        currentData = ((!isNullOrUndefined(layer.dataSource)) && ((!isNullOrUndefined(index)))) ?\n                            this.formatValue(layer.dataSource[index][option.valuePath], this.maps) : value_1[layer.shapePropertyPath];\n                    }\n                }\n                //location.y = this.template(option, location);\n            }\n            else if (targetId.indexOf('_MarkerIndex_') > -1) {\n                var markerIdex = parseInt(targetId.split('_')[4], 10);\n                var dataIndex = parseInt(targetId.split('_')[6], 10);\n                var marker = layer.markerSettings[markerIdex];\n                option = marker.tooltipSettings;\n                templateData = marker.dataSource[dataIndex];\n                if (option.visible && !isNaN(markerIdex)) {\n                    if (marker.tooltipSettings.format) {\n                        currentData = this.formatter(marker.tooltipSettings.format, marker.dataSource[dataIndex]);\n                    }\n                    else {\n                        currentData = this.formatValue(marker.dataSource[dataIndex][marker.tooltipSettings.valuePath], this.maps);\n                    }\n                }\n                //location.y = this.template(option, location);\n            }\n            else if (targetId.indexOf('_BubbleIndex_') > -1) {\n                var bubbleIndex = parseInt(targetId.split('_')[4], 10);\n                var dataIndex = parseInt(targetId.split('_')[6], 10);\n                var bubble = layer.bubbleSettings[bubbleIndex];\n                option = bubble.tooltipSettings;\n                templateData = bubble.dataSource[dataIndex];\n                if (option.visible && !isNaN(dataIndex)) {\n                    if (bubble.tooltipSettings.format) {\n                        currentData = this.formatter(bubble.tooltipSettings.format, bubble.dataSource[dataIndex]);\n                    }\n                    else {\n                        currentData = this.formatValue(bubble.dataSource[dataIndex][bubble.tooltipSettings.valuePath], this.maps);\n                    }\n                }\n                //location.y = this.template(option, location);\n            }\n            if (document.getElementById(this.tooltipId)) {\n                tooltipEle = document.getElementById(this.tooltipId);\n            }\n            else {\n                tooltipEle = createElement('div', {\n                    id: this.maps.element.id + '_mapsTooltip',\n                    className: 'EJ2-maps-Tooltip',\n                    styles: 'position: absolute;pointer-events:none;'\n                });\n                document.getElementById(this.maps.element.id + '_Secondary_Element').appendChild(tooltipEle);\n            }\n            var content = void 0;\n            if (option.template !== null && Object.keys(option.template).length === 1) {\n                option.template = option.template[Object.keys(option.template)[0]];\n            }\n            templateData = this.setTooltipContent(option, templateData);\n            tootipArgs = {\n                cancel: false, name: tooltipRender,\n                options: {\n                    location: location, text: tooltipContent, data: templateData,\n                    textStyle: option.textStyle,\n                    template: option.template\n                },\n                maps: this.maps,\n                element: target, eventArgs: e\n            };\n            this.maps.trigger(tooltipRender, tootipArgs);\n            if (!tootipArgs.cancel && option.visible && !isNullOrUndefined(currentData)) {\n                tootipArgs.options['textStyle']['color'] = (this.maps.theme === 'Highcontrast') ? '#00000' : '#FFFFFF';\n                this.svgTooltip = new Tooltip({\n                    enable: true,\n                    header: '',\n                    data: tootipArgs.options['data'],\n                    template: tootipArgs.options['template'],\n                    content: [currentData.toString()],\n                    shapes: [],\n                    location: tootipArgs.options['location'],\n                    palette: [markerFill],\n                    areaBounds: this.maps.mapAreaRect,\n                    textStyle: tootipArgs.options['textStyle'],\n                    theme: this.maps.theme,\n                    fill: (this.maps.theme === 'Highcontrast') ? '#FFFFFF' : '#00000'\n                });\n                this.svgTooltip.appendTo(tooltipEle);\n            }\n            else {\n                this.removeTooltip();\n            }\n        }\n        else {\n            this.removeTooltip();\n        }\n    };\n    /**\n     * To get content for the current toolitp\n     */\n    MapsTooltip.prototype.setTooltipContent = function (options, templateData) {\n        var localData = extend({}, templateData, null, true);\n        if (this.maps.format && !isNaN(Number(localData[options.valuePath]))) {\n            localData[options.valuePath] = Internalize(this.maps, Number(localData[options.valuePath]));\n        }\n        else {\n            localData = Object.keys(localData).length ? localData : undefined;\n        }\n        return localData;\n    };\n    MapsTooltip.prototype.formatValue = function (value, maps) {\n        var formatValue;\n        var formatFunction;\n        if (maps.format && !isNaN(Number(value))) {\n            formatFunction = maps.intl.getNumberFormat({ format: maps.format, useGrouping: maps.useGroupingSeparator });\n            formatValue = formatFunction(Number(value));\n        }\n        else {\n            formatValue = value;\n        }\n        return formatValue;\n    };\n    /*private template(tooltip: TooltipSettingsModel, location: MapLocation): number {\n        location.y = (tooltip.template) ? location.y + 10 : location.y;\n        return location.y;\n    }*/\n    MapsTooltip.prototype.formatter = function (format, data) {\n        if (data === void 0) { data = {}; }\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            format = format.split('${' + key + '}').join(this.formatValue(data[key], this.maps));\n        }\n        return format;\n    };\n    MapsTooltip.prototype.mouseUpHandler = function (e) {\n        this.renderTooltip(e);\n        clearTimeout(this.clearTimeout);\n        this.clearTimeout = setTimeout(this.removeTooltip.bind(this), 2000);\n    };\n    MapsTooltip.prototype.removeTooltip = function () {\n        if (document.getElementsByClassName('EJ2-maps-Tooltip').length > 0) {\n            document.getElementsByClassName('EJ2-maps-Tooltip')[0].remove();\n        }\n    };\n    /**\n     * To bind events for tooltip module\n     */\n    MapsTooltip.prototype.addEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.on(Browser.touchMoveEvent, this.renderTooltip, this);\n        this.maps.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n        this.maps.on(Browser.touchCancelEvent, this.removeTooltip, this);\n    };\n    MapsTooltip.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        this.maps.off(Browser.touchMoveEvent, this.renderTooltip);\n        this.maps.off(Browser.touchEndEvent, this.mouseUpHandler);\n        this.maps.off(Browser.touchCancelEvent, this.removeTooltip);\n    };\n    /**\n     * Get module name.\n     */\n    MapsTooltip.prototype.getModuleName = function () {\n        return 'MapsTooltip';\n    };\n    /**\n     * To destroy the tooltip.\n     * @return {void}\n     * @private\n     */\n    MapsTooltip.prototype.destroy = function (maps) {\n        this.removeEventListener();\n    };\n    return MapsTooltip;\n}());\nexport { MapsTooltip };\n","import { doubleClick } from '../../index';\nimport { Point, getElementByID, PathOption, Rect, convertGeoToPoint, CircleOption, convertTileLatLongToPoint } from '../utils/helper';\nimport { RectOption, createTooltip, calculateScale, getTouchCenter, getTouches, targetTouches } from '../utils/helper';\nimport { MapLocation, zoomAnimate, smoothTranslate } from '../utils/helper';\nimport { isNullOrUndefined, EventHandler, Browser, remove, createElement } from '@syncfusion/ej2-base';\nimport { changeBorderWidth } from '../index';\n/**\n * Zoom module used to process the zoom for maps\n */\n/* tslint:disable:max-line-length */\nvar Zoom = /** @class */ (function () {\n    function Zoom(maps) {\n        this.isPanning = false;\n        this.mouseEnter = false;\n        this.isTouch = false;\n        this.rectZoomingStart = false;\n        this.pinchRect = new Rect(0, 0, 0, 0);\n        this.browserName = Browser.info.name;\n        this.isPointer = Browser.isPointer;\n        this.handled = false;\n        this.pinchFactor = 1;\n        this.startTouches = [];\n        this.maps = maps;\n        this.wheelEvent = this.browserName === 'mozilla' ? (this.isPointer ? 'mousewheel' : 'DOMMouseScroll') : 'mousewheel';\n        this.cancelEvent = this.isPointer ? 'pointerleave' : 'mouseleave';\n        this.selectionColor = this.maps.zoomSettings.selectionColor;\n        this.fillColor = this.maps.zoomSettings.color;\n        this.addEventListener();\n        this.groupElements = [];\n    }\n    /* tslint:disable:no-string-literal */\n    /**\n     * To perform zooming for maps\n     * @param position\n     * @param newZoomFactor\n     * @param type\n     */\n    Zoom.prototype.performZooming = function (position, newZoomFactor, type) {\n        var map = this.maps;\n        var prevLevel = map.tileZoomLevel;\n        var prevScale = map.scale;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        if ((!map.isTileMap) && (type === 'ZoomIn' ? newZoomFactor >= minZoom && newZoomFactor <= maxZoom : newZoomFactor >= minZoom)) {\n            var availSize = map.mapAreaRect;\n            var minBounds = map.baseMapRectBounds['min'];\n            var maxBounds = map.baseMapRectBounds['max'];\n            var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n            var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n            var point = map.translatePoint;\n            var translatePointX = point.x - (((availSize.width / prevScale) - (availSize.width / newZoomFactor)) / (availSize.width / position.x));\n            var translatePointY = point.y - (((availSize.height / prevScale) - (availSize.height / newZoomFactor)) / (availSize.height / position.y));\n            var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * newZoomFactor;\n            translatePointX = (currentHeight < map.mapAreaRect.height) ? (availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2)))) : translatePointX;\n            translatePointY = (currentHeight < map.mapAreaRect.height) ? (availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)))) : translatePointY;\n            map.translatePoint = new Point(translatePointX, translatePointY);\n            map.scale = newZoomFactor;\n        }\n        else if ((map.isTileMap) && (newZoomFactor >= minZoom && newZoomFactor <= maxZoom)) {\n            this.getTileTranslatePosition(prevLevel, newZoomFactor, position);\n            map.tileZoomLevel = newZoomFactor;\n            map.scale = Math.pow(2, newZoomFactor - 1);\n            map.mapLayerPanel.generateTiles(newZoomFactor, map.tileTranslatePoint);\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * map.scale)) / map.scale;\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * map.scale)) / map.scale;\n        }\n        this.applyTransform();\n        map.trigger(doubleClick, this);\n    };\n    Zoom.prototype.getTileTranslatePosition = function (prevLevel, currentLevel, position) {\n        var map = this.maps;\n        var tileDefaultSize = 256;\n        var bounds = getElementByID(this.maps.element.id).getBoundingClientRect();\n        var prevSize = Math.pow(2, prevLevel) * 256;\n        var totalSize = Math.pow(2, currentLevel) * 256;\n        var x = ((position.x - map.tileTranslatePoint.x) / prevSize) * 100;\n        var y = ((position.y - map.tileTranslatePoint.y) / prevSize) * 100;\n        map.tileTranslatePoint.x = (currentLevel === 1) ? (bounds.width / 2) - ((tileDefaultSize * 2) / 2) :\n            position.x - ((x * totalSize) / 100);\n        map.tileTranslatePoint.y = (currentLevel === 1) ? (bounds.height / 2) - ((tileDefaultSize * 2) / 2) :\n            position.y - ((y * totalSize) / 100);\n    };\n    Zoom.prototype.performRectZooming = function () {\n        var map = this.maps;\n        var size = map.availableSize;\n        var prevLevel = map.tileZoomLevel;\n        var zoomRect = this.zoomingRect;\n        if (zoomRect.height > 0 && zoomRect.width > 0) {\n            var x = this.zoomingRect.x + (this.zoomingRect.width / 2);\n            var y = this.zoomingRect.y + (this.zoomingRect.height / 2);\n            var zoomCalculationFactor = void 0;\n            if (!map.isTileMap) {\n                var scale = map.previousScale = map.scale;\n                zoomCalculationFactor = scale + Math.round((((size.width / zoomRect.width) + (size.height / zoomRect.height)) / 2));\n                var translatePoint = map.previousPoint = map.translatePoint;\n                var translatePointX = translatePoint.x - (((size.width / scale) - (size.width / zoomCalculationFactor)) / (size.width / x));\n                var translatePointY = translatePoint.y - (((size.height / scale) - (size.height / zoomCalculationFactor)) / (size.height / y));\n                map.translatePoint = new Point(translatePointX, translatePointY);\n                map.scale = zoomCalculationFactor;\n            }\n            else {\n                zoomCalculationFactor = prevLevel + (Math.round(prevLevel + (((size.width / zoomRect.width) + (size.height / zoomRect.height)) / 2)));\n                this.getTileTranslatePosition(prevLevel, zoomCalculationFactor, { x: x, y: y });\n                map.tileZoomLevel = zoomCalculationFactor;\n                map.mapLayerPanel.generateTiles(zoomCalculationFactor, map.tileTranslatePoint);\n                map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * Math.pow(2, zoomCalculationFactor))) /\n                    (Math.pow(2, zoomCalculationFactor));\n                map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * Math.pow(2, zoomCalculationFactor))) /\n                    (Math.pow(2, zoomCalculationFactor));\n                map.scale = (Math.pow(2, zoomCalculationFactor));\n            }\n            this.applyTransform(true);\n            this.zoomingRect = null;\n        }\n    };\n    Zoom.prototype.setInteraction = function (newInteraction) {\n        this.lastScale = 1;\n        this.interaction = newInteraction;\n    };\n    Zoom.prototype.updateInteraction = function () {\n        if (this.fingers === 2) {\n            this.setInteraction('zoom');\n        }\n        else {\n            this.setInteraction(null);\n        }\n    };\n    Zoom.prototype.performPinchZooming = function (e) {\n        var touches = null;\n        var map = this.maps;\n        var prevLevel = map.tileZoomLevel;\n        var availSize = map.mapAreaRect;\n        var scale = calculateScale(this.touchStartList, this.touchMoveList);\n        var touchCenter = getTouchCenter(getTouches(this.touchMoveList, this.maps));\n        var newScale = scale / this.lastScale;\n        this.lastScale = scale;\n        this.pinchFactor *= newScale;\n        this.pinchFactor = Math.min(this.maps.zoomSettings.maxZoom, Math.max(this.pinchFactor, this.maps.zoomSettings.minZoom));\n        var zoomCalculationFactor = this.pinchFactor;\n        var translatePointX;\n        var translatePointY;\n        if (!map.isTileMap) {\n            var minBounds = map.baseMapRectBounds['min'];\n            var maxBounds = map.baseMapRectBounds['max'];\n            var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n            var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n            var translatePoint = map.translatePoint;\n            var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomCalculationFactor;\n            var translatePointX_1 = translatePoint.x - (((availSize.width / map.scale) - (availSize.width / zoomCalculationFactor)) / (availSize.width / touchCenter.x));\n            var translatePointY_1 = translatePoint.y - (((availSize.height / map.scale) - (availSize.height / zoomCalculationFactor)) / (availSize.height / touchCenter.y));\n            // translatePointX = (currentHeight < map.mapAreaRect.height) ? (availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2)))) : translatePointX;\n            //translatePointY = (currentHeight < map.mapAreaRect.height) ? (availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)))) : translatePointY;\n            map.translatePoint = new Point(translatePointX_1, translatePointY_1);\n            map.scale = zoomCalculationFactor;\n        }\n        else {\n            var newTileFactor = zoomCalculationFactor;\n            this.getTileTranslatePosition(prevLevel, newTileFactor, { x: touchCenter.x, y: touchCenter.y });\n            map.tileZoomLevel = newTileFactor;\n            map.mapLayerPanel.generateTiles(newTileFactor, map.tileTranslatePoint);\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * Math.pow(2, newTileFactor))) /\n                (Math.pow(2, newTileFactor));\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * Math.pow(2, newTileFactor))) /\n                (Math.pow(2, newTileFactor));\n            map.scale = (Math.pow(2, newTileFactor));\n        }\n        this.applyTransform();\n    };\n    Zoom.prototype.drawZoomRectangle = function () {\n        var map = this.maps;\n        var down = this.mouseDownPoints;\n        var move = this.mouseMovePoints;\n        var x;\n        var y;\n        var width;\n        var height;\n        var border = { width: 1, color: '#009900' };\n        width = Math.abs(move.x - down.x);\n        height = Math.abs(move.y - down.y);\n        x = ((move.x > down.x) ? down.x : down.x - width);\n        y = ((move.y > down.y) ? down.y : down.y - height);\n        var elementRect = getElementByID(map.element.id).getBoundingClientRect();\n        if ((x > map.mapAreaRect.x && x < (map.mapAreaRect.x + map.mapAreaRect.width)) &&\n            (y > map.mapAreaRect.y) && (y < map.mapAreaRect.y + map.mapAreaRect.height)) {\n            this.zoomingRect = new Rect(x, y, width, height);\n            var rectSVGObject = map.renderer.createSvg({\n                id: map.element.id + '_Selection_Rect_Zooming',\n                width: map.availableSize.width,\n                height: map.availableSize.height,\n            });\n            var rectOption = new RectOption(map.element.id + '_ZoomRect', '#d3d3d3', border, 0.5, this.zoomingRect, 0, 0, '', '3');\n            rectSVGObject.appendChild(map.renderer.drawRectangle(rectOption));\n            getElementByID(map.element.id + '_Secondary_Element').appendChild(rectSVGObject);\n        }\n    };\n    /**\n     * To animate the zooming process\n     */\n    Zoom.prototype.animateTransform = function (element, animate, x, y, scale) {\n        var duration = this.currentLayer.animationDuration;\n        if (!animate || duration === 0) {\n            element.setAttribute('transform', 'scale(' + (scale) + ') translate( ' + x + ' ' + y + ' )');\n            return;\n        }\n        zoomAnimate(element, 0, duration, new MapLocation(x, y), scale, this.maps.mapAreaRect, this.maps);\n    };\n    Zoom.prototype.applyTransform = function (animate) {\n        var layerIndex;\n        this.templateCount = 0;\n        var scale = this.maps.scale;\n        var x = this.maps.translatePoint.x;\n        var y = this.maps.translatePoint.y;\n        var collection = [];\n        if (this.layerCollectionEle) {\n            for (var i = 0; i < this.layerCollectionEle.childElementCount; i++) {\n                var layerElement = this.layerCollectionEle.childNodes[i];\n                if (layerElement.tagName === 'g') {\n                    this.templateCount++;\n                    var index = parseFloat(layerElement.id.split('_')[2]);\n                    this.currentLayer = this.maps.layersCollection[index];\n                    var factor = this.maps.mapLayerPanel.calculateFactor(this.currentLayer);\n                    for (var j = 0; j < layerElement.childElementCount; j++) {\n                        var currentEle = layerElement.childNodes[j];\n                        if (!(currentEle.id.indexOf('_Markers_Group') > -1) && (!(currentEle.id.indexOf('_bubble_Group') > -1))\n                            && (!(currentEle.id.indexOf('_dataLableIndex_Group') > -1))) {\n                            if (this.maps.isTileMap && (currentEle.id.indexOf('_line_Group') > -1)) {\n                                currentEle.remove();\n                                layerElement.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer, this.maps.tileZoomLevel, index));\n                            }\n                            else {\n                                changeBorderWidth(currentEle, index, scale, this.maps);\n                                this.animateTransform(currentEle, animate, x, y, scale);\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_Markers_Group') > -1) {\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                this.markerTranslate(currentEle.childNodes[k], factor, x, y, scale, 'Marker', animate);\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_bubble_Group') > -1) {\n                            var childElement = void 0;\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                childElement = currentEle.childNodes[k];\n                                var bubbleTransform = childElement.getAttribute('transform');\n                                layerIndex = parseFloat(childElement.id.split('_')[2]);\n                                var bubleIndex = parseFloat(childElement.id.split('_')[4]);\n                                var dataIndex = parseFloat(childElement.id.split('_')[6]);\n                                for (var l = 0; l < this.maps.bubbleModule.bubbleCollection.length; l++) {\n                                    var bubbleCollection = this.maps.bubbleModule.bubbleCollection[l];\n                                    if (bubbleCollection['LayerIndex'] === layerIndex && bubbleCollection['BubbleIndex'] === bubleIndex &&\n                                        bubbleCollection['DataIndex'] === dataIndex) {\n                                        var centerX = bubbleCollection['center']['x'];\n                                        var centerY = bubbleCollection['center']['y'];\n                                        var currentX = ((centerX + x) * scale);\n                                        var currentY = ((centerY + y) * scale);\n                                        var duration = this.currentLayer.animationDuration;\n                                        if (!animate || duration === 0) {\n                                            childElement.setAttribute('transform', 'translate( ' + currentX + ' ' + currentY + ' )');\n                                        }\n                                        else {\n                                            smoothTranslate(childElement, 0, duration, new MapLocation(currentX, currentY));\n                                        }\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_dataLableIndex_Group') > -1) {\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                this.dataLabelTranslate(currentEle.childNodes[k], factor, x, y, scale, 'DataLabel', animate);\n                            }\n                        }\n                    }\n                }\n            }\n            if (!animate || this.currentLayer.animationDuration === 0) {\n                this.processTemplate(x, y, scale, this.maps);\n            }\n        }\n    };\n    /**\n     * To translate the layer template elements\n     * @private\n     */\n    Zoom.prototype.processTemplate = function (x, y, scale, maps) {\n        for (var i = 0; i < this.templateCount; i++) {\n            this.currentLayer = maps.layersCollection[i];\n            var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n            var markerTemplateElement = getElementByID(maps.element.id + '_LayerIndex_' +\n                i + '_Markers_Template_Group');\n            var datalabelTemplateElemement = getElementByID(maps.element.id + '_LayerIndex_'\n                + i + '_Label_Template_Group');\n            if ((!isNullOrUndefined(markerTemplateElement)) && markerTemplateElement.childElementCount > 0) {\n                for (var k = 0; k < markerTemplateElement.childElementCount; k++) {\n                    this.markerTranslate(markerTemplateElement.childNodes[k], factor, x, y, scale, 'Template');\n                }\n            }\n            if ((!isNullOrUndefined(datalabelTemplateElemement)) && datalabelTemplateElemement.childElementCount > 0) {\n                for (var k = 0; k < datalabelTemplateElemement.childElementCount; k++) {\n                    this.dataLabelTranslate(datalabelTemplateElemement.childNodes[k], factor, x, y, scale, 'Template');\n                }\n            }\n        }\n    };\n    Zoom.prototype.dataLabelTranslate = function (element, factor, x, y, scale, type, animate) {\n        if (animate === void 0) { animate = false; }\n        var labelCollection = this.maps.dataLabelModule.dataLabelCollections;\n        var layerIndex = parseFloat(element.id.split('_')[2]);\n        var shapeIndex = parseFloat(element.id.split('_')[4]);\n        var labelIndex = parseFloat(element.id.split('_')[6]);\n        var duration = this.currentLayer.animationDuration;\n        for (var l = 0; l < labelCollection.length; l++) {\n            var label = labelCollection[l];\n            if (label['layerIndex'] === layerIndex && label['shapeIndex'] === shapeIndex\n                && label['labelIndex'] === labelIndex) {\n                var labelX = label['location']['x'];\n                var labelY = label['location']['y'];\n                if (type === 'Template') {\n                    var layerEle = getElementByID(this.maps.element.id + '_Layer_Collections');\n                    labelX = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - labelX)) * scale);\n                    labelY = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - labelY)) * scale);\n                    var templateOffset = element.getBoundingClientRect();\n                    var layerOffset = layerEle.getBoundingClientRect();\n                    var elementOffset = element.parentElement.getBoundingClientRect();\n                    var x_1 = ((labelX) + (layerOffset.left - elementOffset.left) - (templateOffset.width / 2));\n                    var y_1 = ((labelY) + (layerOffset.top - elementOffset.top) - (templateOffset.height / 2));\n                    element.style.left = x_1 + 'px';\n                    element.style.top = y_1 + 'px';\n                }\n                else {\n                    labelX = ((labelX + x) * scale);\n                    labelY = ((labelY + y) * scale);\n                    if (!animate || duration === 0) {\n                        element.setAttribute('transform', 'translate( ' + labelX + ' ' + labelY + ' )');\n                    }\n                    else {\n                        smoothTranslate(element, 0, duration, new MapLocation(labelX, labelY));\n                    }\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerTranslate = function (element, factor, x, y, scale, type, animate) {\n        if (animate === void 0) { animate = false; }\n        var layerIndex = parseInt(element.id.split('_')[2], 10);\n        var markerIndex = parseInt(element.id.split('_')[4], 10);\n        var dataIndex = parseInt(element.id.split('_')[6], 10);\n        var layer = this.maps.layersCollection[layerIndex];\n        var marker = layer.markerSettings[markerIndex];\n        if (!isNullOrUndefined(marker) && !isNullOrUndefined(marker.dataSource) && !isNullOrUndefined(marker.dataSource[dataIndex])) {\n            var lng = marker.dataSource[dataIndex]['longitude'];\n            var lat = marker.dataSource[dataIndex]['latitude'];\n            var duration = this.currentLayer.animationDuration;\n            var location_1 = (this.maps.isTileMap) ? convertTileLatLongToPoint(new Point(lng, lat), this.maps.tileZoomLevel, this.maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, layer, this.maps);\n            if (this.maps.isTileMap) {\n                if (type === 'Template') {\n                    var templateOffset = element.getBoundingClientRect();\n                    element.style.left = (location_1.x - (templateOffset.width / 2)) + 'px';\n                    element.style.top = (location_1.y - (templateOffset.height / 2)) + 'px';\n                }\n                else {\n                    element.setAttribute('transform', 'translate( ' + location_1.x + ' ' + location_1.y + ' )');\n                }\n            }\n            else {\n                if (type === 'Template') {\n                    location_1.x = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - location_1.x)) * scale);\n                    location_1.y = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - location_1.y)) * scale);\n                    var templateOffset = element.getBoundingClientRect();\n                    var layerOffset = getElementByID(this.maps.element.id + '_Layer_Collections').getBoundingClientRect();\n                    var elementOffset = element.parentElement.getBoundingClientRect();\n                    element.style.left = (((location_1.x) + (layerOffset.left - elementOffset.left) -\n                        (templateOffset.width / 2)) + marker.offset.x) + 'px';\n                    element.style.top = (((location_1.y) + (layerOffset.top - elementOffset.top)\n                        - (templateOffset.height / 2)) + marker.offset.y) + 'px';\n                }\n                else {\n                    location_1.x = (((location_1.x + x) * scale) + marker.offset.x);\n                    location_1.y = (((location_1.y + y) * scale) + marker.offset.y);\n                    if (!animate || duration === 0) {\n                        element.setAttribute('transform', 'translate( ' + location_1.x + ' ' + location_1.y + ' )');\n                    }\n                    else {\n                        smoothTranslate(element, 0, duration, location_1);\n                    }\n                }\n            }\n        }\n    };\n    Zoom.prototype.panning = function () {\n        var map = this.maps;\n        var areaRect = map.mapAreaRect;\n        var down = this.mouseDownPoints;\n        var move = this.mouseMovePoints;\n        var scale = map.scale;\n        var translatePoint = map.translatePoint;\n        var x;\n        var y;\n        var transY;\n        var transX;\n        if (!map.isTileMap) {\n            var x_2 = translatePoint.x - (down.x - move.x) / scale;\n            var y_2 = translatePoint.y - (down.y - move.y) / scale;\n            var layerRect = getElementByID(map.element.id + '_Layer_Collections').getBoundingClientRect();\n            var elementRect = getElementByID(map.element.id + '_svg').getBoundingClientRect();\n            var panningXDirection = (((down.x - move.x) < 0 ? layerRect.left <= (elementRect.left + map.mapAreaRect.x) :\n                ((layerRect.left + layerRect.width) >= (elementRect.left + elementRect.width) + map.mapAreaRect.x + map.margin.left)));\n            var panningYDirection = (((down.y - move.y) < 0 ? layerRect.top <= (elementRect.top + map.mapAreaRect.y) :\n                ((layerRect.top + layerRect.height) >= (elementRect.top + elementRect.height) + map.mapAreaRect.y + map.margin.top)));\n            if (panningXDirection && panningYDirection) {\n                map.translatePoint = new Point(x_2, y_2);\n                this.applyTransform();\n            }\n        }\n        else if (this.maps.tileZoomLevel > 1) {\n            x = map.tileTranslatePoint.x - (down.x - move.x);\n            y = map.tileTranslatePoint.y - (down.y - move.y);\n            map.tileTranslatePoint.x = x;\n            map.tileTranslatePoint.y = y;\n            map.mapLayerPanel.generateTiles(map.tileZoomLevel, map.tileTranslatePoint);\n            map.translatePoint.x = (map.tileTranslatePoint.x - (down.x - move.x)) / map.scale;\n            map.translatePoint.y = (map.tileTranslatePoint.y - (down.y - move.y)) / map.scale;\n            this.applyTransform();\n        }\n        this.mouseDownPoints = this.mouseMovePoints;\n    };\n    Zoom.prototype.toolBarZooming = function (zoomFactor, type) {\n        var map = this.maps;\n        var prevLevel = map.tileZoomLevel;\n        var scale = map.previousScale = map.scale;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        var size = map.mapAreaRect;\n        zoomFactor = (type === 'ZoomOut') ? (Math.round(zoomFactor) === 1 ? 1 : zoomFactor) : zoomFactor;\n        if ((!map.isTileMap) && (type === 'ZoomIn' ? zoomFactor >= minZoom && zoomFactor <= maxZoom : zoomFactor >= minZoom)) {\n            var translatePoint = map.previousPoint = map.translatePoint;\n            var min = map.baseMapRectBounds['min'];\n            var max = map.baseMapRectBounds['max'];\n            var mapWidth = Math.abs(max['x'] - min['x']);\n            var mapHeight = Math.abs(min['y'] - max['y']);\n            var translatePointX = translatePoint.x - (((size.width / scale) - (size.width / zoomFactor)) / 2);\n            var translatePointY = translatePoint.y - (((size.height / scale) - (size.height / zoomFactor)) / 2);\n            var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomFactor;\n            translatePointX = (currentHeight < map.mapAreaRect.height) ? (size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2))))\n                : translatePointX;\n            translatePointY = (currentHeight < map.mapAreaRect.height) ? (size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2))))\n                : translatePointY;\n            map.translatePoint = new Point(translatePointX, translatePointY);\n            map.scale = zoomFactor;\n        }\n        else if ((map.isTileMap) && (zoomFactor >= minZoom && zoomFactor <= maxZoom)) {\n            var tileZoomFactor = zoomFactor;\n            map.scale = Math.pow(2, tileZoomFactor - 1);\n            map.tileZoomLevel = tileZoomFactor;\n            var position = { x: map.availableSize.width / 2, y: map.availableSize.height / 2 };\n            this.getTileTranslatePosition(prevLevel, tileZoomFactor, position);\n            map.mapLayerPanel.generateTiles(tileZoomFactor, map.tileTranslatePoint);\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * map.scale)) / map.scale;\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * map.scale)) / map.scale;\n        }\n        this.applyTransform(true);\n    };\n    /* tslint:disable:max-func-body-length */\n    Zoom.prototype.createZoomingToolbars = function () {\n        var map = this.maps;\n        this.toolBarGroup = map.renderer.createGroup({\n            id: map.element.id + '_Zooming_KitCollection',\n            opacity: 0.3,\n        });\n        var kitHeight = 16;\n        var kitWidth = 16;\n        var xSpacing = 15;\n        var ySpacing = 15;\n        var padding = 20;\n        var orientation = map.zoomSettings.toolBarOrientation;\n        var toolbarsCollection = map.zoomSettings.toolbars;\n        var shadowElement = '<filter id=\"chart_shadow\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>';\n        shadowElement += '<feOffset dx=\"-3\" dy=\"4\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"1\"/>';\n        shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n        var toolBarLength = map.zoomSettings.toolbars.length;\n        var toolWidth = (map.zoomSettings.toolBarOrientation === 'Horizontal') ? (toolBarLength * kitWidth) + (toolBarLength * padding) : (kitWidth * 2);\n        var toolHeight = (map.zoomSettings.toolBarOrientation === 'Horizontal') ? (kitHeight * 2) : (toolBarLength * kitHeight) + (toolBarLength * padding);\n        this.toolBarGroup.appendChild(map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', { color: 'transparent', width: 1 }, 1, new Rect(0, 0, toolWidth, toolHeight), 0, 0)));\n        var defElement = map.renderer.createDefs();\n        defElement.innerHTML = shadowElement;\n        this.toolBarGroup.appendChild(defElement);\n        var outerElement = map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', { color: 'transparent', width: 1 }, 0.1, new Rect(0, 0, toolWidth, toolHeight), 0, 0));\n        outerElement.setAttribute('filter', 'url(#chart_shadow)');\n        this.toolBarGroup.appendChild(outerElement);\n        var performFunction;\n        for (var i = 0; i < toolbarsCollection.length; i++) {\n            var toolbar_1 = toolbarsCollection[i];\n            var pathOptions = void 0;\n            var polyOptions = void 0;\n            this.currentToolbarEle = map.renderer.createGroup({\n                id: map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Group',\n                transform: 'translate( ' + xSpacing + ' ' + ySpacing + ' ) '\n            });\n            this.currentToolbarEle.setAttribute('class', 'e-maps-toolbar');\n            var fillColor = '';\n            var direction = '';\n            var polygonDirection = '';\n            switch (toolbar_1.toLowerCase()) {\n                case 'zoom':\n                    direction = 'M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,';\n                    direction += '5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571';\n                    direction = direction + 'L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, 1, this.fillColor, 1, null, direction + '4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z')));\n                    this.zoomElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'zoomin':\n                    direction = 'M 8, 0 L 8, 16 M 0, 8 L 16, 8';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Path', this.fillColor, 3, this.fillColor, 1, null, direction)));\n                    this.zoomInElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'zoomout':\n                    direction = 'M 0, 8 L 16, 8';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, 3, this.fillColor, 1, null, direction)));\n                    this.zoomOutElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'pan':\n                    direction = 'M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,';\n                    direction += '11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.selectionColor, 1, this.selectionColor, 1, null, direction)));\n                    this.panColor = this.selectionColor;\n                    this.panElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'reset':\n                    direction = 'M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,';\n                    direction += '1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,';\n                    direction += '13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, null, null, 1, null, direction + '3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z')));\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n            }\n            this.currentToolbarEle.appendChild(map.renderer.drawCircle(new CircleOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Rect', 'transparent', { color: this.fillColor, width: 1 }, 1, 8, 8, 16, '')));\n            xSpacing = (orientation === 'Horizontal') ? (xSpacing + (kitWidth + padding)) : xSpacing;\n            ySpacing = (orientation === 'Horizontal') ? ySpacing : (ySpacing + (kitHeight + padding));\n            this.toolBarGroup.appendChild(this.currentToolbarEle);\n        }\n    };\n    Zoom.prototype.performToolBarAction = function (e) {\n        var target = e.target;\n        e.stopImmediatePropagation();\n        var isTouch = e.pointerType === 'touch' || e.pointerType === '2' || (e.type.indexOf('touch') > -1);\n        var toolbar = target.id.split('_')[3];\n        if (isTouch) {\n            this.handled = true;\n            this.performZoomingByToolBar(toolbar);\n        }\n        else if ((e.type === 'mousedown' || e.type === 'pointerdown') && !this.handled) {\n            this.handled = false;\n            this.performZoomingByToolBar(toolbar);\n        }\n        else {\n            this.handled = false;\n        }\n    };\n    /**\n     *\n     * @private\n     */\n    Zoom.prototype.performZoomingByToolBar = function (type) {\n        var map = this.maps;\n        switch (type.toLowerCase()) {\n            case 'zoom':\n                this.panColor = this.fillColor;\n                this.zoomColor = this.selectionColor;\n                this.applySelection(this.zoomElements, this.selectionColor);\n                this.applySelection(this.panElements, this.fillColor);\n                break;\n            case 'pan':\n                this.panColor = this.selectionColor;\n                this.zoomColor = this.fillColor;\n                this.applySelection(this.zoomElements, this.fillColor);\n                this.applySelection(this.panElements, this.selectionColor);\n                break;\n            case 'zoomin':\n                this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) + 1, 'ZoomIn');\n                break;\n            case 'zoomout':\n                this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) - 1, 'ZoomOut');\n                break;\n            case 'reset':\n                this.toolBarZooming(1, 'ZoomOut');\n                this.applySelection(this.zoomElements, this.fillColor);\n                this.applySelection(this.panElements, this.selectionColor);\n        }\n        this.panningStyle(type.toLowerCase());\n    };\n    Zoom.prototype.panningStyle = function (toolbar) {\n        var svg = getElementByID(this.maps.element.id + '_svg');\n        if (toolbar === 'pan' || this.isPanning) {\n            svg.setAttribute('class', 'e-maps-panning');\n        }\n        else {\n            svg.setAttribute('class', '');\n        }\n    };\n    Zoom.prototype.applySelection = function (elements, color) {\n        if (!elements) {\n            return;\n        }\n        var childElement;\n        for (var i = 0; i < elements.childElementCount; i++) {\n            childElement = elements.childNodes[i];\n            if (childElement.tagName !== 'circle') {\n                childElement.setAttribute('fill', color);\n                childElement.setAttribute('stroke', color);\n            }\n        }\n    };\n    Zoom.prototype.showTooltip = function (e) {\n        var text = e.target.id.split('_')[3];\n        if (!this.isTouch) {\n            createTooltip('EJ2_Map_Toolbar_Tip', this.maps.getLocalizedLabel(text), (e.pageY + 10), (e.pageX + 10), '10px');\n        }\n    };\n    Zoom.prototype.removeTooltip = function () {\n        if (getElementByID('EJ2_Map_Toolbar_Tip')) {\n            remove(getElementByID('EJ2_Map_Toolbar_Tip'));\n        }\n    };\n    Zoom.prototype.alignToolBar = function () {\n        var map = this.maps;\n        var padding = 10;\n        var element = createElement('div', { id: map.element.id + '_ToolBar', styles: 'position:absolute;z-index:2' });\n        var rectSVGObject = map.renderer.createSvg({\n            id: map.element.id + '_Zooming_ToolBar', width: 10, height: 10,\n        });\n        rectSVGObject.appendChild(this.toolBarGroup);\n        element.appendChild(rectSVGObject);\n        if (getElementByID(map.element.id + '_Secondary_Element')) {\n            getElementByID(map.element.id + '_Secondary_Element').appendChild(element);\n        }\n        var toolBarSize = this.toolBarGroup.getBoundingClientRect();\n        rectSVGObject.setAttribute('height', (toolBarSize.height + padding / 2).toString());\n        rectSVGObject.setAttribute('width', (toolBarSize.width + padding / 2).toString());\n        var size = map.mapAreaRect;\n        var x = 0;\n        var y = 0;\n        switch (map.zoomSettings.verticalAlignment) {\n            case 'Near':\n                y = size.y;\n                break;\n            case 'Center':\n                y = (size.height / 2) - (toolBarSize.height / 2);\n                break;\n            case 'Far':\n                y = (size.height - toolBarSize.height) - padding;\n                break;\n        }\n        switch (map.zoomSettings.horizontalAlignment) {\n            case 'Near':\n                x = size.x;\n                break;\n            case 'Center':\n                x = (size.width / 2) - (toolBarSize.width / 2);\n                break;\n            case 'Far':\n                x = (size.width - toolBarSize.width) - padding;\n                break;\n        }\n        element.style.left = x + 'px';\n        element.style.top = y + 'px';\n        var color = this.maps.zoomSettings.highlightColor;\n        var css = ' .e-maps-toolbar:hover > circle { stroke:' + color + '; } .e-maps-toolbar:hover > path { fill: ' + color + ' ;  stroke: ' + color + '; }';\n        var style = document.createElement('style');\n        style.appendChild(document.createTextNode(css));\n        element.appendChild(style);\n    };\n    /**\n     * To bind events.\n     * @return {void}\n     * @private\n     */\n    Zoom.prototype.wireEvents = function (element, process) {\n        EventHandler.add(element, Browser.touchStartEvent, process, this);\n        EventHandler.add(element, 'mouseover', this.showTooltip, this);\n        EventHandler.add(element, 'mouseout', this.removeTooltip, this);\n    };\n    Zoom.prototype.mapMouseWheel = function (e) {\n        if (this.maps.zoomSettings.enable && this.maps.zoomSettings.mouseWheelZoom) {\n            var position = this.getMousePosition(e.pageX, e.pageY);\n            var map = this.maps;\n            var size = map.availableSize;\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            var delta = 1;\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                e.preventDefault();\n                var direction = (this.browserName === 'mozilla' && !this.isPointer) ?\n                    -(e.detail) / 3 > 0 ? 'ZoomIn' : 'ZoomOut' : (e.wheelDelta / 120) > 0 ? 'ZoomIn' : 'ZoomOut';\n                if (direction === 'ZoomIn') {\n                    this.performZooming(position, (value + delta), direction);\n                }\n                else {\n                    this.performZooming(position, (value - delta), direction);\n                }\n            }\n        }\n    };\n    Zoom.prototype.doubleClick = function (e) {\n        var pageX = e.pageX;\n        var pageY = e.pageY;\n        var target = e.target;\n        if (this.maps.zoomSettings.enable && this.maps.zoomSettings.doubleClickZoom) {\n            var position = this.getMousePosition(pageX, pageY);\n            var map = this.maps;\n            var size = map.availableSize;\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                this.performZooming(position, (value + 1), 'ZoomIn');\n            }\n        }\n    };\n    Zoom.prototype.mouseDownHandler = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touches = null;\n        var element = e.target;\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n            touches = e.touches;\n            target = e.target;\n            pageX = touches[0].clientX;\n            pageY = touches[0].clientY;\n        }\n        else {\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        this.isPanning = this.panColor === this.selectionColor ? true : this.zoomColor !== this.selectionColor;\n        this.rectZoomingStart = ((!this.isPanning) && this.maps.zoomSettings.enable);\n        this.mouseDownPoints = this.getMousePosition(pageX, pageY);\n        if (this.isTouch) {\n            this.firstMove = true;\n            this.pinchFactor = this.maps.scale;\n            this.fingers = touches.length;\n        }\n    };\n    Zoom.prototype.mouseMoveHandler = function (e) {\n        var pageX;\n        var pageY;\n        var map = this.maps;\n        var touchArg;\n        var target;\n        var touches = null;\n        var zoom = this.maps.zoomSettings;\n        if (e.type === 'touchmove') {\n            this.isTouch = true;\n            target = e.target;\n            touches = e.touches;\n            pageX = touches[0].clientX;\n            pageY = touches[0].clientY;\n        }\n        else {\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (getElementByID(map.element.id + '_Zooming_KitCollection')) {\n            if (target.id.indexOf('_Zooming_') > -1) {\n                getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', '1');\n            }\n            else {\n                getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', '0.3');\n            }\n        }\n        if (this.isTouch) {\n            if (this.maps.zoomSettings.pinchZooming) {\n                if (this.firstMove && touches.length === 2) {\n                    this.rectZoomingStart = false;\n                    this.updateInteraction();\n                    this.touchStartList = targetTouches(e);\n                }\n                else if (this.touchStartList.length === 2 && touches.length === 2) {\n                    this.touchMoveList = targetTouches(e);\n                    e.preventDefault();\n                    this.rectZoomingStart = false;\n                    this.performPinchZooming(e);\n                }\n                this.firstMove = false;\n            }\n        }\n        this.mouseMovePoints = this.getMousePosition(pageX, pageY);\n        var targetId = e.target['id'];\n        var targetEle = e.target;\n        if (zoom.enable && this.isPanning) {\n            e.preventDefault();\n            this.maps.element.style.cursor = 'pointer';\n            this.panning();\n        }\n        if (this.isTouch ? (touches.length === 1 && this.rectZoomingStart) : this.rectZoomingStart) {\n            e.preventDefault();\n            this.drawZoomRectangle();\n        }\n    };\n    Zoom.prototype.mouseUpHandler = function (e) {\n        var map = this.maps;\n        this.rectZoomingStart = false;\n        this.isPanning = false;\n        this.isTouch = false;\n        this.touchStartList = [];\n        this.touchMoveList = [];\n        this.lastScale = 1;\n        this.maps.element.style.cursor = 'auto';\n        var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n        if (zoomRectElement && this.maps.zoomSettings.enable) {\n            remove(zoomRectElement);\n            this.performRectZooming();\n        }\n    };\n    Zoom.prototype.mouseCancelHandler = function (e) {\n        this.isPanning = false;\n        this.isTouch = false;\n        this.rectZoomingStart = false;\n        var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n        if (zoomRectElement && this.maps.zoomSettings.enable) {\n            remove(zoomRectElement);\n            this.performRectZooming();\n        }\n    };\n    /**\n     * To handle the click event for maps.\n     * @param e\n     */\n    Zoom.prototype.click = function (e) {\n        var map = this.maps;\n        if (map.zoomSettings.zoomOnClick && e.target.id.indexOf('_ShapeIndex_') > -1 && !map.zoomSettings.doubleClickZoom\n            && (this.zoomColor === this.selectionColor && this.zoomElements)) {\n            var bounds = e.target.getBBox();\n            var boundwidth = bounds.width;\n            var boundHeight = bounds.height;\n            var layerScale = void 0;\n            var baseScale = 1;\n            var availWidth = map.availableSize.width;\n            var availHeight = map.availableSize.height;\n            layerScale = ((availWidth - 100) / (availHeight - 100) > boundwidth / boundHeight) ? (availHeight - 100) / boundHeight :\n                (availWidth - 100) / boundwidth;\n            var zoomFactor = (layerScale - baseScale + 1);\n            var leftPos = ((availWidth / 2) - ((boundwidth * map.scale) / 2)) / layerScale;\n            var topPos = ((availHeight / 2) - ((boundHeight * map.scale) / 2)) / layerScale;\n            var translatePointX = (-bounds.x) + leftPos;\n            var translatePointY = (-bounds.y) + topPos;\n            map.previousScale = map.scale;\n            map.previousPoint = map.translatePoint;\n            map.scale = layerScale;\n            map.translatePoint = { x: translatePointX, y: translatePointY };\n            this.applyTransform(true);\n        }\n    };\n    Zoom.prototype.getMousePosition = function (pageX, pageY) {\n        var map = this.maps;\n        var elementRect = map.element.getBoundingClientRect();\n        var pageXOffset = map.element.ownerDocument.defaultView.pageXOffset;\n        var pageYOffset = map.element.ownerDocument.defaultView.pageYOffset;\n        var clientTop = map.element.ownerDocument.documentElement.clientTop;\n        var clientLeft = map.element.ownerDocument.documentElement.clientLeft;\n        var positionX = elementRect.left + pageXOffset - clientLeft;\n        var positionY = elementRect.top + pageYOffset - clientTop;\n        return new Point((pageX - positionX), (pageY - positionY));\n    };\n    Zoom.prototype.addEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.maps.element, this.wheelEvent, this.mapMouseWheel, this);\n        EventHandler.add(this.maps.element, 'click', this.click, this);\n        EventHandler.add(this.maps.element, 'dblclick', this.doubleClick, this);\n        this.maps.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n        this.maps.on(Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.maps.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n        EventHandler.add(this.maps.element, this.cancelEvent, this.mouseCancelHandler, this);\n    };\n    Zoom.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.maps.element, this.wheelEvent, this.mapMouseWheel);\n        EventHandler.remove(this.maps.element, 'click', this.click);\n        EventHandler.remove(this.maps.element, 'dblclick', this.doubleClick);\n        this.maps.off(Browser.touchMoveEvent, this.mouseMoveHandler);\n        this.maps.off(Browser.touchStartEvent, this.mouseDownHandler);\n        this.maps.off(Browser.touchEndEvent, this.mouseUpHandler);\n        this.maps.off(this.cancelEvent, this.mouseCancelHandler);\n    };\n    /**\n     * Get module name.\n     */\n    Zoom.prototype.getModuleName = function () {\n        return 'Zoom';\n    };\n    /**\n     * To destroy the zoom.\n     * @return {void}\n     * @private\n     */\n    Zoom.prototype.destroy = function (maps) {\n        this.removeEventListener();\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Zoom;\n}());\nexport { Zoom };\n"],"names":["stringToNumber","value","containerSize","undefined","indexOf","parseInt","calculateSize","maps","containerWidth","element","clientWidth","containerHeight","clientHeight","availableSize","Size","width","height","isDevice","Math","min","window","innerWidth","innerHeight","createSvg","renderer","SvgRenderer","id","svgObject","getMousePosition","pageX","pageY","elementRect","getBoundingClientRect","pageXOffset","ownerDocument","defaultView","pageYOffset","clientTop","documentElement","clientLeft","positionX","left","positionY","top","MapLocation","degreesToRadians","deg","PI","radiansToDegrees","radian","convertGeoToPoint","latitude","longitude","factor","layer","mapModel","x","y","lat","lng","temp","mapSize","mapAreaRect","longitudeMinMax","baseMapBounds","latitudeMinMax","latRadian","lngRadian","type","projectionType","size","pow","isNullOrUndefined","geometryType","abs","max","pixelOrigin","Point","sinY","calculateBound","sin","log","aitoff","tan","sqrt","cos","delta","Infinity","i","roundTo","xToCoordinate","yToCoordinate","convertTileLatLongToPoint","center","zoomLevel","tileTranslatePoint","isMapCoordinates","sinLatitude","pixelX","pixelY","mapObject","val","totalSize","baseSize","round","cosy","sincia","sinci","acos","a","b","c","measureText","text","font","htmlObject","document","getElementById","createElement","body","appendChild","innerHTML","style","position","fontSize","fontWeight","fontStyle","fontFamily","visibility","whiteSpace","lineHeight","renderTextElement","options","color","parent","isMinus","tspanElement","renderOptions","fill","font-size","font-style","font-family","font-weight","text-anchor","anchor","transform","opacity","dominant-baseline","baseLine","length","createText","len","createTSpan","convertElement","markerId","data","index","mapObj","childElement","styles","templateHtml","properties","Object","keys","toLowerCase","replace","RegExp","toString","convertElementFromLabel","labelId","childElementCount","outerHTML","appendShape","shape","drawCircle","drawRectangle","calculateShapes","location","markerEle","tempGroup","drawBalloon","d","drawPath","balloon","setAttribute","g","createGroup","checkShapeDataFields","dataSource","dataPath","propertyPath","filter","points","start","end","pointObject","point","push","findMidPointOfPolygon","startX","startY","startX1","startY1","sum","xSum","ySum","rightMinPoint","rightMaxPoint","leftMinPoint","leftMaxPoint","bottomMinPoint","bottomMaxPoint","topMinPoint","topMaxPoint","rightMin","rightMax","leftMin","leftMax","topMax","topMin","bottomMax","bottomMin","isCustomPath","layerData","customPath","prototype","call","forEach","textTrim","maxWidth","label","substring","findPosition","alignment","textSize","removeElement","remove","getTranslate","animate","scaleFactor","zoomFactor","zoomSettings","baseMapRectBounds","mapWidth","mapHeight","centerPosition","parseFloat","toFixed","leftPosition","topPosition","mapLayerPanel","calculateFactor","scale","getElementByID","Internalize","formatFunction","intl","getNumberFormat","format","useGrouping","useGroupingSeparator","getTemplateFunction","template","templateFn","querySelectorAll","templateComplier","querySelector","trim","e","getElement","getShapeData","targetId","map","layerIndex","split","shapeIndex","layers","shapeData","shapeDataPath","shapePropertyPath","triggerShapeEvent","selection","eventName","eventArgs","cancel","name","border","target","trigger","getElementsByClassName","className","args","elementSelector","targetEle","getTargetElement","enable","createStyle","customizeStyle","removeClass","removeAttribute","elementAnimate","delay","duration","ele","radius","centerX","centerY","getAttribute","Animation","progress","timeStamp","model","event","animationComplete","timeout","showTooltip","areaWidth","areaHeight","isTouch","tooltip","str","demo","size1","wordWrap","setTimeout","createTooltip","drawSymbol","url","calculateLegendShapes","functionName","renderOption","path","locX","locY","merge","rx","ry","cx","cy","xValue","yValue","concat","href","getElementOffset","parentElement","offsetWidth","offsetHeight","removeChild","changeBorderWidth","childNode","l","childNodes","changeNavaigationLineWidth","currentStroke","layersCollection","shapeSettings","node","m","tagName","navigationLineSettings","targetTouches","touches","calculateScale","startTouches","endTouches","startDistance","getDistance","getTouches","rect","posTop","posLeft","Array","slice","touch","getTouchCenter","reduce","zoomAnimate","previousLocation","previousPoint","preScale","previousScale","diffScale","currentLocation","currentScale","slopeFactor","slope","slopeIntersection","slopeValue","intercept","horizontalDifference","verticalDifference","translatePoint","zoomModule","processTemplate","process","clearAnimation","_this","this","startAnimation","timestamp","requestAnimationFrame","cancelAnimationFrame","smoothTranslate","diffx","diffy","Theme","__extends","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","MinMax","GeoLocation","TextOption","PathOption","dashArray","stroke","RectOption","_super","CircleOption","r","PolygonOption","PolylineOption","LineOption","line","x1","y1","x2","y2","Line","Rect","PatternOptions","patternUnits","patternContentUnits","patternTransform","MapAjax","async","contentType","sendData","dataOptions","mapsTitleFont","mapsSubTitleFont","tooltipLabelFont","legendTitleFont","legendLabelFont","dataLabelFont","FabricTheme","BootstrapTheme","HighContrastTheme","__decorate","decorators","key","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Annotation","apply","Property","ChildProperty","Arrow","Font","Border","TooltipSettings","Complex","Margin","ColorMappingSettings","SelectionSettings","HighlightSettings","NavigationLineSettings","showArrow","BubbleSettings","Collection","CommonTitleSettings","SubTitleSettings","TitleSettings","ZoomSettings","LegendSettings","DataLabelSettings","ShapeSettings","MarkerSettings","LayerSettings","isBaseLayer","Tile","src","MapsAreaSettings","click","tooltipRender","shapeSelected","layerRendering","shapeRendering","markerRendering","markerClick","markerMouseMove","dataLabelRendering","bubbleRendering","bubbleClick","bubbleMouseMove","legendRendering","annotationRendering","itemSelection","itemHighlight","beforePrint","BingMap","getBingMap","tile","language","imageUrl","subDomains","subDomain","quadKey","tileZoomLevel","maxZoom","digit","mask","substr","ColorMapping","getShapeColorMapping","equalValue","colorValuePath","valuePath","colorValue","Number","shapeColor","getColorByValue","colorMapping","isNaN","_i","colorMapping_1","colorMap","from","to","LayerPanel","ajaxProcessCount","ajaxModule","Ajax","ajaxResponse","measureLayerPanel","layerCollection","areaRect","secondaryEle","isTileMap","tileSvgObject","layerGroup","clip-path","clipRectElement","drawClipPath","currentLayer","processLayers","renderTileLayer","panel","bing","currentFactor","panTileMap","generateTiles","markerModule","markerRender","layerObject","navigationLineModule","renderNavigation","translateLayerElements","layerType","proxy_1","bing_1","bingMapType","ajax","onSuccess","json","resource","JSON","parse","send","featureData","bbox","calculateRectBounds","calculatePathCollection","bubbleCalculation","bubbleSettings","range","bubbledata","renderData","groupElements","rectBounds","geometryData","coords","generatePoints","colors","palette","theme","labelTemplateEle","_loop_1","k","currentShapeData","this_1","pathOptions","polyLineOptions","circleOptions","groupElement","shapeID","drawingType","i_1","pathEle","generateMultiPolygonPath","lineData","drawPolyline","pointData","circleRadius","tabIndex","bubbleG","bubbleModule","bubble_1","length_1","_loop_2","j","this_2","bubbleData","renderBubble","group","dataLabelModule","dataLabelSettings","visible","renderLabel","bubbleIndex","dataIndex","coordinates","newData","calculatePolygonBox","multiPolygonDatas","property","horFactor","verFactor","bounds","layerElement","animationDuration","translate","location_1","baseTranslatePoint","baseScale","obj","calculateRectBox","currentPoint","currentCoords","userLang","locale","tiles","xcount","ycount","baseLayer","baseLayerIndex","urlTemplate","endY","endX","proxTiles","extend","_a","_b","proxTiles_1","baseTile","subtile","arrangeTiles","htmlString","templateCompiler","tileElment","tiles_1","factorX","factorY","level","Annotations","renderAnnotationElements","secondaryID","annotationGroup","annotations","annotation","content","createAnnotationTemplate","annotationIndex","templateElement","availSize","zIndex","argsData","offset","cloneNode","annotationXValue","annotationYValue","horizontalAlignment","verticalAlignment","getModuleName","destroy","ExportUtils","control","print","elements","printWindow","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","htmlContent","getHTMLContent","div","Element","export","fileName","orientation","attrs","isDownload","Browser","userAgent","PdfPageOrientation","Landscape","svgData","URL","createObjectURL","Blob","XMLSerializer","serializeToString","triggerDownload","image_1","Image","ctx_1","getContext","onload","drawImage","revokeObjectURL","document_1","PdfDocument","imageString","toDataURL","pageSettings","pages","add","graphics","PdfBitmap","save","download","toLocaleLowerCase","dispatchEvent","MouseEvent","view","bubbles","cancelable","Maps","baseTileTranslatePoint","getLocalizedLabel","localeObject","getConstant","preRender","initPrivateVariable","themeEffect","unWireEVents","createSVG","wireEVents","setCulture","setTextStyle","setBackgroundValue","titleSettings","textStyle","subtitleSettings","legendSettings","setLabelFont","background","mapsArea","layers_1","render","findBaseAndSubLayers","createSecondaryElement","addTabIndex","renderBorder","renderTitle","renderArea","processRequestJsonData","serverProcess","request","response","queryModule","dataModule","DataManager","query","Query","executeQuery","then","processResponseJsonData","processAjaxRequest","localAjax","processType","dataType","renderMap","collection","legendModule","renderLegend","createTile","createZoomingToolbars","arrangeTemplate","annotationsModule","zoomingChange","description","layerCollectionEle","tileRect","tileSvgRect","markerTemplateElements","templateGroupEle","toolBarGroup","alignToolBar","applyTransform","secondaryElement","pointerEvents","templateElements","layerOffset","elementOffset","currentTemplate","templateOffset","mainLayer","parentRect","top_1","baseIndex","mainLayers","subLayers","subLayer","subLayerIndex","borderElement","borderRect","title","groupEle","margin","right","trimmedTitle","elementSize","titleBounds","bottom","removeSvg","firstChild","hasChildNodes","parentNode","EventHandler","mapsOnClick","mapsOnDoubleClick","touchStartEvent","mouseDownOnMap","touchMoveEvent","mouseMoveOnMap","touchEndEvent","mouseEndOnMap","addEventListener","mapsOnResize","bind","removeEventListener","clientX","clientY","selectionSettings","notify","touchArg","changedTouches","pointerType","titleTooltip","preventDefault","markerMove","bubbleMove","onMouseMove","textContent","previousSize","currentSize","clearTimeout","classList","contains","refreshing","zoomByPosition","performZooming","addLayer","refresh","removeLayer","splice","addMarker","marker","currentMarker","markerSettings","Internationalization","setLocaleConstants","L10n","defaultLocalConstants","ZoomIn","Zoom","ZoomOut","Pan","Reset","getPersistData","onPropertyChanged","newProp","oldProp","requiredModules","modules","isVisible","findVisibleLayers","annotationEnable","isBubbleVisible","member","highlight","minZoom","isMarkersVisible","isDataLabelVisible","isNavigationVisible","getBubbleVisible","isLayerVisible","isBubblevisible","istooltipVisible","isSelection","isHighlight","markers","layers_2","navigationLine_1","navigation","highlightSettings","markers_1","tooltipSettings","_c","bubbles_1","bubble","Event","NotifyPropertyChanges","Component","Bubble","bubbleCollection","bubbleValue","getRatioOfBubble","minRadius","maxRadius","shapePoints","midIndex","pointsLength","currentLength","layer_1","getPoints","bubbleElement","bubbleType","circle","rectangle","LayerIndex","BubbleIndex","DataIndex","transPoint","animationDelay","current","minValue","maxValue","bubbleRadius","getbubble","Marker","trackElements","markerSVGObject","markerTemplateEle","markerIndex","markerData","markerID","markerElement","children","shapeCustom","borderColor","borderWidth","markerPoint","rectOptions","getMarker","DataLabel","intersect","rightWidth","leftWidth","heightTop","heightBottom","dataLabelCollections","getDataLabel","labelPath","shapeName","labelTemplateElement","datasrcObj","dataLabel","labelpath","shapePoint","textLocation","shapes","getPoint","localData","eventargs","datalabel","trimmedLable","location1","xpositionEnds","xpositionStart","labelElement","smartLabelMode","intersectionAction","border_1","labelIndex","NavigationLine","navigationEle","angle","pathOption","direction","arrowColor","arrowSize","arrowSettings","arrowPosition","startArrow","endArrow","offSet","offSetValue","navigationGroup","arcId_1","radius_1","convertRadius","divide","triId","defElement","createDefs","createElementNS","point1","point2","value1","value2","Legend","legendBorderRect","totalPages","page","currentPage","interactiveLocation","legendItemRect","heightIncrement","widthIncrement","textMaxWidth","calculateLegendBounds","drawLegend","legend","legendCollection","topPadding","legendRenderingCollections","getLegends","getMarkersLegendCollections","legendTitle","titleTextStyle","titleStyle","legendItemStartX_1","legendItemStartY_1","legendMode","mode","shapeX","shapeY","textX","textY","shapePadding","shapeHeight","shapeWidth","shapeLocation","labelAction","labelDisplayMode","arrangement","legendWidth","legendHeight","legendtitleSize","itemTextStyle","rectWidth","rectHeight","legendLength","position_1","labelPosition","textX_1","textY_1","itemStartX","itemStartY","maxTextHeight","maxTextWidth","legendText","itemTextSize","textWidth","textHeight","legendItem","Page","legendTextSize","maxSize","prvePositionX","nextPositionY","getPageChanged","prevPositionY","nextPositionX","DisplayText","ImageSrc","Shape","Text","Fill","legendObj","legendRect","getRangeLegendCollection","getEqualLegendCollection","getDataLegendCollection","textFont","legendGroup","shapeBorder","itemId","textId","item","renderLegendBorder","drawLegendItem","shapeSize","strokeColor","strokeWidth","legendElement","shapeId","renderOptions_1","pagingGroup","pagingText","pagingFont","pagingTextSize","leftPageX","rightPageX","pageTextX","leftPageElement","rightPageElement","rightPath","leftPath","leftPageOptions","leftRectPageOptions","spacing","wireEvents","rightPageOptions","rightRectPageOptions","pageTextOptions","trimTitle","getLegendAlignment","changeNextPage","totalWidth","totalHeight","field","imageSrc","rangeData_1","colorMapProcess_1","getLegendData","legendFill","getOverallLegendItemsCollection","legendData","newColllection","equalData_1","eqaulColorProcess_1","colorMapping_2","dataValue","interactiveHandler","hoverId","svgRect","currentData","renderInteractivePointer","invertedPointer","isDestroyed","on","off","Highlight","mouseMove","addHighlight","mapHighlight","shapeIn","layerIndex_1","highlightMap","elem","Selection","mouseClick","selectionsettings","selectionType","selectMap","addSelection","enableMultiSelect","MapsTooltip","tooltipId","renderTooltip","tootipArgs","option","tooltipEle","templateData","value_1","formatter","formatValue","markerIdex","setTooltipContent","removeTooltip","svgTooltip","Tooltip","header","markerFill","areaBounds","appendTo","keys_1","join","mouseUpHandler","touchCancelEvent","isPanning","mouseEnter","rectZoomingStart","pinchRect","browserName","info","isPointer","handled","pinchFactor","wheelEvent","cancelEvent","selectionColor","fillColor","newZoomFactor","prevLevel","prevScale","minBounds","maxBounds","mapTotalWidth","mapTotalHeight","translatePointX","translatePointY","currentHeight","getTileTranslatePosition","currentLevel","prevSize","performRectZooming","zoomRect","zoomingRect","zoomCalculationFactor","setInteraction","newInteraction","lastScale","interaction","updateInteraction","fingers","performPinchZooming","touchStartList","touchMoveList","touchCenter","newScale","newTileFactor","translatePointX_1","translatePointY_1","drawZoomRectangle","down","mouseDownPoints","move","mouseMovePoints","rectSVGObject","rectOption","animateTransform","templateCount","currentEle","markerTranslate","bubleIndex","currentX","currentY","dataLabelTranslate","markerTemplateElement","datalabelTemplateElemement","labelCollection","labelX","labelY","layerEle","x_1","y_1","panning","x_2","y_2","layerRect","panningXDirection","panningYDirection","toolBarZooming","tileZoomFactor","xSpacing","ySpacing","toolBarOrientation","toolbarsCollection","toolbars","shadowElement","toolBarLength","toolWidth","toolHeight","outerElement","toolbar_1","currentToolbarEle","zoomElements","performToolBarAction","zoomInElements","zoomOutElements","panColor","panElements","stopImmediatePropagation","toolbar","performZoomingByToolBar","zoomColor","applySelection","panningStyle","svg","toolBarSize","padding","highlightColor","css","createTextNode","mapMouseWheel","mouseWheelZoom","wheelDelta","doubleClick","doubleClickZoom","mouseDownHandler","firstMove","mouseMoveHandler","zoom","pinchZooming","cursor","zoomRectElement","mouseCancelHandler","zoomOnClick","getBBox","boundwidth","boundHeight","layerScale","leftPos","topPos","drawPolygon","drawLine","pattern","createPattern","elements_1","fields","dataSource_1","fields_1"],"mappings":"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"}