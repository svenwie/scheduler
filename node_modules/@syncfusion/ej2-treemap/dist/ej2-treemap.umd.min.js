/*!
*  filename: ej2-treemap.umd.min.js
*  version : 16.3.24
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-pdf-export"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-svg-base")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-pdf-export","@syncfusion/ej2-data","@syncfusion/ej2-svg-base"],t):t(e.ej={},e.ej2Base,e.ej2PdfExport,e.ej2Data,e.ej2SvgBase)}(this,function(e,t,i,r,o){"use strict";function n(e,t){return null!==e&&void 0!==e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function a(e,i){var r=document.getElementById("treeMapMeasureText");return null===r&&(r=t.createElement("text",{id:"treeMapMeasureText"}),document.body.appendChild(r)),r.innerHTML=e,r.style.position="absolute",r.style.fontSize=i.size,r.style.fontWeight=i.fontWeight,r.style.fontStyle=i.fontStyle,r.style.fontFamily=i.fontFamily,r.style.visibility="hidden",r.style.top="-100",r.style.left="0",r.style.whiteSpace="nowrap",r.style.lineHeight="normal",new ye(r.clientWidth,r.clientHeight)}function l(e,t,i){var r=t,o=a(t,i).width;if(o>e)for(var n=t.length-1;n>=0;--n)if(r=t.substring(0,n)+"...",(o=a(r,i).width)<=e||r.length<4)return r.length<4&&(r=" "),r;return r}function s(e,t,i,r){var o,n;switch(t){case"Near":o=e.x;break;case"Center":o="title"===r?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":o="title"===r?e.width-e.y-i.width:e.x+e.width-i.width}return n="title"===r?e.y+i.height/2:e.y+e.height/2+i.height/2,new be(o,n)}function h(e,i,r,o,n){void 0===n&&(n=!1);var l,s,h={"font-size":i.size,"font-style":i.fontStyle,"font-family":i.fontFamily,"font-weight":i.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:i.opacity,"dominant-baseline":e.baseLine,id:e.id,x:e.x,y:e.y,fill:r},p="string"==typeof e.text?e.text:n?e.text[e.text.length-1]:e.text[0],d=new t.SvgRenderer(""),c=d.createText(h,p);if(c.style["user-select"]="none",c.style["-moz-user-select"]="none",c.style["-webkit-touch-callout"]="none",c.style["-webkit-user-select"]="none",c.style["-khtml-user-select"]="none",c.style["-ms-user-select"]="none",c.style["-o-user-select"]="none","string"!=typeof e.text&&e.text.length>1)for(var g=1,u=e.text.length;g<u;g++)s=a(e.text[g],i).height,l=d.createTSpan({x:e.x,id:e.id,y:e.y+g*s},e.text[g]),c.appendChild(l);return o.appendChild(c),c}function p(e){return document.getElementById(e)}function d(e,t){return e.weight===t.weight?0:e.weight<t.weight?1:-1}function c(e,t,i,r){for(var o,n=!1,a="",l=r.leafItemSettings,s=0;s<e.length;s++)if(o=r.levels[s]?r.levels[s].groupPath:l.labelPath?l.labelPath:r.weightValuePath,e[s]===i[o]&&(a+=i[o]+(s===e.length-1?"":"_"))===t){n=!0;break}return n}function g(e){var t;if(e){var i=Object.keys(e);t=new Object;for(var r=0;r<i.length;r++)if(e[i[r]]instanceof Array){t.values=e[i[r]],t.key=i[r];break}}return t}function u(e,t,i,r){if("Child"===i){t.push(e.levelOrderName);var o=g(e).values;if(o&&o.length>0){for(var n=0;n<o.length;n++)-1===t.indexOf(o[n].levelOrderName)&&t.push(o[n].levelOrderName);for(var a=0;a<o.length;a++)u(o[a],t,i,r)}}else if("Parent"===i)"string"==typeof e.levelOrderName&&-1===t.indexOf(e.levelOrderName)&&(t.push(e.levelOrderName),u(e.parent,t,i,r));else if("All"===i){var l=e.levelOrderName.split("_")[0],s=void 0;for(n=0;n<r.layout.renderItems.length;n++)(s=r.layout.renderItems[n]).levelOrderName.indexOf(l)>-1&&-1===t.indexOf(s.levelOrderName)&&t.push(s.levelOrderName)}else t.push(e.levelOrderName);return t}function m(e){var i=null;try{document.querySelectorAll(e).length&&(i=t.compile(document.querySelector(e).innerHTML.trim()))}catch(r){i=t.compile(e)}return i}function y(e,i,r){for(var o=t.createElement("div",{id:i,styles:"position: absolute;pointer-events: auto;"});e.length>0;)o.appendChild(e[0]);for(var n=o.innerHTML,a=Object.keys(r),l=0;l<a.length;l++)n=n.replace(new RegExp("{{:"+a[l]+"}}","g"),r[a[l].toString()]);return o.innerHTML=n,o}function v(e,t,i,r,o){var n=new be(0,0),a=(o.element.getBoundingClientRect(),"Template"===r?o.areaRect.x:0),l="Template"===r?o.areaRect.y:0;return n.x=Math.abs(a-(t.indexOf("Left")>-1?e.x+5:t.indexOf("Right")>-1?e.x+e.width-i.width:e.x+(e.width/2-i.width/2)))-2,n.y=Math.abs(l-(t.indexOf("Top")>-1?"Template"===r?e.y:e.y+i.height:t.indexOf("Bottom")>-1?e.y+e.height-i.height:"Template"===r?e.y+(e.height/2-i.height/2):e.y+e.height/2+i.height/4)),n}function f(e,t){var i=new ye(0,0);return t.appendChild(e),i.height=e.offsetHeight,i.width=e.offsetWidth,document.getElementById(e.id).remove(),i}function w(e){return(e.width-e.x)*(e.height-e.y)}function x(e){var t=b(e),i=t.width,r=t.height;return Math.min(i,r)}function b(e){var t=e.x,i=e.y;return{x:t,y:i,width:e.width-t,height:e.height-i}}function S(e){var t=e.x,i=e.y;return{x:t,y:i,width:t+e.width,height:i+e.height}}function P(e,t,i){var r=i.getBoundingClientRect(),o=i.ownerDocument.defaultView.pageXOffset,n=i.ownerDocument.defaultView.pageYOffset,a=i.ownerDocument.documentElement.clientTop,l=i.ownerDocument.documentElement.clientLeft,s=r.left+o-l,h=r.top+n-a;return new be(e-s,t-h)}function I(e,i,r,o){var n,a,l=[];if(t.isNullOrUndefined(i)&&t.isNullOrUndefined(r)&&isNaN(r))return null;for(var s=0;s<e.length;s++){var h=null;e[s].from&&e[s].to&&e[s].value?r>=e[s].from&&e[s].to>=r&&e[s].value===i&&(h=e[s].color):(e[s].from&&e[s].to||e[s].value)&&(e[s].value=t.isNullOrUndefined(e[s].value)?e[s].value:e[s].value.toString(),(r>=e[s].from&&e[s].to>=r||e[s].value===i)&&(h=e[s].color)),e[s].minOpacity&&e[s].maxOpacity&&h&&(a=O(o,e[s],h,r)),n=h,a=e[s].minOpacity?a:"1",l.push(n)}for(var p=l.length-1;p>=0;p--)p=(n=l[p])?-1:p;return{fill:n,opacity:a}}function O(e,t,i,r){var o=0;if(r>=t.from&&r<=t.to){o=(r-t.from)/(t.to-t.from)*(t.maxOpacity-t.minOpacity)+t.minOpacity}return o.toString()}function M(e,t,i){for(var r,o=t.split(" "),n="",s=[],h=0,p=o.length;h<p;h++)r=o[h],a(n.concat(r),i).width<e?n=n.concat((""===n?"":" ")+r):""!==n?(s.push(l(e,n,i)),n=r):(s.push(l(e,r,i)),r=""),n&&h===p-1&&s.push(l(e,n,i));return s}function L(e,t,i){var r=[],o=0,n=a(t,i).width,l=t.length;if(e>=n)return r.push(t),r;for(var s=t.length;s>o;s--){var h=t.slice(o,s);if((n=a(h,i).width)<=e){if(r.push(h),o+=h.length,l===o)return r;s=l+1}}return r}function C(e,t,i,r){var o=a(i,r);return o.width>e||o.height>t?" ":i}function T(e,t){return e.itemArea===t.itemArea?0:e.itemArea<t.itemArea?1:-1}function E(e,t,i){for(var r,o=0;o<e.length;o++)D(r=e[o].childNodes[0],i.layout.renderItems[r.id.split("_")[6]].options),e[o].classList.remove(t),o-=1}function D(e,t){e.setAttribute("opacity",t.opacity),e.setAttribute("fill",t.fill),e.setAttribute("stroke",t.border.color),e.setAttribute("stroke-width",t.border.width)}function _(e,i,r){if(t.isNullOrUndefined(e))return null;for(var o=0,n=Object.keys(i);o<n.length;o++){var a=n[o];e=e.split("${"+a+"}").join(N(i[a],r).toString())}return e}function N(e,t){return(t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e)||""}function R(e){return"#"+B(e.r)+B(e.g)+B(e.b)}function B(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function H(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new Se(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):new Se(255,255,255)}function z(e){var t;e="transparent"===e?"white":e,(t=document.getElementById("treeMapMeasureText")).style.color=e,e=window.getComputedStyle(t).color;var i=/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e);return R(new Se(parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)))}function k(e,i,r,o,n,a){var l=new t.SvgRenderer(""),s=A(e,r,i,n,o),h=l["draw"+s.functionName](s.renderOption);return h.setAttribute("aria-label",a),h}function A(e,i,r,o,n){var a,l="Path",s=i.width,h=i.height,p=e.x,d=e.y,c=e.x+-s/2,g=e.y+-h/2;switch(r){case"Circle":case"Bubble":l="Ellipse",t.merge(o,{rx:s/2,ry:h/2,cx:p,cy:d});break;case"VerticalLine":a="M "+p+" "+(d+h/2)+" L "+p+" "+(d+-h/2),t.merge(o,{d:a});break;case"Diamond":a="M "+c+" "+d+" L "+p+" "+(d+-h/2)+" L "+(p+s/2)+" "+d+" L "+p+" "+(d+h/2)+" L "+c+" "+d+" z",t.merge(o,{d:a});break;case"Rectangle":a="M "+c+" "+(d+-h/2)+" L "+(p+s/2)+" "+(d+-h/2)+" L "+(p+s/2)+" "+(d+h/2)+" L "+c+" "+(d+h/2)+" L "+c+" "+(d+-h/2)+" z",t.merge(o,{d:a});break;case"Triangle":a="M "+c+" "+(d+h/2)+" L "+p+" "+(d+-h/2)+" L "+(p+s/2)+" "+(d+h/2)+" L "+c+" "+(d+h/2)+" z",t.merge(o,{d:a});break;case"InvertedTriangle":a="M "+(p+s/2)+" "+(d-h/2)+" L "+p+" "+(d+h/2)+" L "+(p-s/2)+" "+(d-h/2)+" L "+(p+s/2)+" "+(d-h/2)+" z",t.merge(o,{d:a});break;case"Pentagon":for(var u=void 0,m=void 0,y=0;y<=5;y++)u=s/2*Math.cos(Math.PI/180*(72*y)),m=s/2*Math.sin(Math.PI/180*(72*y)),a=0===y?"M "+(p+u)+" "+(d+m)+" ":a.concat("L "+(p+u)+" "+(d+m)+" ");a=a.concat("Z"),t.merge(o,{d:a});break;case"Star":a="M "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" L "+(e.x-i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x+i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x-i.width/3)+" "+(e.y-i.height/2)+" L "+e.x+" "+(e.y+i.height/2)+" L "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" Z",t.merge(o,{d:a});break;case"Cross":a="M "+c+" "+d+" L "+(p+s/2)+" "+d+" M "+p+" "+(d+h/2)+" L "+p+" "+(d+-h/2),t.merge(o,{d:a});break;case"Image":l="Image",t.merge(o,{href:n,height:h,width:s,x:c,y:g})}return{renderOption:o,functionName:l}}function j(e,t){for(var i=!1,r=0;r<e.length;r++)if(t.levelOrderName===e[r].levelOrderName){i=!0;break}return i}var F="beforePrint",U="itemRendering",G="drillStart",V="drillEnd",W="itemSelected",q="itemHighlight",X="tooltipRendering",J="itemClick",Y="itemMove",Z="mouseMove",Q="legendItemRendering",$="resize",K="Roboto, Segoe UI, Noto, Sans-serif",ee=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),te=function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},ie=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property("#808080")],i.prototype,"color",void 0),te([t.Property(0)],i.prototype,"width",void 0),i}(t.ChildProperty),re=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(10)],i.prototype,"left",void 0),te([t.Property(10)],i.prototype,"right",void 0),te([t.Property(10)],i.prototype,"top",void 0),te([t.Property(10)],i.prototype,"bottom",void 0),i}(t.ChildProperty),oe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(null)],i.prototype,"size",void 0),te([t.Property(null)],i.prototype,"color",void 0),te([t.Property(K)],i.prototype,"fontFamily",void 0),te([t.Property("Normal")],i.prototype,"fontWeight",void 0),te([t.Property("Normal")],i.prototype,"fontStyle",void 0),te([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),ne=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property("")],i.prototype,"text",void 0),te([t.Property("")],i.prototype,"description",void 0),i}(t.ChildProperty),ae=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Complex({size:"14px"},oe)],i.prototype,"textStyle",void 0),te([t.Property("Center")],i.prototype,"alignment",void 0),i}(ne),le=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Complex({size:"15px"},oe)],i.prototype,"textStyle",void 0),te([t.Property("Center")],i.prototype,"alignment",void 0),te([t.Complex({},ae)],i.prototype,"subtitleSettings",void 0),i}(ne),se=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(null)],i.prototype,"from",void 0),te([t.Property(null)],i.prototype,"to",void 0),te([t.Property(null)],i.prototype,"color",void 0),te([t.Property(null)],i.prototype,"label",void 0),te([t.Property(null)],i.prototype,"value",void 0),te([t.Property(null)],i.prototype,"minOpacity",void 0),te([t.Property(null)],i.prototype,"maxOpacity",void 0),i}(t.ChildProperty),he=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(!1)],i.prototype,"visible",void 0),te([t.Property("Default")],i.prototype,"mode",void 0),te([t.Property("transparent")],i.prototype,"background",void 0),te([t.Property("Circle")],i.prototype,"shape",void 0),te([t.Property("")],i.prototype,"width",void 0),te([t.Property("")],i.prototype,"height",void 0),te([t.Complex({size:"13px"},oe)],i.prototype,"textStyle",void 0),te([t.Property(null)],i.prototype,"fill",void 0),te([t.Property(15)],i.prototype,"shapeWidth",void 0),te([t.Property(15)],i.prototype,"shapeHeight",void 0),te([t.Property(10)],i.prototype,"shapePadding",void 0),te([t.Property(null)],i.prototype,"imageUrl",void 0),te([t.Complex({color:"#000000",width:0},ie)],i.prototype,"border",void 0),te([t.Complex({color:"#000000",width:0},ie)],i.prototype,"shapeBorder",void 0),te([t.Complex({},ne)],i.prototype,"title",void 0),te([t.Complex({size:"14px"},oe)],i.prototype,"titleStyle",void 0),te([t.Property("Bottom")],i.prototype,"position",void 0),te([t.Property("None")],i.prototype,"orientation",void 0),te([t.Property(!1)],i.prototype,"invertedPointer",void 0),te([t.Property("After")],i.prototype,"labelPosition",void 0),te([t.Property("None")],i.prototype,"labelDisplayMode",void 0),te([t.Property("Center")],i.prototype,"alignment",void 0),te([t.Property({x:0,y:0})],i.prototype,"location",void 0),i}(t.ChildProperty),pe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(null)],i.prototype,"groupIndex",void 0),te([t.Property(null)],i.prototype,"groupName",void 0),i}(t.ChildProperty),de=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property("#808080")],i.prototype,"fill",void 0),te([t.Property(!1)],i.prototype,"autoFill",void 0),te([t.Complex({},ie)],i.prototype,"border",void 0),te([t.Property(0)],i.prototype,"gap",void 0),te([t.Property(10)],i.prototype,"padding",void 0),te([t.Property(1)],i.prototype,"opacity",void 0),te([t.Property(!0)],i.prototype,"showLabels",void 0),te([t.Property(null)],i.prototype,"labelPath",void 0),te([t.Property(null)],i.prototype,"labelFormat",void 0),te([t.Property("TopLeft")],i.prototype,"labelPosition",void 0),te([t.Complex({color:null,size:"12px"},oe)],i.prototype,"labelStyle",void 0),te([t.Property(null)],i.prototype,"labelTemplate",void 0),te([t.Property("Center")],i.prototype,"templatePosition",void 0),te([t.Property("Trim")],i.prototype,"interSectAction",void 0),te([t.Collection([],se)],i.prototype,"colorMapping",void 0),i}(t.ChildProperty),ce=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(!1)],i.prototype,"visible",void 0),te([t.Property("")],i.prototype,"template",void 0),te([t.Property(null)],i.prototype,"format",void 0),te([t.Property("#000816")],i.prototype,"fill",void 0),te([t.Property(.75)],i.prototype,"opacity",void 0),te([t.Property(["Circle"])],i.prototype,"markerShapes",void 0),te([t.Complex({},ie)],i.prototype,"border",void 0),te([t.Complex({fontFamily:K,size:"13px"},oe)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),ge=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(!1)],i.prototype,"enable",void 0),te([t.Property("#808080")],i.prototype,"fill",void 0),te([t.Property("0.5")],i.prototype,"opacity",void 0),te([t.Complex({},ie)],i.prototype,"border",void 0),te([t.Property("Item")],i.prototype,"mode",void 0),i}(t.ChildProperty),ue=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(!1)],i.prototype,"enable",void 0),te([t.Property("#808080")],i.prototype,"fill",void 0),te([t.Property("0.5")],i.prototype,"opacity",void 0),te([t.Complex({},ie)],i.prototype,"border",void 0),te([t.Property("Item")],i.prototype,"mode",void 0),i}(t.ChildProperty),me=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ee(i,e),te([t.Property(null)],i.prototype,"groupPath",void 0),te([t.Property(0)],i.prototype,"groupGap",void 0),te([t.Property(10)],i.prototype,"groupPadding",void 0),te([t.Complex({},ie)],i.prototype,"border",void 0),te([t.Property("#808080")],i.prototype,"fill",void 0),te([t.Property(!1)],i.prototype,"autoFill",void 0),te([t.Property(1)],i.prototype,"opacity",void 0),te([t.Property(!0)],i.prototype,"showHeader",void 0),te([t.Property(20)],i.prototype,"headerHeight",void 0),te([t.Property(null)],i.prototype,"headerTemplate",void 0),te([t.Property(null)],i.prototype,"headerFormat",void 0),te([t.Property("Near")],i.prototype,"headerAlignment",void 0),te([t.Complex({color:null,size:"13px"},oe)],i.prototype,"headerStyle",void 0),te([t.Property("TopLeft")],i.prototype,"templatePosition",void 0),te([t.Collection([],se)],i.prototype,"colorMapping",void 0),i}(t.ChildProperty),ye=function(){return function(e,t){this.width=e,this.height=t}}(),ve=function(){return function(e,t,i,r){this.x=e,this.y=t,this.width=i,this.height=r}}(),fe=function(){return function(e,t,i,r,o,n){this.y=o.y,this.x=o.x,this.height=o.height,this.width=o.width,this.id=e,this.fill=t,this.opacity=r,this.stroke=i.color,this["stroke-width"]=i.width,this["stroke-dasharray"]=n}}(),we=function(){return function(e,t,i,r,o,n,a){this.id=e,this.opacity=o,this.fill=t,this.stroke=r,this["stroke-width"]=i,this["stroke-dasharray"]=n,this.d=a}}(),xe=function(){return function(e,t,i,r,o,n,a){void 0===n&&(n=""),this.transform="",this.baseLine="auto",this.id=e,this.text=o,this.transform=n,this.anchor=r,this.x=t,this.y=i,this.baseLine=a}}(),be=function(){return function(e,t){this.x=e,this.y=t}}(),Se=function(){return function(e,t,i){this.r=e,this.g=t,this.b=i}}(),Pe=function(){return function(e,t,i,r,o){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=r,this.sendData=o}}(),Ie=function(){function e(e){this.treemap=e}return e.prototype.processLayoutPanel=function(){var e,i;this.treemap.levelsOfData&&this.treemap.levelsOfData.length>0&&(e=t.isNullOrUndefined(this.treemap.initialDrillDown.groupIndex)||t.isNullOrUndefined(this.treemap.initialDrillDown.groupName)?this.treemap.levelsOfData[0]:this.getDrilldownData(this.treemap.levelsOfData[0],[])[0],i=t.extend({},this.treemap.areaRect,i,!1),this.calculateLayoutItems(e||this.treemap.levelsOfData[0],i),this.renderLayoutItems(e||this.treemap.levelsOfData[0]))},e.prototype.getDrilldownData=function(e,t){var i=this.treemap,r={},o=g(e).values;if(o&&o.length>0&&0===t.length){for(var n=0;n<o.length;n++)o[n].groupIndex===i.initialDrillDown.groupIndex&&o[n].name===i.initialDrillDown.groupName&&(o[n].isDrilled=!0,r[o[n].groupName]=[o[n]],t.push(r));for(var a=0;a<o.length;a++)this.getDrilldownData(o[a],t)}return t},e.prototype.calculateLayoutItems=function(e,i){this.renderItems=[],this.parentData=[],t.isNullOrUndefined(this.treemap.weightValuePath)||(this.treemap.layoutType.indexOf("SliceAndDice")>-1?this.computeSliceAndDiceDimensional(e,i):(i.height=i.height+i.y,i.width=i.width+i.x,this.computeSquarifyDimensional(e,i)))},e.prototype.computeSliceAndDiceDimensional=function(e,t){var i,r,o,n,a=this.treemap.leafItemSettings,l=this.treemap.levels,s=g(e).values;if(s&&s.length>0&&(this.sliceAndDiceProcess(s,t),this.treemap.levels.length>0))for(var h=0;h<s.length;h++)r=s[h].groupIndex,o=0===l.length||r===l.length?a.gap:l[r].groupGap,n=0===l.length?0:l[r]?l[r].showHeader?l[r].headerHeight:0:l[r-1].showHeader?l[r-1].headerHeight:0,i=s[h].rect,i=new ve(i.x+o/2,i.y+(n+o/2),i.width-o,Math.abs(i.height-(o+n))),this.computeSliceAndDiceDimensional(s[h],i);return e},e.prototype.sliceAndDiceProcess=function(e,i){var r,o=i.height*i.width,n=this.treemap.levels,a=0,l=0;e.forEach(function(e){l+=e.weight}),e.forEach(function(e){e.weightArea=o*e.weight/l});var s="SliceAndDiceAuto"===this.treemap.layoutType?i.width>i.height:"SliceAndDiceHorizontal"===this.treemap.layoutType;e.sort(d);for(var h=0;h<e.length;h++){var p=e[h];p.isLeafItem=0===n.length||(this.treemap.isHierarchicalData||t.isNullOrUndefined(this.treemap.leafItemSettings.labelPath)?p.groupIndex===n.length-1:p.groupIndex===this.treemap.levels.length),s?(r=o/l*e[h].weight/i.height,a<=i.width&&(e[h].rect=new ve(a+i.x,i.y,r,i.height))):(r=o/l*e[h].weight/i.width,a<=i.height&&(e[h].rect=new ve(i.x,a+i.y,i.width,r))),a+=r,this.renderItems.push(e[h])}},e.prototype.computeSquarifyDimensional=function(e,t){var i,r,o,n,a,l=this.treemap.leafItemSettings,s=this.treemap.levels,h=g(e).values;if(h&&h.length>0&&(0===this.parentData.length&&(this.parentData=[],this.parentData.push(h)),this.calculateChildrenLayout(e,h,t),this.treemap.levels.length>0))for(var p=0;p<h.length;p++)o=(r=h[p]).groupIndex,i=r.rect,(r.isLeafItem?l.gap:s[o].groupGap)/2,n=(r.isLeafItem?l.padding:s[o].groupPadding)/2,a=this.treemap.isHierarchicalData?0===o&&r.isLeafItem?0:s[o]&&s[o].showHeader?s[o].headerHeight:0:0===s.length?0:s[o]&&s[o].showHeader?s[o].headerHeight:0,i=new ve(i.x+n,i.y+(a+n),i.width-n,i.height-n),!r.isLeafItem&&r.weight>0&&this.computeSquarifyDimensional(h[p],i)},e.prototype.calculateChildrenLayout=function(e,t,i){this.computeTotalArea(t,w(i)),t.sort(T),this.performRowsLayout(t,[],i,[])},e.prototype.performRowsLayout=function(e,t,i,r){var o=e.length;if(0===o){var n=this.getCoordinates(t,i);return u=r.concat(n)}var a=x(i),l=e[0],s=e.slice(1,o);if(this.aspectRatio(t,l,a)){var h=t.concat(l);return this.performRowsLayout(s,h,i,r)}for(var p=t.length,d=0,c=0;c<p;c+=1)d+=t[c].itemArea;var g=this.cutArea(i,d),u=(n=this.getCoordinates(t,i),r.concat(n));return this.performRowsLayout(e,[],g,u)},e.prototype.aspectRatio=function(e,t,i){if(0===e.length)return!0;var r=e.concat(t);return this.findMaxAspectRatio(e,i)>=this.findMaxAspectRatio(r,i)},e.prototype.findMaxAspectRatio=function(e,t){for(var i=e.length,r=1/0,o=-1/0,n=0,a=0;a<i;a+=1){var l=e[a].itemArea;l<r&&(r=l),l>o&&(o=l),n+=l}return Math.max(Math.pow(t,2)*o/Math.pow(n,2),Math.pow(n,2)/(Math.pow(t,2)*r))},e.prototype.cutArea=function(e,t){var i=b(e),r=i.width,o=i.height,n=i.x,a=i.y;if(r>=o){var l=t/o;return S({x:n+l,y:a,width:r-l,height:o})}var s=t/r;return S({x:n,y:a+s,width:r,height:o-s})},e.prototype.getCoordinates=function(e,i){for(var r,o=b(i),n=o.width,a=o.height,l=o.x,s=o.y,h=e.length,p=this.treemap.levels,d=this.treemap.leafItemSettings,c=0,g=0;g<h;g+=1)c+=e[g].itemArea;var u,m,y,v=c/a,f=c/n,w=l,x=s,S=[];for(g=0;g<h;g+=1){var P=e[g];if(r=P.groupIndex,P.isLeafItem=0===p.length||(this.treemap.isHierarchicalData?r===p.length:!t.isNullOrUndefined(d.labelPath)&&r===p.length),m=j(this.parentData[0],P),y=m?this.treemap.areaRect:P.parent.rect,u=P.isLeafItem?d.padding:p[r].groupPadding,n>=a){var I=x+P.itemArea/v;P.rect={x:w,y:x,width:w+v,height:I},x=I}else{var O=w+P.itemArea/f;P.rect={x:w,y:x,width:O,height:x+f},w=O}P.weight>0&&(m||Math.round(i.y+u/2)<=Math.round(y.y+(y.height-y.y))&&Math.round(i.x+u/2)<=Math.round(y.x+(y.width-y.x)))&&(this.renderItems.push(P),S.push(P))}return S},e.prototype.computeTotalArea=function(e,t){for(var i=e.length,r=[],o=0;o<i;o+=1){for(var n=e.length,a=0,l=0;l<n;l+=1)a+=e[l].weight;for(var s=t/a,h=void 0,p=0;p<n;p++)(h=e[p]).itemArea=h.weight*s,r.push(h)}return r},e.prototype.renderLayoutItems=function(e){var i,r,o,n,a=this.treemap;this.renderer=a.renderer;var l,s,h,p,d,c,u,m,y,v,f,w,x,b=a.element.id,S=a.layoutType,P=this.treemap.leafItemSettings.interSectAction,I="",O=document.getElementById(a.element.id+"_Secondary_Element"),M=a.levels;this.layoutGroup=this.renderer.createGroup({id:b+"_TreeMap_"+S+"_Layout"});for(var L,C,T,E,D=t.createElement("div",{id:a.element.id+"_Label_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+a.areaRect.y+"px;left:"+a.areaRect.x+"px;height:"+a.areaRect.height+"px;width:"+a.areaRect.width+"px;"}),N=!1,R=a.leafItemSettings,B=0;B<this.renderItems.length;B++)if(u=this.renderItems[B],s=u.groupIndex,p=u.rect,N=u.isLeafItem,v=b+"_Level_Index_"+s+"_Item_Index_"+B,L=this.renderer.createGroup({id:v+"_Group"}),w=(N?R.gap:M[s].groupGap)/2,"Squarified"===a.layoutType&&(p.width=Math.abs(p.x-p.width)-w,p.height=Math.abs(p.y-p.height)-w),N?R.colorMapping:M[s].colorMapping,o=this.getItemColor(N,u),c=o.fill,y=o.opacity,d=N?R.labelFormat:M[s].headerFormat,r=N?R.showLabels:M[s].showHeader,m=_(d,u.data,this.treemap)||u.name,E=g(u).values,m=!N&&E&&E.length>0&&this.treemap.enableDrillDown?u.isDrilled?"[-] "+m:"[+] "+m:m,x=N?R.labelStyle:M[s].headerStyle,T=N?R.border:M[s].border,i=N?R.labelPosition:"Near"===M[s].headerAlignment?"TopLeft":"Center"===M[s].headerAlignment?"TopCenter":"TopRight",h=N?R.templatePosition:M[s].templatePosition,C=N?R.labelTemplate:M[s].headerTemplate,u.options={border:T,opacity:y,fill:c},n={cancel:!1,name:U,treemap:this.treemap,currentItem:u,RenderItems:this.renderItems,options:u.options},this.treemap.trigger(U,n),!n.cancel){I=" M "+p.x+" "+p.y+" L "+(p.x+p.width)+" "+p.y+" L "+(p.x+p.width)+" "+(p.y+p.height)+" L "+p.x+" "+(p.y+p.height)+"z",l=new we(v+"_RectPath",c,T.width,T.color,y,null,I);var H=this.renderer.drawPath(l);L.appendChild(H),r&&this.renderItemText(m.toString(),L,x,p,P,v,c,i),C&&(f=this.renderTemplate(O,v,p,h,C,u),D.appendChild(f)),L.setAttribute("aria-label",u.name),L.setAttribute("tabindex",(this.treemap.tabIndex+B+2).toString()),this.layoutGroup.appendChild(L)}D.childNodes.length>0&&O.appendChild(D),this.treemap.svgObject.appendChild(this.layoutGroup)},e.prototype.renderItemText=function(e,i,r,o,n,s,p,d){document.getElementById(this.treemap.element.id+"_Secondary_Element"),this.treemap.leafItemSettings;var c,g,u,m,y=[],f=[],w=0;if(y=-1!==e.indexOf("<br>")?e.split("<br>"):null,u=this.labelInterSectAction(o,e,r,n),c=a(y&&y[0]||u[0],r),g=v(o,d,c,"Text",this.treemap),!t.isNullOrUndefined(y)){for(var x=[],b=null,S=[],P=0;P<y.length;P++)w+=(c=a(b=l(o.width-5,y[P],r),r)).height,S.push(c.width),x.push(b);u=x,c.width=Math.max.apply(null,S),c.height=w}if("WrapByWord"===n||"Wrap"===n||"Trim"===n){for(var I=0;I<u.length;I++)w+=(c=a(u[I],r)).height,o.height-5>w&&f.push(u[I]);if("Wrap"===n&&u.length!==f.length&&f.length){var O=f.length-1,M=f[O];M=M.substring(0,M.length-1)+"...",f.splice(O),"..."!==M&&f.push(M)}}else m=u,f.push(m);h(new xe(s+"_Text",g.x,g.y,"start",f),r,r.color||this.getSaturatedColor(p),i)},e.prototype.getItemColor=function(e,t){var i=this.treemap,r=e?i.leafItemSettings.fill:i.levels[t.groupIndex].fill,o=e?i.leafItemSettings.opacity:i.levels[t.groupIndex].opacity,n=g(i.levelsOfData[0]).values,a=e?i.leafItemSettings.colorMapping:i.levels[t.groupIndex].colorMapping;if(a.length>0){var l=I(a,t.data[this.treemap.equalColorValuePath],t.data[this.treemap.rangeColorValuePath],t.data[this.treemap.weightValuePath]);r=l.fill,o=l.opacity}else for(var s=0;s<n.length;s++)n[s].levelOrderName===t.levelOrderName.split("_")[0]&&(r=i.palette.length>0?i.palette[s%i.palette.length]:r);return{fill:r,opacity:o}},e.prototype.getSaturatedColor=function(e){var t=e,i=H(z(t="transparent"===t?window.getComputedStyle(document.body,null).backgroundColor:t));return Math.round((299*i.r+587*i.g+114*i.b)/1e3)>=128?"black":"white"},e.prototype.renderTemplate=function(e,i,r,o,n,a){var l,s,h,p,d;if(t.isNullOrUndefined(n.prototype))for(var c=Object.keys(a.data),g=0;g<c.length;g++)n=n.replace(new RegExp("{{:"+c[g]+"}}","g"),a.data[c[g].toString()]);return p=m(n),l=p(a.data,this.treemap),s=y(l,i+"_Template",a.data),h=f(s,e),d=v(r,o,h,"Template",this.treemap),s.style.left=d.x+"px",s.style.top=d.y+"px",s},e.prototype.labelInterSectAction=function(e,t,i,r){var o,n=e.width-10;switch(r){case"Hide":o=[C(n,e.height,t,i)];break;case"Trim":o=[l(n+3,t,i)];break;case"WrapByWord":o=M(n,t,i);break;case"Wrap":o=L(n,t,i)}return o},e}(),Oe=function(){function e(e){this.control=e}return e.prototype.print=function(e){this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight);var i={cancel:!1,htmlContent:this.getHTMLContent(e),name:F};this.control.trigger(F,i),i.cancel||t.print(i.htmlContent,this.printWindow)},e.prototype.getHTMLContent=function(e){var i=t.createElement("div");return e?e instanceof Array?e.forEach(function(e){i.appendChild(p(e).cloneNode(!0))}):e instanceof Element?i.appendChild(e.cloneNode(!0)):i.appendChild(p(e).cloneNode(!0)):i.appendChild(this.control.element.cloneNode(!0)),i},e.prototype.export=function(e,r,o){var n=this,a=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:this.control.availableSize.width.toString(),height:this.control.availableSize.height.toString()}}),l=!(t.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1);o=t.isNullOrUndefined(o)?i.PdfPageOrientation.Landscape:o;var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+this.control.svgObject.outerHTML+"</svg>",h=window.URL.createObjectURL(new Blob("SVG"===e?[s]:[(new XMLSerializer).serializeToString(this.control.svgObject)],{type:"image/svg+xml"}));if("SVG"===e)this.triggerDownload(r,e,h,l);else{var p=new Image,d=a.getContext("2d");p.onload=function(){if(d.drawImage(p,0,0),window.URL.revokeObjectURL(h),"PDF"===e){var t=new i.PdfDocument,s=a.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");t.pageSettings.orientation=o,s=s.slice(s.indexOf(",")+1),t.pages.add().graphics.drawImage(new i.PdfBitmap(s),0,0,n.control.availableSize.width-60,n.control.availableSize.height),l&&(t.save(r+".pdf"),t.destroy())}else n.triggerDownload(r,e,a.toDataURL("image/png").replace("image/png","image/octet-stream"),l)},p.src=h}},e.prototype.triggerDownload=function(e,i,r,o){t.createElement("a",{attrs:{download:e+"."+i.toLocaleLowerCase(),href:r}}).dispatchEvent(new MouseEvent(o?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},e}(),Me=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Le=function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},Ce=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.orientation="Horizontal",r.drilledItems=[],r.isHierarchicalData=!1,r}return Me(i,e),i.prototype.preRender=function(){this.trigger("load",{treemap:this}),this.initPrivateVariable(),this.unWireEVents(),this.createSvg(),this.wireEVents(),this.setCulture()},i.prototype.render=function(){this.themeEffect(),this.createSecondaryElement(),this.addTabIndex(),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.processDataManager()},i.prototype.processDataManager=function(){var e,i,o,n,a=this;if(this.dataSource instanceof r.DataManager){e=this.dataSource,i=this.query instanceof r.Query?this.query:new r.Query;e.executeQuery(i).then(function(e){a.dataSource=e.result,a.renderTreeMapElements()})}else this.dataSource instanceof Pe?(n=this.dataSource,(o=new t.Ajax(n.dataOptions,n.type,n.async,n.contentType)).onSuccess=function(e){a.dataSource=JSON.parse("["+e+"]")[0],a.renderTreeMapElements()},o.send(n.sendData)):this.renderTreeMapElements()},i.prototype.renderTreeMapElements=function(){this.processingData(),this.treeMapLegendModule&&this.legendSettings.visible&&this.treeMapLegendModule.renderLegend(),this.layout.processLayoutPanel(),this.element.appendChild(this.svgObject),this.elementChange(),this.trigger("loaded",{treemap:this})},i.prototype.createSvg=function(){if(this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}var e=this.element.clientWidth,i=this.element.clientHeight;this.availableSize=new ye(n(this.width,e)||e||600,n(this.height,i)||i||450),this.svgObject=this.renderer.createSvg({id:this.element.id+"_svg",width:this.availableSize.width,height:this.availableSize.height})},i.prototype.initPrivateVariable=function(){this.renderer=new t.SvgRenderer(this.element.id),this.layout=new Ie(this)},i.prototype.themeEffect=function(){switch(this.theme){case"Material":case"Bootstrap":case"Fabric":this.setTextStyle("#424242");break;case"Highcontrast":this.setTextStyle("#FFFFFF")}},i.prototype.setTextStyle=function(e){this.titleSettings.textStyle.color=this.titleSettings.textStyle.color||e,this.titleSettings.subtitleSettings.textStyle.color=this.titleSettings.subtitleSettings.textStyle.color||e,this.legendSettings.textStyle.color=this.legendSettings.textStyle.color||e,this.legendSettings.titleStyle.color=this.legendSettings.titleStyle.color||e},i.prototype.createSecondaryElement=function(){var e=document.getElementById(this.element.id+"_Secondary_Element");if(e&&e.childElementCount>0&&e.remove(),t.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))){var i=t.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:1;"});this.element.appendChild(i)}},i.prototype.elementChange=function(){this.treeMapLegendModule&&this.legendSettings.visible&&this.treeMapLegendModule.legendGroup&&this.layout.layoutGroup&&this.svgObject.insertBefore(this.layout.layoutGroup,this.treeMapLegendModule.legendGroup)},i.prototype.renderBorder=function(){var e=this.border.width,i="Highcontrast"===this.theme?"#000000":"#FFFFFF";this.background=this.background?this.background:i;var r=document.getElementById(this.element.id+"_TreeMap_Border");if(t.isNullOrUndefined(r)){var o=new fe(this.element.id+"_TreeMap_Border",this.background,this.border,1,new ve(e/2,e/2,this.availableSize.width-e,this.availableSize.height-e));this.svgObject.appendChild(this.renderer.drawRectangle(o))}else r.setAttribute("fill",this.background)},i.prototype.renderTitle=function(e,i,r,o){var n,p=e.textStyle,d=this.availableSize.width-this.margin.right-this.margin.left;if(e.text){t.isNullOrUndefined(o)&&(o=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var c=l(d,e.text,p),g=a(c,p),u=s(t.isNullOrUndefined(r)?new ve(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):r,e.alignment,g,i),m=new xe(this.element.id+"_TreeMap_"+i,u.x,u.y,"start",c),y=new ve(u.x,u.y,g.width,g.height),v=h(m,p,p.color,o);v.setAttribute("aria-label",e.description||e.text),v.setAttribute("tabindex",(this.tabIndex+("title"===i?1:2)).toString()),("title"===i&&!e.subtitleSettings.text||"subtitle"===i)&&(n=this.availableSize.height-y.y-10-this.margin.bottom,this.areaRect=new ve(this.margin.left,y.y+10,d,n)),"subtitle"!==i&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",y,o):this.svgObject.appendChild(o)}else n=this.availableSize.height-this.margin.top-this.margin.bottom,this.areaRect=new ve(this.margin.left,this.margin.top,d,n)},i.prototype.processingData=function(){var e,i=this;if(this.dataSource=this.dataSource,!t.isNullOrUndefined(this.dataSource)&&this.dataSource.length>0&&this.weightValuePath){if(this.levelsOfData=[],this.dataSource.map(function(e){e[i.weightValuePath]=e[i.weightValuePath]?e[i.weightValuePath].toString():e[i.weightValuePath]}),this.leafItemSettings.labelPath=this.leafItemSettings.labelPath||this.weightValuePath,this.checkIsHierarchicalData(),0===this.levels.length){var r=new Object;r.level=0,e=this.leafItemSettings.labelPath,r[e]=[];for(var o=0;o<this.dataSource.length;o++){var n=g(this.dataSource[o]).values;this.isHierarchicalData&&n&&n.length>0?n.forEach(function(t,o){t[e]&&r[e].push({groupIndex:0,name:t[e],levelOrderName:t[e].toString(),data:t,weight:t[i.weightValuePath]})}):this.dataSource[o][e]&&r[e].push({groupIndex:0,name:this.dataSource[o][e],levelOrderName:this.dataSource[o][e].toString(),data:this.dataSource[o],weight:this.dataSource[o][this.weightValuePath]})}this.levelsOfData.push(r)}else{if(this.isHierarchicalData){this.hierarchyData=[],this.hierarchyData=t.extend([],this.dataSource,this.hierarchyData,!0);for(o=0;o<this.hierarchyData.length;o++)this.processHierarchicalData(this.hierarchyData[o],o);this.levelsOfData=this.hierarchyData}else this.processFlatJsonData(),this.levelsOfData.length>1&&this.reOrderLevelData(this.levelsOfData.length-1);e=this.levels[0].groupPath}this.isHierarchicalData||this.findTotalWeight(this.levelsOfData[0][e],"Parent")}},i.prototype.checkIsHierarchicalData=function(){var e;this.dataSource=this.dataSource;for(var t=0;t<this.dataSource.length;t++){if((e=g(this.dataSource[t]).values)&&e.length){this.isHierarchicalData=!0;break}t===this.dataSource.length-1&&(this.isHierarchicalData=!1)}},i.prototype.processHierarchicalData=function(e,i){var r,o,n,a=this,l=new Object,s=this.leafItemSettings.labelPath?this.leafItemSettings.labelPath:this.weightValuePath;if(l=g(e),(r=l?l.values:null)&&r.length>0){n=l.key;for(var h=0;h<this.levels.length;h++)n===this.levels[h].groupPath&&(this.levels[h],o=h);for(var p=0;p<r.length;p++)r[p].name=r[p][s],r[p].levelOrderName=(0===o?r[p].name:e.levelOrderName+"_"+r[p].name)+"",r[p].groupIndex=t.isNullOrUndefined(o)?this.levels.length:o,0!==o&&(r[p].parent=e),r[p].groupName=n,r[p].data=r[p],r[p].isDrilled=!1,r[p].weight=r[p][this.weightValuePath];r.forEach(function(e){a.processHierarchicalData(e,i)})}if(i===this.hierarchyData.length-1){for(var d=this.hierarchyData[0][this.levels[0].groupPath],c=0;c<this.hierarchyData.length;c++)r=g(this.hierarchyData[c]).values,0!==c&&r&&(r.forEach(function(e){d.push(e)}),this.hierarchyData.splice(c,1),c-=1);d=this.hierarchyData[0][this.levels[0].groupPath];for(var u=0;u<d.length;u++)l[this.levels[0].groupPath]=d,d[u].parent=l}},i.prototype.print=function(e){new Oe(this).print(e)},i.prototype.export=function(e,t,i){new Oe(this).export(e,t,i)},i.prototype.processFlatJsonData=function(){this.dataSource=this.dataSource;for(var e,t=[],i=0;i<this.levels.length+1;i++){e=this.levels[i]?this.levels[i].groupPath:this.leafItemSettings.labelPath;var r=new Object;r.level=i,r[e]=[],this.levelsOfData.push(r);for(var o=0;o<this.dataSource.length;o++){var n={},a="";if(this.dataSource[o][e]){var l=this.dataSource[o][e];if(0!==i)for(var s=0;s<=i;s++){var h=this.levels[s]?this.levels[s].groupPath:e;a+=this.dataSource[o][h]+(s===i?"":"_")}t.length>0&&-1!==t.indexOf(a||l)||(n.name=l,n.levelOrderName=(a||l)+"",n.groupIndex=i,n.isDrilled=!1,n.groupName=e,n.data=this.dataSource[o],this.levelsOfData[this.levelsOfData.length-1][e].push(n),t.push(a||l))}}}},i.prototype.reOrderLevelData=function(e){for(var i,r=this.levels[e]?this.levels[e].groupPath:this.leafItemSettings.labelPath,o=this.levels[e-1].groupPath,n=this.levelsOfData[e][r],a=this.levelsOfData[e-1][o],l=0;l<n.length;l++){i=n[l].levelOrderName;for(var s=0;s<a.length;s++)if(a[s][r]=t.isNullOrUndefined(a[s][r])?[]:a[s][r],-1!==i.indexOf(a[s].levelOrderName)){t.isNullOrUndefined(n[l].parent)&&(n[l].parent=a[s]),a[s][r].push(n[l]);break}}this.findTotalWeight(this.levelsOfData[this.levelsOfData.length-1][r],"Child"),this.levelsOfData.splice(e,1),e-1>0&&this.reOrderLevelData(e-1)},i.prototype.findTotalWeight=function(e,t){for(var i,r,o,n=this,a=new Object,l=function(l){i=0,o=e[l].groupName,r=e[l].levelOrderName.split("_"),s.dataSource.forEach(function(t){c(r,e[l].levelOrderName,t,n)&&(i+=parseFloat(t[n.weightValuePath]))}),"Parent"===t&&(a[o]=e,e[l].parent=a),e[l].weight=i},s=this,h=0;h<e.length;h++)l(h)},i.prototype.unWireEVents=function(){t.EventHandler.remove(this.element,"click",this.clickOnTreeMap),t.EventHandler.remove(this.element,t.Browser.touchStartEvent,this.mouseDownOnTreeMap),t.EventHandler.remove(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnTreeMap),t.EventHandler.remove(this.element,t.Browser.touchEndEvent,this.mouseEndOnTreeMap),t.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnTreeMap),window.removeEventListener("resize",this.resizeOnTreeMap)},i.prototype.wireEVents=function(){t.EventHandler.add(this.element,"click",this.clickOnTreeMap,this),t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.mouseDownOnTreeMap,this),t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnTreeMap,this),t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEndOnTreeMap,this),t.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnTreeMap,this),window.addEventListener("resize",this.resizeOnTreeMap.bind(this))},i.prototype.setCulture=function(){this.intl=new t.Internationalization},i.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"TreeMap Element"),this.element.setAttribute("tabindex",this.tabIndex.toString())},i.prototype.resizeOnTreeMap=function(e){var t=this,i={name:$,cancel:!1,previousSize:this.availableSize,currentSize:new ye(0,0),treemap:this};this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-treemap")&&(this.resizeTo=setTimeout(function(){t.unWireEVents(),t.createSvg(),t.refreshing=!0,t.wireEVents(),i.currentSize=t.availableSize,t.trigger($,i),t.render()},500))},i.prototype.clickOnTreeMap=function(e){var t,i,r=e.target.id,o={cancel:!1,name:"click",treemap:this,mouseEvent:e};this.trigger("click",o),r.indexOf("_Item_Index")>-1&&(e.preventDefault(),i=parseFloat(r.split("_")[6]),t={cancel:!1,name:J,treemap:this,item:this.layout.renderItems[i],mouseEvent:e},this.trigger(J,t))},i.prototype.mouseDownOnTreeMap=function(e){var i,r,o,n,a,l=e.target,s=l.id,h=new Object,p=this.element.id+"_TreeMap_"+this.layoutType+"_Layout";if(s.indexOf("_Item_Index")>-1&&this.enableDrillDown&&(e.preventDefault(),n=parseFloat(s.split("_")[6]),a=this.layout.renderItems[n],0!==this.levels.length&&!a.isLeafItem&&g(a).values&&g(a).values.length>0)){if(this.drilledItems.length>0)for(var d=0;d<this.drilledItems.length;d++){if(a.levelOrderName===this.drilledItems[d].name){0===a.groupIndex&&a.parent[a.groupName]instanceof Array?(a.isDrilled=!a.isDrilled,a.isDrilled?h[a.groupName]=[a]:h=a.parent):(a.isDrilled=!1,a.parent.isDrilled=!0,h[(a=a.parent).groupName]=[a]),this.drilledItems.splice(d,1),d-=1;break}d===this.drilledItems.length-1&&(a.isDrilled=!0,h[a.groupName]=[a])}else a.isDrilled=!0,h[a.groupName]=[a];i={cancel:!1,name:G,treemap:this,item:h,element:l},this.trigger(G,i),i.cancel||(document.getElementById(p)&&document.getElementById(p).remove(),o=t.extend({},this.areaRect,o,!0),this.layout.calculateLayoutItems(h,o),this.layout.renderLayoutItems(h)),r={cancel:!1,name:V,treemap:this,renderItems:this.layout.renderItems},this.trigger(V,r),this.drilledItems.push({name:a.levelOrderName,data:a})}this.notify(t.Browser.touchStartEvent,e)},i.prototype.mouseMoveOnTreeMap=function(e){var i,r,o=e.target.id,n={cancel:!1,name:Z,treemap:this,mouseEvent:e};this.trigger(Z,n);var a;o.indexOf("_Item_Index")>-1&&(a=g(r=this.layout.renderItems[parseFloat(o.split("_")[6])]).values,this.element.style.cursor=!r.isLeafItem&&a&&a.length>0&&this.enableDrillDown?"pointer":"auto",i={cancel:!1,name:Y,treemap:this,item:r,mouseEvent:e},this.trigger(Y,i)),this.notify(t.Browser.touchMoveEvent,e)},i.prototype.mouseEndOnTreeMap=function(e){this.notify(t.Browser.touchEndEvent,e)},i.prototype.mouseLeaveOnTreeMap=function(e){this.treeMapTooltipModule&&this.treeMapTooltipModule.removeTooltip(),this.treeMapLegendModule&&this.treeMapLegendModule.removeInteractivePointer(),E(document.getElementsByClassName("treeMapHighLight"),"treeMapHighLight",this)},i.prototype.requiredModules=function(){var e=[];return this.tooltipSettings.visible&&e.push({member:"treeMapTooltip",args:[this]}),this.highlightSettings.enable&&e.push({member:"treeMapHighlight",args:[this]}),this.selectionSettings.enable&&e.push({member:"treeMapSelection",args:[this]}),this.legendSettings.visible&&e.push({member:"treeMapLegend",args:[this]}),e},i.prototype.onPropertyChanged=function(e,t){for(var i=!1,r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"background":this.renderBorder();break;case"height":case"width":i=!0}}i&&(this.createSvg(),this.render())},i.prototype.getModuleName=function(){return"treemap"},i.prototype.destroy=function(){this.unWireEVents(),e.prototype.destroy.call(this)},i.prototype.getPersistData=function(){return""},Le([t.Property(null)],i.prototype,"width",void 0),Le([t.Property(null)],i.prototype,"height",void 0),Le([t.Complex({},ie)],i.prototype,"border",void 0),Le([t.Complex({},re)],i.prototype,"margin",void 0),Le([t.Property(null)],i.prototype,"background",void 0),Le([t.Property("Material")],i.prototype,"theme",void 0),Le([t.Complex({},le)],i.prototype,"titleSettings",void 0),Le([t.Property("Squarified")],i.prototype,"layoutType",void 0),Le([t.Property(null)],i.prototype,"dataSource",void 0),Le([t.Property(null)],i.prototype,"query",void 0),Le([t.Property(null)],i.prototype,"weightValuePath",void 0),Le([t.Property("")],i.prototype,"rangeColorValuePath",void 0),Le([t.Property("")],i.prototype,"equalColorValuePath",void 0),Le([t.Property([])],i.prototype,"palette",void 0),Le([t.Property(!1)],i.prototype,"enableDrillDown",void 0),Le([t.Complex({},pe)],i.prototype,"initialDrillDown",void 0),Le([t.Complex({},de)],i.prototype,"leafItemSettings",void 0),Le([t.Collection([],me)],i.prototype,"levels",void 0),Le([t.Complex({},ue)],i.prototype,"highlightSettings",void 0),Le([t.Complex({},ge)],i.prototype,"selectionSettings",void 0),Le([t.Complex({},ce)],i.prototype,"tooltipSettings",void 0),Le([t.Complex({},he)],i.prototype,"legendSettings",void 0),Le([t.Property(!1)],i.prototype,"useGroupingSeparator",void 0),Le([t.Property(null)],i.prototype,"description",void 0),Le([t.Property(1)],i.prototype,"tabIndex",void 0),Le([t.Property(null)],i.prototype,"format",void 0),Le([t.Event()],i.prototype,"load",void 0),Le([t.Event()],i.prototype,"beforePrint",void 0),Le([t.Event()],i.prototype,"loaded",void 0),Le([t.Event()],i.prototype,"itemRendering",void 0),Le([t.Event()],i.prototype,"drillStart",void 0),Le([t.Event()],i.prototype,"drillEnd",void 0),Le([t.Event()],i.prototype,"itemSelected",void 0),Le([t.Event()],i.prototype,"itemHighlight",void 0),Le([t.Event()],i.prototype,"tooltipRendering",void 0),Le([t.Event()],i.prototype,"itemClick",void 0),Le([t.Event()],i.prototype,"itemMove",void 0),Le([t.Event()],i.prototype,"click",void 0),Le([t.Event()],i.prototype,"mouseMove",void 0),Le([t.Event()],i.prototype,"resize",void 0),i=Le([t.NotifyPropertyChanges],i)}(t.Component);(e.Theme||(e.Theme={})).mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};var Te=function(){function e(e){this.page=0,this.legendBorderRect=new ve(0,0,0,0),this.currentPage=0,this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.legendItemRect=new ve(0,0,0,0),this.treemap=e,this.addEventListener()}return e.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollections=[],this.legendNames=[],this.totalPages=[],this.gradientCount=1,this.defsElement=this.treemap.renderer.createDefs(),this.treemap.svgObject.appendChild(this.defsElement),this.calculateLegendBounds(),this.drawLegend()},e.prototype.calculateLegendBounds=function(){var e=this,i=this.treemap,r=i.legendSettings;if(this.findColorMappingLegendItems(i.levelsOfData[0]),this.treemap.palette.length>0&&0===this.legendCollections.length&&this.findPaletteLegendItems(this.treemap.levelsOfData[0],"Parent"),this.legendCollections.length>0){var o=r.position,n=r.title.text,s=r.titleStyle,h=r.mode,p=0,d=0,c=0,g=0,u=r.shapeHeight,m=r.shapeWidth,y=[],v=[],f="None"===r.orientation?"Top"===o||"Bottom"===o?"Horizontal":"Vertical":r.orientation,w=r.width.length>1?r.width.indexOf("%")>-1?i.availableSize.width/100*parseFloat(r.width):parseFloat(r.width):null,x=r.height.length>1?r.height.indexOf("%")>-1?i.availableSize.height/100*parseFloat(r.height):parseFloat(r.height):null,b=a(n,s),S=0,P=0,I=r.shapePadding;r.textStyle,this.legendCollections.length;if("Default"===h){w=t.isNullOrUndefined(w)?i.areaRect.width:w,x=t.isNullOrUndefined(x)?i.areaRect.height:x;for(var O=0,M=0;M<this.legendCollections.length;M++){var L=this.legendCollections[M];t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]});var C=a(L.legendName,r.textStyle);if(this.textMaxWidth=Math.max(this.textMaxWidth,C.width),0===M)S=p=10+m/2,P=d=10+b.height+(u>C.height?u/2:C.height/4);else{var T=C.height>u?C.height:u;if("Horizontal"===f){var E=v[O-1].x+v[O-1].width+10+m;if(E+I+C.width>w){var D=(v[O-1].y>y[O-1].y+u/2?v[O-1].y:y[O-1].y+u/2)+10;D+T>x?(this.getPageChanged(),O=0,y=[],v=[],p=S,d=P):(p=y[0].x,d=D+T/2)}else p=E-m/2,d=y[O-1].y}else{var _=v[O-1].y>y[O-1].y+u/2?v[O-1].y:y[O-1].y+u/2;if(_+10+T>x){var N=v[O-1].x+this.textMaxWidth+10;N+I+C.width>w?(p=S,d=P,v=[],y=[],this.getPageChanged(),O=0):(p=N+m/2,d=y[0].y)}else p=y[O-1].x,d=_+10+u/2}}c=p+m/2+I,g=d+C.height/4,y.push({x:p,y:d}),v.push({x:c,y:g,width:C.width,height:C.height/2}),this.totalPages[this.page].Collection.push({DisplayText:L.legendName,Shape:{x:p,y:d},Text:{x:c,y:g},Fill:L.legendFill,Data:L.legendData,Rect:{x:y[O].x-m/2,y:y[O].y-u/2<g-C.height?y[O].y-u/2:g-C.height,width:Math.abs(y[O].x-m/2-(c+C.width)),height:u>C.height?u:C.height}}),O++}var R=this.totalPages[0].Collection;R.forEach(function(t,i){var r=new ve(t.Rect.x,t.Rect.y,t.Rect.width,t.Rect.height);0===i&&(S=r.x,P=r.y),e.widthIncrement=Math.max(e.widthIncrement,Math.abs(S-(r.x+r.width))),e.heightIncrement=Math.max(e.heightIncrement,Math.abs(P-(r.y+r.height)))}),w=this.widthIncrement<w?this.widthIncrement:w,x=this.heightIncrement<x?this.heightIncrement:x,this.legendItemRect={x:R[0].Rect.x,y:R[0].Rect.y,width:w,height:x}}else{var B,H,z=r.textStyle,k=this.legendCollections.length;B="Horizontal"===f?t.isNullOrUndefined(w)?i.areaRect.width/k:w/k:t.isNullOrUndefined(w)?25:w,H="Horizontal"===f?t.isNullOrUndefined(x)?25:x:t.isNullOrUndefined(x)?i.areaRect.height/k:x/k,S=0,P=b.height+10;var A=r.labelPosition,j=0,F=0,U=r.labelDisplayMode,G=0,V=0;for(M=0;M<this.legendCollections.length;M++){S="Horizontal"===f?S+B:S,P="Horizontal"===f?P:P+H;var W=this.legendCollections[M].legendName,q=new ye(0,0);"None"===U?q=a(W,z):"Trim"===U?q=a(W=l("Horizontal"===f?B:H,W,z),z):W="",G=Math.max(G,q.height),V=Math.max(V,q.width),q.width>0&&q.height>0&&("Horizontal"===f?(c=S+B/2,g="After"===A?P+H+q.height/2+10:P-10):(c="After"===A?S-q.width/2-10:S+B+q.width/2+10,g=P+H/2+q.height/4)),0===M&&(j="Horizontal"===f?S:"After"===A?c-q.width/2:S,F="Horizontal"===f?"After"===A?P:g-q.height/2:P),M===k-1&&(w="Horizontal"===f?Math.abs(S+B-j):B+V+10,x="Horizontal"===f?H+G/2+10:Math.abs(P+H-F)),this.legendRenderingCollections.push({fill:this.legendCollections[M].legendFill,x:S,y:P,width:B,height:H,element:this.legendCollections[M].gradientElement,text:W,textX:c,textY:g,textWidth:q.width,textHeight:q.height,data:this.legendCollections[M].legendData})}this.legendItemRect={x:j,y:F,width:w,height:x}}}},e.prototype.getPageChanged=function(){this.page++,t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},e.prototype.findColorMappingLegendItems=function(e){var t=g(e).values;if(t&&t.length>0&&(this.calculateLegendItems(t),this.treemap.levels.length>0))for(var i=0;i<t.length;i++)this.findColorMappingLegendItems(t[i])},e.prototype.findPaletteLegendItems=function(e,t){var i=g(e).values;if(i&&i.length>0){for(var r=0;r<i.length;r++)this.legendCollections.push({legendName:i[r].name,legendFill:this.treemap.palette[r%this.treemap.palette.length],legendData:[],itemArea:i[r].weight});this.legendCollections.sort(T);for(var o=0;o<this.legendCollections.length;o++)this.legendCollections[o].legendFill=this.treemap.palette[o%this.treemap.palette.length]}},e.prototype.calculateLegendItems=function(e){for(var i,r,o,n,a,l,s,h,p,d,c=!1,g=this.treemap.leafItemSettings,u=this.treemap.levels,m=this.treemap.legendSettings.position,y=0;y<e.length;y++){n=e[y].data,l=e[y].groupIndex;for(var v=0,f=0===this.treemap.levels.length||l===this.treemap.levels.length?g.colorMapping:u[l].colorMapping;v<f.length;v++){var w=f[v];if(o=Number(n[this.treemap.rangeColorValuePath]),s=n[this.treemap.equalColorValuePath],w.value=t.isNullOrUndefined(w.value)?w.value:w.value.toString(),!t.isNullOrUndefined(w.from)&&!t.isNullOrUndefined(w.to)&&o>=w.from&&o<=w.to?(c=!0,a=t.isNullOrUndefined(w.label)?w.from+" - "+w.to:w.label,r=t.isNullOrUndefined(w.color)?r:w.color,i=this.isAddNewLegendData(a)):t.isNullOrUndefined(w.value)||s!==w.value||(c=!0,a=t.isNullOrUndefined(w.label)?w.value.toString():w.label,r=t.isNullOrUndefined(w.color)?r:w.color,i=this.isAddNewLegendData(a)),c&&w.maxOpacity&&w.minOpacity&&"Interactive"===this.treemap.legendSettings.mode){var x=[],b=void 0,S={colorStop:"0%",color:r},P={colorStop:"100%",color:r};p="Top"===m||"Bottom"===m?"100%":"0%",d="Top"===m||"Bottom"===m?"0%":"100%",x.push(S),x.push(P),b={id:"groupIndex_"+l+"_colorIndex_"+this.gradientCount,x1:"0%",y1:"0%",x2:p,y2:d},(h=this.treemap.renderer.drawGradient("linearGradient",b,x).childNodes[0]).childNodes[0].setAttribute("stop-opacity",w.minOpacity.toString()),h.childNodes[1].setAttribute("stop-opacity",w.maxOpacity.toString()),this.defsElement.appendChild(h),this.gradientCount++}i&&i.process&&c?(c=!1,this.legendCollections.push({legendName:a,legendFill:r,legendData:[],gradientElement:h}),this.legendCollections[this.legendCollections.length-1].legendData.push(e[y])):c&&(c=!1,this.legendCollections[i.value].legendData.push(e[y]))}}},e.prototype.isAddNewLegendData=function(e){var t,i;if(0===this.legendCollections.length)t=!0;else for(var r=0;r<this.legendCollections.length;r++){if(e===this.legendCollections[r].legendName){t=!1,i=r;break}r===this.legendCollections.length-1&&(t=!0)}return{process:t,value:i}},e.prototype.drawLegend=function(){var e,t,i=this.treemap,r=i.legendSettings,o=i.renderer,n=r.textStyle;if(this.legendGroup=o.createGroup({id:i.element.id+"_Legend_Group"}),this.renderLegendBorder(),this.renderLegendTitle(),"Default"===r.mode)this.drawLegendItem(this.currentPage);else for(var a=0;a<this.legendRenderingCollections.length;a++){var l=i.element.id+"_Legend_Index_"+a,s=i.element.id+"_Legend_Index_"+a+"_Text",p=this.legendRenderingCollections[a];e=(t=p.element)?"url(#"+t.id+")":p.fill;var d=new ve(p.x,p.y,p.width,p.height),c=new be(p.textX,p.textY),g=new fe(l,e,r.shapeBorder,1,d);h(new xe(s,c.x,c.y,"middle",p.text,"",""),n,n.color,this.legendGroup),this.legendGroup.appendChild(o.drawRectangle(g))}},e.prototype.drawLegendItem=function(e){var i,r=this.treemap,o=r.legendSettings,n=new ye(o.shapeWidth,o.shapeHeight),l=r.renderer,s=o.shapeBorder;if(e>=0&&e<this.totalPages.length){document.getElementById(this.legendGroup.id)&&document.getElementById(this.legendGroup.id).remove();for(var p="HorizontalLine"===o.shape||"VerticalLine"===o.shape||"Cross"===o.shape,d=p?t.isNullOrUndefined(o.fill)?"#000000":o.fill:s.color,c=p&&0===s.width?1:s.width,g=0;g<this.totalPages[e].Collection.length;g++){var u=this.totalPages[e].Collection[g],m=l.createGroup({id:r.element.id+"_Legend_Index_"+g}),y=u.DisplayText,v=r.element.id+"_Legend_Shape_Index_"+g,f=r.element.id+"_Legend_Text_Index_"+g,w=u.Shape,x=u.Text;i={cancel:!1,name:Q,treemap:r,fill:u.Fill,shape:o.shape,imageUrl:o.imageUrl};var b=new we(v,i.fill,c,p?u.Fill:d,1,"");m.appendChild(k(w,i.shape,n,i.imageUrl,b,y)),h(new xe(f,x.x,x.y,"start",y,"",""),o.textStyle,o.textStyle.color,m),this.legendGroup.appendChild(m)}var S=void 0;if(0!==this.page){var P=e+1+"/"+this.totalPages.length,I=o.textStyle,O=a(P,I),M=this.legendItemRect.x+this.legendItemRect.width-O.width-20-10,L=this.legendItemRect.x+this.legendItemRect.width,C=this.legendItemRect.y+this.legendItemRect.height+2.5+10,T=L-10-O.width/2-5;S=l.createGroup({id:r.element.id+"_Legend_Paging_Group"});var E=l.createGroup({id:r.element.id+"_Legend_Left_Paging_Group"}),D=l.createGroup({id:r.element.id+"_Legend_Right_Paging_Group"}),_=" M "+L+" "+C+" L "+(L-10)+" "+(C-5)+" L "+(L-10)+" "+(C+5)+" z ",N=" M "+M+" "+C+" L "+(M+10)+" "+(C-5)+" L "+(M+10)+" "+(C+5)+" z ",R=new we(r.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",N);E.appendChild(l.drawPath(R));var B=new fe(r.element.id+"_Left_Page_Rect","transparent",{},1,new ve(M-5,C-10,20,20),"");E.appendChild(l.drawRectangle(B)),this.wireEvents(E);var H=new we(r.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",_);D.appendChild(l.drawPath(H));var z=new fe(r.element.id+"_Right_Page_Rect","transparent",{},1,new ve(L-10,C-5,10,10),"");D.appendChild(l.drawRectangle(z)),this.wireEvents(D),S.appendChild(E),S.appendChild(D);var A={id:r.element.id+"_Paging_Text",x:T,y:C+O.height/4,fill:"#a6a6a6","font-size":"14px","font-style":I.fontStyle,"font-family":I.fontFamily,"font-weight":I.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};S.appendChild(l.createText(A,P)),this.legendGroup.appendChild(S)}}},e.prototype.renderLegendBorder=function(){var e=this.treemap,t=e.legendSettings,i=t.title.text,r=t.titleStyle,o=a(l(this.legendItemRect.width+20,i,r),r);this.legendBorderRect=new ve(this.legendItemRect.x-10,this.legendItemRect.y-10-o.height,this.legendItemRect.width+20,this.legendItemRect.height+20+o.height+("Interactive"===t.mode?0:0!==this.page?10:0));var n=new fe(e.element.id+"_Legend_Border",t.background,t.border,1,this.legendBorderRect,""),s=e.renderer.drawRectangle(n);s.style.pointerEvents="none",this.legendGroup.appendChild(s),this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,t),this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),e.svgObject.appendChild(this.legendGroup)},e.prototype.renderLegendTitle=function(){var e=this.treemap,t=e.legendSettings,i=t.titleStyle,r=t.title.text,o=l(this.legendItemRect.width+20,r,i),n=a(o,i);r&&h(new xe(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-n.height/2,"middle",o,""),i,i.color,this.legendGroup)},e.prototype.renderInteractivePointer=function(e){var i=this.treemap,r=e.target,o=i.element.id+"_Interactive_Legend";r=e.type.indexOf("touch")>-1?document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY):r;var n,a=i.legendSettings;if(r.id.indexOf("_Item_Index")>-1&&a.visible&&this.legendRenderingCollections.length>0){var l=void 0,s=void 0,h=void 0,p=void 0,d=void 0,c=void 0,g=void 0;n=i.layout.renderItems[parseFloat(r.id.split("_")[6])];for(var u=i.svgObject.getBoundingClientRect(),m=0;m<this.legendCollections.length;m++){l=this.legendCollections[m],s=(g=document.getElementById(i.element.id+"_Legend_Index_"+m)).getBoundingClientRect();var y=new ve(Math.abs(s.left-u.left),Math.abs(s.top-u.top),s.width,s.height);if(p=g.getAttribute("fill"),d=a.shapeBorder.color,c=a.shapeBorder.width,!t.isNullOrUndefined(l.legendData)){h=l.legendData;for(var v=0;v<h.length;v++)if(h[v].levelOrderName===n.levelOrderName){this.drawInteractivePointer(a,p,d,o,c,y);break}}}}else this.removeInteractivePointer()},e.prototype.drawInteractivePointer=function(e,t,i,r,o,n){var a,l,s,h;a="Horizontal"===("None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation)?e.invertedPointer?" M "+(s=n.x+n.width/2)+" "+(h=n.y+n.height)+" L "+(s-10)+" "+(h+10)+" L "+(s+10)+" "+(h+10)+" Z ":" M "+(s=n.x+n.width/2)+" "+(h=n.y)+" L "+(s-10)+" "+(h-10)+" L "+(s+10)+" "+(h-10)+" Z ":e.invertedPointer?" M "+(s=n.x)+" "+(h=n.y+n.height/2)+" L "+(s-10)+" "+(h-10)+" L "+(s-10)+" "+(h+10)+" z ":" M "+(s=n.x+n.width)+" "+(h=n.y+n.height/2)+" L "+(s+10)+" "+(h-10)+" L "+(s+10)+" "+(h+10)+" z ",l=new we(r,t,o,i,1,"",a),this.treemap.svgObject.appendChild(this.treemap.renderer.drawPath(l))},e.prototype.getLegendAlignment=function(e,t,i,r){var o,n,a=e.areaRect.x,l=e.areaRect.y,s=e.areaRect.height,h=e.areaRect.width,p=e.availableSize.width,d=e.availableSize.height;if("Float"===r.position)this.translate=r.location;else{switch(r.position){case"Top":case"Bottom":e.areaRect.height=s-i,o=p/2-t/2,n="Top"===r.position?l:l+e.areaRect.height,e.areaRect.y="Top"===r.position?l+i+10:l;break;case"Left":case"Right":e.areaRect.width=h-t,o="Left"===r.position?a:a+e.areaRect.width,n=d/2-i/2,e.areaRect.x="Left"===r.position?a+t:a}switch(r.alignment){case"Near":"Top"===r.position||"Bottom"===r.position?o=e.areaRect.x:n=e.areaRect.y;break;case"Far":"Top"===r.position||"Bottom"===r.position?o=p-t:n=d-i}this.translate=new be(o,n)}},e.prototype.mouseUpHandler=function(e){this.renderInteractivePointer(e),clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeInteractivePointer.bind(this),3e3)},e.prototype.removeInteractivePointer=function(){document.getElementById(this.treemap.element.id+"_Interactive_Legend")&&document.getElementById(this.treemap.element.id+"_Interactive_Legend").remove()},e.prototype.changeNextPage=function(e){this.currentPage=e.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1,this.drawLegend()},e.prototype.wireEvents=function(e){t.EventHandler.add(e,t.Browser.touchStartEvent,this.changeNextPage,this)},e.prototype.addEventListener=function(){this.treemap.isDestroyed||(this.treemap.on(t.Browser.touchMoveEvent,this.renderInteractivePointer,this),this.treemap.on(t.Browser.touchEndEvent,this.mouseUpHandler,this))},e.prototype.removeEventListener=function(){this.treemap.isDestroyed||(this.treemap.off(t.Browser.touchMoveEvent,this.renderInteractivePointer),this.treemap.off(t.Browser.touchEndEvent,this.mouseUpHandler))},e.prototype.getModuleName=function(){return"treeMapLegend"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Ee=function(){function e(e){this.treemap=e,this.addEventListener()}return e.prototype.mouseMove=function(e){var t,i,r,o,n,a,l,s=this.treemap,h=e.target.id,p=[],d=this.treemap.highlightSettings,c=[];if(h.indexOf("_Item_Index")>-1)if(this.highLightId!==h){n=document.getElementById(s.element.id+"_TreeMap_"+s.layoutType+"_Layout");var g=document.getElementsByClassName("treeMapSelection");l=u(r=this.treemap.layout.renderItems[parseFloat(h.split("_")[6])],[],d.mode,s);for(var m=0;m<n.childElementCount;m++){a=n.childNodes[m],o=!0,r=s.layout.renderItems[a.id.split("_")[6]];for(var y=0;y<g.length;y++)if(a.id===g[y].id){o=!1;break}l.indexOf(r.levelOrderName)>-1&&o&&(c.push(a),p.push(r))}E(document.getElementsByClassName("treeMapHighLight"),"treeMapHighLight",s);for(var v=0;v<c.length;v++)D((a=c[v]).childNodes[0],{border:d.border,fill:d.fill,opacity:d.opacity}),a.classList.add("treeMapHighLight"),this.highLightId=h;i={cancel:!1,name:q,treemap:s,items:p,elements:c},s.trigger(q,i)}else t=!1;else E(document.getElementsByClassName("treeMapHighLight"),"treeMapHighLight",s),t=!1;return t},e.prototype.addEventListener=function(){this.treemap.isDestroyed||this.treemap.on(t.Browser.touchMoveEvent,this.mouseMove,this)},e.prototype.removeEventListener=function(){this.treemap.isDestroyed||this.treemap.off(t.Browser.touchMoveEvent,this.mouseMove)},e.prototype.getModuleName=function(){return"treeMapHighlight"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),De=function(){function e(e){this.treemap=e,this.addEventListener()}return e.prototype.mouseDown=function(e){var t,i,r,o,n,a=e.target,l=this.treemap,s=[],h=a.id,p=[],d=l.selectionSettings,c=l.element.id+"_TreeMap_"+l.layoutType+"_Layout";if(h.indexOf("_Item_Index")>-1)if(e.preventDefault(),this.selectionId!==h){r=document.getElementById(c),n=u(i=l.layout.renderItems[parseFloat(h.split("_")[6])],[],d.mode,l);for(var g=0;g<r.childElementCount;g++)o=r.childNodes[g],i=l.layout.renderItems[o.id.split("_")[6]],n.indexOf(i.levelOrderName)>-1&&(p.push(o),s.push(i));E(document.getElementsByClassName("treeMapSelection"),"treeMapSelection",l),this.selectionId=h;for(var m=document.getElementsByClassName("treeMapHighLight"),y=0;y<p.length;y++){if(o=p[y],m.length>0)for(var v=0;v<m.length;v++)m[v].id===o.id&&m[v].classList.remove("treeMapHighLight"),D(o.childNodes[0],{border:d.border,fill:d.fill,opacity:d.opacity}),o.classList.add("treeMapSelection");else D(o.childNodes[0],{border:d.border,fill:d.fill,opacity:d.opacity}),o.classList.add("treeMapSelection");t={cancel:!1,name:W,treemap:l,items:s,elements:p},l.trigger(W,t)}}else E(document.getElementsByClassName("treeMapSelection"),"treeMapSelection",l),this.selectionId="";else E(document.getElementsByClassName("treeMapSelection"),"treeMapSelection",l),this.selectionId=""},e.prototype.addEventListener=function(){this.treemap.isDestroyed||this.treemap.on(t.Browser.touchStartEvent,this.mouseDown,this)},e.prototype.removeEventListener=function(){this.treemap.isDestroyed||this.treemap.off(t.Browser.touchStartEvent,this.mouseDown)},e.prototype.getModuleName=function(){return"treeMapSelection"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),_e=function(){function e(e){this.treemap=e,this.tooltipSettings=this.treemap.tooltipSettings,this.tooltipId=this.treemap.element.id+"_TreeMapTooltip",this.addEventListener()}return e.prototype.renderTooltip=function(e){var i,r,n,a,l;-1!==e.type.indexOf("touch")?(this.isTouch=!0,i=(a=e).changedTouches[0].pageX,r=a.changedTouches[0].pageY,n=a.target):(this.isTouch="touch"===e.pointerType,i=e.pageX,r=e.pageY,n=e.target);var s,h,p,d,c=n.id,g={},u={},m=[];c.indexOf("_Item_Index")>-1?((g=this.treemap.layout.renderItems[parseFloat(c.split("_")[6])]).name,s=g.weight,this.currentTime=(new Date).getTime(),u=g.data,d=g.options.fill,m=[_(this.tooltipSettings.format,u,this.treemap)||this.treemap.weightValuePath.toString()+" : "+N(s,this.treemap)],document.getElementById(this.tooltipId)?h=document.getElementById(this.tooltipId):(h=t.createElement("div",{id:this.treemap.element.id+"_TreeMapTooltip",className:"EJ2-TreeMap-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.treemap.element.id+"_Secondary_Element").appendChild(h)),(p=P(i,r,this.treemap.svgObject)).y=this.tooltipSettings.template?p.y+10:p.y,l={cancel:!1,name:X,item:g,options:{location:p,text:m,data:u,textStyle:this.tooltipSettings.textStyle,template:this.tooltipSettings.template},treemap:this.treemap,element:n,eventArgs:e},this.treemap.trigger(X,l),l.cancel?this.removeTooltip():(this.svgTooltip=new o.Tooltip({enable:!0,header:"",data:l.options.data,template:l.options.template,content:l.options.text,shapes:[],location:l.options.location,palette:[d],areaBounds:this.treemap.areaRect,textStyle:l.options.textStyle,theme:this.treemap.theme}),this.svgTooltip.appendTo(h))):this.removeTooltip()},e.prototype.mouseUpHandler=function(e){this.renderTooltip(e),clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3)},e.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-TreeMap-Tooltip").length>0&&document.getElementsByClassName("EJ2-TreeMap-Tooltip")[0].remove()},e.prototype.addEventListener=function(){this.treemap.isDestroyed||(this.treemap.on(t.Browser.touchMoveEvent,this.renderTooltip,this),this.treemap.on(t.Browser.touchEndEvent,this.mouseUpHandler,this))},e.prototype.removeEventListener=function(){this.treemap.isDestroyed||(this.treemap.off(t.Browser.touchMoveEvent,this.renderTooltip),this.treemap.off(t.Browser.touchEndEvent,this.mouseUpHandler))},e.prototype.getModuleName=function(){return"treeMapTooltip"},e.prototype.destroy=function(e){this.removeEventListener()},e}();e.TreeMap=Ce,e.Border=ie,e.Margin=re,e.Font=oe,e.CommonTitleSettings=ne,e.SubTitleSettings=ae,e.TitleSettings=le,e.ColorMapping=se,e.LegendSettings=he,e.InitialDrillSettings=pe,e.LeafItemSettings=de,e.TooltipSettings=ce,e.SelectionSettings=ge,e.HighlightSettings=ue,e.LevelSettings=me,e.load="load",e.loaded="loaded",e.beforePrint=F,e.itemRendering=U,e.drillStart=G,e.drillEnd=V,e.itemSelected=W,e.itemHighlight=q,e.tooltipRendering=X,e.itemClick=J,e.itemMove=Y,e.click="click",e.mouseMove=Z,e.legendItemRendering=Q,e.resize=$,e.defaultFont=K,e.Size=ye,e.stringToNumber=n,e.Rect=ve,e.RectOption=fe,e.PathOption=we,e.measureText=a,e.TextOption=xe,e.textTrim=l,e.Location=be,e.findPosition=s,e.renderTextElement=h,e.getElement=p,e.itemsToOrder=d,e.isContainsData=c,e.findChildren=g,e.findHightLightItems=u,e.getTemplateFunction=m,e.convertElement=y,e.findLabelLocation=v,e.measureElement=f,e.getArea=w,e.getShortestEdge=x,e.convertToContainer=b,e.convertToRect=S,e.getMousePosition=P,e.colorMap=I,e.deSaturationColor=O,e.wordWrap=M,e.textWrap=L,e.hide=C,e.orderByArea=T,e.removeClassNames=E,e.applyOptions=D,e.textFormatter=_,e.formatValue=N,e.ColorValue=Se,e.convertToHexCode=R,e.componentToHex=B,e.convertHexToColor=H,e.colorNameToHex=z,e.drawSymbol=k,e.renderLegendShape=A,e.isParentItem=j,e.TreeMapAjax=Pe,e.ExportUtils=Oe,e.TreeMapLegend=Te,e.LayoutPanel=Ie,e.TreeMapHighlight=Ee,e.TreeMapSelection=De,e.TreeMapTooltip=_e,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-treemap.umd.min.js.map
