/*!
*  filename: ej2-schedule.umd.min.js
*  version : 16.3.24
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-calendars"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-buttons"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-dropdowns"),require("@syncfusion/ej2-lists")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-popups","@syncfusion/ej2-navigations","@syncfusion/ej2-calendars","@syncfusion/ej2-data","@syncfusion/ej2-buttons","@syncfusion/ej2-inputs","@syncfusion/ej2-dropdowns","@syncfusion/ej2-lists"],t):t(e.ej={},e.ej2Base,e.ej2Popups,e.ej2Navigations,e.ej2Calendars,e.ej2Data,e.ej2Buttons,e.ej2Inputs,e.ej2Dropdowns,e.ej2Lists)}(this,function(e,t,i,n,a,r,s,o,l,c){"use strict";function p(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function h(e){return new Date(e.getFullYear(),e.getMonth())}function d(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function u(e){var t=new Date(""+e).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf(),n=t-i;return Math.ceil((n/de+new Date(i).getDay()+1)/7)}function v(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),a=n.getTimezoneOffset()-i;return e.setTime(n.getTime()+a*de),e}function m(e){return e.setHours(0,0,0,0),e}function g(e){return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()}function f(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function y(e,t){var i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,w(e))),e}function T(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var a=new Date(e.getTime());return 0===i.getHours()?a=f(a,1):(a.setHours(i.getHours()),a.setMinutes(i.getMinutes()),a.setSeconds(i.getSeconds())),{startHour:n,endHour:a}}function w(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function b(e,t){var i=m(new Date(e));return(m(new Date(t)).getTime()-i.getTime())/de}function C(e){return-1!==e.indexOf("Date")?new Date(parseInt(e.match(/\d+/g).toString(),10)):-1!==e.indexOf("T")?new Date(e):new Date(e.replace(/-/g,"/"))}function D(){if(null!==ue)return ue;var e=t.createElement("div"),i=0;return e.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e),i=e.offsetWidth-e.clientWidth|0,document.body.removeChild(e),ue=i}function O(e,t,i){for(var n=0,a=e.length;n<a;n++)if(e[n][t]===i)return n;return-1}function E(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function S(e,i,n){var a="";if(e.monthDay.length)a+=e.monthDay[0];else if(e.day){var r=e.setPosition-1;a+=n.getConstant(cn[r>-1?r:cn.length-1])+" "+t.getValue(yn[e.day[0]],i)}return a}function x(e,i,n,a,r,s){void 0===r&&(r=sn),void 0===s&&(s=null);var o,l=H(i),c=[],p=new Date(e.getTime());if(z=s&&s>e&&!l.count?new Date(new Date(s.getTime()).setHours(0,0,0)):null,!l.until&&z&&((o=new Date(z.getTime())).setDate(z.getDate()+42*l.interval),l.until=o),l.until&&e>l.until)return c;W=r,function(e){for(;nn[0]!==e;)L(nn)}(rn[a]),B=[];switch((t.isNullOrUndefined(n)?[]:n.split(",")).forEach(function(e){var t=A(e);B.push(new Date(t.getTime()).setHours(0,0,0,0))}),l.freq){case"DAILY":!function(e,t,i,n){var a=new Date(e.getTime()),r=n.interval,s=n.count?n.count:W;for(;j(a,t)&&(!0,!(U(a,n)&&(k(i,a.getTime()),s&&i.length+B.length>=s)));)a.setDate(a.getDate()+r)}(p,l.until,c,l);break;case"WEEKLY":!function(e,t,i,n){var a=R(e,n.day),r=n.interval,s=n.day,o=n.count?n.count:W,l=I(s);for(;j(a,t)&&(!0,!(U(a,n)&&(k(i,a.getTime()),o&&i.length+B.length>=o)));)s.length>1?a.setDate(a.getDate()+l[rn[a.getDay()]]+(s.indexOf(rn[a.getDay()])===s.length-1?7*(r-1):0)):a.setDate(a.getDate()+7*r)}(p,l.until,c,l);break;case"MONTHLY":V(p,l.until,c,l);break;case"YEARLY":!function(e,t,i,n){switch(function(e){{if(e.yearDay.length)return"YEARDAY";if(e.weekNo.length)return"WEEKNO"}return"MONTH"}(n)){case"MONTH":V(e,t,i,n);break;case"WEEKNO":!function(e,t,i,n){var a,r,s,o,l,c,p,h=new Date(e.getFullYear(),0,0),d=n.count?n.count:W,u=n.weekNo;for(;j(h,t);){s=nn.indexOf(rn[h.getDay()]),o=6-s+1;for(var v=0;v<u.length;v++)for(l=u[v],c=1===(l=l>0?l:53+l+1)?o:o+7*(l-1),p=1===l?o-7:o+7*(l-2);p<c;){if(a=new Date(h.getTime()+de*p),r=U(a,n),a>=e&&r&&j(a,t)&&(k(i,a.getTime()),d&&i.length+B.length>=d))return;p++}h=new Date(a.getFullYear()+n.interval,0,0)}}(e,t,i,n);break;case"YEARDAY":!function(e,t,i,n){var a,r,s,o=new Date(e.getFullYear(),0,0),l=n.count?n.count:W;for(;j(o,t);){for(var c=0;c<n.yearDay.length;c++)if(s=n.yearDay[c],a=new Date(o.getTime()),s!==on&&s!==-on||(a.getFullYear()+1)%4==0){if(a.setDate(a.getDate()+(s<0?M(a.getFullYear()+1)+1+s:s)),r=U(a,n),a>=e&&r&&j(a,t)&&(k(i,a.getTime()),l&&i.length+B.length>=l))return}else a.setDate(a.getDate()+1);o=new Date(a.getFullYear()+n.interval,0,0)}}(e,t,i,n)}}(p,l.until,c,l)}return c}function A(e){return new Date(e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,5)+":"+e.substr(11,2)+":"+e.substr(13))}function k(e,t){var i=new Date(t).setHours(0,0,0,0);-1===B.indexOf(i)&&(!z||i>=z.getTime())&&e.push(t)}function V(e,t,i,n){switch(function(e){{if(e.monthDay.length&&!e.day.length)return"date";if(!e.monthDay.length&&e.day.length)return"day"}return"both"}(n)){case"day":!function(e,t,i,n){var a,r,s,o,l=new Date(e.getTime()),c=n.day,p=n.count?n.count:W,h=I(c),d=n.interval,u=[],v=[],m=0;l.setDate(1),n.month.length&&l.setMonth(n.month[0]-1);l=R(l,n.day);for(;j(l,t);){if(r=l.getMonth(),o=new Date(l.getTime()),c.length>1)for(;l.getMonth()===r;)v.push(l.getTime()),rn[l.getDay()]===c[c.length-1]&&(u.push(v),v=[]),l.setDate(l.getDate()+h[rn[l.getDay()]]);else for(var g=new Date(l.getTime());g.getMonth()===r;)u.push([g.getTime()]),g.setDate(g.getDate()+7);if(s=n.setPosition<1?u.length+n.setPosition:n.setPosition-1,null===n.setPosition){s=0;for(var f=[],y=0;y<u.length;y++)for(var T=0;T<u[y].length;T++)f.push(u[y][T]);u=[f]}for(var y=0;y<u[s].length;y++){var w=u[s][y],b=new Date(w);if(a=U(b,n),b>=e&&j(b,t)&&a&&(k(i,w),p&&i.length+B.length>=p))return}m=P(l,n,m,d,o),u=[],v=[],l=R(l,n.day)}}(e,t,i,n);break;case"both":case"date":!function(e,t,i,n){var a,r,s=new Date(e.getTime()),o=new Date(e.getTime()),l=n.count?n.count:W,c=n.interval,p=0;s.setDate(1),o.setDate(1),n.month.length&&s.setMonth(n.month[0]-1);for(;j(s,t);){for(var h=0;h<n.monthDay.length;h++){a=n.monthDay[h];var d=1===s.getMonth()?s.getFullYear()%4==0?29:28:an[s.getMonth()];if((a=a>0?a:d+a+1)>0&&function(e,t,i){var n=1===e.getMonth()?e.getFullYear()%4==0?29:28:an[e.getMonth()];return t<=n&&e>=i}(s,a,o)){if(s.setDate(a),t&&s>t)return;if(r=U(s,n),s>=e&&r&&j(s,t)&&(k(i,s.getTime()),l&&i.length+B.length>=l))return}}p=P(s,n,p,c)}}(e,t,i,n)}}function M(e){return e%4==0?on:ln}function P(e,t,i,n,a){void 0===a&&(a=null);var r=a?a.getMonth():0;return e.setDate(1),t.month.length?(i++,i%=t.month.length,e.setMonth(t.month[i]-1),0===i&&e.setFullYear(e.getFullYear()+n)):(a&&a.getFullYear()<e.getFullYear()&&(r=e.getMonth()-1),e.setMonth((a?r:e.getMonth())+n)),i}function j(e,t){return!t||e<=t}function R(e,t){var i=new Date(e.getTime());if(-1===t.indexOf(rn[i.getDay()]))do{i.setDate(i.getDate()+1)}while(-1===t.indexOf(rn[i.getDay()]));return i}function H(e){var t,i={freq:null,interval:1,count:null,until:null,day:[],month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},n=[];if(e.split(";").forEach(function(e){switch((n=e.split("="))[0]){case"UNTIL":t=n[1],i.until=A(t);break;case"BYDAY":i.day=n[1].split(","),i.validRules.push(n[0]);break;case"BYMONTHDAY":i.monthDay=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYMONTH":i.month=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYYEARDAY":i.yearDay=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYWEEKNO":i.weekNo=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"INTERVAL":i.interval=parseInt(n[1],10);break;case"COUNT":i.count=parseInt(n[1],10);break;case"BYSETPOS":i.setPosition=parseInt(n[1],10);break;case"FREQ":i.freq=n[1]}}),"MONTHLY"===i.freq&&0===i.monthDay.length){var a=i.validRules.indexOf("BYDAY");i.validRules.splice(a,1)}return i}function I(e){var t={};return e.forEach(function(i,n){if(n===e.length-1){for(var a=nn.indexOf(i),r=a;r%7!==nn.indexOf(e[0]);)r++;t[i]=r-a}else t[i]=nn.indexOf(e[n+1])-nn.indexOf(i)}),t}function q(e,t){var i,n=t.slice(0),a=function(e){tn[e.getFullYear()]||(tn[e.getFullYear()]=new Date(e.getFullYear(),0,0));var t=tn[e.getFullYear()],i=e.getTime()-t.getTime();return Math.ceil(i/de)}(e);for(i=n.shift();i;){if(i<0&&(i=i+M(e.getFullYear())+1),i===a)return!1;i=n.shift()}return!0}function L(e){var t=e.shift();e.push(t)}function U(e,t){var i=!0,n=t.day,a=t.month,r=t.monthDay,s=t.yearDay;return t.validRules.forEach(function(t){switch(t){case"BYDAY":(function(e,t){return-1===t.indexOf(rn[e])})(e.getDay(),n)&&(i=!1);break;case"BYMONTH":(function(e,t){return-1===t.indexOf(e.getMonth()+1)})(e,a)&&(i=!1);break;case"BYMONTHDAY":(function(e,t){var i,n=t.slice(0),a=1===e.getMonth()?e.getFullYear()%4==0?29:28:an[e.getMonth()];for(i=n.shift();i;){if(i<0&&(i=i+a+1),i===e.getDate())return!1;i=n.shift()}return!0})(e,r)&&(i=!1);break;case"BYYEARDAY":q(e,s)&&(i=!1)}}),i}function N(e){return[e.getUTCFullYear(),F(e.getUTCMonth()+1),F(e.getUTCDate()),"T",F(e.getUTCHours()),F(e.getUTCMinutes()),F(e.getUTCSeconds()),"Z"].join("")}function F(e){return("0"+e).slice(-2)}var B,W,z,_="cellClick",Y="cellDoubleClick",G="actionBegin",Q="actionComplete",K="actionFailure",X="navigating",J="renderCell",Z="eventClick",$="eventRendered",ee="dataBinding",te="popupOpen",ie="resizeStart",ne="resizeStop",ae="data-ready",re="content-ready",se="scroll",oe="scroll-ui-update",le="ui-update",ce="document-click",pe="cell-mouse-down",he="tap-hold-ready",de=864e5,ue=null,ve="e-schedule",me="e-device",ge="e-icons",fe="e-enable",ye="e-disable",Te="e-table-container",we="e-all-day-cells",be="e-all-day-row",Ce="e-content-table",De="e-work-cells",Oe="e-work-hours",Ee="e-popup-open",Se="e-date-header-wrap",xe="e-date-header-container",Ae="e-header-cells",ke="e-current-day",Ve="e-current-date",Me="e-current-panel",Pe="e-previous-panel",je="e-translate",Re="e-event-table",He="e-resource-group-cells",Ie="e-resource-text",qe="e-resource-column-wrap",Le="e-parent-node",Ue="e-resource-expand",Ne="e-resource-collapse",Fe="e-resource-tree-icon",Be="e-resource-cells",We="e-time-cells-wrap",ze="e-alternate-cells",_e="e-current-time",Ye="e-current-timeline",Ge="e-previous-timeline",Qe="e-hide-childs",Ke="e-scroll-container",Xe="e-timeline-wrapper",Je="e-appointment-wrapper",Ze="e-day-wrapper",$e="e-schedule-resource-toolbar-container",et="e-schedule-toolbar",tt="e-schedule-resource-toolbar",it="e-selected-cell",nt="e-week-number-wrapper",at="e-week-number",rt="e-appointment-wrap",st="e-wrapper-container",ot="e-appointment-container",lt="e-appointment",ct="e-appointment-border",pt="e-appointment-details",ht="e-subject-wrap",dt="e-resource-name",ut="e-time",vt="e-table-wrap",mt="e-outer-table",gt="e-content-wrap",ft="e-agenda-cells",yt="e-active-appointment-agenda",Tt="e-day-date-header",wt="e-date-column",bt="e-navigate",Ct="e-date-header",Dt="e-date-time",Ot="e-appointment-indicator",Et="e-indicator",St="e-event-action",xt="e-event-clone",At="e-clone-time-indicator",kt="e-event-resize",Vt="e-resize-clone",Mt="e-left-handler",Pt="e-right-handler",jt="e-top-handler",Rt="e-bottom-handler",Ht="e-recurrence-icon",It="e-recurrence-edit-icon",qt="e-all-day-appointment-wrapper",Lt="e-all-day-appointment",Ut="e-appointment-hide",Nt="e-row-count-wrapper",Ft="e-all-day-appointment-section",Bt="e-appointment-expand",Wt="e-appointment-collapse",zt="e-more-indicator",_t="e-event-popup",Yt="e-popup-header",Gt="e-header-icon-wrapper",Qt="e-popup-content",Kt="e-popup-footer",Xt="e-date-time-details",Jt="e-event-details",Zt="e-event-create",$t="e-event-edit",ei="e-event-delete",ti="e-text-ellipsis",ii="e-more-popup-wrapper",ni="e-more-event-popup",ai="e-more-event-date-header",ri="e-header-date",si="e-more-event-close",oi="e-more-event-content",li="e-more-appointment-wrapper",ci="e-quick-dialog-edit-event",pi="e-quick-dialog-edit-series",hi="e-quick-dialog-delete",di="e-quick-dialog-cancel",ui="e-quick-dialog-alert-btn",vi="e-schedule-dialog",mi="e-schedule-form",gi="e-all-day",fi="e-time-zone",yi="e-repeat",Ti="e-subject",wi="e-location",bi="e-start",Ci="e-end",Di="e-description",Oi="e-time-zone-row",Ei="e-start-time-zone",Si="e-end-time-zone",xi="e-event-delete",Ai="e-icon-disable",ki="e-edit",Vi="e-edit-icon",Mi="e-delete",Pi="e-delete-icon",ji="e-close",Ri="e-close-icon",Hi="e-schedule-error",Ii="e-schedule-event-tooltip",qi="e-animate",Li="e-hidden",Ui="e-quick-popup-wrapper",Ni="e-resource-menu",Fi="e-resource-level-title",Bi="e-resource-tree-popup-overlay",Wi="e-resource-tree-popup",zi="e-resource-icon",_i="e-resource-details",Yi="e-date-time-icon",Gi=function(){function e(e){this.parent=e,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(ce,this.closeHeaderPopup,this)},e.prototype.removeEventListener=function(){this.parent.off(ce,this.closeHeaderPopup)},e.prototype.closeHeaderPopup=function(e){var i=t.closest(e.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected");t.isNullOrUndefined(i)&&this.hideHeaderPopup()},e.prototype.hideHeaderPopup=function(){this.headerPopup&&this.headerPopup.hide()},e.prototype.renderHeader=function(){this.element=t.createElement("div",{className:"e-schedule-toolbar-container"});var e=t.createElement("div",{className:et});this.element.appendChild(e),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()},e.prototype.renderToolbar=function(){var e={requestType:"toolbarItemRendering",items:this.getItems()};this.parent.trigger(G,e),this.toolbarObj=new n.Toolbar({items:e.items,overflowMode:"Popup",clicked:this.toolbarClickHandler.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.toolbarObj.appendTo(this.parent.element.querySelector("."+et));var t=this.toolbarObj.element.querySelector(".e-prev");t&&t.firstChild.setAttribute("title",this.l10n.getConstant("previous"));var i=this.toolbarObj.element.querySelector(".e-next");i&&i.firstChild.setAttribute("title",this.l10n.getConstant("next")),this.updateActiveView(),this.parent.trigger(Q,{requestType:"toolBarItemRendered",items:this.toolbarObj.items})},e.prototype.updateItems=function(){if(this.toolbarObj){var e={requestType:"toolbarItemRendering",items:this.getItems()};this.parent.trigger(G,e),this.toolbarObj.items=e.items,this.toolbarObj.dataBind(),this.parent.trigger(Q,{requestType:"toolBarItemRendered",items:this.toolbarObj.items})}},e.prototype.getPopUpRelativeElement=function(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")},e.prototype.setDayOfWeek=function(e){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=e,this.headerCalendar.dataBind())},e.prototype.setCalendarDate=function(e){this.headerCalendar&&(this.headerCalendar.value=e,this.headerCalendar.dataBind())},e.prototype.getCalendarView=function(){return"Month"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?"Year":"Month"},e.prototype.setCalendarView=function(){if(this.headerCalendar){var e=this.getCalendarView();this.headerCalendar.depth=e,this.headerCalendar.start=e,this.headerCalendar.refresh()}},e.prototype.updateActiveView=function(){var e=this.toolbarObj.element.querySelectorAll(".e-views");t.removeClass(e,["e-active-view"]),e.length>0&&e[this.parent.viewIndex]&&t.addClass([e[this.parent.viewIndex]],["e-active-view"])},e.prototype.updateDateRange=function(e){var t=this.toolbarObj.element.querySelector(".e-date-range");t&&(t.setAttribute("aria-label",e),t.querySelector(".e-tbar-btn-text").innerHTML=e,this.toolbarObj.refreshOverflow())},e.prototype.getDateRangeText=function(){return this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y"})},e.prototype.getItems=function(){var e=[],t=this.parent.isAdaptive;if(e.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{"aria-label":"previous period"}}),e.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{"aria-label":"next period"}}),e.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}}),this.parent.isAdaptive?(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&e.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1)for(var i=0,n=this.parent.views;i<n.length;i++){var a=n[i];"string"==typeof a?e.push(this.getItemObject(a.toLowerCase(),null)):e.push(this.getItemObject(a.option.toLowerCase(),a.displayName))}return e},e.prototype.getItemObject=function(e,t){var i,n=this.parent.isAdaptive;switch(e){case"day":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-day",text:t||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-week",text:t||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-workweek",text:t||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-month",text:t||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"agenda":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-agenda",text:this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-month-agenda",text:this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-timeline-day",text:t||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-timeline-week",text:t||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-timeline-workweek",text:t||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":i={align:"Right",showAlwaysInPopup:n,prefixIcon:"e-icon-timeline-month",text:t||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"}}return i},e.prototype.renderHeaderPopup=function(){var e=t.createElement("div",{className:"e-header-popup"}),n=t.createElement("div",{className:"e-header-calendar"});e.appendChild(n),this.element.appendChild(e),this.headerPopup=new i.Popup(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl});var r=this.getCalendarView();this.headerCalendar=new a.Calendar({value:this.parent.selectedDate,firstDayOfWeek:this.parent.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:r,start:r,change:this.calendarChange.bind(this)}),this.headerCalendar.appendTo(n),this.headerPopup.hide()},e.prototype.calendarChange=function(e){e.value.getTime()!==this.parent.selectedDate.getTime()&&this.parent.changeDate(e.value),this.headerPopup.hide()},e.prototype.calculateViewIndex=function(e){var i=t.closest(e.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(i)},e.prototype.toolbarClickHandler=function(e){if(e.item){switch(e.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains(Ee)?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-week":this.parent.changeView("Week",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-work-week":this.parent.changeView("WorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month":this.parent.changeView("Month",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-agenda":this.parent.changeView("Agenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-day":this.parent.changeView("TimelineDay",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-today":this.parent.isSelectedDate(m(new Date))||this.parent.changeDate(m(new Date),e.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e.originalEvent);break;case"e-add":var i=void 0,n=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime();if(this.parent.activeCellsData&&!n)i=this.parent.activeCellsData;else{var a=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,r=new Date(this.parent.selectedDate.getTime());r.setHours((new Date).getHours(),Math.round(r.getMinutes()/a)*a,0);i={startTime:r,endTime:new Date(new Date(r.getTime()).setMilliseconds(r.getMilliseconds()+a)),isAllDay:!1}}this.parent.eventWindow.openEditor(t.extend(i,{cancel:!1,event:e.originalEvent}),"Add")}var s=this.toolbarObj.element.querySelector(".e-toolbar-pop");s&&s.ej2_instances[0].hide({name:"SlideUp",duration:100})}},e.prototype.getHeaderElement=function(){return this.toolbarObj.element},e.prototype.updateHeaderItems=function(e){var i=this.toolbarObj.element.querySelector(".e-prev"),n=this.toolbarObj.element.querySelector(".e-next"),a=this.toolbarObj.element.querySelector(".e-date-range");i&&("add"===e?t.addClass([i],Li):t.removeClass([i],Li)),n&&("add"===e?t.addClass([n],Li):t.removeClass([n],Li)),a&&("add"===e?t.addClass([a],ti):t.removeClass([a],ti))},e.prototype.getModuleName=function(){return"headerbar"},e.prototype.destroy=function(){this.headerPopup&&this.headerPopup.destroy(),this.headerCalendar&&this.headerCalendar.destroy(),this.toolbarObj.isDestroyed||(this.toolbarObj.destroy(),this.removeEventListener(),t.remove(this.element))},e}(),Qi=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(){this.parent.element.style.width=t.formatUnit(this.parent.width)},e.prototype.setHeight=function(){this.parent.element.style.height=t.formatUnit(this.parent.height)},e.prototype.addEventListener=function(){this.parent.on(re,this.setDimensions,this),this.parent.on(le,this.onPropertyChanged,this)},e.prototype.removeEventListener=function(){this.parent.off(re,this.setDimensions),this.parent.off(le,this.onPropertyChanged)},e.prototype.setDimensions=function(){this.setWidth(),this.setHeight();var e={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(oe,e)},e.prototype.onPropertyChanged=function(e){this.setDimensions()},e.prototype.destroy=function(){this.removeEventListener()},e}(),Ki=function(){function e(e){this.parent=e,this.element=this.parent.element.querySelector("."+Te),this.touchObj=new t.Touch(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),t.EventHandler.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}return e.prototype.scrollHandler=function(e){if(!("Agenda"===this.parent.currentView||this.parent.uiStateValues.action||e.originalEvent&&(e.originalEvent.target.classList.contains(lt)||t.closest(e.originalEvent.target,"."+lt)))){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains(je)&&this.onTransitionEnd(),"Left"===e.scrollDirection||"Right"===e.scrollDirection){var i={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};if(this.parent.trigger(G,i),i.cancel)return;var n=this.element.querySelector("."+gt);if(n&&n.scrollWidth>n.clientWidth)return;this.isScrollTriggered=!0,e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}if(e.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel("e-next-panel","next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.nextPanel.element));var a=this.parent.enableRtl?e.distanceX:-e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+a)+"px)"}else if(e.scrollDirection===this.touchRightDirection){var r=0;this.previousPanel||(this.renderPanel(Pe,"previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.previousPanel.element),r=this.previousPanel.element.offsetWidth);a=this.parent.enableRtl?r-e.distanceX:-r+e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+a)+"px)"}}},e.prototype.swipeHandler=function(e){if(this.isScrollTriggered&&!this.parent.uiStateValues.action){if(this.isScrollTriggered=!1,"Left"===e.swipeDirection||"Right"===e.swipeDirection){var i=Date.now()-this.timeStampStart,n=e.distanceX*(t.Browser.isDevice?6:1.66);n>i||e.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(e.swipeDirection),n>i&&e.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=n/i/10+"s"),this.confirmSwipe(e.swipeDirection)):this.cancelSwipe();var a={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};this.parent.trigger(Q,a)}else this.cancelSwipe();this.timeStampStart=null}},e.prototype.tapHoldHandler=function(e){var i=t.closest(e.originalEvent.target,"."+lt);if(t.isNullOrUndefined(i)){if(i=t.closest(e.originalEvent.target,"."+De+",."+we+",."+Ae),!t.isNullOrUndefined(i))return this.parent.activeCellsData=this.parent.getCellDetails(i),void(this.parent.activeViewOptions.readonly||this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add"))}else if(this.parent.isAdaptive){var n=e.originalEvent;this.parent.notify(he,{event:n})}},e.prototype.renderPanel=function(e,t){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(t)},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(e)},e.prototype.swapPanels=function(e){if(e===this.touchLeftDirection){var t=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=t}else{t=this.previousPanel;this.previousPanel=this.currentPanel,this.currentPanel=t}},e.prototype.confirmSwipe=function(e){var i={action:"date",cancel:!1,previousDate:e===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate};if(this.parent.trigger(X,i),i.cancel)return this.swapPanels(e),void this.cancelSwipe();this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0);var n;n=this.parent.enableRtl?e===this.touchLeftDirection?this.previousPanel?this.previousPanel.element.offsetLeft:this.currentPanel.element.offsetWidth:0:e===this.touchLeftDirection?-this.currentPanel.element.offsetLeft:0,t.addClass([this.element],je),this.element.style.transform="translatex("+n+"px)",this.parent.headerModule&&this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.renderModule.refreshDataManager()},e.prototype.cancelSwipe=function(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.generateColumnLevels(),t.addClass([this.element],je);var e=this.previousPanel?this.previousPanel.element.offsetWidth:0;this.element.style.transform="translatex("+(this.parent.enableRtl?e:-this.currentPanel.element.offsetLeft)+"px)"},e.prototype.onTransitionEnd=function(){t.removeClass([this.element],je),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&(t.remove(this.previousPanel.element),this.previousPanel=null,t.removeClass([this.currentPanel.element],Pe),t.addClass([this.currentPanel.element],Me)),this.nextPanel&&(t.remove(this.nextPanel.element),this.nextPanel=null,t.removeClass([this.currentPanel.element],"e-next-panel"),t.addClass([this.currentPanel.element],Me)),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""},e.prototype.getTranslateX=function(e){var t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.webkitTransform).m41},e.prototype.setDimensions=function(e){e.style.width=this.parent.element.clientWidth+"px"},e.prototype.resetValues=function(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",this.element.innerHTML="",t.removeClass([this.element],je)},e.prototype.destroy=function(){this.touchObj.destroy(),t.EventHandler.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()},e}(),Xi=function(){function e(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new t.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}return e.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":this.processDelete(e);break;case"escape":this.processEscape()}},e.prototype.addEventListener=function(){this.parent.on(pe,this.onCellMouseDown,this)},e.prototype.removeEventListener=function(){this.parent.off(pe,this.onCellMouseDown)},e.prototype.onCellMouseDown=function(e){if(!e.event.shiftKey&&(this.initialTarget=this.getClosestCell(e.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(e.event.target.classList.contains(De)&&(t.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),t.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.event.target.classList.contains(we)))){var i=this.parent.getAllDayRow();t.EventHandler.add(i,"mousemove",this.onMouseSelection,this),t.EventHandler.add(i,"mouseup",this.onMoveup,this)}},e.prototype.onMouseSelection=function(e){var t=this.getClosestCell(e);t&&this.selectCells(!0,t)},e.prototype.getClosestCell=function(e){return t.closest(e.target,"."+De+",."+we)},e.prototype.onAppointmentSelection=function(e){var i=t.closest(e.target,"."+lt);this.parent.eventBase.getSelectedEventElements(i)},e.prototype.onMoveup=function(e){if(e.target.classList.contains(De)&&(t.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),t.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains(we)){var i=this.parent.getAllDayRow();t.EventHandler.remove(i,"mousemove",this.onMouseSelection),t.EventHandler.remove(i,"mouseup",this.onMoveup)}},e.prototype.processEnter=function(e){if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var i=e.target;if(t.closest(i,"."+Ui))i.classList.contains(Jt)||i.classList.contains(Zt)||i.classList.contains($t)||i.classList.contains(ei)||i.classList.contains(ji)?(i.click(),e.preventDefault()):i.classList.contains(Ti)&&(this.parent.element.querySelector("."+Zt).click(),e.preventDefault());else if(i.classList.contains(De)||i.classList.contains(we)){if(this.selectedCells.length>1){var n=this.parent.getCellDetails(this.selectedCells[0]),a=this.parent.getCellDetails(this.selectedCells[this.selectedCells.length-1]);n.endTime=a.endTime,n.element=i,this.parent.activeCellsData=n}else this.parent.activeCellsData=this.parent.getCellDetails(i);var r=t.extend(this.parent.activeCellsData,{cancel:!1,event:e});this.parent.notify(_,r)}else{if(!(i.classList.contains(lt)||i.classList.contains(si)||i.classList.contains(Ft)||i.classList.contains(zt)))return i.classList.contains(ri)?(this.parent.setProperties({selectedDate:new Date(parseInt(i.getAttribute("data-date"),10))},!0),this.parent.changeView(this.parent.getNavigateView()),void this.processEscape()):void 0;i.click()}}},e.prototype.getCells=function(e,t,i){var n=this.parent.getContentTable(),a=[].slice.call(n.querySelectorAll("td")),r=n.rows.length,s=n.rows[0].cells.length;if(t.classList.contains(we)){var o=this.parent.getAllDayRow();a=[].slice.call(o.cells),r=1,s=o.cells.length}var l=a.indexOf(t),c=a.indexOf(i),p=[];if(e){for(var h=0;h<s;h++)for(var d=0;d<r;d++)p.push(a[s*d+h]);l=p.indexOf(t),c=p.indexOf(i)}if(l>c){var u=l;l=c,c=u}return(e?p:a).slice(l,c+1)},e.prototype.focusFirstCell=function(){if("Agenda"===this.parent.currentView){var e=this.parent.getContentTable().querySelector("."+ft);return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()){var t=this.parent.element.querySelector("."+Ce+" tr:not(."+Li+") ."+De+":not(."+He+")");this.selectCells(!1,t)}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},e.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},e.prototype.selectCells=function(e,t){if(this.parent.removeSelectedClass(),e){var i=void 0,n=this.getCells(this.isInverseTableSelect(),this.initialTarget,t);if(this.parent.activeViewOptions.group.resources.length>0){i=this.initialTarget.getAttribute("data-group-index");for(var a=[],r=0;r<n.length;r++)n[r].getAttribute("data-group-index")===i&&a.push(n[r]);n=a}if(this.selectedCells=n,n.length>2&&!t.classList.contains(we)){var s=this.getAllDayCells(n);if(this.parent.activeViewOptions.group.resources.length>0){var o=[];for(r=0;r<s.length;r++)s[r].getAttribute("data-group-index")===i&&o.push(s[r]);s=o}n=n.concat(s)}t.getAttribute("data-group-index")!==i&&this.parent.activeViewOptions.group.resources.length>0&&(t=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(n,t)}else this.initialTarget=t,this.selectedCells=[t],this.parent.addSelectedClass([t],t)},e.prototype.selectAppointment=function(e,i){var n=this.getAppointmentElements();if(!(n.length<0)){this.parent.eventBase.removeSelectedAppointmentClass();var a;if(i.classList.contains(lt)){var r=n.indexOf(i);a=n[e?r-1:r+1]}else a=e?n[n.length-1]:n[0];a&&(this.parent.eventBase.addSelectedAppointments([a]),a.focus(),t.addClass([a],yt))}},e.prototype.selectAppointmentElementFromWorkCell=function(e,t){var i=this;if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),t.classList.contains(De)||t.classList.contains(we)){var n=this.getUniqueAppointmentElements(),a=[],r=parseInt(t.getAttribute("data-date"),10);if(this.parent.eventsProcessed.filter(function(t){return e?t[i.parent.eventFields.startTime].getTime()<=r:t[i.parent.eventFields.startTime].getTime()>=r}).filter(function(e){n.filter(function(t){JSON.stringify(e.Guid)===JSON.stringify(t.getAttribute("data-guid"))&&a.push(t)})}),a.length>0){var s=e?a[a.length-1]:a[0],o=this.getAppointmentElementsByGuid(s.getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(o),o[o.length-1].focus()}}},e.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],a=this.parent.getCellDetails(i);if(this.parent.getCellDetails(n).endTime.getTime()-a.startTime.getTime()>=de){return[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1)}return[]},e.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll("."+lt))},e.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},e.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map(function(e){return e.getAttribute("data-guid")}).filter(function(i,n,a){a.indexOf(i)===n&&t.push(e[n])}),t},e.prototype.getWorkCellFromAppointmentElement=function(e){var t=this.parent.eventBase.getEventByGuid(e.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([t])},e.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1;if(t<this.parent.views.length){var i=this.parent.viewCollections[t].option;this.parent.changeView(i,e,void 0,t),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus()}},e.prototype.processUp=function(e,t){if(!t||!this.parent.activeView.isTimelineView()&&"MonthAgenda"!==this.parent.currentView){var i=e.target,n=this.parent.getSelectedElements(),a=this.parent.eventBase.getSelectedAppointments(),r=this.parent.element.querySelector("."+ii),s=this.getQuickPopupElement();if(n.length>0&&!e.target.classList.contains(De)&&(i=n[n.length-1]),a.length>0&&!r.classList.contains(Ee)&&!s.classList.contains(Ee)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),i.classList.contains(De)&&!this.parent.element.querySelector("."+Ee)){var o=this.parent.getTableRows(),l=o.indexOf(i.parentElement);l>0&&l<o.length&&this.selectCells(t,o[l-1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!0,i)}},e.prototype.processDown=function(e,t){if(!t||!this.parent.activeView.isTimelineView()&&"MonthAgenda"!==this.parent.currentView){var i=e.target,n=this.parent.getSelectedElements(),a=this.parent.eventBase.getSelectedAppointments(),r=this.parent.element.querySelector("."+ii),s=this.getQuickPopupElement();n.length>0&&!e.target.classList.contains(De)&&(i=n[n.length-1]),a.length>0&&!r.classList.contains(Ee)&&!s.classList.contains(Ee)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var o=this.parent.getTableRows();if(i.classList.contains(De)&&!this.parent.element.querySelector("."+Ee)){var l=o.indexOf(i.parentElement);l>=0&&l<o.length-1&&this.selectCells(t,o[l+1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!1,i)}},e.prototype.processLeftRight=function(e){var t=this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[i].cells.length}},e.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector("."+Ui)},e.prototype.isCancelLeftRightAction=function(e,t){if("Agenda"===this.parent.currentView||t&&"MonthAgenda"===this.parent.currentView)return!0;if(this.isPreventAction(e)&&t)return!0;var i=this.parent.element.querySelector("."+ii),n=this.getQuickPopupElement();return!(!i.classList.contains(Ee)&&!n.classList.contains(Ee))},e.prototype.processRight=function(e,i){if(!this.isCancelLeftRightAction(e,i)){var n,a=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),s=e.target;if(a.length>0&&!s.classList.contains(De)&&!s.classList.contains(we)&&(s=a[a.length-1]),!(r.length>0)||(s=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),s))if(s.classList.contains(De)){var o=this.processLeftRight(s);if(o.columnIndex>=0&&o.columnIndex<o.maxIndex-1)n=this.calculateNextPrevDate(s,o.element.rows[o.rowIndex].cells[s.cellIndex+1],"right"),t.isNullOrUndefined(n)||this.selectCells(i,n);else if(o.columnIndex===o.maxIndex-1)if(!this.isInverseTableSelect()&&o.rowIndex<o.element.rows.length-1)n=this.calculateNextPrevDate(s,o.element.rows[o.rowIndex+1].cells[0],"right"),t.isNullOrUndefined(n)||this.selectCells(i,n);else if(!i){var l=this.isInverseTableSelect()?o.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var c=this.parent.getContentTable();this.selectCells(!1,c.rows[l].cells[0])}}else if(s.classList.contains(we)){var p=s.cellIndex,h=this.parent.getAllDayRow(),d=h.cells.length;if(p>=0&&p<d-1)this.selectCells(i,h.cells[p+1]);else if(p===d-1&&!i){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var u=this.parent.getAllDayRow();this.selectCells(!1,u.cells[0])}}}},e.prototype.processLeft=function(e,i){if(!this.isCancelLeftRightAction(e,i)){var n,a=e.target,r=this.parent.getSelectedElements();r.length>0&&!a.classList.contains(De)&&!a.classList.contains(we)&&(a=r[r.length-1]);var s=this.parent.eventBase.getSelectedAppointments();if(!(s.length>0)||(a=this.getWorkCellFromAppointmentElement(s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),a))if(a.classList.contains(De)){var o=this.processLeftRight(a);if(o.columnIndex>0&&o.columnIndex<o.maxIndex)n=this.calculateNextPrevDate(a,o.element.rows[o.rowIndex].cells[a.cellIndex-1],"left"),t.isNullOrUndefined(n)||this.selectCells(i,n);else if(0===o.columnIndex)if(!this.isInverseTableSelect()&&o.rowIndex>0)n=this.calculateNextPrevDate(a,o.element.rows[o.rowIndex-1].cells[o.maxIndex-1],"left"),t.isNullOrUndefined(n)||this.selectCells(i,n);else if(!i){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var l=this.parent.getContentTable(),c=this.isInverseTableSelect()?o.rowIndex:l.rows.length-1;this.selectCells(!1,l.rows[c].cells[o.maxIndex-1])}}else if(a.classList.contains(we)){var p=a.cellIndex,h=this.parent.getAllDayRow(),d=h.cells.length;if(p>0&&p<d)this.selectCells(i,h.cells[p-1]);else if(0===p&&!i){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var u=this.parent.getAllDayRow();this.selectCells(!1,u.cells[d-1])}}}},e.prototype.calculateNextPrevDate=function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&t.getAttribute("data-group-index")!==n){var a=new Date(parseInt(e.getAttribute("data-date"),10)),r="right"===i?new Date(a.setDate(a.getDate()+1)):new Date(a.setDate(a.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+r.getTime().toString()+'"][data-group-index="'+n+'"]'))[0]}return t},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},e.prototype.processTabOnPopup=function(e,i){var n=this,a=this.getFocusableElements(i),r=(a=a.filter(function(e){var t=n.parent.element.querySelector("."+Kt);return t&&t.offsetParent?!(e.classList.contains(ki)||e.classList.contains(Mi)):!(e.classList.contains($t)||e.classList.contains(ei))}))[0],s=a[a.length-1];t.isNullOrUndefined(s)||document.activeElement!==s||e.shiftKey||(e.preventDefault(),r.focus()),!t.isNullOrUndefined(r)&&document.activeElement===r&&e.shiftKey&&(e.preventDefault(),s.focus())},e.prototype.processTab=function(e,i){var n=e.target,a=t.closest(n,"."+Ui+",."+ii);if(a&&a.classList.contains(Ee))return a.classList.contains(ii)&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,a);if(n.classList.contains(ve))this.parent.eventBase.removeSelectedAppointmentClass();else{if(!n.classList.contains(lt)){var r=this.parent.getSelectedElements();return r.length>0&&!n.classList.contains(lt)?(n=r[r.length-1],this.selectAppointmentElementFromWorkCell(i,n),void e.preventDefault()):void 0}var s=[].slice.call(this.parent.element.querySelectorAll("."+lt)),o=this.parent.eventBase.getSelectedAppointments();if(o.length>0&&(n=o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&n.getAttribute("data-guid")===s[s.length-1].getAttribute("data-guid")||i&&n.getAttribute("data-guid")===s[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||(this.selectAppointment(i,n),e.preventDefault())}},e.prototype.processDelete=function(e){document.activeElement.classList.contains(lt)&&(t.addClass([document.activeElement],ct),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.quickPopup.deleteClick())},e.prototype.processEscape=function(){this.parent.quickPopup.onClosePopup(),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup()},e.prototype.isPreventAction=function(e){var i=t.closest(e.target,"."+He);return!(!this.parent.activeView.isTimelineView()||t.isNullOrUndefined(i))},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.destroy=function(){this.removeEventListener(),this.keyboardModule.destroy()},e}(),Ji=function(){function e(e,t){this.initDataManager(e,t)}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof r.DataManager?e:new r.DataManager(e),this.query=t instanceof r.Query?t:new r.Query},e.prototype.generateQuery=function(e,t){var i=this.query.clone();return e&&i.addParams("StartDate",e.toISOString()),t&&i.addParams("EndDate",t.toISOString()),i},e.prototype.getData=function(e){return this.dataManager.executeQuery(e)},e}(),Zi=function(){function e(){}return e.prototype.offset=function(e,t){var i=e.getTimezoneOffset();try{var n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(e){return 0}},e.prototype.convert=function(e,t,i){"string"==typeof t&&(t=this.offset(e,t)),"string"==typeof i&&(i=this.offset(e,i));var n=e.getTimezoneOffset(),a=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(a-n))},e.prototype.add=function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},e.prototype.remove=function(e,t){return this.convert(e,t,e.getTimezoneOffset())},e.prototype.removeLocalOffset=function(e){return new Date(+e-6e4*e.getTimezoneOffset())},e}(),$i=Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC",en=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}],tn={},nn=["SU","MO","TU","WE","TH","FR","SA"],an=[31,28,31,30,31,30,31,31,30,31,30,31],rn=["SU","MO","TU","WE","TH","FR","SA"],sn=43,on=366,ln=365,cn=["first","second","third","fourth","last"],pn="summaryTimes",hn="summaryOn",dn="every",un="summaryUntil",vn="summaryDay",mn="summaryWeek",gn="summaryMonth",fn="summaryYear",yn={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},Tn=function(){function e(e){this.slots=[],this.parent=e,this.timezone=new Zi}return e.prototype.processData=function(e,i,n){var a=this.parent.activeView.startDate(),r=this.parent.activeView.endDate(),s=this.parent.eventFields;this.parent.eventsProcessed=[];var o=[],l=1,c=!1;e.length>0&&t.isNullOrUndefined(e[0][s.id])&&(c=!0);for(var p=0,h=e;p<h.length;p++){var d=h[p];c&&(d[s.id]=l++),"string"==typeof d[s.startTime]&&(d[s.startTime]=C(d[s.startTime])),"string"==typeof d[s.endTime]&&(d[s.endTime]=C(d[s.endTime])),i?this.processTimezoneChange(d,n):this.processTimezone(d),!t.isNullOrUndefined(d[s.recurrenceRule])&&t.isNullOrUndefined(d[s.recurrenceID])?o=o.concat(this.generateOccurrence(d)):(d.Guid=this.generateGuid(),o.push(d))}return this.parent.eventsProcessed=this.filterEvents(a,r,o),o},e.prototype.timezonePropertyChange=function(e){var t=this.processData(this.parent.eventsData,!0,e);this.parent.notify(ae,{processedData:t})},e.prototype.timezoneConvert=function(e){var t=this.parent.eventFields;if(e[t.startTimezone]=e[t.startTimezone]||e[t.endTimezone],e[t.endTimezone]=e[t.endTimezone]||e[t.startTimezone],this.parent.timezone){var i=e[t.startTimezone],n=e[t.endTimezone];e[t.startTime]=this.timezone.convert(e[t.startTime],this.parent.timezone,i),e[t.endTime]=this.timezone.convert(e[t.endTime],this.parent.timezone,n)}},e.prototype.processTimezoneChange=function(e,t){var i=this.parent.eventFields;t&&this.parent.timezone?(e[i.startTime]=this.timezone.convert(e[i.startTime],t,this.parent.timezone),e[i.endTime]=this.timezone.convert(e[i.endTime],t,this.parent.timezone)):!t&&this.parent.timezone?(e[i.startTime]=this.timezone.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.timezone.add(e[i.endTime],this.parent.timezone)):t&&!this.parent.timezone&&(e[i.startTime]=this.timezone.remove(e[i.startTime],t),e[i.endTime]=this.timezone.remove(e[i.endTime],t))},e.prototype.processTimezone=function(e){var t=this.parent.eventFields;if(e[t.startTimezone]||e[t.endTimezone]){var i=e[t.startTimezone]||e[t.endTimezone],n=e[t.endTimezone]||e[t.startTimezone];if(e[t.startTime]=this.timezone.add(e[t.startTime],i),e[t.endTime]=this.timezone.add(e[t.endTime],n),this.parent.timezone){var a=this.parent.timezone;e[t.startTime]=this.timezone.convert(e[t.startTime],i,a),e[t.endTime]=this.timezone.convert(e[t.endTime],n,a)}}else this.parent.timezone&&(e[t.startTime]=this.timezone.add(e[t.startTime],this.parent.timezone),e[t.endTime]=this.timezone.add(e[t.endTime],this.parent.timezone))},e.prototype.filterEvents=function(e,t,i,n){void 0===i&&(i=this.parent.eventsProcessed);var a=this.parent.eventFields,s=new r.Predicate(a.startTime,"greaterthanorequal",e).and(new r.Predicate(a.endTime,"greaterthanorequal",e)).and(new r.Predicate(a.startTime,"lessthan",t)).or(new r.Predicate(a.startTime,"lessthanorequal",e).and(new r.Predicate(a.endTime,"greaterthan",e))),o=new r.DataManager({json:i}).executeLocal((new r.Query).where(s));return n&&(o=this.filterEventsByResource(n,o)),this.sortByTime(o)},e.prototype.filterEventsByResource=function(e,t){void 0===t&&(t=this.parent.eventsProcessed);for(var i,n=this.parent.resourceBase.resourceCollection,a=0;a<n.length;a++){var s=this.parent.activeViewOptions.group.allowGroupEdit&&n[a].allowMultiple?"contains":"equal",o=new r.Predicate(n[a].field,s,e.groupOrder[a]);i=i?i.and(o):o}return new r.DataManager({json:t}).executeLocal((new r.Query).where(i))},e.prototype.sortByTime=function(e){var t=this.parent.eventFields;return e.sort(function(e,i){var n=e[t.startTime],a=i[t.startTime];return n.getTime()-a.getTime()}),e},e.prototype.sortByDateTime=function(e){var t=this.parent.eventFields;return e.sort(function(e,i){var n=e[t.startTime],a=i[t.startTime],r=e[t.endTime],s=i[t.endTime],o=r.getTime()-n.getTime(),l=s.getTime()-a.getTime();return n.getTime()-a.getTime()||l-o}),e},e.prototype.getSmallestMissingNumber=function(e){for(var t=Math.max.apply(Math,e),i=0;i<t;i++)if(-1===e.indexOf(i))return i;return t+1},e.prototype.splitEventByDay=function(e){var i=this.parent.eventFields,n=[],a=e[i.startTime],r=e[i.endTime];if(m(new Date(a.getTime()))<m(new Date(r.getTime())))for(var s=new Date(a.getTime()),o=f(m(new Date(a.getTime())),1),l=0===r.getHours()&&0===r.getMinutes()?r:f(r,1),c=1,p=b(a.getTime(),l.getTime());o<=r;){var h=t.extend({},e);h[i.startTime]=s,h[i.endTime]=o,h.data={index:c,count:p},h.Guid=this.generateGuid(),h.isSpanned=!0,n.push(h),s=o,o=new Date(s.getTime()).setHours(0,0,0,0)===new Date(r.getTime()).setHours(0,0,0,0)&&o.getTime()!==r.getTime()?new Date(new Date(s.getTime()).setHours(r.getHours(),r.getMinutes())):f(m(new Date(s.getTime())),1),c++}else n.push(e);return n},e.prototype.splitEvent=function(e,t){var i=this.parent.eventFields,n=m(new Date(e[i.startTime]+"")).getTime(),a=m(new Date(e[i.endTime]+"")).getTime();if(g(e[i.endTime])<=0){var r=f(m(new Date(e[i.endTime]+"")),-1).getTime();a=n>r?n:r}var s=n,o=a,l=[];if(n!==a){n<t[0].getTime()&&(n=t[0].getTime()),a>t[t.length-1].getTime()&&(a=t[t.length-1].getTime());for(var c=n,p=0;p<this.slots.length;p++){var h=this.slots[p],d=h[0];if((c=c<=d&&a>=d?d:c)>a||d>a)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView){var u=h.indexOf(c);if(-1!==u){var v=h.indexOf(a),y=-1!==v,T=(v=y?v:h.length-1)-u+1,w=h[u]!==s,b=h[v]!==o;if(l.push(this.cloneEventObject(e,h[u],h[v],T,w,b)),y)break}}else if(this.dateInRange(c,h[0],h[h.length-1])){for(var C=[],D=0;D<h.length;D++)this.dateInRange(h[D],s,o)&&C.push(h[D]);if(C.length>0)if(this.parent.activeViewOptions.group.byDate)for(var O=0,E=C;O<E.length;O++){var S=E[O];l.push(this.cloneEventObject(e,S,S,1,S!==s,S!==o))}else{w=C[0]!==s,b=C[C.length-1]!==o;l.push(this.cloneEventObject(e,C[0],C[C.length-1],C.length,w,b))}}}}else l.push(this.cloneEventObject(e,n,a,1,!1,!1));return l},e.prototype.cloneEventObject=function(e,i,n,a,r,s){var o=this.parent.eventFields,l=t.extend({},e,null,!0),c={count:a,isLeft:r,isRight:s};return c[o.startTime]=e[o.startTime],c[o.endTime]=e[o.endTime],l.data=c,l[o.startTime]=new Date(i),l[o.endTime]=new Date(n),l},e.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},e.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else{if(this.parent.selectedElements.filter(function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")}).length<=0)for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e.getAttribute("data-guid")+'"]'));t<i.length;t++){var n=i[t];this.parent.selectedElements.push(n)}else{var a=this.parent.selectedElements.filter(function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")});this.parent.selectedElements=a}}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},e.prototype.getSelectedEvents=function(){var e=this,t=[],i=[];return[].slice.call(this.parent.element.querySelectorAll("."+ct)).filter(function(n){t.push(e.getEventByGuid(n.getAttribute("data-guid"))),i.push(n)}),{event:t.length>1?t:t[0],element:i.length>1?i:i[0]}},e.prototype.removeSelectedAppointmentClass=function(){for(var e=this.getSelectedAppointments(),i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-selected","false")}t.removeClass(e,ct),"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||t.removeClass(e,yt)},e.prototype.addSelectedAppointments=function(e){for(var i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-selected","true")}this.parent.removeSelectedClass(),t.addClass(e,ct)},e.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+ct+",."+lt+":focus"))},e.prototype.focusElement=function(){var e=this.parent.getSelectedElements();if(e.length>0){if(this.parent.keyboardInteractionModule){var i=!t.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||e[e.length-1];this.parent.keyboardInteractionModule.selectCells(!1,i)}}else{var n=this.getSelectedAppointments();n.length>0&&n[n.length-1].focus()}},e.prototype.selectWorkCellByTime=function(e){var t;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return t;if(e.length>0){var i=e[e.length-1],n=i[this.parent.eventFields.startTime],a=new Date(+n).setMinutes(0,0,0),r=this.isAllDayAppointment(i);("Month"===this.parent.currentView||r)&&(a=new Date(+n).setHours(0,0,0,0));var s=void 0;s=r&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();var o='[data-date="'+a+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(o+='[data-group-index="'+this.getGroupIndexFromEvent(i)+'"]'),t=s.querySelector(o))return this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,t),t}return t},e.prototype.getGroupIndexFromEvent=function(e){for(var t=[],i=0,n=0,a=this.parent.resourceBase.resourceCollection;n<a.length;n++){var r=a[n];t.push(e[r.field])}return this.parent.resourceBase.lastResourceLevel.forEach(function(e){var n,a=e.groupOrder;a.forEach(function(e,i){(t[i]instanceof Array?t[i][i]:t[i])===e&&(n=n?n+1:1)}),a.length===n&&(i=e.groupIndex)}),i},e.prototype.isAllDayAppointment=function(e){var t=this.parent.eventFields,i=e[t.isAllDay],n=(e[t.endTime].getTime()-e[t.startTime].getTime())/de>=1;return!(!i&&!n)},e.prototype.addEventListener=function(){this.parent.on(ce,this.appointmentBorderRemove,this)},e.prototype.appointmentBorderRemove=function(e){var i=e.event.target;t.closest(i,"."+lt)?this.parent.removeSelectedClass():t.closest(i,"."+Ee)||this.removeSelectedAppointmentClass()},e.prototype.wireAppointmentEvents=function(e,i){void 0===i&&(i=!1),t.EventHandler.add(e,"click",this.eventClick,this),t.EventHandler.add(e,"dblclick",this.eventDoubleClick,this),this.parent.activeViewOptions.readonly||-1!==["Agenda","MonthAgenda"].indexOf(this.parent.currentView)||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&!this.parent.isAdaptive&&this.parent.dragAndDropModule.wireDragEvent(e,i))},e.prototype.renderResizeHandler=function(e,i){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly)for(var n=0,a=Object.keys(i);n<a.length;n++){var r=a[n],s=t.createElement("div",{className:kt});switch(r){case"isLeft":i.isLeft||(s.appendChild(t.createElement("div",{className:"e-left-right-resize"})),t.addClass([s],this.parent.enableRtl?Pt:Mt),t.prepend([s],e));break;case"isRight":i.isRight||(s.appendChild(t.createElement("div",{className:"e-left-right-resize"})),t.addClass([s],this.parent.enableRtl?Mt:Pt),t.append([s],e));break;case"isTop":i.isTop||(s.appendChild(t.createElement("div",{className:"e-top-bottom-resize"})),t.addClass([s],jt),t.prepend([s],e));break;case"isBottom":i.isBottom||(s.appendChild(t.createElement("div",{className:"e-top-bottom-resize"})),t.addClass([s],Rt),t.append([s],e))}}},e.prototype.eventClick=function(e){var i=e.target;if(!i.classList.contains("e-drag-clone")&&!i.classList.contains(Vt)){if(e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule)return this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+ct)),void this.parent.keyboardInteractionModule.onAppointmentSelection(e);this.removeSelectedAppointmentClass(),this.activeEventData(e);var n=t.extend(this.parent.activeEventData,{cancel:!1});this.parent.trigger(Z,n),n.cancel?this.removeSelectedAppointmentClass():("Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||t.addClass([n.element],yt),this.parent.notify(Z,this.parent.activeEventData))}},e.prototype.eventDoubleClick=function(e){this.parent.quickPopup.quickPopupHide(!0),"touchstart"===e.type&&this.activeEventData(e),this.removeSelectedAppointmentClass();var i=this.parent.eventFields;!t.isNullOrUndefined(this.parent.activeEventData.event)&&t.isNullOrUndefined(this.parent.activeEventData.event[i.recurrenceID])?(this.parent.currentAction="Save",this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save")):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert())},e.prototype.getEventByGuid=function(e){return new r.DataManager({json:this.parent.eventsProcessed}).executeLocal((new r.Query).where("Guid","equal",e))[0]},e.prototype.generateGuid=function(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.prototype.getEventIDType=function(){return typeof this.parent.eventsData[0][this.parent.eventFields.id]},e.prototype.getEventMaxID=function(e){var i=this;if(this.parent.eventsData.length<1)return 1;var n,a=this.getEventIDType();if("string"===a&&(n=t.uniqueID().toString()),"number"===a){var r=Math.max.apply(Math,this.parent.eventsData.map(function(e){return e[i.parent.eventFields.id]}));n=(r=t.isNullOrUndefined(e)?r:r+e)+1}return n},e.prototype.activeEventData=function(e){var i=this,n=t.closest(e.target,"."+lt),a=n.getAttribute("data-guid");this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+a+'"]')));var r=this.getEventByGuid(a);r&&r.isSpanned&&(r=this.parent.eventsData.filter(function(e){return e[i.parent.eventFields.id]===r[i.parent.eventFields.id]})[0]),this.parent.activeEventData={event:r,element:n}},e.prototype.generateOccurrence=function(e,i){var n=this.parent.eventFields,a=e[n.startTime],r=e[n.endTime],s=[],o=t.isNullOrUndefined(i)?this.parent.activeView.startDate():i,l=e[n.recurrenceRule],c=r.getTime()-a.getTime();o=new Date(+o-c);var p=x(a,l,e[n.recurrenceException],this.parent.firstDayOfWeek,void 0,o);"Agenda"===this.parent.currentView&&-1===l.indexOf("COUNT")&&-1===l.indexOf("UNTIL")&&(t.isNullOrUndefined(e.generatedDates)?e.generatedDates={start:new Date(p[0]),end:new Date(p[p.length-1])}:(p[0]<e.generatedDates.start.getTime()&&(e.generatedDates.start=new Date(p[0])),p[p.length-1]>e.generatedDates.end.getTime()&&(e.generatedDates.end=new Date(p[p.length-1]))));for(var h=p.shift();h;){var d=t.extend({},e,null,!0);d[n.startTime]=new Date(h),d[n.endTime]=new Date(new Date(h).setMilliseconds(c)),d[n.recurrenceID]=d[n.id],d.Guid=this.generateGuid(),s.push(d),h=p.shift()}return s},e.prototype.getRecurrenceEvent=function(e){var t=this.parent.eventFields;return new r.DataManager(this.parent.eventsData).executeLocal((new r.Query).where(t.id,"equal",e[t.recurrenceID]))[0]},e.prototype.getOccurrencesByID=function(e){for(var i=this.parent.eventFields,n=[],a=0,r=this.parent.eventsData.filter(function(t){return t[i.id]===e});a<r.length;a++){var s=r[a];t.isNullOrUndefined(s[i.recurrenceRule])||(n=n.concat(this.generateOccurrence(s)))}return n},e.prototype.getOccurrencesByRange=function(e,i){for(var n=this.parent.eventFields,a=[],r=0,s=this.parent.eventsData;r<s.length;r++){var o=s[r];t.isNullOrUndefined(o[n.recurrenceRule])||(a=a.concat(this.generateOccurrence(o)))}return a.filter(function(a){return a[n.startTime]>=e&&a[n.endTime]<=i&&!t.isNullOrUndefined(a[n.recurrenceID])})},e.prototype.applyResourceColor=function(e,i,n,a,r){if(this.parent.resourceBase){var s=this.parent.resourceBase.getResourceColor(i,a);s&&(e.style[n]=t.isNullOrUndefined(r)?s:function(e,t){e=e.replace("#","");return"rgba("+parseInt(e.substring(0,e.length/3),16)+", "+parseInt(e.substring(e.length/3,2*e.length/3),16)+", "+parseInt(e.substring(2*e.length/3,3*e.length/3),16)+", "+t+")"}(s,r))}},e}(),wn=function(){function e(e){this.parent=e,this.timezone=new Zi}return e.prototype.getQuery=function(){var e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(e,t)},e.prototype.refreshData=function(e){var t=this,i={requestType:e.requestType,cancel:!1,data:e.data};if(this.parent.dataModule.dataManager.dataSource.offline)return this.parent.trigger(Q,i),void this.parent.renderModule.refreshDataManager();e.promise.then(function(e){t.parent.isDestroyed||(t.parent.trigger(Q,i),i.cancel||t.parent.renderModule.refreshDataManager())}).catch(function(e){t.parent.isDestroyed||t.parent.trigger(K,{error:e})})},e.prototype.addEvent=function(e){var t=this.parent.eventFields,i=null,n={addedRecords:[],changedRecords:[],deletedRecords:[]},a={cancel:!1,data:e instanceof Array?e:[e],requestType:"eventCreate"};if(this.parent.trigger(G,a),!a.cancel){if(e instanceof Array){for(var r=0,s=e;r<s.length;r++){var o=s[r];this.processCrudTimezone(o),n.addedRecords.push(o)}i=this.parent.dataModule.dataManager.saveChanges(n,t.id,null,this.getQuery())}else this.processCrudTimezone(e),i=this.parent.dataModule.dataManager.insert(e,null,this.getQuery());var l={requestType:"eventCreated",cancel:!1,data:e,promise:i};this.refreshData(l)}},e.prototype.saveEvent=function(e,i){var n=this.parent.eventFields,a=null,s={addedRecords:[],changedRecords:[],deletedRecords:[]},o={requestType:"eventChange",cancel:!1},l=[];e instanceof Array?l=e:l.push(e);var c=e;if(t.isNullOrUndefined(i)){if(o.data=c,this.parent.trigger(G,o),o.cancel)return;this.processCrudTimezone(c),a=this.parent.dataModule.dataManager.update(n.id,e,null,this.getQuery())}else{var p=this.parent.eventBase.getRecurrenceEvent(c);switch(i){case"EditOccurrence":if(o.data={occurrence:e,parent:p},this.parent.trigger(G,o),o.cancel)return;var h=(new r.Query).where("Guid","equal",c.Guid),d=new r.DataManager(this.parent.eventsProcessed).executeLocal(h),u=this.excludeDateCheck(d[0][n.startTime],p[n.recurrenceException]);u!==p[n.recurrenceException]?(p[n.recurrenceException]=u,c[n.recurrenceID]=p[n.id],this.processCrudTimezone(p),s.changedRecords.push(p),this.processCrudTimezone(c),s.addedRecords.push(c)):(this.processCrudTimezone(c),s.changedRecords.push(c));break;case"EditSeries":if(o.data=c,this.parent.trigger(G,o),o.cancel)return;var v=new r.DataManager(this.parent.eventsData).executeLocal((new r.Query).where(n.recurrenceID,"equal",p[n.id]));c[n.id]=p[n.id],c[n.recurrenceException]=null,c[n.recurrenceID]=null,this.processCrudTimezone(c),s.changedRecords.push(c);for(var m=0,g=v;m<g.length;m++){var f=g[m];s.deletedRecords.push(f)}}a=this.parent.dataModule.dataManager.saveChanges(s,n.id,null,this.getQuery())}var y={requestType:"eventChanged",cancel:!1,data:o.data,promise:a};this.refreshData(y)},e.prototype.deleteEvent=function(e,i){var n=this.parent.eventFields,a={addedRecords:[],changedRecords:[],deletedRecords:[]},s=[],o=[],l=[];switch(typeof e){case"string":case"number":s=new r.DataManager(this.parent.eventsData).executeLocal((new r.Query).where(n.id,"equal",e));break;case"object":e instanceof Array?s=e:s.push(e)}for(var c=0,p=s;c<p.length;c++){var h=p[c];t.isNullOrUndefined(h[n.recurrenceRule])?o.push(h):l.push(h)}var d={requestType:"eventRemove",cancel:!1};if("DeleteOccurrence"===i||(d.data=s,this.parent.trigger(G,d),!d.cancel)){if(t.isNullOrUndefined(i)||o.length>0)for(var u=0,v=o;u<v.length;u++){var m=v[u];a.deletedRecords.push(m)}if(l.length>0)switch(i){case"Delete":case"DeleteOccurrence":for(var g=0;g<l.length;g++){var f=this.parent.eventBase.getRecurrenceEvent(l[g]);if(d.data={occurrence:l[g],parent:f},this.parent.trigger(G,d),d.cancel)return;f[n.recurrenceException]=this.excludeDateCheck(l[g][n.startTime],f[n.recurrenceException]),this.processCrudTimezone(f),a.changedRecords.push(f),l[g][n.id]!==f[n.id]&&a.deletedRecords.push(l[g])}break;case"DeleteSeries":for(var y=0,T=l;y<T.length;y++)for(var w=T[y],b=new r.Predicate(n.id,"equal",w[n.recurrenceID]||e).or(new r.Predicate(n.recurrenceID,"equal",w[n.recurrenceID]||e)),C=0,D=new r.DataManager(this.parent.eventsData).executeLocal((new r.Query).where(b));C<D.length;C++){var O=D[C];a.deletedRecords.push(O)}}var E;E=this.parent.dataModule.dataManager.saveChanges(a,n.id,null,this.getQuery()),this.parent.eventBase.selectWorkCellByTime(s);var S={requestType:"eventRemoved",cancel:!1,data:d.data,promise:E};this.refreshData(S)}},e.prototype.processCrudTimezone=function(e){var t=this.parent.eventFields;if(e[t.startTimezone]||e[t.endTimezone]){var i=e[t.startTimezone]||e[t.endTimezone],n=e[t.endTimezone]||e[t.startTimezone];if(this.parent.timezone){var a=this.parent.timezone;e[t.startTime]=this.timezone.convert(e[t.startTime],i,a),e[t.endTime]=this.timezone.convert(e[t.endTime],n,a),e[t.startTime]=this.timezone.remove(e[t.startTime],a),e[t.endTime]=this.timezone.remove(e[t.endTime],a)}else e[t.startTime]=this.timezone.remove(e[t.startTime],i),e[t.endTime]=this.timezone.remove(e[t.endTime],n)}else this.parent.timezone&&(e[t.startTime]=this.timezone.remove(e[t.startTime],this.parent.timezone),e[t.endTime]=this.timezone.remove(e[t.endTime],this.parent.timezone))},e.prototype.excludeDateCheck=function(e,i){var n=N(e);return t.isNullOrUndefined(i)?i=n:-1===i.indexOf(n)&&(i=t.isNullOrUndefined(i)?n:i+","+n),i},e}(),bn=function(){function e(){}return e.prototype.renderFormValidator=function(e,t,i){var n=this;this.element=i,this.formObj=new o.FormValidator(e,{customPlacement:function(e,t){n.errorPlacement(e,t)},rules:t,validationComplete:function(e){n.validationComplete(e)}})},e.prototype.validationComplete=function(e){var t=this.element.querySelector("#"+e.inputName+"_Error");t&&(t.style.display="failure"===e.status?"":"none")},e.prototype.errorPlacement=function(e,t){var i=t.getAttribute("for");this.element.querySelector("#"+i+"_Error")||this.createTooltip(e,t,i,"")},e.prototype.createTooltip=function(e,i,n,a){var r,s,o=e.getBoundingClientRect();this.element.classList.contains(Ui)?(r=this.element,s=this.element.getBoundingClientRect()):s=(r=this.element.querySelector(".e-schedule-dialog .e-dlg-content")).getBoundingClientRect();var l=t.createElement("div",{className:"e-tooltip-wrap e-popup "+Hi,id:n+"_Error",styles:"display:"+a+";top:"+(o.bottom-s.top+r.scrollTop+9)+"px;left:"+(o.left-s.left+r.scrollLeft+o.width/2)+"px;"}),c=t.createElement("div",{className:"e-tip-content"});c.appendChild(i);var p=t.createElement("div",{className:"e-arrow-tip e-tip-top"});p.appendChild(t.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),p.appendChild(t.createElement("div",{className:"e-arrow-tip-inner e-tip-top"})),l.appendChild(c),l.appendChild(p),r.appendChild(l),l.style.left=parseInt(l.style.left,10)-l.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){if(this.element)for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+Hi));e<i.length;e++){var n=i[e];t.remove(n)}this.formObj&&this.formObj.reset()},e.prototype.destroy=function(){this.formObj&&!this.formObj.isDestroyed&&this.formObj.destroy()},e}(),Cn=function(){function e(e){this.isMultipleEventSelect=!1,this.parent=e,this.l10n=this.parent.localeObj,this.crudAction=new wn(e),this.fieldValidator=new bn,this.render(),this.addEventListener()}return e.prototype.render=function(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()},e.prototype.renderQuickPopup=function(){var e=t.createElement("div",{className:Ui+" e-popup-close"});this.parent.isAdaptive?(document.body.appendChild(e),t.addClass([e],me)):this.parent.element.appendChild(e),this.quickPopup=new i.Popup(e,{actionOnScroll:"hide",targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1e3:1})},e.prototype.renderMorePopup=function(){var e='<div class="'+ni+'"><div class="e-more-event-header"><div class="'+si+'" title="'+this.l10n.getConstant("close")+'" tabindex="0"></div><div class="'+ai+'"><div class="e-header-day"></div><div class="'+ri+" "+bt+'" tabindex="0"></div></div></div></div>',n=t.createElement("div",{className:ii+" e-popup-close",innerHTML:e});this.parent.element.appendChild(n),this.morePopup=new i.Popup(n,{targetType:"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:{X:"flip",Y:"flip"},viewPortElement:this.parent.element.querySelector("."+Te),zIndex:0});var a=this.morePopup.element.querySelector("."+si);this.renderButton("e-round",ge+" "+Ri,!1,a,this.closeClick),t.EventHandler.add(this.morePopup.element.querySelector("."+ri),"click",this.navigationClick,this)},e.prototype.renderQuickDialog=function(){this.quickDialog=new i.Dialog({animationSettings:{effect:"Zoom"},buttons:[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}],cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});var e=t.createElement("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(e),this.quickDialog.appendTo(e);var n=this.quickDialog.element.querySelector(".e-quick-alertok");n&&n.setAttribute("aria-label",this.l10n.getConstant("occurrence"));var a=this.quickDialog.element.querySelector(".e-quick-alertcancel");a&&a.setAttribute("aria-label",this.l10n.getConstant("series"))},e.prototype.renderButton=function(e,i,n,a,r){new s.Button({cssClass:e,disabled:n,enableRtl:this.parent.enableRtl,iconCss:i},a),t.EventHandler.add(a,"click",r,this)},e.prototype.quickDialogClass=function(e){var i=[ci,pi,hi,di,ui,ye],n=this.quickDialog.element.querySelector(".e-quick-alertok"),a=this.quickDialog.element.querySelector(".e-quick-alertcancel");switch(t.removeClass([n,a],i),e){case"Recurrence":t.addClass([n],ci),t.addClass([a],pi);break;case"Delete":t.addClass([n],hi),t.addClass([a],di);break;case"Alert":t.addClass([n],ui),t.addClass([a],ye)}},e.prototype.applyFormValidation=function(){var e=this.quickPopup.element.querySelector("."+mi),t={};t[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(e,t,this.quickPopup.element)},e.prototype.openRecurrenceAlert=function(){var e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"));var t=this.quickDialog.element.querySelector(".e-quick-alertcancel");t&&(t.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries")),this.quickDialog.content=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteRecurrenceContent":"editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),this.quickDialogClass("Recurrence"),this.showQuickDialog("RecurrenceAlert")},e.prototype.openRecurrenceValidationAlert=function(e){var i=this.quickDialog.element.querySelector(".e-quick-alertok");t.removeClass([i],ci),i.innerHTML=this.l10n.getConstant("ok");var n=this.quickDialog.element.querySelector(".e-quick-alertcancel");switch(n.innerHTML=this.l10n.getConstant("cancel"),this.quickDialog.header=this.l10n.getConstant("alert"),e){case"wrongPattern":t.addClass([n],ye),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"dateValidation":t.removeClass([n],ye),this.quickDialog.content=this.l10n.getConstant("recurrenceDateValidation");break;case"createError":t.addClass([n],ye),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":t.addClass([n],ye),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":t.removeClass([n],ye),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert")}n.classList.contains(ye)||t.addClass([n],"e-quick-alert-cancelpresent"),this.showQuickDialog("RecurrenceValidationAlert")},e.prototype.openDeleteAlert=function(){if(!this.parent.activeViewOptions.readonly){var e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("delete"));var t=this.quickDialog.element.querySelector(".e-quick-alertcancel");t&&(t.innerHTML=this.l10n.getConstant("cancel")),this.quickDialog.content=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleContent"):this.l10n.getConstant("deleteContent"),this.quickDialog.header=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleEvent"):this.l10n.getConstant("deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}},e.prototype.openValidationError=function(e){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(e);var t=this.quickDialog.element.querySelector(".e-quick-alertok");t&&(t.innerHTML=this.l10n.getConstant("ok"));var i=this.quickDialog.element.querySelector(".e-quick-alertcancel");i&&(i.innerHTML=this.l10n.getConstant("cancel")),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert")},e.prototype.showQuickDialog=function(e){this.quickDialog.dataBind();var t={type:e,cancel:!1,data:this.parent.activeEventData,element:this.quickDialog.element};this.parent.trigger(te,t),t.cancel||this.quickDialog.show()},e.prototype.createMoreEventList=function(e,i,n){var a=this.parent.eventFields,r=t.createElement("div",{className:oi}),s=t.createElement("div",{className:li});if(0===e.length)s=t.createElement("div",{className:oi,innerHTML:this.l10n.getConstant("emptyContainer")});else for(var o=0,l=e;o<l.length;o++){var c=l[o],p=c[a.subject]||this.parent.eventSettings.fields.subject.default,h=t.createElement("div",{className:lt,attrs:{"data-id":""+c[a.id],"data-guid":c.Guid,role:"button",tabindex:"0","aria-readonly":"false","aria-selected":"false","aria-grabbed":"true","aria-label":p}});if(h.appendChild(t.createElement("div",{className:Ti,innerHTML:p})),this.parent.activeViewOptions.group.resources.length>0&&h.setAttribute("data-group-index",n),!t.isNullOrUndefined(c[a.recurrenceRule])){var d=c[a.id]===c[a.recurrenceID]?Ht:It;h.appendChild(t.createElement("div",{className:ge+" "+d}))}var u={data:c,element:h,cancel:!1};this.parent.trigger($,u),u.cancel||(s.appendChild(h),this.parent.eventBase.wireAppointmentEvents(h),this.parent.eventBase.applyResourceColor(h,c,"backgroundColor",i))}return r.appendChild(s),r},e.prototype.tapHoldEventPopup=function(e){var i=t.closest(e.event.target,"."+lt);this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(i),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();var n=i.getAttribute("data-guid"),a=this.parent.eventBase.getEventByGuid(n)[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),r='<div class="e-multiple-event-popup"><div class="'+Yt+'"><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button><div class="'+Ti+'">'+a+'</div><button class="e-edit" title="'+this.l10n.getConstant("edit")+'"></button><button class="e-delete" title="'+this.l10n.getConstant("delete")+'"></button></div></div>';this.quickPopup.element.innerHTML=r;var s=this.quickPopup.element.querySelector("."+ji);this.renderButton("e-flat e-round e-small",ge+" "+Ri,!1,s,this.closeClick);var o=this.quickPopup.element.querySelector("."+ki);this.renderButton("e-flat e-round e-small",ge+" "+Vi,!1,o,this.editClick);var l=this.quickPopup.element.querySelector("."+Mi);this.renderButton("e-flat e-round e-small",ge+" "+Pi,!1,l,this.deleteClick),this.beforeQuickPopupOpen(i)},e.prototype.cellClick=function(e){if(this.parent.showQuickInfo&&"MonthAgenda"!==this.parent.currentView&&!this.parent.isAdaptive){var i=t.closest(e.event.target,"."+De+",."+we+",."+Ae);if(!t.isNullOrUndefined(i)&&!e.event.target.classList.contains(zt)){if(this.quickPopup.relateTo===i&&this.quickPopup.element.classList.contains(Ee)){var n=this.quickPopup.element.querySelector("."+Ti);n&&n.focus()}else{var a={};a[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,a[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,a[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;var r=this.getFormattedString(a),s=t.createElement("div",{className:"e-cell-popup"}),l=t.extend({},a,{elementType:"cell"},!0);if(this.parent.quickInfoTemplates.header)t.append(this.parent.getQuickInfoTemplatesHeader()(l),s);else{var c=t.createElement("div",{className:Yt,innerHTML:'<div class="'+Gt+'"><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button></div>'});s.appendChild(c)}if(this.parent.quickInfoTemplates.content)t.append(this.parent.getQuickInfoTemplatesContent()(l),s);else{var p='<table class="e-popup-table"><tbody><tr><td><form class="'+mi+'" onsubmit="return false;"><input class="'+Ti+' e-field" type="text" name="'+this.parent.eventFields.subject+'" /></form></td></tr><tr><td><div class="'+Dt+'"><div class="'+Yi+" "+ge+'"></div><div class="'+Xt+" "+ti+'">'+r.details+"</div></div>"+(this.parent.activeViewOptions.group.resources.length>0?'<div class="e-resource"><div class="'+zi+" "+ge+' "></div><div class="'+_i+" "+ti+'">'+this.getResourceText(e,"cell")+"</div></div>":"")+"</td></tr></tbody></table>",h=t.createElement("div",{className:Qt,innerHTML:p});s.appendChild(h)}if(this.parent.quickInfoTemplates.footer)t.append(this.parent.getQuickInfoTemplatesFooter()(l),s);else{var d=t.createElement("div",{className:Kt,innerHTML:'<button class="'+Jt+" "+ti+'" title="'+this.l10n.getConstant("moreDetails")+'">'+this.l10n.getConstant("moreDetails")+'</button><button class="'+Zt+" "+ti+'" title="'+this.l10n.getConstant("save")+'">'+this.l10n.getConstant("save")+"</button>"});s.appendChild(d)}var u=s.querySelector("."+Ti);u&&o.Input.createInput({element:u,properties:{placeholder:this.l10n.getConstant("addTitle")}});var v=s.querySelector("."+ji);v&&this.renderButton("e-flat e-round e-small",ge+" "+Ri,!1,v,this.quickPopupHide);var m=s.querySelector("."+Jt);m&&this.renderButton("e-flat","",!1,m,this.detailsClick);var g=s.querySelector("."+Zt);g&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,g,this.saveClick),this.quickPopup.content=s,this.quickPopup.dataBind(),this.applyFormValidation(),this.morePopup&&this.morePopup.hide(),this.quickPopup.relateTo=i,this.beforeQuickPopupOpen(i)}}}else this.quickPopupHide()},e.prototype.isSameEventClick=function(e){if(this.quickPopup.relateTo===t.closest(e.element,"."+lt)&&this.quickPopup.element.classList.contains(Ee)){var i=this.quickPopup.element.querySelector("."+ki);if(i&&i.focus(),!this.parent.isAdaptive){var n=this.quickPopup.element.querySelector("."+$t);n&&n.focus()}return!0}return!1},e.prototype.eventClick=function(e){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup(t.closest(e.element,"."+lt));else{if(this.isSameEventClick(e))return;var i=e.event,n=this.getFormattedString(i),a=t.createElement("div",{className:_t}),r=t.extend({},i,{elementType:"event"},!0);if(this.parent.quickInfoTemplates.header)t.append(this.parent.getQuickInfoTemplatesHeader()(r),a);else{var s=t.createElement("div",{className:Yt,innerHTML:'<div class="'+Gt+'"><button class="e-edit e-icons" title="'+this.l10n.getConstant("edit")+'"></button><button class="e-delete e-icons" title="'+this.l10n.getConstant("delete")+'"></button><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button></div><div class="'+ht+'"><div class="'+Ti+" "+ti+'" title="'+n.eventSubject+'">'+n.eventSubject+"</div></div >"});a.appendChild(s)}if(this.parent.quickInfoTemplates.content)t.append(this.parent.getQuickInfoTemplatesContent()(r),a);else{var o='<div class="'+Dt+'"><div class="'+Yi+" "+ge+'"></div><div class="e-date-time-wrapper '+ti+'"><div class="'+Xt+" "+ti+'">'+n.details+"</div>"+(i[this.parent.eventFields.recurrenceRule]?'<div class="e-recurrence-summary '+ti+'">'+this.getRecurrenceSummary(i)+"</div>":"")+"</div></div>"+(i[this.parent.eventFields.location]?'<div class="'+wi+'"><div class="e-location-icon e-icons"></div><div class="e-location-details '+ti+'">'+i[this.parent.eventFields.location]+"</div></div>":"")+(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone]?'<div class="'+fi+'"><div class="e-time-zone-icon e-icons"></div><div class="e-time-zone-details '+ti+'">'+this.getTimezone(i)+" </div></div>":"")+(i[this.parent.eventFields.description]?'<div class="'+Di+'"><div class="e-description-icon e-icons"></div><div class="e-description-details '+ti+'">'+i[this.parent.eventFields.description]+"</div></div>":"")+(this.parent.resources.length>0?'<div class="e-resource"><div class="'+zi+" "+ge+'"></div><div class="'+_i+" "+ti+'">'+this.getResourceText(e,"event")+"</div></div>":""),l=t.createElement("div",{className:Qt,innerHTML:o});a.appendChild(l)}if(this.parent.quickInfoTemplates.footer)t.append(this.parent.getQuickInfoTemplatesFooter()(r),a);else{var c=t.createElement("div",{className:Kt,innerHTML:this.parent.isAdaptive?"":'<button class="'+$t+" "+ti+'" title="'+this.l10n.getConstant("edit")+'">'+this.l10n.getConstant("edit")+'</button><button class="'+ei+" "+ti+'" title="'+this.l10n.getConstant("delete")+'">'+this.l10n.getConstant("delete")+"</button>"});a.appendChild(c)}var p=this.parent.activeViewOptions.readonly,h=a.querySelector("."+ki);h&&this.renderButton("e-flat e-round e-small",ge+" "+Vi,!1,h,this.editClick);var d=a.querySelector("."+Mi);d&&this.renderButton("e-flat e-round e-small",ge+" "+Pi,p,d,this.deleteClick);var u=a.querySelector("."+ji);u&&this.renderButton("e-flat e-round e-small",ge+" "+Ri,!1,u,this.quickPopupHide);var v=a.querySelector("."+$t);v&&this.renderButton("e-flat e-primary","",!1,v,this.editClick);var m=a.querySelector("."+ei);m&&this.renderButton("e-flat","",p,m,this.deleteClick),this.quickPopup.content=a,this.quickPopup.dataBind(),this.morePopup&&!t.closest(e.element,"."+li)&&this.morePopup.hide(),this.quickPopup.relateTo=this.parent.isAdaptive?document.body:t.closest(e.element,"."+lt),this.beforeQuickPopupOpen(e.element)}},e.prototype.getResourceText=function(e,i){var n="";if(0===this.parent.activeViewOptions.group.resources.length){var a=this.parent.resourceBase.resourceCollection.slice(-1)[0],r=a.dataSource,s=0,o=e.event;r.forEach(function(e,t){e[a.idField]===o[a.field]&&(s=t)}),n=r[s][a.textField]}else if("event"===i){for(var l,c=e.event,p=(r=void 0,this.parent.resourceBase.resourceCollection.length-1);p>=0;p--)if(r=c[this.parent.resourceBase.resourceCollection[p].field],!t.isNullOrUndefined(r)){l=this.parent.resourceBase.resourceCollection[p];break}Array.isArray(r)||(r=[r]);var h=[],d=l.dataSource;r.map(function(e){var t=O(d,l.idField,e),i=d[t][l.textField];i&&h.push(i)}),n=h.join(", ")}else{var u=e,v=t.isNullOrUndefined(u.groupIndex)?0:u.groupIndex,m=this.parent.resourceBase.lastResourceLevel[v];n=m.resourceData[m.resource.textField]}return n},e.prototype.getFormattedString=function(e){var t,i=this.parent.eventFields,n=e[i.subject]||this.l10n.getConstant("noTitle"),a=e[i.startTime],r=e[i.endTime],s=this.getDateFormat(a,"long"),o=e[i.isAllDay]&&0===r.getHours()&&0===r.getMinutes()?this.getDateFormat(f(new Date(r.getTime()),-1),"long"):this.getDateFormat(r,"long"),l=this.parent.getTimeString(a),c=this.parent.getTimeString(r),p=(r.getTime()-a.getTime())/de,h=r.getDate()!==a.getDate()&&(r.getTime()-a.getTime())/36e5<24?1:0;return e[i.isAllDay]||p>=1||h>0?(t=s+" ("+(e[i.isAllDay]?this.l10n.getConstant("allDay"):l)+")",(p>1||h>0)&&(t+="&nbsp;-&nbsp;"+o+" ("+(e[i.isAllDay]?this.l10n.getConstant("allDay"):c)+")")):t=s+" ("+l+"&nbsp;-&nbsp;"+c+")",{eventSubject:n,details:t}},e.prototype.moreEventClick=function(e,i,n){this.quickPopupHide(!0);var a=this.morePopup.element.querySelector("."+oi);a&&t.remove(a);var r=e.date.getTime().toString(),s=t.closest(e.element,"."+zt);this.morePopup.element.querySelector(".e-header-day").innerHTML=this.getDateFormat(e.date,"E");var o=this.morePopup.element.querySelector("."+ri);o.innerHTML=this.getDateFormat(e.date,"d"),o.setAttribute("data-date",r),o.setAttribute("data-end-date",i.getTime().toString());var l;t.isNullOrUndefined(n)||(o.setAttribute("data-group-index",n),l=this.parent.resourceBase.lastResourceLevel[parseInt(n,10)].groupOrder);var c=this.createMoreEventList(e.event,l,n);if(this.morePopup.element.querySelector("."+ni).appendChild(c),t.removeClass(this.morePopup.element.querySelector("."+ai).childNodes,Ve),m(e.date).getTime()===m(new Date).getTime()&&t.addClass(this.morePopup.element.querySelector("."+ai).childNodes,Ve),-1!==this.parent.currentView.indexOf("Timeline")){var p=s.getAttribute("data-group-index"),h=t.isNullOrUndefined(p)?0:parseInt(p,10);this.morePopup.relateTo=this.parent.element.querySelector("."+gt+" tbody tr:nth-child("+(h+1)+') td[data-date="'+s.getAttribute("data-start-date")+'"]')}else this.morePopup.relateTo=t.closest(s,"."+De);var d={type:"EventContainer",data:e,cancel:!1,element:this.morePopup.element};this.parent.trigger(te,d),d.cancel||this.morePopup.show()},e.prototype.saveClick=function(){if(this.quickPopup.element.querySelector("."+mi).ej2_instances[0].validate()){var e=this.parent.eventFields,i=t.extend({},this.parent.eventWindow.getObjectFromFormData(Ui));t.isNullOrUndefined(i[e.subject])||(i[e.subject]=""!==i[e.subject]?i[e.subject]:this.parent.eventSettings.fields.subject.default),i[e.id]=this.parent.eventBase.getEventMaxID(),i[e.startTime]=this.parent.activeCellsData.startTime,i[e.endTime]=this.parent.activeCellsData.endTime,i[e.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(i,!0),this.parent.currentAction="Add",this.crudAction.addEvent(i),this.quickPopupHide()}},e.prototype.detailsClick=function(){var e=this.quickPopup.element.querySelector("."+Ti);if(e&&""!==e.value)t.extend(this.parent.activeCellsData,{subject:e.value});this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")},e.prototype.editClick=function(){this.quickPopupHide(!0);var e=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",t.isNullOrUndefined(e[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(e,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())},e.prototype.deleteClick=function(){this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()},e.prototype.updateMoreEventContent=function(){if(!this.morePopup.element.classList.contains("e-popup-close")){var e=this.morePopup.element.querySelector("."+oi);e&&t.remove(e);var i,n,a=this.morePopup.element.querySelector("."+ri),r=this.parent.getDateFromElement(a),s=new Date(parseInt(a.getAttribute("data-end-date"),10)),o=a.getAttribute("data-group-index");t.isNullOrUndefined(o)||(n=(i=this.parent.resourceBase.lastResourceLevel[parseInt(o,10)]).groupOrder);var l=this.parent.eventBase.filterEvents(r,s,this.parent.eventsProcessed,i),c=this.createMoreEventList(l,n,o);this.morePopup.element.querySelector("."+ni).appendChild(c)}},e.prototype.closeClick=function(){this.quickPopupHide(),this.morePopup.hide()},e.prototype.dialogButtonClick=function(e){var i=this.quickDialog.element.querySelector(".e-quick-alertcancel");if(e.target.classList.contains("e-quick-alertok")&&i.classList.contains("e-quick-alert-cancelpresent"))return t.removeClass([i],"e-quick-alert-cancelpresent"),void this.parent.eventWindow.eventSave(this.l10n.getConstant("ok"));if(this.quickDialog.hide(),e.target.classList.contains(ci))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(this.parent.activeEventData.event,this.parent.currentAction);break;case"DeleteOccurrence":this.crudAction.deleteEvent(this.parent.activeEventData.event,this.parent.currentAction)}else if(e.target.classList.contains(pi))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":var n=this.parent.eventBase.getRecurrenceEvent(this.parent.activeEventData.event);this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteSeries":this.crudAction.deleteEvent(this.parent.activeEventData.event,this.parent.currentAction)}else e.target.classList.contains(hi)&&this.crudAction.deleteEvent(this.parent.activeEventData.event,this.parent.currentAction)},e.prototype.updateTapHoldEventPopup=function(e){var i=this.parent.eventBase.getSelectedEventElements(e);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),i.length>0){var n=this.parent.eventBase.getEventByGuid(i[0].getAttribute("data-guid")),a=1===i.length?n[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+i.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector("."+Ti).innerHTML=a,i.length>1?t.addClass([this.quickPopup.element.querySelector("."+Vi)],Li):t.removeClass([this.quickPopup.element.querySelector("."+Vi)],Li)}else this.parent.selectedElements=[],this.quickPopupHide()},e.prototype.getTimezone=function(e){var t="";return t+=e[this.parent.eventFields.startTimezone]||"",t+=""===t?"":" - ",t+=e[this.parent.eventFields.endTimezone]||""},e.prototype.getRecurrenceSummary=function(e){var t=this.parent.eventWindow.getRecurrenceEditorInstance().getRuleSummary(e[this.parent.eventFields.recurrenceRule]);return t.charAt(0).toUpperCase()+t.slice(1)},e.prototype.getDateFormat=function(e,t){return this.parent.globalize.formatDate(e,{skeleton:t})},e.prototype.getDataFromTarget=function(e){return e.classList.contains(lt)?this.parent.activeEventData.event:this.parent.activeCellsData},e.prototype.beforeQuickDialogClose=function(){this.parent.eventBase.focusElement()},e.prototype.beforeQuickPopupOpen=function(e){var n=this.quickPopup.element.querySelector("."+_t),a=this.parent.isAdaptive?n?"ViewEventInfo":"EditEventInfo":"QuickInfo",r={type:a,cancel:!1,data:this.getDataFromTarget(e),target:e,element:this.quickPopup.element};if(this.parent.trigger(te,r),r.cancel)return this.destroyButtons(),r.element.classList.contains(Ee)&&this.quickPopupClose(),void(this.quickPopup.element.innerHTML="");var s=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.parent.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=t.formatUnit("EditEventInfo"===a?65:window.innerHeight);else{this.quickPopup.offsetX=10,this.quickPopup.collision={X:"none",Y:"fit"},this.quickPopup.position={X:"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);if(i.isCollide(this.quickPopup.element,this.parent.element).indexOf(this.parent.enableRtl?"left":"right")>-1){this.quickPopup.offsetX=-e.offsetWidth-10-this.quickPopup.element.offsetWidth,this.quickPopup.dataBind();i.isCollide(this.quickPopup.element,this.parent.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind())}}n&&this.applyEventColor(),this.quickPopup.element.style.display=s,this.quickPopup.dataBind(),this.quickPopup.show()},e.prototype.applyEventColor=function(){var e=this.parent.activeEventData.element.style.backgroundColor;if(""!==e){var t=this.quickPopup.element.querySelector("."+Yt),i=this.quickPopup.element.querySelector("."+Kt);i&&i.offsetParent&&(t=this.quickPopup.element.querySelector("."+Ti))&&(t.style.borderLeftColor=e,e="rgba("+e.match(/\d+/g).join()+",0.3)"),t&&(t.style.backgroundColor=e)}},e.prototype.quickPopupOpen=function(){if(!this.parent.isAdaptive)if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector("."+Ti);e&&e.focus()}else{var t=this.quickPopup.element.querySelector("."+$t);t&&t.focus();var i=this.quickPopup.element.querySelector("."+ki);i&&i.focus()}},e.prototype.quickPopupClose=function(){this.parent.eventBase.focusElement(),this.quickPopup.relateTo=De,this.fieldValidator.destroyToolTip(),this.destroyButtons(),this.quickPopup.element.innerHTML=""},e.prototype.morePopupOpen=function(){this.morePopup.element.querySelector("."+ri).focus(),this.morePopup.refreshPosition()},e.prototype.morePopupClose=function(){var e=this.parent.element.querySelector("."+li);e&&e.remove()},e.prototype.quickPopupHide=function(e){if(this.quickPopup.element.classList.contains("e-popup-open")){if(e){var t=this.quickPopup.hideAnimation;this.quickPopup.hideAnimation=null,this.quickPopup.hide(),this.quickPopup.hideAnimation=t}else this.quickPopup.hide();this.isMultipleEventSelect=!1}},e.prototype.navigationClick=function(e){var i=t.closest(e.target,"."+bt);if(!t.isNullOrUndefined(i)){var n=this.parent.getDateFromElement(e.currentTarget);t.isNullOrUndefined(n)||this.parent.isAdaptive||(this.closeClick(),this.parent.setProperties({selectedDate:n},!0),this.parent.changeView(this.parent.getNavigateView()))}},e.prototype.documentClick=function(e){var i=e.event.target;t.closest(i,".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment")||this.quickPopupHide(),t.closest(i,"."+ii)||i.classList.contains(zt)||t.closest(i,"."+Ee)||this.morePopup.hide()},e.prototype.onClosePopup=function(){this.quickPopupHide(),this.parent.eventBase.focusElement()},e.prototype.addEventListener=function(){this.parent.on(_,this.cellClick,this),this.parent.on(Z,this.eventClick,this),this.parent.on(ce,this.documentClick,this),this.parent.on(ae,this.updateMoreEventContent,this),this.parent.on(he,this.tapHoldEventPopup,this)},e.prototype.removeEventListner=function(){this.parent.off(_,this.cellClick),this.parent.off(Z,this.eventClick),this.parent.off(ce,this.documentClick),this.parent.off(ae,this.updateMoreEventContent),this.parent.off(he,this.tapHoldEventPopup)},e.prototype.destroyButtons=function(){[].slice.call(this.quickPopup.element.querySelectorAll(".e-control.e-btn")).forEach(function(e){var t=e.ej2_instances[0];t&&t.destroy()})},e.prototype.destroy=function(){this.fieldValidator.destroy(),this.removeEventListner(),this.destroyButtons(),this.quickPopup.destroy(),t.remove(this.quickPopup.element),this.morePopup.destroy(),this.quickDialog.element&&(this.quickDialog.destroy(),t.remove(this.quickDialog.element),this.quickDialog.element=null)},e}(),Dn=function(){function e(e){this.parent=e,this.tooltipObj=new i.Tooltip({content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" "+Ii,target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),enableRtl:this.parent.enableRtl}),this.tooltipObj.appendTo(this.parent.element)}return e.prototype.getTargets=function(){return this.parent.activeViewOptions.group.resources.length>0&&this.parent.eventSettings.enableTooltip?"."+lt+",."+Be:this.parent.eventSettings.enableTooltip?"."+lt:"."+Be},e.prototype.onBeforeRender=function(e){if(t.isNullOrUndefined(e.target.getAttribute("data-tooltip-id"))){var i="";if(e.target.classList.contains(Be)&&this.parent.activeViewOptions.group.resources.length>0){var n=parseInt(e.target.getAttribute("data-group-index"),0),a=this.parent.resourceBase.lastResourceLevel[n],r={resource:a.resource,resourceData:a.resourceData},s=t.createElement("div");return t.append([].slice.call(this.parent.getHeaderTooltipTemplate()(r)),s),i=s.innerHTML,void(this.tooltipObj.content=i)}var o=this.parent.eventBase.getEventByGuid(e.target.getAttribute("data-guid"));if(t.isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)){var l=this.parent.globalize,c=this.parent.eventFields,p=new Date(""+o[c.startTime]),h=new Date(""+o[c.endTime]);h=0===h.getHours()&&0===h.getMinutes()?new Date(h.setMilliseconds(-1e3)):h;var d=m(new Date(""+p)),u=m(new Date(""+h)),v=o[c.subject]||this.parent.eventSettings.fields.subject.default,g=t.isNullOrUndefined(o[c.location])?"":o[c.location],f=l.formatDate(p,{type:"date",skeleton:"MMMd"}),y=l.formatDate(p,{type:"date",skeleton:"yMMMd"}),T=l.formatDate(h,{type:"date",skeleton:"yMMMd"}),w=l.formatDate(p,{type:"time",skeleton:"short"}),b=l.formatDate(h,{type:"time",skeleton:"short"});i='<div><div class="e-subject">'+v+'</div><div class="e-location">'+g+'</div><div class="e-details">'+(d.getTime()===u.getTime()?l.formatDate(p,{type:"date",skeleton:"long"}):d.getFullYear()===u.getFullYear()?f+" - "+T:y+" - "+T)+'</div><div class="e-all-day">'+(o[c.isAllDay]?this.parent.localeObj.getConstant("allDay"):w+" - "+b)+"</div></div>"}else{s=t.createElement("div");t.append([].slice.call(this.parent.getEventTooltipTemplate()(o)),s),i=s.innerHTML}this.tooltipObj.content=i}},e.prototype.close=function(){this.tooltipObj.close()},e.prototype.destroy=function(){this.tooltipObj.destroy(),this.tooltipObj=null},e}(),On=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),En=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Sn="e-input-wrapper",xn="e-input-wrapper-side",An="e-repeat-element",kn="e-repeat-interval",Vn="e-days",Mn="e-non-week",Pn="e-year-expander",jn="e-year-expander-element",Rn="e-month-expander",Hn="e-month-expander-element",In="e-month-expander-checkbox-wrapper",qn="e-form-left",Ln="e-form-right",Un="e-month-expander-wrapper",Nn="e-end-on-element",Fn="e-end-on-date",Bn="e-end-on-count",Wn="e-recurrence-count",zn="e-hide-recurrence-element",_n="e-primary",Yn="e-recurrence-table",Gn="e-repeat-content",Qn="monthly",Kn={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},Xn={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},Jn=[Vn,Mn,"e-end-on","e-interval",Pn,Rn],Zn=[Mn],$n=[Vn,Pn],ea=[Vn],ta=[Vn,Mn,Pn,Rn],ia=[Fn,Bn],na=[Fn],aa=[Bn],ra=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},n.renderStatus=!1,n.dayButtons=[],n.monthButtons=[],n}return On(i,e),i.prototype.startState=function(e,t,i){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(i),this.updateUntilDate(i),this.onMonthDay.setProperties({checked:!0})},i.prototype.preRender=function(){this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale)},i.prototype.applyCustomClass=function(e){e&&t.addClass([this.element],e)},i.prototype.initialize=function(){this.renderComponent(),t.isNullOrUndefined(this.value)?(this.startState(this.repeatType.value.toString().toUpperCase(),"never",this.startDate),this.updateForm(this.repeatType.value.toString()),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)},i.prototype.triggerChangeEvent=function(){if(this.renderStatus){var e=this.getRecurrenceRule();this.trigger("change",{value:e}),this.setProperties({value:e},!1)}},i.prototype.resetDayButton=function(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach(function(e){return t.removeClass([e],["e-active",_n])})},i.prototype.daySelection=function(e){this.resetDayButton();var i=[0,1,2,3,4,5,6];this.rotateArray(i,this.firstDayOfWeek);var n=this.element.querySelector('.e-days button[data-index="'+i.indexOf(e)+'"]');n&&t.addClass([n],["e-active",_n])},i.prototype.rtlClass=function(e){e?t.addClass([this.element],"e-rtl"):t.removeClass([this.element],"e-rtl")},i.prototype.updateUntilDate=function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})},i.prototype.selectMonthDay=function(e){var t=["sun","mon","tue","wed","thu","fri","sat"];this.monthDate.setProperties({value:e.getDate()}),this.monthWeekDays.setProperties({value:Xn[t[e.getDay()]]}),this.monthValue.setProperties({value:""+(e.getMonth()+1)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())},i.prototype.updateForm=function(e){var i=this;this.repeatType.setProperties({value:e});var n=this.element.querySelector(".e-end-on");switch("daily"===e?t.classList(n,[qn],[Ln]):t.classList(n,[Ln],[qn]),e){case"none":Jn.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)});break;case"weekly":Zn.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)});break;case Qn:$n.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)});break;case"yearly":ea.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)});break;case"daily":ta.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)})}},i.prototype.updateEndOnForm=function(e){var i=this;switch(this.endType.setProperties({value:e}),e){case"never":ia.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)});break;case"until":aa.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)});break;case"count":na.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],zn)})}},i.prototype.freshOnEndForm=function(){var e=this;ia.forEach(function(i){var n=e.element.querySelector("."+i);n&&t.removeClass([n],zn)})},i.prototype.showFormElement=function(){var e=this;Jn.forEach(function(i){return t.removeClass([e.element.querySelector("."+i)],zn)})},i.prototype.renderDropdowns=function(){var e=this,t=this;this.repeatType=new l.DropDownList({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:"text",value:"value"},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat")},change:function(e){t.setProperties({selectedType:e.value},!1),t.element.querySelector("."+Gn).innerHTML=t.localeObj.getConstant(Kn[e.value]),t.showFormElement(),t.updateForm(e.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector("."+An)),this.endType=new l.DropDownList({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:"text",value:"value"},change:function(e){t.freshOnEndForm(),t.updateEndOnForm(e.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector("."+Nn));var i=function(i){return new l.DropDownList({dataSource:i,popupWidth:e.getPopupWidth(),enableRtl:e.enableRtl,fields:{text:"text",value:"value"},index:1,change:function(e){t.onWeekDay.setProperties({checked:!0}),t.resetFormValues(),t.triggerChangeEvent()}})};this.monthWeekPos=i(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector(".e-month-pos")),this.monthWeekDays=i(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector(".e-month-week")),this.monthValue=new l.DropDownList({dataSource:this.getMonthData(),fields:{text:"text",value:"value"},floatLabelType:"Always",enableRtl:this.enableRtl,index:7,change:function(e){t.resetFormValues(),t.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector("."+jn))},i.prototype.setDefaultValue=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));e<t.length;e++){var i=t[e].ej2_instances[0];i.element.classList.contains(kn)?(i.value=1,i.dataBind()):i.element.classList.contains(Wn)&&(i.value=10,i.dataBind())}},i.prototype.resetFormValues=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));e<t.length;e++){var i=t[e],n=void 0;if(i.classList.contains("e-datepicker"))(n=i.ej2_instances[0]).value?(n.value=n.value,n.dataBind()):this.updateUntilDate(this.startDate);else if(i.classList.contains("e-dropdownlist"))(n=i.ej2_instances[0]).index=n.index||0,n.dataBind();else if(i.classList.contains("e-numerictextbox")){var a=void 0;a=(n=i.ej2_instances[0]).element.classList.contains(kn)?1:n.element.classList.contains(Wn)?10:this.startDate.getDate(),n.value=n.value||a,n.dataBind()}}},i.prototype.getPopupWidth=function(){return t.Browser.isDevice?"100%":"auto"},i.prototype.renderDatePickers=function(){var e=this;this.untilDateObj=new a.DatePicker({enableRtl:this.enableRtl,min:this.minDate,max:this.maxDate,change:function(t){t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector(".e-until-date"))},i.prototype.dayButtonRender=function(){for(var e=this,i=this,n=0,a=[].slice.call(this.element.querySelectorAll(".e-days button"));n<a.length;n++){var r=a[n],o=new s.Button({isToggle:!0,enableRtl:this.enableRtl},r);this.dayButtons.push(o),t.EventHandler.add(r,"click",function(n){var a=[].slice.call(e.element.querySelectorAll(".e-days button."+_n)),r=n.target;r.classList.contains(_n)?a.length>1&&(t.removeClass([r],_n),i.triggerChangeEvent()):(t.addClass([r],_n),i.triggerChangeEvent())})}},i.prototype.radioButtonRender=function(){var e=this;this.onMonthDay=new s.RadioButton({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:function(t){e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector("."+Hn)),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new s.RadioButton({label:"",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:function(t){e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector("."+Un)),this.monthButtons.push(this.onWeekDay)},i.prototype.numericTextboxRender=function(){var e=this;this.recurrenceCount=new o.NumericTextBox({value:10,format:"#",enableRtl:this.enableRtl,floatLabelType:"Always",min:1,change:function(t){e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+Wn)),this.monthDate=new o.NumericTextBox({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:function(t){e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector(".e-month-day")),this.repeatInterval=new o.NumericTextBox({value:1,format:"#",min:1,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:function(t){e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector("."+kn))},i.prototype.renderComponent=function(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()},i.prototype.rotateArray=function(e,t){for(var i,n=0;n<t;n++)i=e.shift(),e.push(i)},i.prototype.getEndData=function(){var e=this,t=[];return["never","until","count"].forEach(function(i){t.push({text:e.localeObj.getConstant(i),value:i})}),t},i.prototype.getDayPosition=function(e){var t=new Date(e.getTime()),i=new Date(e.getTime()),n=e.getDay(),a=[];for(t.setDate(1),i.setDate(1),i.setMonth(i.getMonth()+1);t<i;)t.getDay()===n&&a.push(t.getTime()),t.setDate(t.getDate()+1);return a.indexOf(e.getTime())===a.length-1?-1:a.indexOf(e.getTime())+1},i.prototype.getRepeatData=function(){var e=[],t=this;return this.frequencies.forEach(function(i){var n="none"===i?"never":i;e.push({text:t.localeObj.getConstant(n),value:i})}),e},i.prototype.getMonthPosData=function(){var e={first:1,second:2,third:3,fourth:4,last:-1},t=this,i=[];return["first","second","third","fourth","last"].forEach(function(n){i.push({text:t.localeObj.getConstant(n),value:e[n]})}),i},i.prototype.getDayData=function(e){var i,n=["sun","mon","tue","wed","thu","fri","sat"],a=[];this.rotateArray(n,this.firstDayOfWeek),i="en"===this.locale||"en-US"===this.locale?t.getValue("days.stand-alone."+e,t.getDefaultDateObject()):t.getValue("main."+this.locale+".dates.calendars.gregorian.days.stand-alone."+e,t.cldrData);for(var r=0,s=n;r<s.length;r++){var o=s[r];a.push({text:t.getValue(o,i),value:Xn[o]})}return a},i.prototype.getMonthData=function(){var e,i=[];e="en"===this.locale||"en-US"===this.locale?t.getValue("months.stand-alone.wide",t.getDefaultDateObject()):t.getValue("main."+this.locale+".dates.calendars.gregorian.months.stand-alone.wide",t.cldrData);for(var n=0,a=Object.keys(e);n<a.length;n++){var r=a[n];i.push({text:t.getValue(r,e),value:r})}return i},i.prototype.setTemplate=function(){var e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+Sn+" "+qn+'"><input type="text" tabindex="0" class="'+An+'"label="'+An.substr(2)+'" /></div><div class="'+Sn+" e-interval "+Ln+'"><table  class="'+Yn+' e-repeat-content-wrapper"><tr><td><input type="text" tabindex="0" class="'+kn+'"title="'+this.localeObj.getConstant("repeatInterval")+'" /></td><td><span class="'+Gn+'"></span></td></tr></table></div><div class="'+xn+" "+Vn+" "+qn+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="'+xn+" "+Mn+" "+qn+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="'+Pn+'"><input class="'+jn+'" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="'+Rn+'"><table class="'+Yn+' e-month-expand-wrapper"><tr><td><div class="'+Sn+" "+In+'"><input class="'+Hn+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+Sn+' e-monthday-element"><input type="text" tabindex="0" class="e-month-day"title="'+this.localeObj.getConstant("monthExpander")+'" /></div></td></tr><tr><td><div class="'+Sn+" "+In+'" style="min-width: 30px;margin-bottom:18px;"><input class="'+Un+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+Sn+' e-week-position" ><input type="text" tabindex="0" class="e-month-pos"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+Sn+'" ><input type="text" tabindex="0" class="e-month-week"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="'+xn+" e-end-on "+Ln+'"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+Sn+' e-end-on-left"><input type="text" tabindex="0" class="'+Nn+'"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+Sn+" "+Fn+'" ><input type="text" tabindex="0" class="e-until-date"title="'+this.localeObj.getConstant("until")+'" /></div><div class="'+Sn+" "+Bn+'"><input type="text" tabindex="0" class="'+Wn+'"title="'+this.localeObj.getConstant("count")+'" /></div></div></div></div>'},i.prototype.getSelectedDaysData=function(){var e="BYDAY=",t=this.element.querySelectorAll(".e-days button."+_n),i=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(i,this.firstDayOfWeek);for(var n=0;n<t.length;n++)e+=i[parseInt(t[n].getAttribute("data-index"),10)]+(n===t.length-1?"":",");return e+";"},i.prototype.getSelectedMonthData=function(){return this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+";":"BYMONTHDAY="+this.monthDate.value+";"},i.prototype.getIntervalData=function(){return"INTERVAL="+this.repeatInterval.value+";"},i.prototype.getEndOnCount=function(){return"COUNT="+this.recurrenceCount.value+";"},i.prototype.getYearMonthRuleData=function(){return"BYMONTH="+this.monthValue.value+";"},i.prototype.updateWeekButton=function(e){var t=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(t,this.firstDayOfWeek);for(var i=0,n=this.dayButtons;i<n.length;i++){var a=n[i],r=parseInt(a.element.getAttribute("data-index"),10);-1!==e.indexOf(t[r])?a.setProperties({isPrimary:!0}):a.setProperties({isPrimary:!1})}},i.prototype.updateMonthUI=function(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(var e=0,t=Object.keys(Xn);e<t.length;e++){var i=t[e];if(Xn[i]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}}},i.prototype.updateUI=function(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case"until":this.untilDateObj.setProperties({value:this.ruleObject.until});break;case"count":this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(e){case"weekly":this.updateWeekButton(this.ruleObject.day);break;case"yearly":this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case Qn:this.updateMonthUI()}},i.prototype.getUntilData=function(){return"UNTIL="+N(this.untilDateObj.value)+";"},i.prototype.destroyComponents=function(){this.recurrenceCount.isDestroyed||this.recurrenceCount.destroy(),this.monthDate.isDestroyed||this.monthDate.destroy(),this.repeatInterval.isDestroyed||this.repeatInterval.destroy(),this.untilDateObj.isDestroyed||this.untilDateObj.destroy(),this.repeatType.isDestroyed||this.repeatType.destroy(),this.endType.isDestroyed||this.endType.destroy(),this.monthWeekPos.isDestroyed||this.monthWeekPos.destroy(),this.monthWeekDays.isDestroyed||this.monthWeekDays.destroy(),this.monthValue.isDestroyed||this.monthValue.destroy(),this.dayButtons.forEach(function(e){return e.destroy()}),this.dayButtons=[],this.monthButtons.forEach(function(e){return e.destroy()}),this.monthButtons=[]},i.prototype.resetFields=function(){this.startState("none","never",this.startDate),this.setDefaultValue()},i.prototype.getRuleSummary=function(e){return void 0===e&&(e=this.getRecurrenceRule()),function(e,i,n){var a,r,s=H(e),o=i.getConstant(dn)+" ";switch("en"===n||"en-US"===n?(r=t.getValue("months.stand-alone.abbreviated",t.getDefaultDateObject()),a=t.getValue("days.stand-alone.abbreviated",t.getDefaultDateObject())):(r=t.getValue("main."+n+".dates.calendars.gregorian.months.stand-alone.abbreviated",t.cldrData),a=t.getValue("main."+n+".dates.calendars.gregorian.days.stand-alone.abbreviated",t.cldrData)),s.interval>1&&(o+=s.interval+" "),s.freq){case"DAILY":o+=i.getConstant(vn);break;case"WEEKLY":o+=i.getConstant(mn)+" "+i.getConstant(hn)+" ",s.day.forEach(function(e,i){o+=t.getValue(yn[e],a),o+=s.day.length-1===i?"":", "});break;case"MONTHLY":o+=i.getConstant(gn)+" "+i.getConstant(hn)+" ",o+=S(s,a,i);break;case"YEARLY":o+=i.getConstant(fn)+" "+i.getConstant(hn)+" ",o+=t.getValue(s.month[0].toString(),r)+" ",o+=S(s,a,i)}if(s.count)o+=", "+s.count+" "+i.getConstant(pn);else if(s.until){var l=s.until;o+=", "+i.getConstant(un)+" "+l.getDate()+" "+t.getValue((l.getMonth()+1).toString(),r)+" "+l.getFullYear()}return o}(e,this.localeObj,this.locale)},i.prototype.getRecurrenceDates=function(e,i,n,a,r){return r=t.isNullOrUndefined(r)?this.startDate:r,x(e,i,n,this.firstDayOfWeek,a,r)},i.prototype.getRecurrenceRule=function(){var e="FREQ=";switch(this.repeatType.value){case"daily":e+="DAILY;";break;case"weekly":e+="WEEKLY;"+this.getSelectedDaysData();break;case Qn:e+="MONTHLY;"+this.getSelectedMonthData();break;case"yearly":e+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case"none":return""}switch(e+=this.getIntervalData(),this.endType.value){case"until":e+=this.getUntilData();break;case"count":e+=this.getEndOnCount()}return e},i.prototype.setRecurrenceRule=function(e,t){void 0===t&&(t=this.startDate),e||this.repeatType.setProperties({value:"none"}),this.ruleObject=H(e);var i=this.ruleObject.count?"count":this.ruleObject.until?"until":"never";switch(this.ruleObject.freq){case"DAILY":this.startState("daily",i,t),this.updateUI("daily",i);break;case"WEEKLY":this.startState("weekly",i,t),this.updateUI("weekly",i);break;case"MONTHLY":this.startState(Qn,i,t),this.updateUI(Qn,i);break;case"YEARLY":this.startState("yearly",i,t),this.updateUI("yearly",i)}},i.prototype.destroy=function(){this.destroyComponents(),e.prototype.destroy.call(this);var i=["e-"+this.getModuleName()];this.cssClass&&(i=i.concat(this.cssClass.split(" "))),t.removeClass([this.element],i),this.element.innerHTML=""},i.prototype.getModuleName=function(){return"recurrenceeditor"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.render=function(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0},i.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":this.applyCustomClass(e.cssClass);break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"locale":case"frequencies":case"firstDayOfWeek":this.refresh()}}},En([t.Property(["none","daily","weekly","monthly","yearly"])],i.prototype,"frequencies",void 0),En([t.Property(0)],i.prototype,"firstDayOfWeek",void 0),En([t.Property(new Date)],i.prototype,"startDate",void 0),En([t.Property()],i.prototype,"dateFormat",void 0),En([t.Property("en-US")],i.prototype,"locale",void 0),En([t.Property()],i.prototype,"cssClass",void 0),En([t.Property(!1)],i.prototype,"enableRtl",void 0),En([t.Property()],i.prototype,"value",void 0),En([t.Property(new Date(1900,1,1))],i.prototype,"minDate",void 0),En([t.Property(new Date(2099,12,31))],i.prototype,"maxDate",void 0),En([t.Property(0)],i.prototype,"selectedType",void 0),En([t.Event()],i.prototype,"change",void 0),i=En([t.NotifyPropertyChanges],i)}(t.Component),sa="e-field",oa="e-recurrence-container",la="e-hide",ca=function(){function e(e){this.parent=e,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.fieldValidator=new bn,this.timezone=new Zi,this.renderEventWindow()}return e.prototype.renderEventWindow=function(){var e=this.getEventWindowContent();this.element=t.createElement("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element),this.parent.isAdaptive?this.dialogObject=new i.Dialog({animationSettings:{effect:"Zoom"},content:e,cssClass:vi+" "+me,enableRtl:this.parent.enableRtl,header:'<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>',height:"100%",isModal:!0,showCloseIcon:!1,target:document.body,visible:!1,beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)}):this.dialogObject=new i.Dialog({animationSettings:{effect:"Zoom"},buttons:[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:xi},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary e-event-save",isPrimary:!0},click:this.eventSave.bind(this)},{buttonModel:{cssClass:"e-event-cancel",content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}],content:e,cssClass:vi,enableRtl:this.parent.enableRtl,header:'<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>",isModal:!0,showCloseIcon:!0,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.dialogObject.appendTo(this.element),t.addClass([this.element.parentElement],vi+"-container"),this.parent.isAdaptive&&(t.EventHandler.add(this.element.querySelector(".e-back-icon"),"click",this.dialogClose,this),t.EventHandler.add(this.element.querySelector(".e-save-icon"),"click",this.eventSave,this)),this.applyFormValidation()},e.prototype.refresh=function(){this.destroy(),this.renderEventWindow()},e.prototype.openEditor=function(e,i){switch(this.parent.quickPopup.quickPopupHide(!0),!this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)&&t.removeClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")],ye),i){case"Add":this.cellClickAction=!0,this.parent.activeCellsData=e,this.onCellDetailsUpdate(e);break;case"Save":case"EditOccurrence":case"EditSeries":"EditOccurrence"===i&&!this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)&&t.addClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")],ye),this.cellClickAction=!1,this.onEventDetailsUpdate(e)}},e.prototype.setDialogContent=function(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind()},e.prototype.onBeforeOpen=function(e){var i={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};if(this.cellClickAction&&(i.duration=this.getSlotDuration()),this.parent.trigger(te,i),e.cancel=i.cancel,this.duration=this.cellClickAction?i.duration:null,this.refreshDateTimePicker(this.duration),this.cellClickAction&&i.duration!==this.getSlotDuration()&&t.isNullOrUndefined(this.parent.editorTemplate)){var n=this.getInstance(bi),a=this.getInstance(Ci);a.value=new Date(n.value.getTime()+6e4*i.duration),a.dataBind()}},e.prototype.onBeforeClose=function(){this.parent.eventBase.focusElement()},e.prototype.getEventWindowContent=function(){var e=t.createElement("div",{className:"e-form-container"}),i=t.createElement("form",{id:this.parent.element.id+"EditForm",className:mi,attrs:{onsubmit:"return false;"}});if(t.isNullOrUndefined(this.parent.editorTemplate)){var n=this.getDefaultEventWindowContent();i.appendChild(n)}else{var a=this.parent.getEditorTemplate()();t.append([].slice.call(a),i)}return e.appendChild(i),e},e.prototype.getDefaultEventWindowContent=function(){var e=this.createDivElement("e-dialog-parent"),i=this.createDivElement("e-title-location-row"),n=this.renderTextBox(Ti),a=this.renderTextBox(wi);i.appendChild(n),i.appendChild(a);var r=this.createDivElement("e-start-end-row"),o=this.renderDateTimePicker(bi,this.onTimeChange.bind(this)),l=this.renderDateTimePicker(Ci);r.appendChild(o),r.appendChild(l);var c=this.createDivElement(Oi),p=this.renderDropDown(Ei),h=this.renderDropDown(Si);c.appendChild(p),c.appendChild(h);var d=this.createDivElement("e-all-day-time-zone-row"),u=this.renderCheckBox(gi),v=this.renderCheckBox(fi);d.appendChild(u),d.appendChild(v);var m=this.createDivElement("e-repeat-parent-row"),g=this.renderCheckBox(yi),f=t.createElement("span",{className:oa}),y=t.createElement("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});this.buttonObj=new s.Button({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),f.appendChild(y),this.buttonObj.appendTo(y),g.appendChild(f),m.appendChild(g);var T=this.createDivElement(Di+"-row"),w=this.renderTextBox(Di);if(T.appendChild(w),e.appendChild(i),e.appendChild(r),e.appendChild(d),e.appendChild(c),e.appendChild(m),this.parent.isAdaptive?t.EventHandler.add(y,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(e),this.parent.resources.length>0){for(var b=this.createDivElement("e-resources-row"),C=0;C<this.parent.resourceBase.resourceCollection.length;C++)b.appendChild(this.renderMultiSelect(C));e.appendChild(b)}e.appendChild(T);var D=t.createElement("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return e.appendChild(D),e},e.prototype.createRecurrenceEditor=function(e){var t=this.createDivElement();e.appendChild(t),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(t)},e.prototype.createDivElement=function(e){return t.createElement("div",{className:e})},e.prototype.createInputElement=function(e,i,n){return t.createElement(n||"input",{className:e,attrs:{type:"text",name:i,value:"",title:""===this.l10n.getConstant(i.charAt(0).toLowerCase()+i.slice(1))?i:this.l10n.getConstant(i.charAt(0).toLowerCase()+i.slice(1))}})},e.prototype.getSlotDuration=function(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount},e.prototype.renderDateTimePicker=function(e,i){var n=this.createDivElement(e+"-container"),r=this.getFieldName(e),s=this.createInputElement(e+" "+sa,r);n.appendChild(s);return new a.DateTimePicker({change:i,cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,floatLabelType:"Always",format:(t.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.getFormat("timeFormats"),placeholder:this.getFieldLabel(e),step:this.getSlotDuration(),value:new Date,width:"100%"}).appendTo(s),n},e.prototype.refreshDateTimePicker=function(e){var t=this;[].slice.call(this.element.querySelectorAll(".e-start,.e-end")).forEach(function(i){var n=i.ej2_instances[0];n.step=e||t.getSlotDuration(),n.dataBind()})},e.prototype.onTimeChange=function(){var e=this.getInstance(bi);if(e.element.parentElement.classList.contains("e-input-focus")){var t=this.getInstance(Ci),i=0;if(this.cellClickAction)i=6e4*this.duration;else{var n=this.parent.activeEventData.event;i=n[this.fields.endTime].getTime()-n[this.fields.startTime].getTime()}t.value=new Date(e.value.getTime()+i),t.dataBind()}},e.prototype.renderMultiSelect=function(e){var t=this.parent.resourceBase.resourceCollection[e],i=t.field,n="e-"+i,a=t.title,r=this.createDivElement(n+"-container e-resources"),s=this.createInputElement(n+" "+sa,i);r.appendChild(s);var o='<div class="e-resource-template"><div class="e-resource-color" style="background-color:${'+t.colorField+'}"></div><div class="e-resource-text">${'+t.textField+"}</div></div>";if(t.allowMultiple){new l.MultiSelect({cssClass:this.parent.cssClass||"",dataSource:t.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:o,fields:{text:t.textField,value:t.idField},htmlAttributes:{title:a,name:i},floatLabelType:"Always",placeholder:a,popupHeight:"230px",popupWidth:"447px",mode:"Box"}).appendTo(s)}else{new l.DropDownList({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:t.dataSource,enableRtl:this.parent.enableRtl,fields:{text:t.textField,value:t.idField},htmlAttributes:{title:a,name:i},floatLabelType:"Always",placeholder:a,popupHeight:"230px",popupWidth:"447px",itemTemplate:o}).appendTo(s)}return r},e.prototype.renderDropDown=function(e){var t=this.getFieldName(e),i=this.createDivElement(e+"-container"),n=this.createInputElement(e+" "+sa,t);i.appendChild(n);return new l.DropDownList({allowFiltering:!0,change:this.onTimezoneChange,cssClass:this.parent.cssClass||"",dataSource:en,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:"Search Timezone",filtering:function(e){var t=new r.Query;t=""!==e.text?t.where("Text","contains",e.text,!0):t,e.updateData(en,t)},htmlAttributes:{title:this.getFieldLabel(e),name:t},floatLabelType:"Always",placeholder:this.getFieldLabel(e),popupHeight:"230px"}).appendTo(n),i},e.prototype.onMultiselectResourceChange=function(e){if(e.value&&this.parent.activeViewOptions.group.byGroupID&&!(this.parent.resources.length<=1))for(var t=this.parent.resourceBase.resourceCollection,i=0;i<t.length;i++)if(t[i].field===e.element.getAttribute("name")&&i<t.length-1){for(var n=this.createInstance(i),a=[],s=0;s<e.value.length;s++){var o=t[i+1].dataSource,l=(new r.Query).where(t[i+1].groupIDField,"equal",e.value[s]),c=new r.DataManager({json:o}).executeLocal(l)[0][t[i+1].idField],p=this.filterDatasource(i,c);a=a.concat(p)}n.dataSource=a,n.dataBind()}},e.prototype.createInstance=function(e){var t=this.parent.resourceBase.resourceCollection[e+1];return this.element.querySelector(".e-"+t.field).ej2_instances[0]},e.prototype.onDropdownResourceChange=function(e){if(e.value&&!(this.parent.resources.length<=1)&&this.parent.activeViewOptions.group.byGroupID)for(var t=this.parent.resourceBase.resourceCollection,i=0;i<t.length;i++)if(i<t.length-1&&t[i].field===e.element.getAttribute("name")){var n=this.createInstance(i),a=e.itemData[t[i].idField];n.dataSource=this.filterDatasource(i,a),n.dataBind();var r=n.dataSource[0][t[i+1].idField];n.value=t[i+1].allowMultiple?[r]:r,n.dataBind()}},e.prototype.filterDatasource=function(e,t){var i=this.parent.resourceBase.resourceCollection[e+1],n=(new r.Query).where(i.groupIDField,"equal",t);return new r.DataManager({json:i.dataSource}).executeLocal(n)},e.prototype.onTimezoneChange=function(){if("StartTimezone"===this.element.getAttribute("name")){var e=document.querySelector("."+Ei).ej2_instances[0],t=document.querySelector("."+Si).ej2_instances[0];t.value=e.value,t.dataBind()}},e.prototype.renderCheckBox=function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=this.createInputElement(e+" "+sa,i);t.appendChild(n);var a=new s.CheckBox({change:this.onChange.bind(this),cssClass:e+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,label:this.getFieldLabel(e)});return a.appendTo(n),n.setAttribute("name",i),"Repeat"===i&&(this.repeatStatus=a),t},e.prototype.renderTextBox=function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=e===Di?"textarea":"input",a=this.createInputElement(e+" "+sa,i,n);return t.appendChild(a),o.Input.createInput({element:a,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(e)}}),t},e.prototype.getFieldName=function(e){var t="";switch(e){case Ti:t=this.fields.subject;break;case wi:t=this.fields.location;break;case bi:t=this.fields.startTime;break;case Ci:t=this.fields.endTime;break;case Di:t=this.fields.description;break;case gi:t=this.fields.isAllDay;break;case Ei:t=this.fields.startTimezone;break;case Si:t=this.fields.endTimezone;break;case fi:t="Timezone";break;case yi:t="Repeat"}return t},e.prototype.getFieldLabel=function(e){var t="";switch(e){case Ti:t=this.parent.editorTitles.subject;break;case wi:t=this.parent.editorTitles.location;break;case Di:t=this.parent.editorTitles.description;break;case bi:t=this.parent.editorTitles.startTime;break;case Ci:t=this.parent.editorTitles.endTime;break;case Ei:t=this.parent.editorTitles.startTimezone;break;case Si:t=this.parent.editorTitles.endTimezone;break;case yi:t=this.parent.editorTitles.recurrenceRule;break;case gi:t=this.parent.editorTitles.isAllDay;break;case fi:t=this.l10n.getConstant("timezone")}return t},e.prototype.onChange=function(e){var t=e.event.target;t.classList.contains(gi)?this.onAllDayChange(e.checked):t.classList.contains(fi)?this.timezoneChangeStyle(e.checked):t.classList.contains(yi)&&this.onRepeatChange(e.checked)},e.prototype.renderRepeatDialog=function(){var e=t.createElement("div");this.repeatDialogObject=new i.Dialog({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(e),this.repeatDialogObject.appendTo(e),this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))},e.prototype.loadRecurrenceEditor=function(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)},e.prototype.onRepeatChange=function(e){if(e)this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor();else{this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule));var i=this.element.querySelector("."+oa);t.addClass([i],la)}},e.prototype.repeatSaveDialog=function(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();var e=this.element.querySelector("."+oa);this.recurrenceEditor.getRecurrenceRule()?t.removeClass([e],la):(t.addClass([e],la),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()},e.prototype.closeRepeatDialog=function(){this.repeatDialogObject.hide()},e.prototype.repeatCancelDialog=function(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})},e.prototype.repeatOpenDialog=function(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()},e.prototype.onCellDetailsUpdate=function(e){this.element.querySelector("."+mi).removeAttribute("data-id"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("newEvent");var i={};e.subject&&(i[this.fields.subject]=e.subject),i[this.fields.startTime]=e.startTime,i[this.fields.endTime]=e.endTime,i[this.fields.isAllDay]=e.isAllDay,i.Timezone=!1,this.repeatStartDate=i[this.fields.startTime],this.repeatRule="",(this.parent.resources.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(i,!1),this.showDetails(i);var n=this.element.querySelector("."+xi);if(n&&t.addClass([n],ye),this.recurrenceEditor&&this.recurrenceEditor.setProperties({startDate:e.startTime,selectedType:0}),this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)){var a=this.element.querySelector("."+oa);t.addClass([a],la),this.updateRepeatLabel(this.repeatRule)}this.dialogObject.show()},e.prototype.applyFormValidation=function(){var e=function(e){return e&&Object.keys(e).length>0?e:void 0},t=this.element.querySelector("."+mi),i={};i[this.parent.eventSettings.fields.subject.name]=e(this.parent.eventSettings.fields.subject.validation),i[this.parent.eventSettings.fields.location.name]=e(this.parent.eventSettings.fields.location.validation),i[this.parent.eventSettings.fields.startTime.name]=e(this.parent.eventSettings.fields.startTime.validation),i[this.parent.eventSettings.fields.endTime.name]=e(this.parent.eventSettings.fields.endTime.validation),i[this.parent.eventSettings.fields.description.name]=e(this.parent.eventSettings.fields.description.validation),this.fieldValidator.renderFormValidator(t,i,this.element)},e.prototype.showDetails=function(e){var i=t.extend({},e,null,!0);if(i[this.fields.isAllDay]){var n=f(new Date(+i[this.fields.endTime]),-1).getTime();i[this.fields.endTime]=+i[this.fields.startTime]>n?i[this.fields.endTime]:new Date(n)}this.eventData=i;for(var a=this.getFormElements(vi),r=Object.keys(i),s=0,o=a;s<o.length;s++){var l=o[s],c=l.name,p=l.classList.contains("e-multiselect")||l.classList.contains("e-dropdownlist");t.isNullOrUndefined(c)&&!p||(""===c&&p&&(c=this.getColumnName(l),l.setAttribute("name",c)),-1!==r.indexOf(c)?this.setValueToElement(l,i[c]):this.setDefaultValueToElement(l))}if(t.isNullOrUndefined(this.parent.editorTemplate)){this.onAllDayChange(i[this.fields.isAllDay]);var h=this.getInstance(fi+"."+sa);t.isNullOrUndefined(i[this.fields.startTimezone])&&t.isNullOrUndefined(i[this.fields.endTimezone])||(h.checked=!0,h.dataBind()),this.timezoneChangeStyle(h.checked),delete i.Timezone}},e.prototype.getColumnName=function(e){var t=(e.classList.contains("e-dropdownlist")?[].slice.call(e.parentElement.children):[].slice.call(e.parentElement.parentElement.children)).filter(function(e){return e.name});return t.length>0?t[0].name:""},e.prototype.onAllDayChange=function(e){var i,n=this.getInstance(bi),a=this.getInstance(Ci),r=this.element.querySelector(".e-time-zone-container");e?(i=t.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,t.addClass(this.element.querySelectorAll(".e-time-icon"),Ai),t.addClass([r],ye),this.element.querySelector("."+Oi)&&t.removeClass([this.element.querySelector("."+Oi)],fe),n.format=a.format=i):(i=t.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.getFormat("timeFormats"):this.parent.dateFormat+" "+this.getFormat("timeFormats"),t.removeClass(this.element.querySelectorAll(".e-time-icon"),Ai),t.removeClass([r],ye),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&t.addClass([this.element.querySelector("."+Oi)],fe),n.format=a.format=i),this.cellClickAction&&this.updateDateTime(e,n,a),n.dataBind(),a.dataBind()},e.prototype.updateDateTime=function(e,t,i){var n,a;if(e)n=m(new Date(this.parent.activeCellsData.startTime.getTime())),a=this.parent.activeCellsData.isAllDay?f(new Date(this.parent.activeCellsData.endTime.getTime()),-1):m(new Date(this.parent.activeCellsData.startTime.getTime()));else if(n=new Date(this.parent.activeCellsData.startTime.getTime()),"Month"===this.parent.currentView||"MonthAgenda"===this.parent.currentView||this.parent.activeCellsData.isAllDay){var r=this.parent.globalize.parseDate(this.parent.workHours.start,{skeleton:"Hm"});n.setHours(r.getHours(),r.getMinutes(),r.getSeconds()),(a=new Date(n.getTime())).setMilliseconds(6e4*this.getSlotDuration())}else a=new Date(this.parent.activeCellsData.endTime.getTime());t.value=n,i.value=a,t.dataBind(),i.dataBind()},e.prototype.getFormat=function(e){return"en"===this.parent.locale||"en-US"===this.parent.locale?t.getValue(e+".short",t.getDefaultDateObject()):t.getValue("main."+this.parent.locale+".dates.calendars.gregorian."+e+".short",t.cldrData)},e.prototype.onEventDetailsUpdate=function(e){if(this.parent.isAdaptive||t.removeClass([this.element.querySelector("."+xi)],ye),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("editEvent"),this.element.querySelector("."+mi).setAttribute("data-id",e[this.fields.id].toString()),t.isNullOrUndefined(this.parent.editorTemplate)){e=t.extend({},e,null,!0);var i=this.getInstance(fi+"."+sa),n=void 0;e[this.fields.startTimezone]||e[this.fields.endTimezone]?(n=!0,this.parent.eventBase.timezoneConvert(e)):n=!1,e.Timezone=n,i.checked=n,i.dataBind()}if(this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(""),this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",e[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]),this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)){var a=this.element.querySelector("."+oa);e[this.fields.recurrenceRule]?(t.removeClass([a],la),this.repeatStatus.setProperties({checked:!0})):(t.addClass([a],la),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}if(this.parent.readonly&&!this.parent.isAdaptive){this.element.querySelector(".e-event-save").ej2_instances[0].disabled=!0;this.element.querySelector("."+xi).ej2_instances[0].disabled=!0}this.dialogObject.show()},e.prototype.renderRecurrenceEditor=function(){return new ra({cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.firstDayOfWeek,locale:this.parent.locale})},e.prototype.updateRepeatLabel=function(e){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();var t=e?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(e):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:t})},e.prototype.dialogClose=function(){this.dialogObject.hide(),this.fieldValidator.destroyToolTip(),this.resetFormFields(),!this.parent.isAdaptive&&this.recurrenceEditor&&this.recurrenceEditor.resetFields()},e.prototype.timezoneChangeStyle=function(e){var i=this.element.querySelector("."+Oi);if(e){t.addClass([i],fe);var n=this.getInstance(Ei),a=this.getInstance(Si),r=n.dataSource;if(!n.value||!this.parent.timezone){r.some(function(e){return e.Value===$i})||(r.push({Value:$i,Text:$i}),n.dataSource=r,a.dataSource=r,n.dataBind(),a.dataBind())}n.value=n.value||this.parent.timezone||$i,a.value=a.value||this.parent.timezone||$i,n.dataBind(),a.dataBind()}else t.removeClass([i],fe)},e.prototype.resetFormFields=function(){for(var e=this.getFormElements(vi),i=0,n=e.length;i<n;i++){var a=e[i].name;t.isNullOrUndefined(a)||""===a||this.setDefaultValueToElement(e[i])}},e.prototype.eventSave=function(e){var i,n=this.element.querySelector("."+mi);if(!n||!n.classList.contains("e-formvalidator")||n.ej2_instances[0].validate()){var a=t.extend({},this.getObjectFromFormData(vi));if(a.Timezone||(a[this.fields.startTimezone]=null,a[this.fields.endTimezone]=null),t.isNullOrUndefined(this.parent.editorTemplate)){if(delete a.Timezone,delete a.Repeat,!a[this.fields.startTime]||!a[this.fields.endTime])return void this.parent.quickPopup.openValidationError("invalidDateError");if(a[this.fields.startTime]>a[this.fields.endTime])return void this.parent.quickPopup.openValidationError("startEndError")}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value&&(i=this.recurrenceValidation(a[this.fields.startTime],a[this.fields.endTime],e),!t.isNullOrUndefined(i)))this.parent.quickPopup.openRecurrenceValidationAlert(i);else{var s=this.getEventIdFromForm();t.isNullOrUndefined(a[this.fields.subject])||(a[this.fields.subject]=""!==a[this.fields.subject]?a[this.fields.subject]:this.parent.eventSettings.fields.subject.default),a[this.fields.isAllDay]&&(a[this.fields.startTime]=m(new Date(a[this.fields.startTime].getTime())),a[this.fields.endTime]=f(m(new Date(a[this.fields.endTime].getTime())),1));var o=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule():null;a[this.fields.recurrenceRule]=o||void 0;var l=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resources.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit;if(t.isNullOrUndefined(s))this.parent.currentAction="Add",l?this.resourceSaveEvent(a,this.parent.currentAction):(a[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(a));else{var c="string"===this.parent.eventBase.getEventIDType()?s:parseInt(s,10),p=new r.DataManager({json:this.parent.eventsData}).executeLocal((new r.Query).where(this.fields.id,"equal",c))[0];a=t.extend({},p,a);var h=void 0;if(!t.isNullOrUndefined(p[this.fields.recurrenceRule])){if(h=this.parent.currentAction,"EditOccurrence"===this.parent.currentAction&&(a[this.fields.recurrenceID]?h=null:(a[this.fields.id]=this.parent.eventBase.getEventMaxID(),a.Guid=this.parent.activeEventData.event.Guid),this.editOccurrenceValidation(c,a)))return void this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert");"EditSeries"!==this.parent.currentAction&&a[this.fields.id]===p[this.fields.id]||(a[this.fields.recurrenceID]=p[this.fields.id])}l?this.resourceSaveEvent(a,"Save",h):this.parent.saveEvent(a,h)}this.dialogObject.hide()}}},e.prototype.getObjectFromFormData=function(e){for(var i={},n=0,a=this.getFormElements(e);n<a.length;n++){var r=a[n],s=r.name;t.isNullOrUndefined(s)||""===s||(i[s]=this.getValueFromElement(r))}return i},e.prototype.recurrenceValidation=function(e,i,n){var a,r=this.recurrenceEditor,s=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(n!==this.l10n.getConstant("ok")){if("EditSeries"!==this.parent.currentAction||t.isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])||(a="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<r.startDate&&(a="wrongPattern"),t.isNullOrUndefined(a))switch(r.value.split(";")[0].split("=")[1]){case"DAILY":(i.getTime()-e.getTime())/36e5>=24*s&&(a="createError");break;case"WEEKLY":for(var o=r.value.split(";")[1].split("=")[1].split(","),l={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},c=[],p=[],h=0;h<o.length*(s+1);h++)c[h]=o.length>h?l[o[h]]:c[h-o.length]+7*s;var d=c.sort(function(e,t){return e-t});for(h=1;h<d.length;h++)p.push(d[h]-d[h-1]);((i.getTime()-e.getTime())/36e5>=24*Math.min.apply(Math,p)||t.isNullOrUndefined(s))&&(a="createError");break;case"MONTHLY":this.getInstance("e-month-expander-checkbox-wrapper .e-radio").checked&&-1!==[29,30,31].indexOf(parseInt(r.value.split(";")[1].split("=")[1],10))?a="dateValidation":i.getTime()>=new Date(+e).setMonth(e.getMonth()+s)&&(a="createError");break;case"YEARLY":i.getTime()>=new Date(+e).setFullYear(e.getFullYear()+s)&&(a="createError")}}else i.getTime()>=new Date(+e).setMonth(e.getMonth()+s)&&(a="createError"),t.isNullOrUndefined(a)&&this.parent.quickPopup.quickDialog.hide();return a},e.prototype.getRecurrenceIndex=function(e,t){for(var i,n=0;n<e.length;n++)if(t[this.fields.startTime].valueOf()===e[n][this.fields.startTime].valueOf()){i=n;break}return i},e.prototype.editOccurrenceValidation=function(e,i){var n=this.parent.getOccurrencesByID(e),a=this.getRecurrenceIndex(n,this.eventData);if(t.isNullOrUndefined(a))return!1;if(0===a){if(!(t.isNullOrUndefined(n[a+1])||new Date(+n[a+1][this.fields.startTime]).getTime()>=new Date(+i[this.fields.endTime]).getTime()))return!0}else if(a===n.length-1){if(!(new Date(+n[a-1][this.fields.endTime]).getTime()<=new Date(+i[this.fields.startTime]).getTime()))return!0}else if(!(new Date(+n[a-1][this.fields.endTime]).getTime()<=new Date(+i[this.fields.startTime]).getTime()&&new Date(+n[a+1][this.fields.startTime]).getTime()>=new Date(+i[this.fields.endTime]).getTime()))return!0;return!1},e.prototype.resourceSaveEvent=function(e,i,n){var a=this,r=this.parent.resourceBase.resourceCollection.slice(-1)[0],s=e[r.field];s=s instanceof Array?s:[s];for(var o=this.parent.resourceBase.lastResourceLevel,l=[],c=function(c){var h=t.extend({},e,null,!0);h[p.fields.id]=p.parent.eventBase.getEventMaxID();var d=[],u=function(){if("Save"===i&&c===s.length-1)if(d.length>0){d[0][a.fields.id]=e[a.fields.id];for(var t=1;t<d.length;t++)d[t][a.fields.id]=a.parent.eventBase.getEventMaxID(c),l.push(d[t]),a.parent.saveEvent(d[0],n)}else h[a.fields.id]=e[a.fields.id],a.parent.saveEvent(h,n);else if(d.length>0)for(var r=0;r<d.length;r++)d[r][a.fields.id]=a.parent.eventBase.getEventMaxID(r),l.push(d[r]);else h[a.fields.id]=a.parent.eventBase.getEventMaxID(c),l.push(h)};if(p.parent.activeViewOptions.group.byGroupID&&!t.isNullOrUndefined(o)){for(var v=r.dataSource,m=v[T=O(v,r.idField,s[c])][r.groupIDField],g=o.filter(function(e){return e.resourceData[r.idField]===s[c]}).filter(function(e){return e.resourceData[r.groupIDField]===m})[0].groupOrder,f=0;f<p.parent.resourceBase.resourceCollection.length;f++){var y=p.parent.resourceBase.resourceCollection[f].field;h[y]=g[f]instanceof Array?g[f][0]:g[f]}u()}else{for(var T=0;T<p.parent.resourceBase.resourceCollection.length-1;T++){y=p.parent.resourceBase.resourceCollection[T].field;if(h[y]instanceof Array&&h[y].length>1)for(var w=0;w<h[y].length;w++){var b=t.extend({},h,null,!0);b[y]=e[y][w],b[r.field]=s[c],d.push(b)}else if(0===d.length)h[y]=e[y]instanceof Array?e[y][0]:e[y],h[r.field]=s[c];else for(var C=0;C<d.length;C++)d[C][y]=e[y]instanceof Array?e[y][0]:e[y]}h[r.field]=s[c],u()}},p=this,h=0;h<s.length;h++)c(h);if(l.length>0){for(var d=0,u=l;d<u.length;d++){var v=u[d];v[this.fields.recurrenceException]=null,v[this.fields.recurrenceID]=null}this.parent.addEvent(l)}},e.prototype.getEventIdFromForm=function(){return this.element.querySelector("."+mi).getAttribute("data-id")},e.prototype.getFormElements=function(e){return e===vi?[].slice.call(this.element.querySelectorAll("."+sa)):[].slice.call(this.parent.element.querySelectorAll("."+e+" ."+sa))},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-datepicker")?e.ej2_instances[0].value:e.classList.contains("e-datetimepicker")?e.ej2_instances[0].value:e.classList.contains("e-dropdownlist")?e.ej2_instances[0].value:e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:e.value},e.prototype.setValueToElement=function(e,t){if(e.classList.contains("e-datepicker")){(i=e.ej2_instances[0]).value=t,i.dataBind()}else if(e.classList.contains("e-datetimepicker")){(i=e.ej2_instances[0]).value=t,i.dataBind()}else if(e.classList.contains("e-dropdownlist")){(i=e.ej2_instances[0]).value=t,i.dataBind()}else if(e.classList.contains("e-multiselect")){(i=e.ej2_instances[0]).value=[],i.value=t instanceof Array?t:[t],i.dataBind()}else if(e.classList.contains("e-checkbox")){var i;(i=e.ej2_instances[0]).checked=t,i.dataBind()}else"checkbox"!==e.type?e.value=t||"":e.checked=t},e.prototype.setDefaultValueToElement=function(e){if(e.classList.contains("e-datepicker")){(t=e.ej2_instances[0]).value=new Date,t.dataBind()}else if(e.classList.contains("e-datetimepicker")){(t=e.ej2_instances[0]).value=new Date,t.dataBind()}else if(e.classList.contains("e-dropdownlist")){(t=e.ej2_instances[0]).value=null,t.dataBind()}else if(e.classList.contains("e-multiselect")){(t=e.ej2_instances[0]).value=[],t.dataBind()}else if(e.classList.contains("e-checkbox")){var t;(t=e.ej2_instances[0]).checked=!1,t.dataBind()}else"checkbox"===e.type?e.checked=!1:e.value=""},e.prototype.getInstance=function(e){return this.element.querySelector("."+e).ej2_instances[0]},e.prototype.eventDelete=function(){switch(this.parent.currentAction){case"EditOccurrence":var e=this.parent.eventFields;t.isNullOrUndefined(this.parent.activeEventData.event[e.recurrenceRule])?this.parent.currentAction="Delete":this.parent.currentAction="DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries"}this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()},e.prototype.getRecurrenceEditorInstance=function(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements(vi);e<t.length;e++){var i=t[e],n=void 0;i.classList.contains("e-datetimepicker")?n=i.ej2_instances[0]:i.classList.contains("e-datepicker")?n=i.ej2_instances[0]:i.classList.contains("e-checkbox")?n=i.ej2_instances[0]:i.classList.contains("e-dropdownlist")?n=i.ej2_instances[0]:i.classList.contains("e-multiselect")&&(n=i.ej2_instances[0]),n&&n.destroy()}this.buttonObj&&this.buttonObj.destroy()},e.prototype.destroy=function(){this.recurrenceEditor&&this.recurrenceEditor.destroy(),this.destroyComponents(),this.fieldValidator.destroy(),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),t.remove(this.repeatDialogObject.element)),this.dialogObject&&(this.dialogObject.destroy(),this.dialogObject=null),this.element&&(t.remove(this.element),this.element=null)},e}(),pa=function(){function e(e){this.parent=e}return e.prototype.render=function(e,t){void 0===t&&(t=!0),this.initializeLayout(e),t&&this.refreshDataManager()},e.prototype.initializeLayout=function(e){switch(this.parent.activeView&&(this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),e){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule}if(t.isNullOrUndefined(this.parent.activeView)){var i=this.parent.viewCollections[0].option;if(i)return this.parent.setProperties({currentView:i},!0),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(i);throw Error("Inject required modules")}this.updateLabelText(e),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.isAdaptive&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.enableCompactView,this.parent.activeView.renderLayout(Me),(this.parent.eventSettings.enableTooltip||this.parent.timelineViewsModule&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&t.isNullOrUndefined(this.parent.eventTooltip)&&(this.parent.eventTooltip=new Dn(this.parent)),this.parent.headerModule&&this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText())},e.prototype.updateLabelText=function(e){var t=this.parent.activeView.getLabelText(e);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",t)},e.prototype.refreshDataManager=function(){var e=this,t=this.parent.activeView.startDate(),i=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(t,i)).then(function(t){return e.dataManagerSuccess(t)}).catch(function(t){return e.dataManagerFailure(t)})},e.prototype.dataManagerSuccess=function(e){if(!this.parent.isDestroyed){this.parent.trigger(ee,e),this.parent.eventsData=t.extend([],e.result,null,!0);var i=this.parent.eventBase.processData(this.parent.eventsData);this.parent.notify(ae,{processedData:i}),this.parent.trigger("dataBound"),this.parent.hideSpinner()}},e.prototype.dataManagerFailure=function(e){this.parent.isDestroyed||(this.parent.trigger(K,{error:e}),this.parent.hideSpinner())},e}(),ha=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),da=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ua=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ha(i,e),da([t.Property(!0)],i.prototype,"highlight",void 0),da([t.Property("09:00")],i.prototype,"start",void 0),da([t.Property("18:00")],i.prototype,"end",void 0),i}(t.ChildProperty),va=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ma=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ga=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return va(i,e),ma([t.Property(!0)],i.prototype,"enable",void 0),ma([t.Property(60)],i.prototype,"interval",void 0),ma([t.Property(2)],i.prototype,"slotCount",void 0),ma([t.Property()],i.prototype,"minorSlotTemplate",void 0),ma([t.Property()],i.prototype,"majorSlotTemplate",void 0),i}(t.ChildProperty),fa=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ya=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ta=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return fa(i,e),ya([t.Property()],i.prototype,"header",void 0),ya([t.Property()],i.prototype,"content",void 0),ya([t.Property()],i.prototype,"footer",void 0),i}(t.ChildProperty),wa=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ba=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ca=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return wa(i,e),ba([t.Property()],i.prototype,"option",void 0),ba([t.Property()],i.prototype,"template",void 0),i}(t.ChildProperty),Da=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oa=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ea=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Da(i,e),Oa([t.Property()],i.prototype,"name",void 0),Oa([t.Property()],i.prototype,"default",void 0),Oa([t.Property()],i.prototype,"title",void 0),Oa([t.Property({})],i.prototype,"validation",void 0),i}(t.ChildProperty),Sa=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xa=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Aa=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Sa(i,e),xa([t.Property("Id")],i.prototype,"id",void 0),xa([t.Complex({name:"Subject",default:"Add title"},Ea)],i.prototype,"subject",void 0),xa([t.Complex({name:"StartTime"},Ea)],i.prototype,"startTime",void 0),xa([t.Complex({name:"EndTime"},Ea)],i.prototype,"endTime",void 0),xa([t.Complex({name:"StartTimezone"},Ea)],i.prototype,"startTimezone",void 0),xa([t.Complex({name:"EndTimezone"},Ea)],i.prototype,"endTimezone",void 0),xa([t.Complex({name:"Location"},Ea)],i.prototype,"location",void 0),xa([t.Complex({name:"Description"},Ea)],i.prototype,"description",void 0),xa([t.Complex({name:"IsAllDay"},Ea)],i.prototype,"isAllDay",void 0),xa([t.Complex({name:"RecurrenceID"},Ea)],i.prototype,"recurrenceID",void 0),xa([t.Complex({name:"RecurrenceRule"},Ea)],i.prototype,"recurrenceRule",void 0),xa([t.Complex({name:"RecurrenceException"},Ea)],i.prototype,"recurrenceException",void 0),i}(t.ChildProperty),ka=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Va=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ma=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ka(i,e),Va([t.Property()],i.prototype,"template",void 0),Va([t.Property([])],i.prototype,"dataSource",void 0),Va([t.Property()],i.prototype,"query",void 0),Va([t.Complex({},Aa)],i.prototype,"fields",void 0),Va([t.Property(!1)],i.prototype,"enableTooltip",void 0),Va([t.Property()],i.prototype,"tooltipTemplate",void 0),Va([t.Property()],i.prototype,"resourceColorField",void 0),i}(t.ChildProperty),Pa=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ja=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ra=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Pa(i,e),ja([t.Property(!1)],i.prototype,"byDate",void 0),ja([t.Property(!0)],i.prototype,"byGroupID",void 0),ja([t.Property(!1)],i.prototype,"allowGroupEdit",void 0),ja([t.Property([])],i.prototype,"resources",void 0),ja([t.Property(!0)],i.prototype,"enableCompactView",void 0),ja([t.Property()],i.prototype,"headerTooltipTemplate",void 0),i}(t.ChildProperty),Ha=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ia=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},qa=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ha(i,e),Ia([t.Property()],i.prototype,"field",void 0),Ia([t.Property()],i.prototype,"title",void 0),Ia([t.Property()],i.prototype,"name",void 0),Ia([t.Property(!1)],i.prototype,"allowMultiple",void 0),Ia([t.Property([])],i.prototype,"dataSource",void 0),Ia([t.Property()],i.prototype,"query",void 0),Ia([t.Property("Id")],i.prototype,"idField",void 0),Ia([t.Property("Text")],i.prototype,"textField",void 0),Ia([t.Property("Expanded")],i.prototype,"expandedField",void 0),Ia([t.Property("GroupID")],i.prototype,"groupIDField",void 0),Ia([t.Property("Color")],i.prototype,"colorField",void 0),Ia([t.Property("StartHour")],i.prototype,"startHourField",void 0),Ia([t.Property("EndHour")],i.prototype,"endHourField",void 0),Ia([t.Property("WorkDays")],i.prototype,"workDaysField",void 0),Ia([t.Property("CssClass")],i.prototype,"cssClassField",void 0),i}(t.ChildProperty),La=function(){function e(e){this.resourceCollection=[],this.leftPixel=25,this.parent=e}return e.prototype.renderResourceHeaderIndent=function(e){var i=t.createElement("td",{className:"e-resource-left-td"}),n=t.createElement("div",{className:Ie});i.appendChild(n);var a={elementType:"emptyCells",element:i};this.parent.trigger(J,a),e.appendChild(i)},e.prototype.hideResourceRows=function(e){if(!(this.resourceCollection.length<=1))for(var i=this.lastResourceLevel.length,n=0;n<i;n++){var a=this.lastResourceLevel[n].resourceData,r=this.lastResourceLevel[n].resource;if(a.ClassName===Le&&!a[r.expandedField]&&!t.isNullOrUndefined(a[r.expandedField])){var s=[].slice.call(e.children).slice(n+1,n+(parseInt(a.Count,0)+1));t.addClass(s,Li)}}},e.prototype.createResourceColumn=function(){var e=this.resourceCollection,i=t.createElement("div",{className:qe}),n=this.parent.activeView.createTableLayout("e-resource-column-table"),a=n.querySelector("tbody"),r=this.generateTreeData(!0);return this.countCalculation(e.slice(0,-2),e.slice(0,-1)),t.append(this.getContentRows(r),a),this.hideResourceRows(a),n.appendChild(a),i.appendChild(n),i},e.prototype.getContentRows=function(e){for(var i,n,a=[],r=this.resourceCollection,s=t.createElement("tr"),o=t.createElement("td"),l=0;l<e.length;l++){var c=o.cloneNode();if((n=O(r,"name",e[l].resource.name))===r.length-1?(t.extend(e[l].resourceData,{ClassName:"e-child-node"}),this.lastResourceLevel[l].className=["e-child-node"]):(t.extend(e[l].resourceData,{ClassName:Le}),this.lastResourceLevel[l].className=[Le]),i=n*this.leftPixel+"px",e[l].resourceData.ClassName===Le){var p=void 0;p=e[l].resourceData[r[n].expandedField]||t.isNullOrUndefined(e[l].resourceData[r[n].expandedField])?Ne:Ue;var h=t.createElement("div");t.addClass([h],[Fe,p]),this.setMargin(h,i),c.appendChild(h),this.resourceCollection.length>1&&t.EventHandler.add(h,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(c,e[l],Ie),c.setAttribute("data-group-index",e[l].groupIndex.toString()),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(c.querySelector("."+Ie),i);var d=[Be,e[l].resourceData.ClassName];t.addClass([c],d);var u={elementType:"resourceHeader",element:c,groupIndex:e[l].groupIndex};this.parent.trigger(J,u);var v=s.cloneNode();v.appendChild(c),a.push(v)}return a},e.prototype.setMargin=function(e,t){this.parent.enableRtl?e.style.marginRight=t:e.style.marginLeft=t},e.prototype.countCalculation=function(e,i){for(var n,a=0;a<e.length;a++){for(var s=e[e.length-(a+1)].dataSource,o=0;o<s.length;o++){var l=0;n=this.parent.activeViewOptions.group.byGroupID?new r.DataManager(i[i.length-1].dataSource).executeLocal((new r.Query).where(i[i.length-1].groupIDField,"equal",s[o][e[e.length-(a+1)].idField])):i[i.length-1].dataSource;for(var c=0;c<n.length;c++)l+=parseInt(n[c].Count,0);l+=parseInt(s[o].Count,0),t.extend(s[o],{Count:l})}i=i.slice(0,-1)}},e.prototype.onTreeIconClick=function(e){this.parent.eventTooltip&&this.parent.eventTooltip.close();var i,n=e.target,a=t.closest(n,"."+Le).parentElement.rowIndex,r={cancel:!1,event:e,groupIndex:a,requestType:n.classList.contains(Ne)?"resourceCollapse":"resourceExpand"};if(this.parent.trigger(G,r),!r.cancel){n.classList.contains(Ne)?(t.classList(n,[Ue],[Ne]),i=!0):(t.classList(n,[Ne],[Ue]),i=!1);for(var s,o=[],l=[],c=[],p=this.lastResourceLevel[a].resourceData,h=[].slice.call(this.parent.element.querySelectorAll("."+qe+" tr")),d=[].slice.call(this.parent.element.querySelectorAll("."+gt+" tbody tr")),u=[].slice.call(this.parent.element.querySelectorAll("."+gt+" ."+ot)),v=[].slice.call(this.parent.element.querySelectorAll("."+lt)),m=0;m<v.length;m++)t.remove(v[m]);for(var g=0;g<p.Count;g++)o.push(h[a+g+1]),l.push(d[a+g+1]),c.push(u[a+g+1]);var f=this.lastResourceLevel;for(m=0;m<o.length;m++){var y=!0;if(s=o[m].children[0].classList.contains(Le),f[a].resourceData[f[a].resource.expandedField]=!i,i){if(s){var T=o[m].querySelector("."+Fe);t.classList(T,[Ue],[Ne])}o[m].classList.contains(Li)||t.addClass([o[m],l[m],c[m]],Li)}else{if(s){var w=o[m].rowIndex;if(f[w].resourceData[f[w].resource.expandedField]||t.isNullOrUndefined(f[w].resourceData[f[w].resource.expandedField])||(o.splice(m+1,parseInt(f[w].resourceData.Count,0)),l.splice(m+1,parseInt(f[w].resourceData.Count,0)),c.splice(m+1,parseInt(f[w].resourceData.Count,0)),y=!1),y){T=o[m].querySelector("."+Fe);t.classList(T,[Ne],[Ue])}}o[m].classList.contains(Li)&&t.removeClass([o[m],l[m],c[m]],Li)}}var b={cssProperties:this.parent.getCssProperties(),module:"scroll"};this.parent.notify(oe,b),r={cancel:!1,event:e,groupIndex:a,requestType:n.classList.contains(Ne)?"resourceExpanded":"resourceCollapsed"},this.parent.notify(ae,{}),this.parent.trigger(Q,r)}},e.prototype.renderResourceHeader=function(){var e=t.createElement("div",{className:$e});if(e.innerHTML='<div class="'+tt+'"><div class="'+Ni+'"><div class="e-icons e-icon-menu"></div></div><div class="'+Fi+'"></div></div>',"MonthAgenda"===this.parent.currentView){var i=this.parent.activeView.getPanel().querySelector("."+gt);i.insertBefore(e,i.children[1])}else this.parent.element.insertBefore(e,this.parent.element.children[2]);this.renderResourceHeaderText(),t.EventHandler.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderResourceTree=function(){this.popupOverlay=t.createElement("div",{className:Bi});var e=t.createElement("div",{className:Wi+" e-popup-close"});if("MonthAgenda"===this.parent.currentView){var a=this.parent.activeView.getPanel().querySelector("."+st);a.insertBefore(e,a.children[0]),a.appendChild(this.popupOverlay)}else this.parent.element.querySelector("."+Te).appendChild(e),this.parent.element.querySelector("."+Te).appendChild(this.popupOverlay);var r=t.createElement("div",{className:"e-resource-tree"});e.appendChild(r),this.treeViewObj=new n.TreeView({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:this.generateTreeData(),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this)}),this.treeViewObj.appendTo(r),this.treeViewObj.expandAll(),this.treePopup=new i.Popup(e,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?st:Te))}),this.parent.on(ce,this.documentClick,this)},e.prototype.generateTreeData=function(e){var i=this,n=[],a=[],r=0;return this.resourceTreeLevel.forEach(function(s,o){var l=function(n,s,o){var c,p,h=i.resourceCollection[s];e?(p={type:"resourceHeader",resource:n.resource,resourceData:n.resourceData,groupIndex:r,groupOrder:n.groupOrder},a.push(p),r++):c={resourceId:o,resourceName:n.resourceData[h.textField]},n.child.length>0&&!e&&(c.resourceChild=[]);for(var d=1,u=0,v=n.child;u<v.length;u++){var m=v[u];e?l(m,s+1,o+"-"+d):c.resourceChild.push(l(m,s+1,o+"-"+d)),d+=1}return e&&t.extend(p.resourceData,{Count:d-1}),c};e?l(s,0,(o+1).toString()):n.push(l(s,0,(o+1).toString()))}),e?(this.lastResourceLevel=a,a):n},e.prototype.renderResourceHeaderText=function(){var e=this,i=[];this.lastResourceLevel[this.parent.uiStateValues.groupIndex].groupOrder.forEach(function(n,a){var r=e.resourceCollection[a],s=r.dataSource.filter(function(e){return e[r.idField]===n}),o=t.createElement("div",{className:dt,innerHTML:s[0][r.textField]});i.push(o);var l=t.createElement("div",{className:"e-icons e-icon-next"});i.push(l)}),i.pop();var n=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector("."+Fi);n.innerHTML="",i.forEach(function(e){return n.appendChild(e)}),1===this.lastResourceLevel.length&&t.addClass([this.parent.element.querySelector("."+Ni)],ye)},e.prototype.menuClick=function(e){if(this.parent.element.querySelector("."+Wi).classList.contains("e-popup-open"))this.treePopup.hide(),t.removeClass([this.popupOverlay],"e-enable");else{var i=this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)");t.removeClass(i,"e-active"),t.addClass([i[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),t.addClass([this.popupOverlay],"e-enable")}},e.prototype.resourceClick=function(e){if(!e.node.classList.contains("e-has-child")){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));this.parent.uiStateValues.groupIndex=t.indexOf(e.node),this.parent.renderModule.render(this.parent.currentView,!1);var i=this.parent.eventBase.processData(this.parent.eventsData);this.parent.notify(ae,{processedData:i})}e.event.preventDefault()},e.prototype.documentClick=function(e){if(!t.closest(e.event.target,"."+Wi)){var i=this.parent.element.querySelector("."+Wi);i&&i.classList.contains("e-popup-open")&&(this.treePopup.hide(),t.removeClass([this.popupOverlay],"e-enable"))}},e.prototype.bindResourcesData=function(e){var t=this;this.parent.showSpinner();for(var i=[],n=0;n<this.parent.resources.length;n++){var a=new Ji(this.parent.resources[n].dataSource,this.parent.resources[n].query);i.push(a.getData(a.generateQuery()))}Promise.all(i).then(function(i){return t.dataManagerSuccess(i,e)}).catch(function(e){return t.dataManagerFailure(e)})},e.prototype.dataManagerSuccess=function(e,t){if(!this.parent.isDestroyed){for(var i=0,n=e.length;i<n;i++)this.parent.resources[i].dataSource=e[i].result;this.parent.setProperties({resources:this.parent.resources},!0),this.parent.uiStateValues.groupIndex=0,this.parent.renderElements(t),t&&this.parent.eventWindow.refresh()}},e.prototype.setResourceCollection=function(){var e=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(var i=0,n=this.parent.activeViewOptions.group.resources;i<n.length;i++){var a=n[i],r=O(this.parent.resources,"name",a);r>=0&&e.push(this.parent.resources[r])}else this.parent.resources.length>0&&(e=this.parent.resources);for(var s=0,o=0,l=e;o<l.length;o++){var c={field:(a=l[o]).field,title:a.title,name:a.name,allowMultiple:a.allowMultiple,dataSource:a.dataSource,idField:a.idField,textField:a.textField,groupIDField:a.groupIDField,colorField:a.colorField,startHourField:a.startHourField,endHourField:a.endHourField,workDaysField:a.workDaysField,expandedField:a.expandedField,cssClassField:a.cssClassField};a.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=s),s++,this.resourceCollection.push(c)}t.isNullOrUndefined(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)},e.prototype.generateResourceLevels=function(e,t){var i=this,n=this.resourceCollection,a=[],s=[],o=function(t,n,l,c,p){var h=[],d=t[0];if(d){var u=void 0;if(c&&i.parent.activeViewOptions.group.byGroupID){var v=c[l.idField];u=new r.DataManager(d.dataSource).executeLocal((new r.Query).where(d.groupIDField,"equal",v))}else u=d.dataSource;for(var m=0;m<u.length;m++){var g=[];p&&p.length>0&&(g=g.concat(p)),g.push(u[m][d.idField]);var f=o(t.slice(1),n+1,d,u[m],g);if(!(0===n&&0===f.length&&i.resourceCollection.length>1)){var y=[],T=i.parent.activeView.renderDates,w=void 0;if(!i.parent.activeViewOptions.group.byDate&&n+1===i.resourceCollection.length){var b=u[m][d.workDaysField],C=u[m][d.startHourField],D=u[m][d.endHourField];b&&b.length>0?(T=i.parent.activeView.getRenderDates(b),w=b,y=i.parent.activeView.getDateSlots(T,b)):(w=i.parent.activeViewOptions.workDays,y=e);var O=i.generateCustomHours(y,C,D,g);s=s.concat(O)}var E=u[m][d.cssClassField],S={type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:n,groupOrder:g,resource:d,resourceData:u[m],colSpan:i.parent.activeViewOptions.group.byDate?1:y.length,renderDates:T,workDays:w,cssClass:E,child:f};h.push(S)}}return a[n]||(a[n]=[]),a[n].push(h),h}return[]};return this.resourceTreeLevel=o(n,0),t?[]:this.generateHeaderLevels(a,s,e)},e.prototype.generateCustomHours=function(e,i,n,a){for(var r=t.extend([],e,null,!0),s=0,o=r;s<o.length;s++){var l=o[s];i&&(l.startHour=this.parent.globalize.parseDate(i,{skeleton:"Hm"})),n&&(l.endHour=this.parent.globalize.parseDate(n,{skeleton:"Hm"})),a&&(l.groupOrder=a)}return r},e.prototype.generateHeaderLevels=function(e,i,n){for(var a=[],r=e.length-1;r>=0;r--)for(var s=0,o=0,l=e[r];o<l.length;o++)for(var c=0,p=l[o];c<p.length;c++){var h=p[c];if(e[r+1]){for(var d=0,u=0,v=e[r+1][s];u<v.length;u++){var m=v[u];(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&m.resourceData[m.resource.groupIDField]===h.resourceData[h.resource.idField])&&(d+=m.colSpan)}h.colSpan=d}h.groupIndex=s,s++,a[h.resourceLevelIndex]=a[h.resourceLevelIndex]||[],a[h.resourceLevelIndex].push(h)}if(this.lastResourceLevel=a.slice(-1)[0],!this.parent.activeViewOptions.group.byDate){for(var g=0,f=0,y=this.lastResourceLevel;f<y.length;f++){var T=y[f];for(r=0;r<T.colSpan;r++)i[g].groupIndex=T.groupIndex,g++}return a.push(i),a}for(var w=[],b=t.extend([],a,null,!0),C=0,D=0,O=b[0];D<O.length;D++){C+=O[D].colSpan}for(var E=[],S=0,x=n;S<x.length;S++){var A=x[S];A.colSpan=C,E.push(A);for(var k=t.extend([],b,null,!0),V=0,M=k.length;V<M;V++){if(V===k.length-1)for(var P=0,j=k[V];P<j.length;P++){var R=j[P];R.date=A.date,R.workDays=A.workDays,R.startHour=A.startHour,R.endHour=A.endHour}w[V]||(w[V]=[]),w[V]=w[V].concat(k[V])}}return w.unshift(E),w},e.prototype.setResourceValues=function(e,i){var n=this,a=function(t,a,r){n.resourceCollection[t].allowMultiple&&(!i||i&&n.parent.activeViewOptions.group.allowGroupEdit)?e[a]=[r]:e[a]=r},r=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex;if(this.parent.activeViewOptions.group.resources.length>0&&!t.isNullOrUndefined(r))for(var s=this.lastResourceLevel[r].groupOrder,o=0;o<this.resourceCollection.length;o++)a(o,this.resourceCollection[o].field,s[o]);else if(this.parent.resources.length>0)for(o=0;o<this.resourceCollection.length;o++){var l=this.resourceCollection[o].dataSource[0];a(o,this.resourceCollection[o].field,l[this.resourceCollection[o].idField])}},e.prototype.getResourceColor=function(e,i){var n=this.resourceCollection[this.colorIndex];if(!(t.isNullOrUndefined(i)&&this.parent.activeViewOptions.group.allowGroupEdit&&n.allowMultiple)){var a=t.isNullOrUndefined(i)?e[n.field]:i[this.colorIndex],r=this.filterData(n.dataSource,n.idField,"equal",a);return r.length>0?r[0][n.colorField]:void 0}},e.prototype.getCssClass=function(e){var t=this.resourceCollection.slice(-1)[0];if(!this.parent.activeViewOptions.group.allowGroupEdit||!t.allowMultiple){var i=this.filterData(t.dataSource,t.idField,"equal",e[t.field]);return i.length>0?i[0][t.cssClassField]:void 0}},e.prototype.filterData=function(e,t,i,n){return new r.DataManager(e).executeLocal((new r.Query).where(t,i,n))},e.prototype.dataManagerFailure=function(e){this.parent.isDestroyed||(this.parent.trigger(K,{error:e}),this.parent.hideSpinner())},e.prototype.getResourceData=function(e,i,n){if(this.parent.activeViewOptions.group.allowGroupEdit){for(var a={},r=0,s=n;r<s.length;r++)for(var o=s[r],l=this.lastResourceLevel[o].groupOrder,c=0,p=l.length;c<p;c++){var h=this.resourceCollection[c].field;t.isNullOrUndefined(a[h])&&(a[h]=[]),a[h].push(l[c])}e=t.extend(e,a)}else{c=0;for(var d=this.resourceCollection.length;c<d;c++)e[this.resourceCollection[c].field]=this.lastResourceLevel[i].groupOrder[c]}},e.prototype.addResource=function(e,t,i){for(var n=0,a=this.parent.resources.length;n<a;n++){var r=this.parent.resources[n];if(r.name===t){r.dataSource.splice(i,0,e);break}}this.bindResourcesData(!0)},e.prototype.removeResource=function(e,t){for(var i=this,n=function(n,r){var s=a.parent.resources[n];if(s.name===t)return s.dataSource.forEach(function(t,a){t[s.idField]===e&&i.parent.resources[n].dataSource.splice(a,1)}),"break"},a=this,r=0,s=this.parent.resources.length;r<s;r++){if("break"===n(r))break}this.bindResourcesData(!0)},e.prototype.destroy=function(){this.parent.off(ce,this.documentClick),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,t.remove(this.parent.element.querySelector("."+Wi)),t.remove(this.parent.element.querySelector("."+Bi)));var e=this.parent.element.querySelector("."+$e);e&&t.remove(e)},e}(),Ua=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Na=function(e,t,i,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,i,s):a(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Fa=function(e){function n(t,i){return e.call(this,t,i)||this}return Ua(n,e),n.prototype.render=function(){var e=[],n=[];e.push(ve),this.enableRtl?e.push("e-rtl"):n.push("e-rtl"),this.isAdaptive?e.push(me):n.push(me),this.cssClass&&e.push(this.cssClass),t.classList(this.element,e,n),this.validateDate(),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer),i.createSpinner({target:this.element}),this.scrollModule=new Qi(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new pa(this),this.eventBase=new Tn(this),this.initializeDataModule(),this.initializeResources()},n.prototype.initializeResources=function(e){void 0===e&&(e=!1),this.resources.length>0?(this.resourceBase=new La(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.renderElements(e),e&&this.eventWindow.refresh())},n.prototype.renderElements=function(e){e?this.initializeView(this.currentView):(this.showHeaderBar&&(this.headerModule=new Gi(this)),this.element.appendChild(this.createElement("div",{className:Te})),(t.Browser.isDevice||t.Browser.isTouch)&&(this.scheduleTouchModule=new Ki(this)),this.initializeView(this.currentView),this.initializePopups(),this.wireEvents())},n.prototype.validateDate=function(){this.setProperties({selectedDate:new Date(""+this.selectedDate)},!0)},n.prototype.getViewIndex=function(e){for(var t=0;t<this.viewCollections.length;t++){if(this.viewCollections[t].option===e)return t}return-1},n.prototype.setViewOptions=function(e){void 0===e&&(e=!1),this.viewOptions={},this.viewCollections=[];var i,n,a=0;this.viewIndex=-1;for(var r=0,s=this.views;r<s.length;r++){var o=s[r],l="string"!=typeof o;"string"==typeof o?(i=o,this.currentView===i&&(n=i,this.viewIndex=a)):(i=o.option,o.isSelected&&(n=i,this.viewIndex=a));var c=t.extend({option:i},l?o:{}),p=i.charAt(0).toLowerCase()+i.slice(1);this.viewCollections.push(c),t.isNullOrUndefined(this.viewOptions[p])?this.viewOptions[p]=[c]:this.viewOptions[p].push(c),a++}if(!e&&n&&this.setProperties({currentView:n},!0),-1===this.viewIndex){var h=this.getViewIndex(this.currentView);this.viewIndex=-1===h?0:h}},n.prototype.getActiveViewOptions=function(){var e={enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},i={byDate:this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView},n={dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!0,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,workDays:this.workDays,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:e,group:i,headerRows:this.headerRows};return t.extend(n,this.viewCollections[this.viewIndex],void 0,!0)},n.prototype.initializeDataModule=function(){this.eventFields={id:this.eventSettings.fields.id,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name},this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")},this.dataModule=new Ji(this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new wn(this)},n.prototype.initializeView=function(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)},n.prototype.initializeTemplates=function(){this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate)},n.prototype.initializePopups=function(){this.eventWindow=new ca(this),this.quickPopup=new Cn(this)},n.prototype.getDayNames=function(e){var i,n=[];i="en"===this.locale||"en-US"===this.locale?t.getValue("days.stand-alone."+e,t.getDefaultDateObject()):t.getValue("main."+this.locale+".dates.calendars.gregorian.days.format."+e,t.cldrData);for(var a=0,r=Object.keys(i);a<r.length;a++){var s=r[a];n.push(t.getValue(s,i))}return n},n.prototype.setCldrTimeFormat=function(){"en"===this.locale||"en-US"===this.locale?this.timeFormat=t.getValue("timeFormats.short",t.getDefaultDateObject()):this.timeFormat=t.getValue("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",t.cldrData)},n.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.timeFormat,type:"time"})},n.prototype.changeView=function(e,i,n,a){if(t.isNullOrUndefined(a)&&(a=this.getViewIndex(e)),!(!n&&a===this.viewIndex||a<0)){this.viewIndex=a;var r={requestType:"viewNavigate",cancel:!1,event:i};if(this.trigger(G,r),!r.cancel){var s={action:"view",cancel:!1,previousView:this.currentView,currentView:e};this.trigger(X,s),s.cancel||(this.setProperties({currentView:e},!0),this.headerModule&&(this.headerModule.updateActiveView(),this.headerModule.setCalendarView()),this.initializeView(this.currentView),this.animateLayout(),r={requestType:"viewNavigate",cancel:!1,event:i},this.trigger(Q,r))}}},n.prototype.changeDate=function(e,t){var i={requestType:"dateNavigate",cancel:!1,event:t};if(this.trigger(G,i),!i.cancel){var n={action:"date",cancel:!1,previousDate:this.selectedDate,currentDate:e};this.trigger(X,n),n.cancel||(this.setProperties({selectedDate:e},!0),this.headerModule&&this.headerModule.setCalendarDate(e),this.initializeView(this.currentView),this.animateLayout(),i={requestType:"dateNavigate",cancel:!1,event:t},this.trigger(Q,i))}},n.prototype.isSelectedDate=function(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)},n.prototype.getNavigateView=function(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView?"TimelineDay":"Agenda":"Day"},n.prototype.animateLayout=function(){new t.Animation({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)},n.prototype.requiredModules=function(){var e=[];this.setViewOptions(!0);for(var t=0,i=Object.keys(this.viewOptions);t<i.length;t++){var n=i[t];n="timelineDay"===n||"timelineWeek"===n||"timelineWorkWeek"===n?"timelineViews":n,e.push({member:n,args:[this]})}return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),e},n.prototype.preRender=function(){this.isAdaptive=t.Browser.isDevice,this.globalize=new t.Internationalization(this.locale),this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,groupIndex:0,action:!1},this.activeCellsData={startTime:new Date,endTime:new Date,isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Delete Series",edit:"Edit",editSeries:"Edit Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"Do you want to edit only this event or entire series?",deleteRecurrenceContent:"Do you want to delete only this event or entire series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"The changes made to specific instances of this series will be cancelled and those events will match the series again.",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",recurrenceDateValidation:"Some months have fewer than the selected date. For these months, the occurrence will fall on the last date of the month.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",ok:"Ok",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.eventsData=[],this.eventsProcessed=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()},n.prototype.wireEvents=function(){var e="onorientationchange"in window?"orientationchange":"resize";t.EventHandler.add(window,e,this.onScheduleResize,this),t.EventHandler.add(document,t.Browser.touchStartEvent,this.onDocumentClick,this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new Xi(this))},n.prototype.removeSelectedClass=function(){for(var e=this.getSelectedElements(),i=0,n=e;i<n.length;i++){var a=n[i];a.setAttribute("aria-selected","false"),a.removeAttribute("tabindex")}t.removeClass(e,it)},n.prototype.addSelectedClass=function(e,i){for(var n=0,a=e;n<a.length;n++){a[n].setAttribute("aria-selected","true")}t.addClass(e,it),i.setAttribute("tabindex","0"),i.focus()},n.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},n.prototype.getSelectedElements=function(){return[].slice.call(this.element.querySelectorAll("."+it))},n.prototype.getAllDayRow=function(){return this.element.querySelector("."+be)},n.prototype.getContentTable=function(){return this.element.querySelector("."+Ce+" tbody")},n.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll("."+Ce+" tbody tr:not(."+Li+")"))},n.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll("."+De))},n.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},n.prototype.isAllDayCell=function(e){return!("Month"!==this.currentView&&"TimelineMonth"!==this.currentView&&!e.classList.contains(we)&&!e.classList.contains(Ae)&&this.activeViewOptions.timeScale.enable)||this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option},n.prototype.getDateFromElement=function(e){if(!t.isNullOrUndefined(e.getAttribute("data-date"))){var i=parseInt(e.getAttribute("data-date"),10);return new Date(i)}},n.prototype.getCellTemplate=function(){return this.cellTemplateFn},n.prototype.getDateHeaderTemplate=function(){return this.dateHeaderTemplateFn},n.prototype.getMajorSlotTemplate=function(){return this.majorSlotTemplateFn},n.prototype.getMinorSlotTemplate=function(){return this.minorSlotTemplateFn},n.prototype.getAppointmentTemplate=function(){return this.appointmentTemplateFn},n.prototype.getEventTooltipTemplate=function(){return this.eventTooltipTemplateFn},n.prototype.getHeaderTooltipTemplate=function(){return this.headerTooltipTemplateFn},n.prototype.getEditorTemplate=function(){return this.editorTemplateFn},n.prototype.getQuickInfoTemplatesHeader=function(){return this.quickInfoTemplatesHeaderFn},n.prototype.getQuickInfoTemplatesContent=function(){return this.quickInfoTemplatesContentFn},n.prototype.getQuickInfoTemplatesFooter=function(){return this.quickInfoTemplatesFooterFn},n.prototype.getResourceHeaderTemplate=function(){return this.resourceHeaderTemplateFn},n.prototype.getCssProperties=function(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight"}},n.prototype.onDocumentClick=function(e){this.notify(ce,{event:e})},n.prototype.onScheduleResize=function(){this.quickPopup&&this.quickPopup.onClosePopup(),"Month"!==this.currentView&&this.activeViewOptions.timeScale.enable&&!this.activeView.isTimelineView()||this.notify(ae,{})},n.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return t.compile(document.querySelector(e).innerHTML.trim())}catch(i){return t.compile(e)}},n.prototype.unwireEvents=function(){var e="onorientationchange"in window?"orientationchange":"resize";t.EventHandler.remove(window,e,this.onScheduleResize),t.EventHandler.remove(document,t.Browser.touchStartEvent,this.onDocumentClick),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy()},n.prototype.getModuleName=function(){return"schedule"},n.prototype.getPersistData=function(){return this.addOnPersist(["currentView","selectedDate"])},n.prototype.onPropertyChanged=function(e,t){for(var i=!1,n=!1,a=0,r=Object.keys(e);a<r.length;a++){var s=r[a];switch(s){case"width":case"height":this.notify(le,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),this.changeView(this.currentView,null,!0);break;case"currentView":this.changeView(e.currentView,null,!0);break;case"selectedDate":this.changeDate(e.selectedDate);break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange(this.activeView.getDateRangeText());break;case"showHeaderBar":this.headerModule&&(this.headerModule.destroy(),this.headerModule=null),e.showHeaderBar&&(this.headerModule=new Gi(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),this.notify(oe,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.notify(ae,{});break;case"showWeekend":case"workDays":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":i=!0;break;case"locale":this.setCldrTimeFormat(),n=!0;break;case"firstDayOfWeek":this.headerModule&&this.headerModule.setDayOfWeek(e.firstDayOfWeek),i=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView.highlightCurrentTime();break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),i=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),i=!0;break;case"timezone":this.eventBase.timezonePropertyChange(t.timezone);break;case"enableRtl":n=!0;break;default:this.extendedPropertyChange(s,e,t)}}n?this.refresh():i&&this.initializeView(this.currentView)},n.prototype.extendedPropertyChange=function(e,i,n){switch(e){case"cssClass":n.cssClass&&t.removeClass([this.element],n.cssClass),i.cssClass&&t.addClass([this.element],i.cssClass);break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),this.changeView(this.currentView,null,!0);break;case"eventSettings":this.onEventSettingsPropertyChanged(i.eventSettings,n.eventSettings);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),i.allowKeyboardInteraction&&(this.keyboardInteractionModule=new Xi(this));break;case"editorTemplate":t.isNullOrUndefined(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow.setDialogContent();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(i.group,n.group);break;case"resources":this.initializeResources(!0);break;case"timeScale":this.activeViewOptions.timeScale.interval=i.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=i.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow.refreshDateTimePicker(),this.initializeView(this.currentView);break;case"allowDragAndDrop":case"allowResizing":this.notify(ae,{processedData:this.eventBase.processData(this.eventsData)})}},n.prototype.onGroupSettingsPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var a=n[i];"headerTooltipTemplate"===a?this.headerTooltipTemplateFn=this.templateParser(e[a]):(this.initializeView(this.currentView),this.eventWindow.refresh())}},n.prototype.onEventSettingsPropertyChanged=function(e,t){for(var i=!1,n=0,a=Object.keys(e);n<a.length;n++){switch(a[n]){case"dataSource":case"query":case"fields":this.initializeDataModule(),i=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),i=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new Dn(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),i=!0}}i&&this.renderModule.refreshDataManager()},n.prototype.showSpinner=function(){i.showSpinner(this.element)},n.prototype.hideSpinner=function(){i.hideSpinner(this.element)},n.prototype.setWorkHours=function(e,i,n,a){var r=this.globalize.parseDate(i,{skeleton:"Hm"}),s=this.globalize.parseDate(n,{skeleton:"Hm"}),o=this.getContentTable();if(!t.isNullOrUndefined(r)&&!t.isNullOrUndefined(s)&&o){r.setMilliseconds(0),s.setMilliseconds(0);var l=this.activeView.getStartHour();r<l&&(r=l),s>this.activeView.getEndHour()&&(s=this.activeView.getEndHour());for(var c=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,p=Math.round((g(r)-g(l))/c),h=Math.ceil((g(s)-g(l))/c),d=[],u=0,v=e;u<v.length;u++){var f=v[u];m(f);var y=this.activeView.renderDates;t.isNullOrUndefined(a)||!this.resourceBase||this.activeView.isTimelineView()||(y=this.resourceBase.lastResourceLevel[a].renderDates);var T=this.getIndexOfDate(y,f);if(T>=0)for(var w=p;w<h;w++)if(this.activeView.isTimelineView()){var b=t.isNullOrUndefined(a)?0:a;d.push(o.rows[b].cells[w])}else if(t.isNullOrUndefined(a))d.push(o.rows[w].cells[T]);else{var C=[].slice.call(o.rows[w].querySelectorAll("."+De+'[data-group-index="'+a+'"]'));d.push(C[T])}}t.addClass(d,Oe)}},n.prototype.getCellDetails=function(e){var i=this.getDateFromElement(e);if(!t.isNullOrUndefined(i)){var n=1,a=this.activeView.isTimelineView()&&!t.isNullOrUndefined(e.getAttribute("colSpan"));a&&(n=parseInt(e.getAttribute("colSpan"),10));var r={startTime:i,endTime:!this.activeViewOptions.timeScale.enable||e.classList.contains(we)||e.classList.contains(Ae)||a?f(new Date(i.getTime()),n):this.activeView.getEndDateFromStartDate(i),isAllDay:this.isAllDayCell(e),element:e},s=e.getAttribute("data-group-index");return t.isNullOrUndefined(s)||(r.groupIndex=parseInt(s,10)),r}},n.prototype.getResourcesByIndex=function(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(e<0||e>=this.resourceBase.lastResourceLevel.length)return;var t=this.resourceBase.lastResourceLevel[e];return{resource:t.resource,resourceData:t.resourceData}}},n.prototype.scrollTo=function(e){this.activeView.scrollToHour&&this.activeView.scrollToHour(e)},n.prototype.addEvent=function(e){this.crudModule.addEvent(e)},n.prototype.saveEvent=function(e,t){this.crudModule.saveEvent(e,t)},n.prototype.deleteEvent=function(e,t){this.crudModule.deleteEvent(e,t)},n.prototype.getEvents=function(){return this.eventsData},n.prototype.getOccurrencesByID=function(e){return this.eventBase.getOccurrencesByID(e)},n.prototype.getOccurrencesByRange=function(e,t){return this.eventBase.getOccurrencesByRange(e,t)},n.prototype.getCurrentViewDates=function(){return this.activeView.renderDates},n.prototype.getCurrentViewEvents=function(){return this.eventsProcessed},n.prototype.refreshEvents=function(){this.renderModule.refreshDataManager()},n.prototype.getEventDetails=function(e){var t=e.getAttribute("data-guid");return t?this.eventBase.getEventByGuid(t):{}},n.prototype.isSlotAvailable=function(e,i,n){var a=this,r=this.eventBase.filterEvents(e,i);return"Add"!==this.currentAction&&this.activeEventData.event&&(r=r.filter(function(e){return e.Guid!==a.activeEventData.event.Guid})),!t.isNullOrUndefined(n)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(r=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[n],r)),!(r.length>0)},n.prototype.openEditor=function(e,t){this.eventWindow.openEditor(e,t)},n.prototype.adjustEventWrapper=function(){this.activeView.adjustEventWrapper()},n.prototype.addResource=function(e,t,i){this.resourceBase.addResource(e,t,i)},n.prototype.removeResource=function(e,t){this.resourceBase.removeResource(e,t)},n.prototype.destroy=function(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null),this.unwireEvents(),this.headerModule&&(this.headerModule.destroy(),this.headerModule=null),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.activeView&&(this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),e.prototype.destroy.call(this),this.element.innerHTML="";var i=[ve];this.cssClass&&(i=i.concat(this.cssClass.split(" "))),t.removeClass([this.element],i)},Na([t.Property("auto")],n.prototype,"width",void 0),Na([t.Property("auto")],n.prototype,"height",void 0),Na([t.Property(!0)],n.prototype,"showHeaderBar",void 0),Na([t.Property(!0)],n.prototype,"showTimeIndicator",void 0),Na([t.Property("Week")],n.prototype,"currentView",void 0),Na([t.Property(["Day","Week","WorkWeek","Month","Agenda"])],n.prototype,"views",void 0),Na([t.Property(new Date)],n.prototype,"selectedDate",void 0),Na([t.Property()],n.prototype,"dateFormat",void 0),Na([t.Property(!0)],n.prototype,"showWeekend",void 0),Na([t.Property(0)],n.prototype,"firstDayOfWeek",void 0),Na([t.Property([1,2,3,4,5])],n.prototype,"workDays",void 0),Na([t.Property("00:00")],n.prototype,"startHour",void 0),Na([t.Property("24:00")],n.prototype,"endHour",void 0),Na([t.Property(!0)],n.prototype,"allowResizing",void 0),Na([t.Complex({},ua)],n.prototype,"workHours",void 0),Na([t.Complex({},ga)],n.prototype,"timeScale",void 0),Na([t.Property(!0)],n.prototype,"allowKeyboardInteraction",void 0),Na([t.Property(!0)],n.prototype,"allowDragAndDrop",void 0),Na([t.Property()],n.prototype,"dateHeaderTemplate",void 0),Na([t.Property()],n.prototype,"cellTemplate",void 0),Na([t.Property(!1)],n.prototype,"readonly",void 0),Na([t.Property(!0)],n.prototype,"showQuickInfo",void 0),Na([t.Property(!1)],n.prototype,"showWeekNumber",void 0),Na([t.Property()],n.prototype,"editorTemplate",void 0),Na([t.Complex({},Ta)],n.prototype,"quickInfoTemplates",void 0),Na([t.Property(7)],n.prototype,"agendaDaysCount",void 0),Na([t.Property(!0)],n.prototype,"hideEmptyAgendaDays",void 0),Na([t.Property()],n.prototype,"timezone",void 0),Na([t.Complex({},Ma)],n.prototype,"eventSettings",void 0),Na([t.Property()],n.prototype,"resourceHeaderTemplate",void 0),Na([t.Complex({},Ra)],n.prototype,"group",void 0),Na([t.Collection([],qa)],n.prototype,"resources",void 0),Na([t.Collection([],Ca)],n.prototype,"headerRows",void 0),Na([t.Property()],n.prototype,"cssClass",void 0),Na([t.Property(!1)],n.prototype,"enableRtl",void 0),Na([t.Event()],n.prototype,"created",void 0),Na([t.Event()],n.prototype,"destroyed",void 0),Na([t.Event()],n.prototype,"cellClick",void 0),Na([t.Event()],n.prototype,"cellDoubleClick",void 0),Na([t.Event()],n.prototype,"actionBegin",void 0),Na([t.Event()],n.prototype,"actionComplete",void 0),Na([t.Event()],n.prototype,"actionFailure",void 0),Na([t.Event()],n.prototype,"navigating",void 0),Na([t.Event()],n.prototype,"renderCell",void 0),Na([t.Event()],n.prototype,"eventClick",void 0),Na([t.Event()],n.prototype,"eventRendered",void 0),Na([t.Event()],n.prototype,"dataBinding",void 0),Na([t.Event()],n.prototype,"popupOpen",void 0),Na([t.Event()],n.prototype,"dragStart",void 0),Na([t.Event()],n.prototype,"drag",void 0),Na([t.Event()],n.prototype,"dragStop",void 0),Na([t.Event()],n.prototype,"resizeStart",void 0),Na([t.Event()],n.prototype,"resizing",void 0),Na([t.Event()],n.prototype,"resizeStop",void 0),Na([t.Event()],n.prototype,"dataBound",void 0),n=Na([t.NotifyPropertyChanges],n)}(t.Component),Ba=function(){function e(e){this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.getChangedData=function(){var e=t.extend({},this.actionObj.event,null,!0);if(e[this.parent.eventFields.startTime]=this.actionObj.start,e[this.parent.eventFields.endTime]=this.actionObj.end,t.isNullOrUndefined(this.actionObj.isAllDay)||(e[this.parent.eventFields.isAllDay]=this.actionObj.isAllDay),this.parent.activeViewOptions.group.resources.length>0){var i=this.getOriginalElement(this.actionObj.element).map(function(e){return parseInt(e.getAttribute("data-group-index"),10)});if(-1===i.indexOf(this.actionObj.groupIndex)){var n=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(i=i.filter(function(e){return e!==n})).push(this.actionObj.groupIndex),this.parent.resourceBase.getResourceData(e,this.actionObj.groupIndex,i)}}return e},e.prototype.saveChangedData=function(e){this.parent.activeEventData.event=this.actionObj.event,this.parent.currentAction="Save";var t=e.data,i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex;if(+t[this.parent.eventFields.startTime]!=+this.actionObj.event[this.parent.eventFields.startTime]||+t[this.parent.eventFields.endTime]!=+this.actionObj.event[this.parent.eventFields.endTime]||!i){(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(t);var n;t[this.parent.eventFields.recurrenceRule]&&t[this.parent.eventFields.id]===t[this.parent.eventFields.recurrenceID]&&(t[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),n="EditOccurrence"),this.parent.crudModule.saveEvent(t,n)}},e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector("."+gt),t=[].slice.call(e.querySelector("tr").children);!this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.isAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),n=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.enableRtl?n.left:i.left,right:this.parent.enableRtl?i.right:n.right,top:0}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.activeView.isTimelineView()){var n=this.getResourceElements(t);i.minIndex=n[0].cellIndex,i.maxIndex=n.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e){for(var i=0,n=this.actionObj.cloneElement;i<n.length;i++){var a=n[i].querySelector("."+ut);a&&(a.innerHTML=this.parent.getTimeString(this.actionObj.start)+" - "+this.parent.getTimeString(this.actionObj.end))}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.currentView&&"TimelineMonth"!==this.parent.currentView){var r=this.parent.element.querySelector("."+At);if(!r){r=t.createElement("div",{className:At});var s=this.parent.activeView.isTimelineView()?Se:We;this.parent.element.querySelector("."+s).appendChild(r)}r.innerHTML=this.parent.getTimeString(e);var o=0;if(this.parent.activeView.isTimelineView())if(this.parent.enableRtl){var l=parseInt(this.actionObj.clone.style.right,10);o="drag"===this.actionObj.action||this.resizeEdges.left?l+this.actionObj.clone.offsetWidth:l,r.style.right=t.formatUnit(o)}else{var c=parseInt(this.actionObj.clone.style.left,10);o="drag"===this.actionObj.action||this.resizeEdges.left?c:c+this.actionObj.clone.offsetWidth,r.style.left=t.formatUnit(o)}else o="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,r.style.top=t.formatUnit(o)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter(function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex})},e.prototype.getOriginalElement=function(e){var i,n=e.getAttribute("data-guid");if(this.parent.activeView.isTimelineView())i=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+n+'"]'));else{var a=t.closest(e,"tr");i=[].slice.call(a.querySelectorAll('[data-guid="'+n+'"]'))}return i},e.prototype.createCloneElement=function(e){var i=t.compile(e.outerHTML)({})[0],n=[xt];return n.push("drag"===this.actionObj.action?"e-drag-clone":Vt),"Month"!==this.parent.currentView&&"TimelineMonth"!==this.parent.currentView||n.push("e-month-event"),t.addClass([i],n),t.addClass([e],St),e.parentElement.appendChild(i),i.style.width=t.formatUnit(i.offsetWidth-2),i},e.prototype.removeCloneElement=function(){this.actionObj.originalElement.forEach(function(e){return t.removeClass([e],St)}),this.actionObj.originalElement=[],this.actionObj.cloneElement.forEach(function(e){return t.remove(e)}),this.actionObj.cloneElement=[];var e=this.parent.element.querySelector("."+At);e&&t.remove(e)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector("."+gt),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,n=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,a=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;n&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),a&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(e){if(!this.actionObj.scroll.enable||t.closest(e.target,"."+Se))return!1;var i=this.getPageCoordinates(e),n=!1;this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1};var a=this.parent.element.querySelector("."+gt).getBoundingClientRect();return i.pageY<a.top+30&&(n=!0,this.scrollEdges.top=!0),i.pageY>a.bottom-30&&(n=!0,this.scrollEdges.bottom=!0),i.pageX<a.left+30&&(n=!0,this.scrollEdges.left=!0),i.pageX>a.right-30&&(n=!0,this.scrollEdges.right=!0),n},e.prototype.actionClass=function(e){"addClass"===e?t.addClass([this.parent.element],St):t.removeClass([this.parent.element],St)},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),Wa=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),za=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Wa(i,e),i.prototype.wireResizeEvent=function(e){var i=this;[].slice.call(e.querySelectorAll("."+kt)).forEach(function(e){return t.EventHandler.add(e,t.Browser.touchStartEvent,i.resizeStart,i)})},i.prototype.resizeHelper=function(){var e=this;this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit?this.actionObj.originalElement.forEach(function(t,i){var n=e.createCloneElement(t);e.actionObj.cloneElement[i]=n,e.actionObj.element===t&&(e.actionObj.clone=n)}):(this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element])},i.prototype.resizeStart=function(e){this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=t.closest(e.target,"."+kt);this.actionObj.element=t.closest(i,"."+lt),this.actionObj.event=this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute("data-guid"));var n=t.extend({},this.actionObj.event,null,!0),a={cancel:!1,data:n,element:this.actionObj.element,event:e,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:10}};if(this.parent.trigger(ie,a),!a.cancel){this.actionClass("addClass"),this.parent.uiStateValues.action=!0,this.resizeEdges={left:i.classList.contains(Mt),right:i.classList.contains(Pt),top:i.classList.contains(jt),bottom:i.classList.contains(Rt)},this.actionObj.groupIndex=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:0;var r=this.parent.element.querySelector("."+De);this.actionObj.cellWidth=r.offsetWidth,this.actionObj.cellHeight=r.offsetHeight;var s=this.parent.activeViewOptions.headerRows.map(function(e){return e.option});if(this.parent.activeView.isTimelineView()&&s.length>0&&["Date","Hour"].indexOf(s.slice(-1)[0])<0){var o=this.parent.getContentTable().querySelector("tr"),l=0;[].slice.call(o.childNodes).forEach(function(e){return l+=parseInt(e.getAttribute("colspan"),10)}),this.actionObj.cellWidth=o.offsetWidth/l,this.actionObj.cellHeight=o.offsetHeight}var c=this.getPageCoordinates(e);this.actionObj.X=c.pageX,this.actionObj.Y=c.pageY,this.actionObj.groupIndex=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),this.actionObj.interval=a.interval,this.actionObj.scroll=a.scroll,this.actionObj.start=new Date(n[this.parent.eventFields.startTime].getTime()),this.actionObj.end=new Date(n[this.parent.eventFields.endTime].getTime()),this.actionObj.originalElement=this.getOriginalElement(this.actionObj.element);var p=this.parent.element.querySelector("."+gt);this.scrollArgs={element:p,width:p.scrollWidth,height:p.scrollHeight},t.EventHandler.add(document,t.Browser.touchMoveEvent,this.resizing,this),t.EventHandler.add(document,t.Browser.touchEndEvent,this.resizeStop,this)}},i.prototype.resizing=function(e){this.parent.quickPopup.quickPopupHide(),0===this.parent.element.querySelectorAll("."+Vt).length&&this.resizeHelper(),this.autoScrollValidation(e)&&!this.actionObj.clone.classList.contains(Lt)&&this.autoScroll();var i=this.resizeValidation(e);if(this.resizeEdges.left){if(i)for(var n=this.getLeftRightStyles(e,!0),a=0,r=this.actionObj.cloneElement;a<r.length;a++){var s=r[a];t.setStyleAttribute(s,n),t.addClass([s],Mt)}this.horizontalResizing(!this.parent.enableRtl)}if(this.resizeEdges.right){if(i)for(var o=this.getLeftRightStyles(e,!1),l=0,c=this.actionObj.cloneElement;l<c.length;l++){s=c[l];t.setStyleAttribute(s,o),t.addClass([s],Pt)}this.horizontalResizing(this.parent.enableRtl)}if(this.resizeEdges.top){if(i)for(var p=this.getTopBottomStyles(e,!0),h=0,d=this.actionObj.cloneElement;h<d.length;h++){s=d[h];t.setStyleAttribute(s,p),t.addClass([s],jt)}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(i)for(var u=this.getTopBottomStyles(e,!1),v=0,m=this.actionObj.cloneElement;v<m.length;v++){s=m[v];t.setStyleAttribute(s,u),t.addClass([s],Rt)}this.verticalResizing(!1)}var g={cancel:!1,data:t.extend({},this.actionObj.event,null,!0),element:this.actionObj.element,event:e,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.trigger("resizing",g)},i.prototype.resizeStop=function(e){t.EventHandler.remove(document,t.Browser.touchMoveEvent,this.resizing),t.EventHandler.remove(document,t.Browser.touchEndEvent,this.resizeStop),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var i={cancel:!1,data:this.getChangedData(),element:this.actionObj.element,event:e};this.parent.trigger(ne,i),i.cancel||this.saveChangedData(i)},i.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,n=m(new Date(parseInt(this.actionObj.clone.offsetParent.getAttribute("data-date"),10)));n.setHours(this.parent.activeView.getStartHour().getHours()),n.setMinutes(i),e?this.actionObj.start=this.calculateIntervalTime(n):this.actionObj.end=this.calculateIntervalTime(n),this.updateTimePosition(n)},i.prototype.horizontalResizing=function(e){var i,n=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),a=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());if(this.parent.activeView.isTimelineView()){var r=this.parent.getContentTable().querySelector("tr"),s=this.parent.currentView;if(this.parent.activeViewOptions.headerRows.length>0){var o=this.parent.activeViewOptions.headerRows.map(function(e){return e.option});s=o.slice(-1)[0],"TimelineMonth"===this.parent.currentView&&"Hour"===s&&(s=o.slice(-2)[0]||"Month")}i=e?n:a;var l=0;if(-1!==["Year","Month","Week","Date"].indexOf(s)){var c=0;[].slice.call(r.childNodes).forEach(function(e){return c+=parseInt(e.getAttribute("colspan"),10)});var p=this.parent.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(p+=this.actionObj.clone.offsetWidth-this.actionObj.cellWidth),l=(l=Math.floor(p/(r.offsetWidth/c)))<0?0:l>=c?c-1:l}else{var h="TimelineMonth"!==this.parent.currentView&&this.parent.activeViewOptions.timeScale.enable?0:this.actionObj.cellWidth-2;if(l=Math.floor(e?this.actionObj.clone.offsetLeft/this.actionObj.cellWidth:(this.actionObj.clone.offsetLeft+(this.actionObj.clone.offsetWidth-h))/this.actionObj.cellWidth),this.parent.enableRtl){var d=0;("TimelineMonth"===s||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.currentView)&&(d=this.actionObj.cellWidth);var u=Math.floor(parseInt(this.actionObj.clone.style.right,10)/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.offsetWidth-d);l=Math.ceil(u/this.actionObj.cellWidth)}l=this.getIndex(l)}var v=void 0;if(v=-1!==["Year","Month","Week","Date"].indexOf(s)?new Date(this.parent.activeView.renderDates[l].getTime()):new Date(parseInt(r.childNodes.item(l).getAttribute("data-date"),10)),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(s)&&this.parent.activeViewOptions.timeScale.enable){p=this.parent.enableRtl?parseFloat(this.actionObj.clone.style.right):parseFloat(this.actionObj.clone.style.left);e||(p+=this.actionObj.clone.offsetWidth);var m=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(p-Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth));(i=new Date(v.getTime())).setMinutes(i.getMinutes()+m),this.updateTimePosition(i)}else i=new Date(v.setHours(i.getHours(),i.getMinutes(),i.getSeconds()))}else{var g=t.closest(this.actionObj.clone,"td").cellIndex,y=Math.ceil((e?this.actionObj.element.offsetWidth:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,T=Math.ceil((this.actionObj.clone.offsetWidth-y)/this.actionObj.cellWidth),w=(r=t.closest(this.actionObj.clone,"tr"),e?g-T:g+T-1);w=this.getIndex(w),i=new Date(parseInt(r.childNodes.item(w).getAttribute("data-date"),10)),e?i.setHours(n.getHours(),n.getMinutes(),n.getSeconds()):i.setHours(a.getHours(),a.getMinutes(),a.getSeconds())}if(e)this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(i):i;else{var b=this.actionObj.event[this.parent.eventFields.isAllDay]&&0===i.getHours()&&0===i.getMinutes()?f(i,1):i;this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.currentView?this.calculateIntervalTime(b):b}},i.prototype.getTopBottomStyles=function(e,i){var n=this.getPageCoordinates(e),a=this.parent.element.querySelector("."+gt),r=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=i?this.actionObj.element.offsetHeight+(this.actionObj.Y-n.pageY):this.actionObj.element.offsetHeight+(n.pageY-this.actionObj.Y),o=i?this.actionObj.element.offsetTop-(this.actionObj.Y-n.pageY):this.actionObj.clone.offsetTop;s=o<0?this.actionObj.clone.offsetHeight:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:s,o=o<0?0:o,s=(o=Math.floor(o/r)*r)+s>=a.scrollHeight?a.scrollHeight-o:Math.ceil(s/r)*r;return{height:t.formatUnit(s<this.actionObj.cellHeight?this.actionObj.cellHeight:s),top:t.formatUnit(s<this.actionObj.cellHeight&&i?this.actionObj.clone.offsetTop:o),left:"0px",right:"0px",width:"100%"}},i.prototype.getLeftRightStyles=function(e,i){var n={},a=this.getPageCoordinates(e),r=this.parent.activeView.isTimelineView(),s=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.currentView)>0&&this.parent.activeViewOptions.timeScale.enable,o=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,l=i?this.actionObj.X-a.pageX:a.pageX-this.actionObj.X,c=r?this.actionObj.element.offsetWidth/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.currentView?this.actionObj.element.offsetWidth:Math.ceil(this.actionObj.element.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth,p=c+Math.ceil(l/this.actionObj.cellWidth)*this.actionObj.cellWidth;if(s&&(p=c+Math.ceil(l/o)*o),n.width=t.formatUnit(p<this.actionObj.cellWidth?this.actionObj.cellWidth:p),this.parent.enableRtl){var h=r?Math.floor(parseInt(this.actionObj.element.style.right,10)/this.actionObj.cellWidth)*this.actionObj.cellWidth:-(p-this.actionObj.cellWidth);h=r?h:i?0:h>0?0:h,r&&!i&&(h=(h=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.offsetWidth+(a.pageX-this.actionObj.X)))/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0?Math.abs(h):-h),n.right=t.formatUnit(h)}else{var d=i?this.actionObj.element.offsetLeft-(this.actionObj.X-a.pageX):this.parent.enableRtl?this.actionObj.element.offsetLeft:0;r&&(d=i?d:parseInt(this.actionObj.clone.style.left,10),d=this.parent.enableRtl?i?d:a.pageX<this.actionObj.X-this.actionObj.clone.offsetWidth?parseInt(this.actionObj.clone.style.right,10):d:i&&a.pageX>this.actionObj.X+this.actionObj.clone.offsetWidth&&this.actionObj.clone.offsetWidth===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):d);var u=d;d=r?s?i?Math.floor(d/o)*o:d:Math.floor(d/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(d)/this.actionObj.cellWidth)*this.actionObj.cellWidth;var v=Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth;i&&(n.left=t.formatUnit(r?d:i?u<0?-d:Math.ceil((c-v)/this.actionObj.cellWidth)*this.actionObj.cellWidth:d))}return n},i.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),n=!1;return this.resizeEdges.left&&(n=t.pageX-this.actionObj.cellWidth>=i.left),this.resizeEdges.right&&(n=t.pageX+this.actionObj.cellWidth<=i.right),this.resizeEdges.top&&(n=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(n=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),n},i.prototype.getModuleName=function(){return"resize"},i}(Ba),_a=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ya=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return _a(i,e),i.prototype.wireDragEvent=function(e,i){var n=i?Se:gt;new t.Draggable(e,{abort:"."+kt,clone:!0,cursorAt:{left:0,top:0},dragArea:this.parent.element.querySelector("."+n),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},i.prototype.dragHelper=function(e){return this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag",this.actionObj.clone=this.createCloneElement(this.actionObj.element),"Month"===this.parent.currentView||!this.parent.timeScale.enable||this.parent.activeView.isTimelineView()||this.actionObj.element.classList.contains(Lt)||t.setStyleAttribute(this.actionObj.clone,{left:"0%",right:"0%",width:"100%"}),this.actionObj.clone.style.top=t.formatUnit(this.actionObj.element.offsetTop),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element],this.actionObj.clone},i.prototype.dragPosition=function(e){var i,n=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,a=this.parent.activeView.isTimelineView()?this.actionObj.cellWidth/n*this.actionObj.interval:this.actionObj.cellWidth,r=this.actionObj.cellHeight/n*this.actionObj.interval,s=this.parent.enableRtl?parseInt(e.left,10):Math.abs(parseInt(e.left,10));i="Month"===this.parent.currentView||this.actionObj.clone.classList.contains(Lt)?e.left:t.formatUnit(Math.floor(s/a)*a);var o;if(this.parent.activeView.isTimelineView()||this.actionObj.element.offsetParent.classList.contains(ni))o=t.formatUnit(this.actionObj.clone.offsetTop);else if("Month"===this.parent.currentView)o=t.formatUnit(0);else if(this.actionObj.element.classList.contains(Lt)&&!this.actionObj.clone.classList.contains(Lt))o=t.formatUnit(this.parent.element.querySelector("."+gt).scrollTop);else if(this.actionObj.clone.classList.contains(Lt))o=t.formatUnit(this.parent.element.querySelector("."+be).offsetTop);else{o=t.formatUnit(Math.ceil(parseInt(e.top,10)/r)*r);var l=this.parent.element.querySelector(".e-content-wrap").scrollHeight,c=parseInt(o,10)+this.actionObj.clone.offsetHeight;c>l&&(o=parseInt(o,10)-(c-l)+"px")}return{left:i,top:o}},i.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector("."+De);this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},i.prototype.dragStart=function(e){this.parent.quickPopup.quickPopupHide(),this.eventArgs=this.getPageCoordinates(e);var i=this.actionObj.element.getAttribute("data-guid");this.actionObj.event=this.parent.eventBase.getEventByGuid(i);var n=t.extend({},this.actionObj.event,null,!0),a={cancel:!1,data:n,event:e,excludeSelectors:null,element:this.actionObj.element,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:10}};this.parent.trigger("dragStart",a),a.cancel?this.removeCloneElement():(this.actionClass("addClass"),this.parent.uiStateValues.action=!0,this.actionObj.start=n[this.parent.eventFields.startTime],this.actionObj.end=n[this.parent.eventFields.endTime],this.actionObj.groupIndex=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),this.actionObj.interval=a.interval,this.actionObj.scroll=a.scroll,this.actionObj.excludeSelectors=a.excludeSelectors)},i.prototype.drag=function(e){var i=t.extend({},this.actionObj.event,null,!0),n=this.getPageCoordinates(e);this.actionObj.Y=n.pageY,this.autoScrollValidation(e)&&!this.actionObj.clone.classList.contains(Lt)&&this.autoScroll(),this.updateDraggingDateTime(e);var a={data:i,event:e,element:this.actionObj.element};this.parent.trigger("drag",a)},i.prototype.dragStop=function(e){if(this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,!this.isAllowDrop(e)){var t={cancel:!1,data:this.getChangedData(),event:e,element:this.actionObj.element};this.parent.trigger("dragStop",t),t.cancel||this.saveChangedData(t)}},i.prototype.updateDraggingDateTime=function(e){this.actionObj.element.offsetParent.classList.contains(ni)?this.morePopupEventDragging(e):this.parent.activeView.isTimelineView()?"TimelineMonth"===this.parent.currentView?this.calculateTimelineDate(e):this.calculateTimelineTime(e):"Month"===this.parent.currentView?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},i.prototype.morePopupEventDragging=function(e){if(!(t.isNullOrUndefined(e.target)||e.target&&t.isNullOrUndefined(t.closest(e.target,"td")))){var i=t.extend({},this.actionObj.event,null,!0),n=i[this.parent.eventFields.endTime].getTime()-i[this.parent.eventFields.startTime].getTime(),a=t.closest(e.target,"td"),r=new Date(parseInt(a.getAttribute("data-date"),10)),s=new Date(r.getTime());s.setMilliseconds(n),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(a.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(r.getTime()),this.actionObj.end=new Date(s.getTime()),this.actionObj.clone.style.top=t.formatUnit(a.offsetParent.offsetTop),this.actionObj.clone.style.left=t.formatUnit(a.offsetLeft),this.actionObj.clone.style.width=t.formatUnit(a.offsetWidth);var o,l=a;if(this.parent.activeView.isTimelineView()){var c=t.closest(a,"tr").rowIndex;l=this.parent.element.querySelectorAll(".e-appointment-container").item(c)}(o=l.querySelector("."+Je))||(o=t.createElement("div",{className:Je}),l.appendChild(o)),o.appendChild(this.actionObj.clone)}},i.prototype.calculateVerticalTime=function(e){if(!(t.isNullOrUndefined(e.target)||e.target&&t.isNullOrUndefined(t.closest(e.target,"tr")))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var i,n=t.extend({},this.actionObj.event,null,!0),a=n[this.parent.eventFields.startTime],r=n[this.parent.eventFields.endTime].getTime()-a.getTime(),s=Math.floor(this.actionObj.clone.offsetTop/this.actionObj.cellHeight)*this.actionObj.cellHeight,o=(s=s<0?0:s)/this.actionObj.cellHeight,l=this.actionObj.cellHeight/this.actionObj.slotInterval,c=this.actionObj.clone.offsetTop-s,p=this.actionObj.clone.classList.contains(Lt);if(p)i=this.parent.element.querySelector("."+be);else{i=this.parent.getContentTable().querySelectorAll("tr").item(o)}var h=t.closest(e.target,"td").cellIndex,d=t.isNullOrUndefined(h)?t.closest(this.actionObj.clone,"td").cellIndex:h,u=i.childNodes.item(d);this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(u.getAttribute("data-group-index"),10));var v,g;if(this.parent.activeViewOptions.timeScale.enable&&!p){this.getEventWrapper(d).appendChild(this.actionObj.clone);var y=-this.actionObj.slotInterval/this.actionObj.cellHeight*c*6e4;if(this.actionObj.clone.querySelector(".e-up-icon")){var T=new Date(a.getTime());y=f(m(new Date(T.getTime())),1).getTime()-T.getTime()}(v=new Date(parseInt(u.getAttribute("data-date"),10))).setMinutes(v.getMinutes()+c*l),v.setMilliseconds(-y),(v=this.calculateIntervalTime(v)).setMilliseconds(y),g=new Date(v.getTime()),this.actionObj.element.classList.contains(Lt)?g.setMinutes(g.getMinutes()+this.actionObj.slotInterval):g.setMilliseconds(r)}else this.getEventWrapper(d).appendChild(this.actionObj.clone),(v=new Date(parseInt(u.getAttribute("data-date"),10))).setHours(a.getHours(),a.getMinutes(),a.getSeconds()),(g=new Date(v.getTime())).setMilliseconds(r),!this.actionObj.element.classList.contains(Lt)&&this.actionObj.clone.classList.contains(Lt)&&(g=f(m(g),1));this.actionObj.start=new Date(+v),this.actionObj.end=new Date(+g),this.updateTimePosition(this.actionObj.start)}},i.prototype.swapDragging=function(e){var i=this,n=t.closest(e.target,"td").cellIndex,a=function(e){var t=e?Se:gt,n=i.actionObj.element.ej2_instances[0];n.dragArea=i.parent.element.querySelector("."+t),n.dataBind()};if(t.closest(e.target,"."+Se)&&!t.closest(this.actionObj.clone,"."+qt)){t.addClass([this.actionObj.clone],Lt),this.getEventWrapper(n).appendChild(this.actionObj.clone),this.actionObj.isAllDay=!0,a(this.actionObj.isAllDay);var r=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll("."+we+":first-child"));s[0].offsetHeight<r&&s.forEach(function(e){return e.style.height=(r+2)/12+"em"}),t.setStyleAttribute(this.actionObj.clone,{height:t.formatUnit(r),top:t.formatUnit(this.parent.element.querySelector("."+be).offsetTop)})}if(t.closest(e.target,"."+De)&&!t.closest(this.actionObj.clone,"."+Ze)){t.removeClass([this.actionObj.clone],Lt),this.getEventWrapper(n).appendChild(this.actionObj.clone),this.actionObj.isAllDay=!1,a(this.actionObj.isAllDay);var o=this.getCursorElement(e);t.setStyleAttribute(this.actionObj.clone,{left:t.formatUnit(0),top:t.formatUnit(o.offsetTop),height:t.formatUnit(this.actionObj.element.offsetHeight),width:t.formatUnit(this.actionObj.cellWidth)})}},i.prototype.calculateVerticalDate=function(e){if(!(t.isNullOrUndefined(e.target)||e.target&&t.isNullOrUndefined(t.closest(e.target,"tr")))){this.actionObj.clone.style.top=t.formatUnit(0);var i=t.extend({},this.actionObj.event,null,!0),n=i[this.parent.eventFields.endTime].getTime()-i[this.parent.eventFields.startTime].getTime(),a=t.closest(e.target,"td"),r=a.parentElement,s=r.rowIndex*r.childNodes.length+a.cellIndex,o=this.parent.element.querySelectorAll("."+De);this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(a.getAttribute("data-group-index"),10));var l=o.item(s).querySelector("."+Je);l||(l=t.createElement("div",{className:Je}),o.item(s).appendChild(l)),l.querySelector("."+xt)||l.appendChild(this.actionObj.clone);var c=a.getAttribute("data-date")||i[this.parent.eventFields.startTime].getTime().toString(),p=new Date(parseInt(c,10)),h=new Date(p.getTime());if(this.parent.enableRtl){var d=i[this.parent.eventFields.endTime].getTime()-m(new Date(+i[this.parent.eventFields.endTime])).getTime();h=new Date(p.getTime()+d),p=new Date(h.getTime()-n)}else{var u=i[this.parent.eventFields.startTime].getTime()-m(new Date(+i[this.parent.eventFields.startTime])).getTime();p=new Date(p.getTime()+u),h=new Date(p.getTime()+n)}this.actionObj.start=new Date(p.getTime()),this.actionObj.end=new Date(h.getTime()),this.updateTimePosition(this.actionObj.start)}},i.prototype.calculateTimelineTime=function(e){var i=t.extend({},this.actionObj.event,null,!0),n=i[this.parent.eventFields.endTime].getTime()-i[this.parent.eventFields.startTime].getTime(),a=this.parent.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);a=Math.floor(a/this.actionObj.cellWidth)*this.actionObj.cellWidth;var r=this.actionObj.clone.offsetLeft-a;if(this.parent.enableRtl){var s=Math.abs(parseInt(this.actionObj.clone.style.left,10))-this.actionObj.clone.offsetWidth;this.actionObj.clone.style.right=t.formatUnit(s),r=s-a}var o=this.actionObj.slotInterval/this.actionObj.cellWidth,l=this.getIndex(Math.floor(a/this.actionObj.cellWidth)),c=this.parent.getContentTable().querySelector("tr"),p=new Date(parseInt(c.childNodes.item(l).getAttribute("data-date"),10));p.setMinutes(p.getMinutes()+Math.round(o*r)),p=this.calculateIntervalTime(p);var h=new Date(p.getTime());h.setMilliseconds(n),this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e),this.actionObj.start=new Date(p.getTime()),this.actionObj.end=new Date(h.getTime()),this.updateTimePosition(this.actionObj.start)},i.prototype.calculateTimelineDate=function(e){var i=0,n=t.extend({},this.actionObj.event,null,!0),a=n[this.parent.eventFields.endTime].getTime()-n[this.parent.eventFields.startTime].getTime();if(this.parent.enableRtl){i=Math.floor(parseInt(this.actionObj.clone.style.right,10))/this.actionObj.cellWidth;var r=Math.abs(parseInt(this.actionObj.clone.style.left,10))-this.actionObj.clone.offsetWidth;this.actionObj.clone.style.right=t.formatUnit(r)}else{i=Math.floor(this.actionObj.clone.offsetLeft/this.actionObj.cellWidth);var s=parseInt(this.actionObj.clone.style.left,10);this.actionObj.clone.style.left=t.formatUnit(s)}i=this.getIndex(i);var o=this.parent.getContentTable().querySelector("tr"),l=new Date(parseInt(o.childNodes.item(i).getAttribute("data-date"),10)),c=new Date(l.getTime()),p=n[this.parent.eventFields.startTime].getTime()-m(new Date(+n[this.parent.eventFields.startTime])).getTime();c=new Date(c.getTime()+p);var h=new Date(c.getTime()+a);this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e),this.actionObj.start=new Date(c.getTime()),this.actionObj.end=new Date(h.getTime()),this.updateTimePosition(this.actionObj.start)},i.prototype.calculateResourceGroupingPosition=function(e){var i=this.parent.element.querySelector("."+gt),n=this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)"),a=Math.floor(Math.floor(this.actionObj.Y+i.scrollTop-i.getBoundingClientRect().top)/this.actionObj.cellHeight);a=a<0?0:a>n.length-1?n.length-1:a;var r=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(a),s=r.querySelector("."+Je);s||(s=t.createElement("div",{className:Je}),r.appendChild(s)),s.appendChild(this.actionObj.clone);var o=t.closest(e.target,"td");this.actionObj.groupIndex=o?parseInt(o.getAttribute("data-group-index"),10):this.actionObj.groupIndex,this.actionObj.clone.style.top=t.formatUnit(n.item(a).offsetTop)},i.prototype.getEventWrapper=function(e){var i,n=this.actionObj.clone.classList.contains(Lt);if(this.parent.activeViewOptions.timeScale.enable){var a=n?"."+qt:"."+Je;i=this.parent.element.querySelectorAll(a).item(e)}else{var r=this.parent.element.querySelectorAll("."+De).item(e);(i=r.querySelector("."+Je))||(i=t.createElement("div",{className:Je}),r.appendChild(i))}return i},i.prototype.getAllDayEventHeight=function(){var e=t.createElement("div",{className:lt});this.parent.element.querySelector("."+qt).appendChild(e);var i=e.offsetHeight;return t.remove(e),i},i.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,n=this.actionObj.excludeSelectors.split(",");i<n.length;i++){var a=n[i];if(e.target.classList.contains(a)){t=!0;break}}return t},i.prototype.getModuleName=function(){return"dragAndDrop"},i}(Ba),Ga=function(){function e(e){var t=this;this.customHelper={getDayName:function(e){return t.parent.getDayNames("abbreviated")[e.getDay()]},getDate:function(e){return t.parent.globalize.formatDate(e,{format:"d"})},getTime:function(e){return t.parent.isAdaptive?t.parent.globalize.formatDate(e,{skeleton:"h"}):t.parent.getTimeString(e)},getTimelineDate:function(e){return t.parent.globalize.formatDate(e,{skeleton:"MMMd"})+", "+t.parent.getDayNames("wide")[e.getDay()]}},this.parent=e}return e.prototype.isTimelineView=function(){return-1!==this.parent.currentView.indexOf("Timeline")},e.prototype.createEventTable=function(e){for(var i=t.createElement("div",{className:Re}),n=0;n<e;n++)i.appendChild(t.createElement("div",{className:ot}));return i},e.prototype.collapseRows=function(e){this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(e.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(e.querySelector("."+Re)))},e.prototype.createTableLayout=function(e){var i=e||"",n=t.createElement("table",{className:"e-schedule-table "+i}),a=t.createElement("tbody");return n.appendChild(a),n},e.prototype.createColGroup=function(e,i){var n=i.length;i[0].colSpan&&(n=i.map(function(e){return e.colSpan}).reduce(function(e,t){return e+t}));for(var a=t.createElement("colgroup"),r=0;r<n;r++)a.appendChild(t.createElement("col"));t.prepend([a],e)},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?D():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this,i=this.element.querySelector(".e-date-header-wrap table"),n=i.offsetWidth/i.querySelectorAll("colgroup col").length,a=function(t,i){for(var a,r=0,s=0,o=i?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft,l=0;l<t.length;l++){if((s+=parseInt(t[l].getAttribute("colSpan"),10))>Math.floor(o/n)){a=t[l];break}r+=t[l].offsetWidth}a.children[0].style[i?"right":"left"]=o-r+"px"},r=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"],s=0;s<r.length;s++){var o=[].slice.call(this.element.querySelectorAll(r[s]));o.length>0&&(o.forEach(function(e){e.children[0].style[t.parent.enableRtl?"right":"left"]=""}),a(o,this.parent.enableRtl))}},e.prototype.addAttributes=function(e,i){e.text&&(i.innerHTML=e.text),e.colSpan&&i.setAttribute("colspan",e.colSpan.toString()),e.className&&t.addClass([i],e.className)},e.prototype.getHeaderBarHeight=function(){var e=2;return this.parent.headerModule&&(e+=E(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive&&(e+=this.parent.element.querySelector("."+tt).offsetHeight),e},e.prototype.renderPanel=function(e){e===Pe?t.prepend([this.element],this.parent.element.querySelector("."+Te)):this.parent.element.querySelector("."+Te).appendChild(this.element)},e.prototype.setPanel=function(e){this.element=e},e.prototype.getPanel=function(){return this.element},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector("."+xe)},e.prototype.adjustEventWrapper=function(){},e.prototype.getDateSlots=function(e,t){return[]},e.prototype.generateColumnLevels=function(){return[]},e.prototype.highlightCurrentTime=function(){},e.prototype.startDate=function(){return this.renderDates[0]},e.prototype.endDate=function(){return f(this.renderDates[this.renderDates.length-1],1)},e.prototype.getStartHour=function(){var e=this.parent.globalize.parseDate(this.parent.activeViewOptions.startHour,{skeleton:"Hm"});return t.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.globalize.parseDate(this.parent.activeViewOptions.endHour,{skeleton:"Hm"});return t.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===(new Date).setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===(new Date).getFullYear()&&e.getMonth()===(new Date).getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,i,n,a){return!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(n)&&(i.setMilliseconds(0),n.setMilliseconds(0),!(g(e)<g(i)||g(e)>=g(n)||!this.isWorkDay(e,a)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView)for(var i=p(m(this.parent.selectedDate),this.parent.firstDayOfWeek),n=0,a=7*this.parent.activeViewOptions.interval;n<a;n++)this.parent.activeViewOptions.showWeekend?t.push(i):this.isWorkDay(i,e)&&t.push(i),i=f(i,1);else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView){i=p(m(this.parent.selectedDate),this.parent.firstDayOfWeek),n=0;for(var r=7*this.parent.activeViewOptions.interval;n<r;n++)this.isWorkDay(i,e)&&t.push(i),i=f(i,1)}else{n=0;for(var s=this.parent.activeViewOptions.interval;n<s;n++)t.push(f(m(this.parent.selectedDate),n))}return e||(this.renderDates=t),t},e.prototype.getNextPreviousDate=function(e){if("Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){var t="next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval;if(this.parent.activeViewOptions.showWeekend)return f(this.parent.selectedDate,t);for(var i=f(this.parent.selectedDate,t);!this.isWorkDay(i);)i=f(i,t);return i}return f(this.parent.selectedDate,"next"===e?7*this.parent.activeViewOptions.interval:-7*this.parent.activeViewOptions.interval)},e.prototype.getLabelText=function(e){return this.parent.localeObj.getConstant(e)+" of "+this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long"})},e.prototype.getDateRangeText=function(){return this.parent.isAdaptive?this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y"}):this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])},e.prototype.formatDateRange=function(e,i){var n=this.parent.globalize;if(e===i&&(i=null),!t.isNullOrUndefined(this.parent.activeViewOptions.dateFormat))return i?n.formatDate(e,{format:this.parent.activeViewOptions.dateFormat})+" - "+n.formatDate(i,{format:this.parent.activeViewOptions.dateFormat}):n.formatDate(e,{format:this.parent.activeViewOptions.dateFormat});var a;if(a="en"===this.parent.locale||"en-US"===this.parent.locale?t.getValue("dateFormats.long",t.getDefaultDateObject()):t.getValue("main."+this.parent.locale+".dates.calendars.gregorian.dateFormats.long",t.cldrData),!i)return n.formatDate(e,{format:a});var r=a.trim().toLocaleLowerCase();return"d"===r.substr(0,1)?e.getFullYear()===i.getFullYear()?e.getMonth()===i.getMonth()?n.formatDate(e,{format:"dd"})+" - "+n.formatDate(i,{format:"dd MMMM yyyy"}):n.formatDate(e,{format:"dd MMM"})+" - "+n.formatDate(i,{format:"dd MMM yyyy"}):n.formatDate(e,{format:"dd MMM yyyy"})+" - "+n.formatDate(i,{format:"dd MMM yyyy"}):"m"===r.substr(0,1)?e.getFullYear()===i.getFullYear()?e.getMonth()===i.getMonth()?n.formatDate(e,{format:"MMMM dd"})+" - "+n.formatDate(i,{format:"dd, yyyy"}):n.formatDate(e,{format:"MMM dd"})+" - "+n.formatDate(i,{format:"MMM dd, yyyy"}):n.formatDate(e,{format:"MMM dd, yyyy"})+" - "+n.formatDate(i,{format:"MMM dd, yyyy"}):n.formatDate(e,{format:a})+" - "+n.formatDate(i,{format:a})},e.prototype.getMobileDateElement=function(e,i){return t.createElement("div",{className:i,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(e,{format:"d"})+'</div><div class="e-m-day">'+this.parent.globalize.formatDate(e,{format:"E"})+"</div>"})},e.prototype.setResourceHeaderContent=function(e,i,n){if(void 0===n&&(n="e-text-ellipsis"),this.parent.activeViewOptions.resourceHeaderTemplate){var a=void 0,r={resource:i.resource,resourceData:i.resourceData};(a=this.parent.getResourceHeaderTemplate()(r))&&a.length&&t.append([].slice.call(a),e)}else e.appendChild(t.createElement("div",{className:n,innerHTML:i.resourceData[i.resource.textField]}))},e.prototype.renderResourceMobileLayout=function(){this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree()},e}(),Qa=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.notify(pe,{event:e})},e.prototype.cellClick=function(e){if(!this.isPreventAction(e)){var i=t.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!t.isNullOrUndefined(i)){var n=t.closest(e.target,"."+bt),a=this.parent.getNavigateView(),r=this.parent.currentView===a;if(t.isNullOrUndefined(n)||r||t.isNullOrUndefined(this.parent.viewOptions[a.charAt(0).toLowerCase()+a.slice(1)])){if(this.parent.activeViewOptions.readonly)return void this.parent.quickPopup.quickPopupHide();var s=i.classList.contains(De)||i.classList.contains(we);if(s&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(i);var o=t.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});if(this.parent.trigger(_,o),o.cancel)return;s&&this.parent.selectCell(i),this.parent.notify(_,o)}else{var l=this.parent.getDateFromElement(i);t.isNullOrUndefined(l)||this.parent.isAdaptive||(this.parent.setProperties({selectedDate:l},!0),this.parent.changeView(this.parent.getNavigateView()))}}}},e.prototype.cellDblClick=function(e){if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var i=t.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellDoubleClick"});this.parent.trigger(Y,i),i.cancel||this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}},e.prototype.isPreventAction=function(e){if(t.closest(e.target,"."+bt))return!1;var i=t.closest(e.target,"."+lt+",."+He);return!t.isNullOrUndefined(i)||(i=t.closest(e.target,"."+Ae),!(!this.parent.activeView.isTimelineView()||t.isNullOrUndefined(i)))},e}(),Ka=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xa=function(e){function i(i){var n=e.call(this,i)||this;return n.dateRender=[],n.renderedEvents=[],n.renderedAllDayEvents=[],n.overlapEvents=[],n.moreEvents=[],n.overlapList=[],n.allDayEvents=[],n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.allDayLevel=0,n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.element=n.parent.activeView.getPanel(),n.fields=n.parent.eventFields,n.animation=new t.Animation({progress:n.animationUiUpdate.bind(n)}),n.addEventListener(),n}return Ka(i,e),i.prototype.renderAppointments=function(){var e=this;if([].slice.call(this.parent.element.querySelectorAll("."+lt+",."+Nt)).forEach(function(e){return t.remove(e)}),this.allDayElement=[].slice.call(this.element.querySelectorAll("."+we)),this.setAllDayRowHeight(0),0!==this.parent.eventsProcessed.length){var i=this.element.querySelector("."+Ft);t.EventHandler.remove(i,"click",this.rowExpandCollapse),t.EventHandler.add(i,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.cellHeight=this.element.querySelector("."+De).offsetHeight,this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0&&this.resources.forEach(function(t,i){return e.dateRender[i]=t.renderDates}),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter(function(e,t,i){return t===i.map(function(e){return e.Guid}).indexOf(e.Guid)}),t.removeClass(this.allDayElement,qi),this.slots.push(this.parent.activeView.renderDates.map(function(e){return+e})),this.renderEvents("allDayEvents")),this.parent.notify(re,{}),t.addClass(this.allDayElement,qi)}},i.prototype.renderEvents=function(e){t.removeClass(this.allDayElement,qi);for(var i="allDayEvents"===e?this.sortByDateTime(this.allDayEvents):void 0,n=0,a=0,r=this.getResourceList();a<r.length;a++)for(var s=r[a],o=this.dateRender[s],l=0,c=o.length;l<c;l++){this.renderedEvents=[];for(var p=new Date(o[l].getTime()),h=f(o[l],1),d=0,u=this.filterEvents(p,h,i,this.resources[s]);d<u.length;d++){var v=u[d];this.parent.resourceBase&&this.setValues(v,s),"allDayEvents"===e?this.renderAllDayEvents(v,l,s,n):this.isAllDayAppointment(v)?this.allDayEvents.push(t.extend({},v,null,!0)):this.renderNormalEvents(v,l,s,n),this.cssClass=null,this.groupOrder=null}n+=1}},i.prototype.setValues=function(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[t].cssClass,this.groupOrder=this.resources[t].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)},i.prototype.getResourceList=function(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map(function(e,t){return t})},i.prototype.createAppointmentElement=function(e,i,n,a){var r=this.parent.eventFields,s=e[r.subject]||this.parent.eventSettings.fields.subject.default,o=t.createElement("div",{className:lt,attrs:{"data-id":"Appointment_"+e[r.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":"false","aria-selected":"false","aria-grabbed":"true","aria-label":s}}),l=t.createElement("div",{className:pt});if(o.appendChild(l),this.parent.activeViewOptions.group.resources.length>0){var c=this.parent.isAdaptive?this.parent.uiStateValues.groupIndex:a;o.setAttribute("data-group-index",c.toString())}var p,h=n;if(t.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var d=t.createElement("div",{className:Ti,innerHTML:s});if(i)if(e[r.isAllDay])p=[d];else{p=[];var u=t.createElement("div",{className:ut+(this.parent.isAdaptive?" "+ye:""),innerHTML:this.parent.getTimeString(e[r.startTime])}),v=t.createElement("div",{className:ut+(this.parent.isAdaptive?" "+ye:""),innerHTML:this.parent.getTimeString(e[r.endTime])});t.addClass([d],"e-text-center"),h.isLeft||p.push(u),p.push(d),h.isRight||p.push(v)}else{var m=this.parent.getTimeString(e[r.startTime])+" - "+this.parent.getTimeString(e[r.endTime]);p=[d,t.createElement("div",{className:ut+(this.parent.isAdaptive?" "+ye:""),innerHTML:m}),t.createElement("div",{className:wi,innerHTML:e[r.location]||this.parent.eventSettings.fields.location.default||""})]}}else p=this.parent.getAppointmentTemplate()(e);if(t.append(p,l),!this.parent.isAdaptive&&!t.isNullOrUndefined(e[r.recurrenceRule])){var g=e[r.id]===e[r.recurrenceID]?Ht:It,f=t.createElement("div",{className:ge+" "+g});i?l.appendChild(f):o.appendChild(f)}return this.renderSpannedIcon(i?l:o,h),t.isNullOrUndefined(this.cssClass)||t.addClass([o],this.cssClass),this.applyResourceColor(o,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(o,h),o},i.prototype.createMoreIndicator=function(e,i,n){var a=n+i,r=e[a];if(r.childElementCount<=0){var s=t.createElement("div",{className:Nt,id:Nt+"-"+a.toString()}),o=t.createElement("div",{className:zt,attrs:{tabindex:"0","data-index":a.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});s.appendChild(o),r.appendChild(s),t.EventHandler.add(o,"click",this.rowExpandCollapse,this)}else{var l=r.querySelector("."+zt),c=parseInt(l.getAttribute("data-count"),10)+1;l.setAttribute("data-count",c.toString()),l.innerHTML=l.innerHTML.replace(/[0-9]/g,c.toString())}},i.prototype.renderSpannedIcon=function(e,i){var n=t.createElement("div",{className:Et+" "+ge});if(i.isLeft){var a=n.cloneNode();t.addClass([a],"e-left-icon"),t.prepend([a],e)}if(i.isRight){var r=n.cloneNode();t.addClass([r],"e-right-icon"),t.append([r],e)}if(i.isTop){var s=n.cloneNode();t.addClass([s],"e-up-icon"),t.prepend([s],e)}if(i.isBottom){var o=n.cloneNode();t.addClass([o],"e-down-icon"),t.append([o],e)}},i.prototype.isSpannedEvent=function(e,i,n){var a=m(this.dateRender[n][i]),r=this.parent.eventFields,s=T(a,this.startHour,this.endHour),o=t.extend({},e,null,!0);return o.isSpanned={isBottom:!1,isTop:!1},e[r.startTime].getTime()<s.startHour.getTime()&&(o[r.startTime]=s.startHour,o.isSpanned.isTop=!0),e[r.endTime].getTime()>s.endHour.getTime()&&(o[r.endTime]=s.endHour,o.isSpanned.isBottom=!0),o},i.prototype.renderAllDayEvents=function(e,i,n,a){var r=this,s=this.dateRender[n];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[n][i].getTime()],s=[this.dateRender[n][i]]);var o=this.splitEvent(e,s)[0],l=this.element.querySelector("."+we+":first-child"),c=l.offsetTop,p=new Date(o[this.parent.eventFields.startTime].getTime()),h=new Date(o[this.parent.eventFields.endTime].getTime()),d=0,u=1,v=s[0].getTime()<=p.getTime()&&f(s.slice(-1)[0],1).getTime()>=p.getTime();if(p<=h&&v){var m=[];if(this.renderedAllDayEvents[n]&&(m=this.renderedAllDayEvents[n].filter(function(t){return t.Guid===e.Guid}),this.parent.activeViewOptions.group.byDate&&(m=m.filter(function(e){return e[r.parent.eventFields.startTime]>=s[i]&&e[r.parent.eventFields.endTime]<=f(new Date(+s[i]),1)}))),0===m.length){var g=o.data.count,y=this.getOverlapIndex(o,i,!0,n);o.Index=y,this.allDayLevel=this.allDayLevel<y?y:this.allDayLevel;var T=o.data.isRight?0:"Day"===this.parent.currentView?4:7;g>=0&&(d=100*g-T),t.isNullOrUndefined(this.renderedAllDayEvents[n])&&(this.renderedAllDayEvents[n]=[]),this.renderedAllDayEvents[n].push(t.extend({},o,null,!0));var w=[].slice.call(this.element.querySelector("."+be).children),b=this.parent.activeViewOptions.group.byDate?this.resources.length*i+n:a,C=this.element.querySelector("."+qt+":nth-child("+(b+1)+")"),D=this.createAppointmentElement(e,!0,o.data,n);t.addClass([D],Lt);var O={data:e,element:D,cancel:!1};if(this.parent.trigger($,O),O.cancel)return;C.appendChild(D);var E=D.offsetHeight;if(u+=(0===y?c:c+y*E)+1,t.setStyleAttribute(D,{width:d+"%",top:u+"px"}),y>1){this.moreEvents.push(D);for(var S=0,x=g;S<x;S++)this.createMoreIndicator(w,S,b)}l.setAttribute("data-count",this.allDayLevel.toString());var A=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>2?3*E:(this.allDayLevel+1)*E);this.setAllDayRowHeight(A),this.addOrRemoveClass(),this.wireAppointmentEvents(D,!0)}}},i.prototype.renderNormalEvents=function(e,i,n,a){var r=this.isSpannedEvent(e,i,n),s=r[this.fields.startTime],o=r[this.fields.endTime],l=0,c=T(m(new Date(this.dateRender[n][i].getTime())),this.startHour,this.endHour),p=o.getTime()>c.startHour.getTime()&&s.getTime()<c.endHour.getTime(),h=c.startHour.getTime()<=s.getTime()&&e[this.fields.startTime].getTime()>=c.startHour.getTime()&&e[this.fields.endTime].getTime()<c.endHour.getTime()&&s.getTime()===o.getTime();if(s<=o&&(p||h)){var d=(o.getTime()-s.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;d=d<this.cellHeight?this.cellHeight:d,s.getTime()>c.startHour.getTime()&&(l=this.getTopValue(s,i,n));var u=this.getOverlapIndex(r,i,!1,n);r.Index=u,this.overlapList.push(r),this.overlapList.length>1?(t.isNullOrUndefined(this.overlapEvents[u])&&(this.overlapEvents[u]=[]),this.overlapEvents[u].push(r)):(this.overlapEvents=[],this.overlapEvents.push([r]));var v={index:u,left:"0%",width:(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length+"%",day:i,dayIndex:a,record:r,resource:n},g=this.adjustOverlapElements(v);g.appWidth,t.isNullOrUndefined(this.renderedEvents[n])&&(this.renderedEvents[n]=[]),this.renderedEvents[n].push(t.extend({},r,null,!0));var f=[].slice.call(this.element.querySelectorAll("."+Je)),y=this.createAppointmentElement(e,!1,r.isSpanned,n);t.setStyleAttribute(y,{width:g.appWidth,height:d+"px",top:l+"px"});var w=d-40-15*y.querySelectorAll("."+Et).length,b=y.querySelector("."+Ti);!this.parent.isAdaptive&&b&&(b.style.maxHeight=t.formatUnit(w)),this.parent.enableRtl?t.setStyleAttribute(y,{right:g.appLeft}):t.setStyleAttribute(y,{left:g.appLeft});var C=this.parent.activeViewOptions.group.byDate?this.resources.length*i+n:a,D={data:e,element:y,cancel:!1};if(this.parent.trigger($,D),D.cancel)return;f[C].appendChild(y),this.wireAppointmentEvents(y,!1)}},i.prototype.getTopValue=function(e,t,i){var n=T(m(this.dateRender[i][t]),this.startHour,this.endHour).startHour;return(60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes()))*this.cellHeight*this.slotCount/this.interval},i.prototype.getOverlapIndex=function(e,i,n,a){var s,o=this,l=this.parent.eventFields,c=[],p=-1;if(this.overlapEvents=[],n){if(!t.isNullOrUndefined(this.renderedAllDayEvents[a])){var h=m(new Date(this.dateRender[a][i].getTime()));c=this.renderedAllDayEvents[a].filter(function(e){return m(e[l.startTime]).getTime()<=h.getTime()&&m(e[l.endTime]).getTime()>=h.getTime()}),this.parent.activeViewOptions.group.resources.length>0&&(c=this.filterEventsByResource(this.resources[a],c))}}else{var d=t.isNullOrUndefined(this.renderedEvents[a])?[]:this.renderedEvents[a],u=[];s=new r.Predicate(l.endTime,"greaterthan",e[l.startTime]).and(new r.Predicate(l.startTime,"lessthan",e[l.endTime])),this.overlapList=new r.DataManager({json:d}).executeLocal((new r.Query).where(s)),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[a],this.overlapList)),this.overlapList.forEach(function(e){s=new r.Predicate(l.endTime,"greaterthanorequal",e[l.startTime]).and(new r.Predicate(l.startTime,"lessthanorequal",e[l.endTime]));var t=new r.DataManager({json:d}).executeLocal((new r.Query).where(s));o.parent.activeViewOptions.group.resources.length>0&&(t=o.filterEventsByResource(o.resources[a],t));var i=o.overlapList.filter(function(e){return-1===t.indexOf(e)});return u.concat(i)}),this.overlapList=this.overlapList.concat(u);for(var v=0,g=c=this.overlapList;v<g.length;v++){var f=g[v],y=f.Index;t.isNullOrUndefined(this.overlapEvents[y])?this.overlapEvents[y]=[f]:this.overlapEvents[y].push(f)}}if(c.length>0){var T=c.map(function(e){return e.Index});p=T.length>0?this.getSmallestMissingNumber(T):0}return-1===p?0:p},i.prototype.adjustOverlapElements=function(e){for(var i={appWidth:e.width,appLeft:e.left},n=0,a=this.overlapEvents.length;n<a;n++)if(!t.isNullOrUndefined(this.overlapEvents[n]))for(var r=0,s=this.overlapEvents[n].length;r<s;r++){var o=this.parent.activeViewOptions.group.byDate?this.resources.length*e.day+e.resource:e.dayIndex,l=this.element.querySelector("#e-appointment-wrapper-"+o);if(l.childElementCount>0){var c=this.overlapEvents[n][r].Guid;if(l.querySelectorAll('div[data-guid="'+c+'"]').length>0&&c!==e.record.Guid){var p=l.querySelector('div[data-guid="'+c+'"]');parseFloat(e.width)<=parseFloat(p.style.width)&&(this.parent.enableRtl?p.style.right=(parseFloat(e.width)+1)*n+"%":p.style.left=(parseFloat(e.width)+1)*n+"%",p.style.width=parseFloat(e.width)+"%",i.appWidth=p.style.width)}else{var h=e.width;if(t.isNullOrUndefined(this.overlapEvents[n-1])){h=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length+"%"}i.appWidth=h,i.appLeft=(parseInt(h,0)+1)*e.index+"%"}}}return i},i.prototype.setAllDayRowHeight=function(e){for(var t=0,i=this.allDayElement;t<i.length;t++){i[t].style.height=e/12+"em"}this.animation.animate(this.allDayElement[0])},i.prototype.addOrRemoveClass=function(){var e=this;this.moreEvents.filter(function(i){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(t.addClass([i],Ut),i.setAttribute("tabindex","-1")):(t.removeClass([i],Ut),i.setAttribute("tabindex","0"))});var i=this.element.querySelector("."+Ft);this.parent.uiStateValues.expand?(t.removeClass([i],Bt),t.addClass([i],Wt)):(t.removeClass([i],Wt),t.addClass([i],Bt)),this.allDayLevel>2?t.removeClass([i],ye):t.addClass([i],ye);[].slice.call(this.element.querySelectorAll("."+Nt)).filter(function(i){!e.parent.uiStateValues.expand&&e.allDayLevel>2?t.removeClass([i],ye):t.addClass([i],ye)})},i.prototype.getEventHeight=function(){var e=t.createElement("div",{className:lt,styles:"visibility:hidden"});this.element.querySelector("."+qt+":first-child").appendChild(e);var i=e.offsetHeight;return e.remove(),i},i.prototype.rowExpandCollapse=function(){var e=this.element.querySelector("."+Ft);this.parent.uiStateValues.expand=e.classList.contains(Bt);var t;this.parent.uiStateValues.expand?(e.setAttribute("title","Collapse-all-day-section"),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*this.getEventHeight()+4):(e.setAttribute("title","Expand-all-day-section"),e.setAttribute("aria-label","Expand section"),t=3*this.getEventHeight()+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.animation.animate(e)},i.prototype.animationUiUpdate=function(){this.parent.notify(re,{})},i}(Tn),Ja=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Za=function(e){function i(t){var i=e.call(this,t)||this;return i.renderedEvents=[],i.moreIndicatorHeight=19,i.element=i.parent.activeView.getPanel(),i.fields=i.parent.eventFields,i.addEventListener(),i}return Ja(i,e),i.prototype.renderAppointments=function(){for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+Je));e<i.length;e++){var n=i[e];t.remove(n)}this.eventHeight=this.getElementHeightFromClass(this.element,lt),"Month"===this.parent.currentView?this.monthHeaderHeight=E(this.element.querySelector("."+Ct)):this.monthHeaderHeight=0,this.parent.activeViewOptions.group.resources.length>0?this.renderResourceEvents():this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays)},i.prototype.renderEventsHandler=function(e,t,i){this.renderedEvents=[];var n,a=0;i?(a=i.groupIndex,this.cssClass=i.cssClass,this.groupOrder=i.groupOrder,n=this.parent.eventBase.filterEventsByResource(i),this.workCells=[].slice.call(this.element.querySelectorAll("."+De+'[data-group-index="'+a+'"]'))):(n=this.parent.eventsProcessed,this.workCells=[].slice.call(this.element.querySelectorAll("."+De))),this.sortByDateTime(n),this.cellWidth=this.workCells.slice(-1)[0].offsetWidth,this.cellHeight=this.workCells.slice(-1)[0].offsetHeight,this.dateRender=e,this.getSlotDates(t);for(var r=0,s=n;r<s.length;r++){var o=s[r];this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(o));for(var l=0,c=this.splitEvent(o,this.dateRender);l<c.length;l++){var p=c[l];this.updateIndicatorIcon(p),this.renderEvents(p,a)}}this.cssClass=null,this.groupOrder=null},i.prototype.updateIndicatorIcon=function(e){if(-1!==this.parent.currentView.indexOf("Timeline")&&"TimelineMonth"!==this.parent.currentView&&!e[this.fields.isAllDay]){var t=e.data,i=T(e[this.fields.startTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),n=T(e[this.fields.endTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());t.isLeft=t.isLeft||t[this.fields.startTime].getTime()<i.startHour.getTime(),t.isRight=t.isRight||t[this.fields.endTime].getTime()>n.endHour.getTime()}},i.prototype.renderResourceEvents=function(){for(var e=0,t=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel;e<t.length;e++){var i=t[e];this.renderEventsHandler(i.renderDates,i.workDays,i)}},i.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map(function(e){return+e}),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},i.prototype.getElementHeightFromClass=function(e,i){var n=0,a=t.createElement("div",{className:i}).cloneNode();return a.style.visibility="hidden",a.style.position="absolute",e.appendChild(a),n=E(a),t.remove(a),n},i.prototype.createAppointmentElement=function(e,i){var n=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default,a=t.createElement("div",{className:lt,attrs:{"data-id":"Appointment_"+e[this.fields.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":"false","aria-selected":"false","aria-grabbed":"true","aria-label":n}});t.isNullOrUndefined(this.cssClass)||t.addClass([a],this.cssClass);var r=t.createElement("div",{className:pt});a.appendChild(r),this.parent.activeViewOptions.group.resources.length>0&&a.setAttribute("data-group-index",i.toString());var s,o=e.data;if(t.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var l=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",c=t.createElement("div",{className:Ti,innerHTML:n+(l?";&nbsp"+l:"")}),p=t.createElement("div",{className:ut+(this.parent.isAdaptive?" "+ye:""),innerHTML:this.parent.getTimeString(o[this.fields.startTime])}),h=t.createElement("div",{className:ut+(this.parent.isAdaptive?" "+ye:""),innerHTML:this.parent.getTimeString(o[this.fields.endTime])});if("Month"===this.parent.currentView)e[this.fields.isAllDay]?(s=[c],t.addClass([c],"e-text-center")):o.count<=1&&!o.isLeft&&!o.isRight?s=[p,c]:(s=[],t.addClass([c],"e-text-center"),o.isLeft||s.push(p),s.push(c),o.isRight||s.push(h));else{var d=void 0;if(e[this.fields.isAllDay]){d=[c,t.createElement("div",{className:ut,innerHTML:this.parent.localeObj.getConstant("allDay")})]}else{var u=this.parent.getTimeString(o[this.fields.startTime])+" - "+this.parent.getTimeString(o[this.fields.endTime]);d=[c,t.createElement("div",{className:ut+(this.parent.isAdaptive?" "+ye:""),innerHTML:u}),t.createElement("div",{className:wi,innerHTML:l})]}var v=t.createElement("div",{className:"e-inner-wrap"});t.append(d,v),s=[v]}}else s=this.parent.getAppointmentTemplate()(e);return t.append([].slice.call(s),r),this.appendEventIcons(e,r),this.renderResizeHandler(a,e.data),a},i.prototype.appendEventIcons=function(e,i){var n=e.data;if(!t.isNullOrUndefined(e[this.fields.recurrenceRule])){var a=e[this.fields.id]===e[this.fields.recurrenceID]?Ht:It;i.appendChild(t.createElement("div",{className:ge+" "+a+(this.parent.isAdaptive?" "+ye:"")}))}if(n.isLeft){var r=t.createElement("div",{className:Et+" "+ge+" e-left-icon"});t.prepend([r],i)}if(n.isRight){var s=t.createElement("div",{className:Et+" "+ge+" e-right-icon"});t.append([s],i)}},i.prototype.renderEvents=function(e,i){var n=e[this.fields.startTime],a=e[this.fields.endTime],r=this.parent.getIndexOfDate(this.dateRender,m(n));if(!(r<0)){var s=this.getIndex(n);e.Index=s;var o=this.eventHeight;this.renderedEvents.push(t.extend({},e,null,!0));var l=e.data.count;if(n.getTime()<=a.getTime()){var c=l*this.cellWidth-3,p=this.workCells[r],h=s*(o+0);if(this.cellHeight>this.monthHeaderHeight+(s+1)*(o+0)+this.moreIndicatorHeight){var d=this.createAppointmentElement(e,i);this.applyResourceColor(d,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(d),t.setStyleAttribute(d,{width:c+"px",top:h+"px"}),this.renderEventElement(e,d,p)}else for(var u=0;u<l;u++){var v=this.workCells[r+u];if(v&&t.isNullOrUndefined(v.querySelector("."+zt))){var g=new Date(this.dateRender[r+u].getTime()),y=f(this.dateRender[r+u],1),T=v.getAttribute("data-group-index"),w=this.getFilteredEvents(g,y,T),b=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight,C=Math.floor(b/(o+0)),D=w.length-C<=0?1:w.length-C,O=this.getMoreIndicatorElement(D,g,y);t.isNullOrUndefined(T)||O.setAttribute("data-group-index",T),O.style.top=b+"px",O.style.width=v.offsetWidth-2+"px",this.renderElement(v,O),t.EventHandler.add(O,"click",this.moreIndicatorClick,this)}}}}},i.prototype.getFilteredEvents=function(e,i,n){var a;if(t.isNullOrUndefined(n))a=this.filterEvents(e,i);else{var r=this.parent.resourceBase.lastResourceLevel[parseInt(n,10)];a=this.filterEvents(e,i,void 0,r)}return a},i.prototype.getOverlapEvents=function(e,t){for(var i=[],n=0,a=t;n<a.length;n++){var r=a[n];m(r[this.fields.startTime]).getTime()<=m(e).getTime()&&m(r[this.fields.endTime]).getTime()>=m(e).getTime()&&i.push(r)}return i},i.prototype.getIndex=function(e){var t=-1,i=this.renderedEvents;if(i.length>0){var n=this.getOverlapEvents(e,i).map(function(e){return e.Index});t=n.length>0?this.getSmallestMissingNumber(n):0}return-1===t?0:t},i.prototype.moreIndicatorClick=function(e){var i=t.closest(e.target,"."+zt),n=new Date(parseInt(i.getAttribute("data-start-date"),10));if(!t.isNullOrUndefined(n)&&this.parent.isAdaptive)this.parent.setProperties({selectedDate:n},!0),this.parent.changeView(this.parent.getNavigateView());else{var a=new Date(parseInt(i.getAttribute("data-end-date"),10)),r=i.getAttribute("data-group-index"),s={date:n,event:this.getFilteredEvents(n,a,r),element:e.target};this.parent.quickPopup.moreEventClick(s,a,r)}},i.prototype.renderEventElement=function(e,t,i){var n={data:e,element:t,cancel:!1};this.parent.trigger($,n),n.cancel?this.renderedEvents.pop():this.renderElement(i,t)},i.prototype.renderElement=function(e,i){if(e.querySelector("."+Je))e.querySelector("."+Je).appendChild(i);else{var n=t.createElement("div",{className:Je});n.appendChild(i),e.appendChild(n)}},i.prototype.getMoreIndicatorElement=function(e,i,n){return t.createElement("div",{className:zt,innerHTML:"+"+e+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more")),attrs:{tabindex:"0","data-start-date":i.getTime().toString(),"data-end-date":n.getTime().toString()}})},i}(Tn),$a=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),er=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-day-view",i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i.dateHeaderTemplate='<div class="e-header-day">${getDayName(date)}</div><div class="e-header-date e-navigate" role="link">${getDate(date)}</div>',i.workCellAction=new Qa(t),i}return $a(i,e),i.prototype.addEventListener=function(){this.parent.on(oe,this.scrollUiUpdate,this),this.parent.on(ae,this.renderEvents,this)},i.prototype.removeEventListener=function(){this.parent.off(oe,this.scrollUiUpdate),this.parent.off(ae,this.renderEvents)},i.prototype.renderEvents=function(){if(this.parent.activeViewOptions.timeScale.enable){new Xa(this.parent).renderAppointments()}else{new Za(this.parent).renderAppointments()}},i.prototype.onContentScroll=function(e){var i=e.target;this.scrollLeftPanel(i),this.scrollTopPanel(i),this.parent.isAdaptive||(this.parent.uiStateValues.top=i.scrollTop),this.parent.uiStateValues.left=i.scrollLeft,t.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide()},i.prototype.onApaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},i.prototype.onApaptiveScroll=function(e){this.parent.uiStateValues.top=e.target.scrollTop},i.prototype.scrollLeftPanel=function(e){var i=this.getLeftPanelElement();t.isNullOrUndefined(i)||(i.scrollTop=e.scrollTop)},i.prototype.scrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getLeftPanelElement(),n=this.getScrollableElement(),a=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-t-a.offsetHeight;this.setContentHeight(n,i,r);var s=D();n.offsetWidth-n.clientWidth>0?(a.firstChild.style[e.cssProperties.border]=s>0?"1px":"0px",a.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(a.firstChild.style[e.cssProperties.border]="",a.style[e.cssProperties.padding]=""),this.parent.uiStateValues.isInitial||this.isTimelineView()?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=this.isTimelineView()):n.scrollTop=this.parent.uiStateValues.top,this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime()},i.prototype.setContentHeight=function(e,i,n){this.parent.isAdaptive&&!this.isTimelineView()?e.style.height=t.formatUnit(n):(t.isNullOrUndefined(i)||(i.style.height=t.formatUnit(n-this.getScrollXIndent(e))),e.style.height=t.formatUnit(n))},i.prototype.scrollToWorkHour=function(){if(this.parent.workHours.highlight){var e=this.element.querySelector("."+Oe);e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},i.prototype.scrollToHour=function(e){var i=this.parent.globalize.parseDate(e,{skeleton:"Hm"});t.isNullOrUndefined(i)||(this.getScrollableElement().scrollTop=this.getTopFromDateTime(i))},i.prototype.generateColumnLevels=function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.uiStateValues.isGroupAdaptive){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],n=i.resourceData[i.resource.startHourField],a=i.resourceData[i.resource.endHourField];t=[this.getDateSlots(i.renderDates,i.workDays,n,a)]}}else t.push(e);return this.colLevels=t,t},i.prototype.getDateSlots=function(e,t,i,n){void 0===i&&(i=this.parent.workHours.start),void 0===n&&(n=this.parent.workHours.end);for(var a=[],r=this.parent.globalize.parseDate(i,{skeleton:"Hm"}),s=this.parent.globalize.parseDate(n,{skeleton:"Hm"}),o=0,l=e;o<l.length;o++){var c=l[o],p=[Ae];this.isCurrentDate(c)&&p.push(ke),a.push({date:c,type:"dateHeader",className:p,colSpan:1,workDays:t,startHour:new Date(+r),endHour:new Date(+s)})}return a},i.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},i.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.showTimeIndicator&&this.isWorkHourRange(new Date)){this.getCurrentTimeIndicatorIndex().length>0?(this.changeCurrentTimePosition(),t.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval(function(){e.changeCurrentTimePosition()},6e4))):this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(!t.isNullOrUndefined(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)for(var i=0,n=0,a=this.parent.resourceBase.lastResourceLevel;n<a.length;n++){var r=a[n];if((o=this.parent.getIndexOfDate(r.renderDates,m(new Date)))>=0){var s=this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*o+i:i+o;e.push(s)}i+=this.parent.activeViewOptions.group.byDate?1:r.renderDates.length}else{var o,l=this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates;(o=this.parent.getIndexOfDate(l,m(new Date)))>=0&&e.push(o)}return e},i.prototype.clearCurrentTimeIndicatorTimer=function(){t.isNullOrUndefined(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},i.prototype.removeCurrentTimeIndicatorElements=function(){[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time")).forEach(function(e){return t.remove(e)})},i.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),i=this.parent.getContentTable().rows[0],n=this.getTopFromDateTime(new Date),a=t.formatUnit(n),r=Math.floor(n/i.cells[0].offsetHeight);if(!t.isNullOrUndefined(r)&&!isNaN(r)){for(var s=this.element.querySelectorAll("."+Xe),o=0,l=e[0];o<l;o++)s[o].appendChild(t.createElement("div",{className:Ge,styles:"top:"+a}));for(var c=0,p=e;c<p.length;c++){s[p[c]].appendChild(t.createElement("div",{className:Ye,styles:"top:"+a}))}var h=t.createElement("div",{innerHTML:this.parent.getTimeString(new Date),className:_e,styles:"top:"+a}),d=this.getLeftPanelElement();t.removeClass(d.querySelectorAll("."+Qe),Qe),t.addClass([d.querySelectorAll("tr")[r].lastChild],Qe),t.prepend([h],d),h.style.top=t.formatUnit(h.offsetTop-h.offsetHeight/2)}}},i.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},i.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},i.prototype.getTdContent=function(e,i,n){var a;switch(i){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){var r={date:e,type:i};a=this.parent.getDateHeaderTemplate()(r)}else a=t.compile(this.dateHeaderTemplate,this.customHelper)({date:e});break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){r={date:e,type:i};a=this.parent.getMajorSlotTemplate()(r)}else a=t.compile("<span>${getTime(date)}</span>",this.customHelper)({date:e});break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){r={date:e,type:i};a=this.parent.getMinorSlotTemplate()(r)}else a=t.compile("&nbsp;",this.customHelper)({date:e});break;case"alldayCells":if(this.parent.cellTemplate){r={date:e,type:i,groupIndex:n};a=this.parent.getCellTemplate()(r)}}return a},i.prototype.renderLayout=function(e){this.setPanel(t.createElement("div",{className:vt}));var i=[this.baseCssClass,this.viewClass];i.push(e),this.parent.activeViewOptions.group.byDate&&i.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||t.addClass([this.element],["e-timescale-disable",this.viewClass]),this.renderPanel(e),t.addClass([this.element],i),this.element.appendChild(this.createTableLayout(mt)),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+$e)&&this.renderResourceMobileLayout(),this.parent.notify(re,{})},i.prototype.renderHeader=function(){var e=t.createElement("tr"),i=t.createElement("td");if(i.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var n=t.createElement("td",{className:"e-left-indent"});n.appendChild(this.renderLeftIndent()),e.appendChild(n)}e.appendChild(i),t.prepend([e],this.element.querySelector("tbody"))},i.prototype.renderContent=function(){var e=t.createElement("tr"),i=t.createElement("td");if(this.parent.isAdaptive){i.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var n=t.createElement("div",{className:Ke});this.parent.activeViewOptions.timeScale.enable&&n.appendChild(this.renderTimeCells()),n.appendChild(this.renderContentArea()),i.appendChild(n),t.EventHandler.add(n,"scroll",this.onApaptiveScroll,this),t.EventHandler.add(n,t.Browser.touchMoveEvent,this.onApaptiveMove,this),e.appendChild(i)}else{if(i.appendChild(this.renderContentArea()),this.parent.activeViewOptions.timeScale.enable){var a=t.createElement("td");a.appendChild(this.renderTimeCells()),e.appendChild(a)}e.appendChild(i)}this.element.querySelector("tbody").appendChild(e)},i.prototype.renderLeftIndent=function(){for(var e=t.createElement("div",{className:"e-left-indent-wrap"}),i=this.createTableLayout(),n=t.createElement("tr"),a=this.colLevels.length,r=0;r<a;r++){var s=n.cloneNode(),o={className:[this.colLevels[r][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==o.className.indexOf(Ae)){o.className.push(at);var l=u(this.renderDates.slice(-1)[0]);o.text='<span title="'+this.parent.localeObj.getConstant("week")+" "+l+'">'+l+"</span>"}s.appendChild(this.createTd(o)),i.querySelector("tbody").appendChild(s)}var c=n.cloneNode(),p=t.createElement("div",{attrs:{tabindex:"0",title:"Expand-all-day-section","aria-disabled":"false","aria-label":"Expand section"},className:Ft+" "+Bt+" "+ge+" "+ye}),h={className:[we],type:"emptyCells"},d=this.createTd(h);return d.appendChild(p),c.appendChild(d),i.querySelector("tbody").appendChild(c),e.appendChild(i),e},i.prototype.renderDatesHeader=function(){var e=t.createElement("div",{className:xe}),i=t.createElement("div",{className:Se});e.appendChild(i);var n=this.createTableLayout(),a=t.createElement("tr"),r=this.colLevels.length,s=this.colLevels[r-1];this.createColGroup(n,s);for(var o=0;o<r;o++){var l=a.cloneNode();t.addClass([l],"e-header-row");for(var c=this.colLevels[o],p=0;p<c.length;p++)l.appendChild(this.createTd(c[p]));n.querySelector("tbody").appendChild(l)}return this.createAllDayRow(n,s),i.appendChild(n),e},i.prototype.createAllDayRow=function(e,i){var n=t.createElement("tr");t.addClass([n],be);for(var a=0;a<i.length;a++){var r=t.extend({},i[a]);r.className=[we],r.type="alldayCells";var s=this.createTd(r);s.setAttribute("data-date",r.date.getTime().toString()),t.isNullOrUndefined(r.groupIndex)||s.setAttribute("data-group-index",""+r.groupIndex),this.wireCellEvents(s),n.appendChild(s)}e.querySelector("tbody").appendChild(n);var o=t.createElement("thead");o.appendChild(this.createEventWrapper("allDay")),t.prepend([o],e)},i.prototype.createTd=function(e){var i=t.createElement("td");if(this.addAttributes(e,i),e.date&&e.type){var n=this.getTdContent(e.date,e.type,e.groupIndex);n&&n.length&&t.append([].slice.call(n),i)}"resourceHeader"===e.type&&this.setResourceHeaderContent(i,e),"dateHeader"===e.type&&e.className.indexOf(Ae)>=0&&(i.setAttribute("data-date",e.date.getTime().toString()),t.isNullOrUndefined(e.groupIndex)||i.setAttribute("data-group-index",""+e.groupIndex),t.EventHandler.add(i,"click",this.workCellAction.cellClick,this.workCellAction),t.EventHandler.add(i,"dblclick",this.workCellAction.cellDblClick,this.workCellAction));var a={elementType:e.type,element:i,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(J,a),i},i.prototype.wireCellEvents=function(e){t.EventHandler.add(e,"mousedown",this.workCellAction.cellMouseDown,this.workCellAction),t.EventHandler.add(e,"click",this.workCellAction.cellClick,this.workCellAction),t.EventHandler.add(e,"dblclick",this.workCellAction.cellDblClick,this.workCellAction)},i.prototype.renderTimeCells=function(){var e=this,i=t.createElement("div",{className:We}),n=this.createTableLayout(),a=t.createElement("tr");return this.getTimeSlotRows(function(t){t.type=t.first?"majorSlot":"minorSlot",t.className=t.last?["e-time-cells"]:[];var i=a.cloneNode(),r={date:t.date,type:t.type,className:t.className};return i.appendChild(e.createTd(r)),n.querySelector("tbody").appendChild(i),t}),i.appendChild(n),i},i.prototype.renderContentArea=function(){var e=t.createElement("div",{className:gt}),i=this.createTableLayout(Ce);return this.createColGroup(i,this.colLevels.slice(-1)[0]),this.renderContentTable(i),e.appendChild(i),this.wireCellEvents(i.querySelector("tbody")),t.EventHandler.add(e,"scroll",this.onContentScroll,this),t.EventHandler.add(e,t.Browser.touchMoveEvent,this.onApaptiveMove,this),e},i.prototype.renderContentTable=function(e){var i=this,n=t.createElement("tr",{attrs:{role:"row"}}),a=t.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),r=e.querySelector("tbody");this.getTimeSlotRows(function(e){for(var t=n.cloneNode(),s=0,o=i.colLevels[i.colLevels.length-1];s<o.length;s++){var l=o[s],c=i.createContentTd(l,e,a);t.appendChild(c)}return r.appendChild(t),e}),this.renderContentTableHeader(e)},i.prototype.createContentTd=function(e,i,n){var a=n.cloneNode();e.colSpan&&a.setAttribute("colspan",e.colSpan.toString());var r=this.getContentTdClass(i),s=m(new Date(""+e.date));v(s,g(i.date));var o="workCells";if(-1!==e.className.indexOf(Le)&&(r.push(He),o="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(s,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(s,e.workDays))&&r.push(Oe),t.addClass([a],r),this.parent.cellTemplate){var l={date:s,type:o,groupIndex:e.groupIndex};t.append([].slice.call(this.parent.getCellTemplate()(l)),a)}if(a.setAttribute("data-date",s.getTime().toString()),!t.isNullOrUndefined(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var c=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;a.setAttribute("data-group-index",""+c)}var p={elementType:o,element:a,date:s,groupIndex:e.groupIndex};return this.parent.trigger(J,p),a},i.prototype.getContentTdClass=function(e){return e.last?[De]:[De,ze]},i.prototype.renderContentTableHeader=function(e){var i=t.createElement("thead");i.appendChild(this.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&i.appendChild(this.createEventWrapper("timeIndicator")),t.prepend([i],e)},i.prototype.createEventWrapper=function(e){void 0===e&&(e="");var i=t.createElement("tr");return this.colLevels.slice(-1)[0].forEach(function(n,a){var r=t.createElement("td",{className:"allDay"===e?qt:"timeIndicator"===e?Xe:Ze,attrs:{"data-date":n.date.getTime().toString()}});if(t.isNullOrUndefined(n.groupIndex)||r.setAttribute("data-group-index",n.groupIndex.toString()),""===e){var s=t.createElement("div",{id:Je+"-"+a.toString(),className:Je});r.appendChild(s)}i.appendChild(r)}),i},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&-1===this.parent.currentView.indexOf("Timeline")?this.element.querySelector("."+Ke):this.getContentAreaElement()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+We)},i.prototype.getContentAreaElement=function(){return this.element.querySelector("."+gt)},i.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},i.prototype.getTimeSlotRows=function(e){var t=[],i=this.getStartHour(),n=this.getEndHour(),a=6e4*this.parent.activeViewOptions.timeScale.interval,r=a/this.parent.activeViewOptions.timeScale.slotCount,s=Math.round(de/r),o=i.getTime(),l=n.getTime();o!==l&&(s=Math.round((l-o)/r)),this.parent.activeViewOptions.timeScale.enable||(s=1);for(var c=new Date(o),p=this.parent.globalize.parseDate(this.parent.workHours.start,{skeleton:"Hm"}),h=this.parent.globalize.parseDate(this.parent.workHours.end,{skeleton:"Hm"}),d=0;d<s;d++){var u=d%(a/r),v={date:new Date(""+c),startHour:p,endHour:h,first:0===u,middle:u<this.parent.activeViewOptions.timeScale.slotCount-1,last:u===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(v),t.push(v),c.setMilliseconds(r)}return t},i.prototype.getModuleName=function(){return"verticalView"},i.prototype.destroy=function(){this.parent.isDestroyed||(this.clearCurrentTimeIndicatorTimer(),this.element&&(t.EventHandler.remove(this.getContentAreaElement(),"scroll",this.onContentScroll),this.parent.resourceBase&&this.parent.resourceBase.destroy(),t.remove(this.element),this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues()))},i}(Ga),tr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ir=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-day-view",i}return tr(t,e),t.prototype.getModuleName=function(){return"day"},t}(er),nr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ar=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-week-view",i}return nr(t,e),t.prototype.getModuleName=function(){return"week"},t}(er),rr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sr=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-work-week-view",i}return rr(t,e),t.prototype.getModuleName=function(){return"workWeek"},t}(er),or=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lr=function(e){function i(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.viewClass="e-month-view",i.isInverseTableSelect=!1,i.monthDates={},i.workCellAction=new Qa(t),i}return or(i,e),i.prototype.addEventListener=function(){this.parent.on(oe,this.onScrollUIUpdate,this),this.parent.on(ae,this.onDataReady,this),this.parent.on(_,this.onCellClick,this)},i.prototype.removeEventListener=function(){this.parent.off(oe,this.onScrollUIUpdate),this.parent.off(ae,this.onDataReady),this.parent.off(_,this.onCellClick)},i.prototype.onDataReady=function(e){new Za(this.parent).renderAppointments()},i.prototype.onCellClick=function(e){},i.prototype.onContentScroll=function(e){this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target)},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+nt)},i.prototype.onScrollUIUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),a=this.parent.element.offsetHeight-t-i.offsetHeight,r=this.getLeftPanelElement();this.setContentHeight(n,r,a);var s=D();n.offsetWidth-n.clientWidth>0?(i.firstChild.style[e.cssProperties.border]=s>0?"1px":"0px",i.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(i.firstChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")},i.prototype.setContentHeight=function(e,i,n){e.style.height="auto","Month"===this.parent.currentView&&(e.style.height=t.formatUnit(n)),i&&("MonthAgenda"===this.parent.currentView&&(n=this.element.querySelector("."+Ce).offsetHeight),i.style.height="auto",i.style.height=t.formatUnit(n-this.getScrollXIndent(e)))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),"MonthAgenda"===this.parent.currentView&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots(i.renderDates,i.workDays)]}}else e.push(t);return this.colLevels=e,e},i.prototype.getDateSlots=function(e,t){for(var i=this.parent.activeViewOptions.showWeekend?7:t.length,n=[],a=0;a<i;a++){var r=[Ae],s=e.slice(0,i).map(function(e){return e.getDay()});this.isCurrentMonth(this.parent.selectedDate)&&s.indexOf((new Date).getDay())===a&&r.push(ke),n.push({date:e[a],type:"monthDay",className:r,colSpan:1,workDays:t})}return n},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"},i.prototype.renderLayout=function(e){this.dayNameFormat=this.getDayNameFormat(),this.setPanel(t.createElement("div",{className:vt}));var i=[this.viewClass];i.push(e),this.parent.activeViewOptions.group.byDate&&i.push("e-by-date"),t.addClass([this.element],i),this.renderPanel(e),this.element.appendChild(this.createTableLayout(mt)),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var n="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!n.querySelector("."+$e)&&this.renderResourceMobileLayout(),this.parent.notify(re,{})},i.prototype.wireCellEvents=function(e){t.EventHandler.add(e,"mousedown",this.workCellAction.cellMouseDown,this.workCellAction),t.EventHandler.add(e,"click",this.workCellAction.cellClick,this.workCellAction),t.EventHandler.add(e,"dblclick",this.workCellAction.cellDblClick,this.workCellAction)},i.prototype.renderHeader=function(){var e=t.createElement("tr");this.renderLeftIndent(e);var i=t.createElement("td");i.appendChild(this.renderDatesHeader()),e.appendChild(i),t.prepend([e],this.element.querySelector("tbody"))},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(t.createElement("td",{className:"e-left-indent"}))},i.prototype.renderContent=function(){var e=t.createElement("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var i=t.createElement("td"),n=t.createElement("div",{className:gt}),a=this.renderContentArea();if("Month"===this.parent.currentView)n.appendChild(a);else{var r=t.createElement("div",{className:Te});r.appendChild(a),n.appendChild(r)}t.EventHandler.add(n,"scroll",this.onContentScroll,this),i.appendChild(n),e.appendChild(i),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()},i.prototype.renderWeekNumberContent=function(){var e=this.renderDates.map(function(e){return new Date(+e)}),i=t.createElement("td"),n=t.createElement("div",{className:nt});i.appendChild(n);var a=this.createTableLayout();n.appendChild(a);for(var r=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,s=0,o=this.renderDates.length/r;s<o;s++){var l=u(e.splice(0,r).slice(-1)[0]).toString();a.querySelector("tbody").appendChild(this.createWeekNumberElement(l))}return i},i.prototype.renderAppointmentContainer=function(){},i.prototype.renderDatesHeader=function(){var e=t.createElement("div",{className:xe}),i=t.createElement("div",{className:Se});e.appendChild(i);var n=this.createTableLayout();this.createColGroup(n,this.colLevels[this.colLevels.length-1]);for(var a=t.createElement("tr"),r=0;r<this.colLevels.length;r++){for(var s=this.colLevels[r],o=a.cloneNode(),l=0;l<s.length;l++){var c=s[l];o.appendChild(this.createHeaderCell(c))}n.querySelector("tbody").appendChild(o)}return i.appendChild(n),e},i.prototype.createHeaderCell=function(e){var i=t.createElement("td");if(this.addAttributes(e,i),"monthDay"===e.type){var n=t.createElement("span",{innerHTML:this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()]});i.appendChild(n)}if("resourceHeader"===e.type&&this.setResourceHeaderContent(i,e),"dateHeader"===e.type){if(t.addClass([i],Ct),i.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var a={date:e.date,type:e.type};(n=this.parent.getDateHeaderTemplate()(a))&&n.length&&t.append([].slice.call(n),i)}else{n=t.createElement("span",{className:bt});var r=this.parent.globalize.formatDate(e.date,{skeleton:"full"});n.setAttribute("title",r),n.innerHTML=1!==e.date.getDate()||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d"}):this.parent.globalize.formatDate(e.date,{format:"MMM d"}),i.appendChild(n)}this.wireCellEvents(i)}var s={elementType:e.type,element:i,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(J,s),i},i.prototype.getContentSlots=function(){var e=[],t=function(t,i,n,a){var r={date:new Date(+i),groupIndex:n.groupIndex,workDays:n.workDays,type:"monthCells",className:a||[De]};e[t]||(e[t]=[]),e[t].push(r)},i="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!i||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate)for(d=this.renderDates.map(function(e){return new Date(+e)}),u=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,v=0;v<this.renderDates.length/u;v++)for(var n=0,a=d.splice(0,u);n<a.length;n++){f=a[n];if(i)for(var r=this.colLevels[this.colLevels.length-1],s=r.slice(0,r.length/u),o=0;o<s.length;o++){var l=void 0;0!==o&&(l=[De,"e-disable-date"]),t(v,f,s[o],l)}else t(v,f,this.colLevels[this.colLevels.length-1][0])}else for(var c=0,p=this.colLevels[this.colLevels.length-2];c<p.length;c++)for(var h=p[c],d=h.renderDates.map(function(e){return new Date(+e)}),u=this.parent.activeViewOptions.showWeekend?7:h.workDays.length,v=0;v<h.renderDates.length/u;v++)for(var m=0,g=d.splice(0,u);m<g.length;m++){var f;t(v,f=g[m],h)}return e},i.prototype.updateClassList=function(e){this.isOtherMonth(e.date)&&e.className.push("e-other-month"),"MonthAgenda"===this.parent.currentView&&this.parent.isSelectedDate(e.date)&&e.className.push(it)},i.prototype.isOtherMonth=function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()},i.prototype.renderContentArea=function(){var e=this.createTableLayout(Ce);"TimelineMonth"===this.parent.currentView&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var t=new Date(this.parent.selectedDate.getTime());return this.monthDates={start:h(t),end:d(y(t,this.parent.activeViewOptions.interval-1))},this.renderContentTable(e),this.wireCellEvents(e.querySelector("tbody")),e},i.prototype.renderContentTable=function(e){for(var i=e.querySelector("tbody"),n=t.createElement("tr",{attrs:{role:"row"}}),a=t.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),r=this.getContentSlots(),s=0;s<r.length;s++){for(var o=n.cloneNode(),l=0;l<r[s].length;l++){var c=this.createContentTd(r[s][l],a);o.appendChild(c)}i.appendChild(o)}},i.prototype.createContentTd=function(e,i){var n=i.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var a=e.type;if(-1!==e.className.indexOf(Le)&&(e.className.push(He),a="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push("e-work-days"),this.isCurrentDate(e.date)&&e.className.push(Ve),t.addClass([n],e.className),n.setAttribute("data-date",e.date.getTime().toString()),!t.isNullOrUndefined(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;n.setAttribute("data-group-index",""+r)}if(this.renderDateHeaderElement(e,n),this.parent.cellTemplate){var s={date:e.date,type:a,groupIndex:e.groupIndex};t.append([].slice.call(this.parent.getCellTemplate()(s)),n)}var o={elementType:a,element:n,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(J,o),n},i.prototype.getContentAreaElement=function(){return this.element.querySelector("."+gt)},i.prototype.renderDateHeaderElement=function(e,i){if("TimelineMonth"!==this.parent.currentView){var n=t.createElement("div",{className:Ct});n.innerHTML=1!==e.date.getDate()||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d"}):this.parent.globalize.formatDate(e.date,{format:"MMM d"}),i.appendChild(n),"month"===this.getModuleName()&&t.addClass([n],bt)}},i.prototype.getMonthStart=function(e){var t=p(h(e),this.parent.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.prototype.getMonthEnd=function(e){return f(p(d(y(e,this.parent.activeViewOptions.interval-1)),this.parent.firstDayOfWeek),6)},i.prototype.getRenderDates=function(e){var t=[],i=m(this.parent.selectedDate),n=this.getMonthStart(i),a=this.getMonthEnd(i);do{this.parent.activeViewOptions.showWeekend?t.push(n):this.isWorkDay(n,e)&&t.push(n),n=f(n,1)}while(n.getTime()<=a.getTime());return e||(this.renderDates=t),t},i.prototype.getNextPreviousDate=function(e){return y(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval)},i.prototype.getEndDateFromStartDate=function(e){return f(new Date(e.getTime()),1)},i.prototype.getDateRangeText=function(){if(this.parent.isAdaptive||t.isNullOrUndefined(this.parent.activeViewOptions.dateFormat)){if(this.parent.activeViewOptions.interval>1){var e=y(d(this.parent.selectedDate),this.parent.activeViewOptions.interval-1);if(this.parent.selectedDate.getFullYear()===e.getFullYear()){return this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM"})+" - "+this.parent.globalize.formatDate(e,{format:"MMMM "})+e.getFullYear()}return this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM"})+" "+this.parent.selectedDate.getFullYear()+" - "+this.parent.globalize.formatDate(e,{format:"MMMM "})+e.getFullYear()}return this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y"})}return this.formatDateRange(this.parent.selectedDate)},i.prototype.getLabelText=function(e){return this.parent.localeObj.getConstant(e)+" of "+this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y"})},i.prototype.createWeekNumberElement=function(e){var i=t.createElement("tr"),n=t.createElement("td",{className:at,attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});i.appendChild(n);var a={elementType:"weekNumberCell",element:n};return this.parent.trigger(J,a),i},i.prototype.unwireEvents=function(){},i.prototype.getModuleName=function(){return"month"},i.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unwireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),t.remove(this.element),this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues())},i}(Ga),cr=function(){function e(e){this.parent=e,this.viewBase=new Ga(e)}return e.prototype.createAgendaContentElement=function(e,i,n,a,r){var s;if("noEvents"===e){var o=[{subject:this.parent.localeObj.getConstant("noEvents")}];s=c.ListBase.createList(this.parent.createElement,o,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:"<div class=e-no-event>${subject}</div>"})}else{s=c.ListBase.createList(this.parent.createElement,i,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass});for(var l=0,p=i.length;l<p;l++){var h=t.createElement("div",{className:lt,attrs:{"data-id":"Appointment_"+i[l][this.parent.eventFields.id],"data-guid":i[l].Guid,role:"button",tabindex:"0","aria-readonly":"false","aria-selected":"false","aria-grabbed":"true","aria-label":i[l][this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default}});t.isNullOrUndefined(r)||h.setAttribute("data-group-index",r.toString()),this.parent.eventBase.applyResourceColor(h,i[l],"borderColor",a);var d=void 0;d=t.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)?this.createAppointment(i[l]):this.parent.getAppointmentTemplate()(i[l]),t.append([].slice.call(d),h),s.children[l].innerHTML=h.outerHTML;var u={data:i[l],element:s.children[l],cancel:!1};this.parent.trigger($,u),u.cancel&&t.remove(s.children[l])}}return n.appendChild(s),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&t.addClass([n],"e-day-border"),n},e.prototype.createAppointment=function(e){var i=this.parent.eventFields,n=e[i.subject]||this.parent.eventSettings.fields.subject.default,a=e[i.location]||this.parent.eventSettings.fields.location.default,r=t.createElement("div",{className:ht});if(t.isNullOrUndefined(a)||""===a||(n+=","),r.appendChild(t.createElement("div",{className:Ti,innerHTML:n})),t.isNullOrUndefined(a)||""===a||r.appendChild(t.createElement("div",{className:wi,innerHTML:a})),!t.isNullOrUndefined(e[i.recurrenceRule])){var s=e[i.id]===e[i.recurrenceID]?Ht:It;r.appendChild(t.createElement("div",{className:ge+" "+s}))}var o=e[i.startTime],l=e[i.endTime],c=e[i.isAllDay],p=this.parent.localeObj.getConstant("allDay"),h=this.parent.getTimeString(o)+" - "+this.parent.getTimeString(l);if(!t.isNullOrUndefined(e.data)){p=((l.getTime()-o.getTime())/de>=1?p:h)+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")"}var d=!t.isNullOrUndefined(e.data)||c?p:h;return[r,t.createElement("div",{className:Dt,innerHTML:d})]},e.prototype.processAgendaEvents=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var a=n[i],r=this.parent.eventBase.splitEventByDay(a);t=t.concat(r.length>1?r:a)}return t},e.prototype.wireEventActions=function(){for(var e=0,i=[].slice.call(this.parent.element.querySelectorAll("."+lt));e<i.length;e++){var n=i[e];this.parent.eventBase.wireAppointmentEvents(n)}for(var a=0,r=[].slice.call(this.parent.element.querySelectorAll(".e-m-date"));a<r.length;a++){n=r[a];t.EventHandler.add(n,"click",this.parent.agendaModule.dayNavigationClick,this)}},e.prototype.calculateResourceTableElement=function(e,i,n){if(t.isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)){var a=this.viewBase.getDateSlots(this.viewBase.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(a)}for(var r=f(new Date(n.getTime()),i),s=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?i:1,o=this.parent.resourceBase.resourceCollection,l=this.parent.resourceBase.lastResourceLevel,c=n,p=0;p<s;p++){var h=[],d=[],u=0,v=void 0,m=void 0,g=f(c,p),y=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?f(g,1):r,T=this.parent.eventBase.filterEvents(g,y);if(T.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(var w=0;w<l.length;w++){i=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:i;var b=[];n=g;var C=this.parent.eventBase.filterEvents(n,r,T,l[w]);if(C.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(var D=0;D<i;D++){var O=this.parent.eventBase.filterEvents(n,f(n,1),C,void 0);if((O.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(b.push(O[0]),v={rowSpan:1,type:"eventColumn",resource:o[o.length-1],groupIndex:l[w].groupIndex,groupOrder:l[w].groupOrder,resourceData:l[w].resourceData,eventData:O,date:n},m={rowSpan:1,type:"dateColumn",resource:o[o.length-1],groupOrder:l[w].groupOrder,resourceData:l[w].resourceData,date:n,text:""},h[u]||(h[u]=[]),h[u].push(v),h[u].push(m),u++),(n=f(n,1)).getTime()>=r.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){h[h.length-1][1].text="lastRow";var E={rowSpan:b.length,type:"resourceColumn",resource:o[o.length-1],groupOrder:l[w].groupOrder.slice(0,-1),resourceData:l[w].resourceData,groupIndex:h.length-b.length,className:[dt],date:n};h[h.length-b.length].push(E),d.push(t.extend({},E,null,!0));break}}}for(var S=o.slice(0,-1),x=[],A=0,k=0;k<S.length;k++){b=S[S.length-(k+1)].dataSource;for(var V=0;V<b.length;V++)for(var M=0,P=0;P<d.length;P++)d[P].groupOrder[S.length-(k+1)]===b[V][S[S.length-(k+1)].idField]&&(A+=d[P].rowSpan,x.push(t.extend({},d[P],null,!0))),++M===d.length&&x.length>0&&(x[0].rowSpan=A,x[0].type="parentColumnLevel_"+(k+1),x[0].resource=S[S.length-(k+1)],x[0].resourceData=b[V],x[0].date=n,h[x[0].groupIndex].push(x[0]),x=[],A=0)}this.createResourceTableRow(h,e)}}0===this.parent.eventBase.filterEvents(c,r).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,c)},e.prototype.createResourceTableRow=function(e,i){var n,a,s,o=t.createElement("tr",{attrs:{role:"row"}}),l=t.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),c=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){for(var p=[],h=this.parent.resourceBase.resourceCollection.slice(0,-1),d=0;d<e.length;d++)p=p.concat(e[d]);s=h.length>0?"parentColumnLevel_"+h.length:"resourceColumn";for(var u=new r.DataManager({json:p}).executeLocal((new r.Query).where("type","equal",s)),v=0;v<u.length;v++)c+=u[v].rowSpan}for(var m=0;m<e.length;m++){n=o.cloneNode();for(var g=e[m].length-1;g>=0;g--){var f=e[m][g],y=l.cloneNode();if("dateColumn"===f.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){a=e[m][g];continue}y.setAttribute("data-date",f.date.getTime().toString()),y.appendChild(this.createDateHeaderElement(f.date));var T=[ft,wt];"lastRow"===f.text&&T.push("e-day-border"),t.addClass([y],T),n.appendChild(y)}else if("eventColumn"===f.type){var w=0===f.eventData.length?"noEvents":"data";(y=this.createAgendaContentElement(w,f.eventData,y,f.groupOrder,f.groupIndex)).setAttribute("data-date",f.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&t.addClass([y],[ft,"e-day-padding"]),n.appendChild(y)}else y.setAttribute("rowspan",f.rowSpan.toString()),t.addClass([y],"e-resource-column"),this.viewBase.setResourceHeaderContent(y,f,f.className[0]),n.appendChild(y)}if(this.parent.activeViewOptions.group.byDate&&0===m&&"MonthAgenda"!==this.parent.currentView){(y=l.cloneNode()).setAttribute("data-date",a.date.getTime().toString()),y.setAttribute("rowspan",c.toString()),y.appendChild(this.createDateHeaderElement(a.date)),t.addClass([y],[ft,wt,"e-date-border"]);var C=b(this.parent.selectedDate.getTime(),a.date.getTime());if(n.setAttribute("aria-rowindex",C.toString()),this.parent.element.querySelector('.e-agenda-view tr[aria-rowindex="'+C+'"]'))break;n.insertBefore(y,n.childNodes[0])}i.appendChild(n)}},e.prototype.createDateHeaderElement=function(e){var i;if(this.parent.activeViewOptions.dateHeaderTemplate){i=t.createElement("div",{className:Tt});var n={date:e,type:"dateHeader"},a=this.parent.getDateHeaderTemplate()(n);t.append([].slice.call(a),i)}else i=this.viewBase.getMobileDateElement(e,Tt);return i},e.prototype.renderEmptyContent=function(e,i){var n=this.createTableRowElement(i,"noEvents"),a=n.children[0],r=t.createElement("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});a.appendChild(r),e.appendChild(n)},e.prototype.createTableRowElement=function(e,i){var n=b(this.parent.selectedDate.getTime(),e.getTime()),a=t.createElement("tr",{attrs:{role:"row","aria-rowindex":n.toString()}}),r=t.createElement("td",{attrs:{class:"monthHeader"===i?"e-month-header":ft,role:"gridcell","aria-selected":"false","aria-colindex":n.toString(),"data-date":e.getTime().toString()}}),s=r.cloneNode(),o=r.cloneNode();return a.appendChild(s),"noEvents"!==i&&a.appendChild(o),a},e}(),pr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hr=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.agendaDates={},i.virtualScrollTop=1,i.minDate=new Date(1900,0,1),i.maxDate=new Date(2099,11,31),i.agendaBase=new cr(t),i}return pr(i,e),i.prototype.getModuleName=function(){return"agenda"},i.prototype.renderLayout=function(){this.agendaDates={},this.element=t.createElement("div",{className:vt}),t.addClass([this.element],this.viewClass),this.element.appendChild(this.createTableLayout(mt)),this.parent.element.querySelector("."+Te).appendChild(this.element);var e=t.createElement("tr");this.element.querySelector("tbody").appendChild(e);var i=t.createElement("td");e.appendChild(i);var n=t.createElement("div",{className:gt});i.appendChild(n);var a=this.createTableLayout(Ce);n.appendChild(a);var r=a.querySelector("tbody"),s=m(this.parent.selectedDate);this.agendaBase.renderEmptyContent(r,s),this.wireEvents(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+$e)&&(this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.renderResourceMobileLayout()),this.parent.notify(re,{})},i.prototype.eventLoad=function(e){this.dataSource=t.extend([],this.parent.eventsData,null,!0);for(var i=0,n=this.parent.eventsData;i<n.length;i++){delete n[i].generatedDates}var a=e.processedData;if(this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(r,this.dataSource),a=this.parent.eventBase.filterEventsByResource(r,a)}this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(a);var s=m(this.parent.selectedDate),o=this.parent.getContentTable();o.innerHTML="",this.renderContent(o,s),this.agendaBase.wireEventActions();t.closest(o,"."+gt).scrollTop=1},i.prototype.refreshEvent=function(e){for(var i=[],n=0,a=this.dataSource;n<a.length;n++){var r=a[n],s=this.parent.eventFields,o=r;t.isNullOrUndefined(o[s.recurrenceID])&&!t.isNullOrUndefined(o[s.recurrenceRule])&&!t.isNullOrUndefined(o.generatedDates)&&e>=o.generatedDates.end&&(i=i.concat(this.parent.eventBase.generateOccurrence(o,e)))}this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.agendaBase.processAgendaEvents(i))},i.prototype.renderContent=function(e,i){var n=this.parent.eventFields,a=new Date(i.getTime()),r=this.getEndDateFromStartDate(a),s=this.appointmentFiltering(a,r);if(0===s.length&&(r=a,a=new Date(this.minDate.getTime()),0===(s=this.appointmentFiltering(a,r)).length&&(a=r,r=new Date(this.maxDate.getTime()),s=this.appointmentFiltering(a,r))),s.length>0){var o=s;i=o[0][n.startTime],i=new Date(new Date(i.getTime()).setHours(0,0,0,0)),this.updateHeaderText(o[0][n.startTime])}var l;if(!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&s.length>0){var c=!this.parent.hideEmptyAgendaDays||!this.parent.activeViewOptions.allowVirtualScrolling||this.parent.agendaDaysCount<s.length?this.parent.agendaDaysCount:s.length;if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var p=i;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,p=a,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))),this.agendaBase.calculateResourceTableElement(e,this.parent.agendaDaysCount,p)}else for(var h=0;h<c;h++){var d=[];d=this.appointmentFiltering(i);var u=this.agendaBase.createTableRowElement(i,"data");if(!this.element.querySelector('tr[aria-rowindex="'+parseInt(u.getAttribute("aria-rowindex"),10)+'"]')){var v=u.children[0],m=u.children[1];if(d.length>0||!this.parent.hideEmptyAgendaDays&&0===d.length){var g=this.parent.hideEmptyAgendaDays||0!==d.length?"data":"noEvents";v.appendChild(this.agendaBase.createDateHeaderElement(i)),u.appendChild(v);var y=this.agendaBase.createAgendaContentElement(g,d,m);u.appendChild(y),y.querySelectorAll("li").length>0&&e.appendChild(u)}else this.parent.activeViewOptions.allowVirtualScrolling&&h--;if(this.isCurrentDate(new Date(i.getTime()))&&t.addClass(v.children,"e-current-day"),(i=f(i,1)).getTime()>r.getTime())break}}l=new Date(i.getTime()-de)}else this.agendaBase.renderEmptyContent(e,i),l=f(i,this.parent.agendaDaysCount-1);this.agendaDates={start:a,end:l}},i.prototype.agendaScrolling=function(e){this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(e)},i.prototype.virtualScrolling=function(e){var i,n=e.target,a=n.scrollTop,r=n.scrollHeight,s=a+n.clientHeight,o=this.virtualScrollTop<a?"next":"previous",l=n.querySelector("tbody"),c=t.createElement("tbody"),p=this.getElementFromScrollerPosition(e,o),h=new Date(parseInt(p.getAttribute("data-date"),0));if(0===a){if(i=this.getPreviousNextDate(f(h,-1),o),this.appointmentFiltering(i.start,i.end).length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(c,i.start),l.innerHTML=c.innerHTML+l.innerHTML,this.agendaBase.wireEventActions();for(var d=0,u=l.children;d<u.length;d++)if(u[d].getAttribute("aria-rowindex")===p.getAttribute("aria-colindex")){var v=u[d].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;n.scrollTop=v;break}this.updateHeaderText(h)}}else s===r?(i=this.getPreviousNextDate(f(h,1),o),(this.appointmentFiltering(i.start,i.end).length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(c,i.start),l.innerHTML+=c.innerHTML,this.agendaBase.wireEventActions(),this.updateHeaderText(h))):this.updateHeaderText(h);this.virtualScrollTop=a;var m=this.parent.eventBase.getSelectedAppointments();m.length>0&&m[m.length-1].focus()},i.prototype.getElementFromScrollerPosition=function(e,i){var n,a,r=e.target,s=r.scrollTop,o=r.scrollHeight,l=s+r.clientHeight,c=[].slice.call(r.querySelectorAll(".e-agenda-item"));if(c.length>0)if(0===s)a=c[0],n=t.closest(a,"."+ft);else if(l===o)a=c[c.length-1],n=t.closest(a,"."+ft);else for(var p=0,h=c.length;p<h;p++)if(a=c[p],a.getBoundingClientRect().top>=0){n=t.closest(a,"."+ft);break}return n},i.prototype.updateHeaderText=function(e){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(this.getDateRangeText(e))},i.prototype.getPreviousNextDate=function(e,t){var i=new Date(e.getTime()),n=this.getStartDateFromEndDate(e),a=this.getEndDateFromStartDate(e),r=0;do{if((this.appointmentFiltering(i).length>0||!this.parent.hideEmptyAgendaDays)&&r++,(i=f(i,"next"===t?1:-1))<n||i>a)break}while(r!==this.parent.agendaDaysCount);var s=f(i,"next"===t?-1:1);return"next"===t?{start:e,end:f(s,1)}:{start:s,end:f(e,1)}},i.prototype.appointmentFiltering=function(e,i){var n,a;!t.isNullOrUndefined(e)&&t.isNullOrUndefined(i)?(n=m(new Date(e.getTime())),a=v(new Date(n.getTime()),de)):(n=new Date(e.getTime()),a=new Date(i.getTime()));var r=this.parent.eventBase.filterEvents(n,a);return 0===r.length&&(this.refreshEvent(e),r=this.parent.eventBase.filterEvents(n,a)),r},i.prototype.getStartDateFromEndDate=function(e){var t,i=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.min.apply(Math,this.parent.eventsProcessed.map(function(e){return e[i.startTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.minDate}else t=this.parent.hideEmptyAgendaDays?y(e,-1):this.minDate;return m(t)},i.prototype.getEndDateFromStartDate=function(e){var t,i=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.max.apply(Math,this.parent.eventsProcessed.map(function(e){return e[i.endTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.maxDate}else t=this.parent.hideEmptyAgendaDays?y(e,1):this.maxDate;return m(f(t,1))},i.prototype.getNextPreviousDate=function(e){var t="next"===e?1:-1;return f(this.parent.selectedDate,t)},i.prototype.startDate=function(){return m(this.parent.selectedDate)},i.prototype.endDate=function(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):f(this.startDate(),this.parent.agendaDaysCount)},i.prototype.getDateRangeText=function(e){var i=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){var n=t.isNullOrUndefined(e)?this.parent.selectedDate:e;return this.parent.globalize.formatDate(n,{format:i})}var a=this.parent.selectedDate,r=f(a,this.parent.agendaDaysCount-1);return this.formatDateRange(a,r)},i.prototype.dayNavigationClick=function(e){var i=this.parent.getDateFromElement(t.closest(e.currentTarget,"."+ft));t.isNullOrUndefined(i)||this.parent.isAdaptive||(this.parent.setProperties({selectedDate:i},!0),this.parent.changeView("Day"))},i.prototype.wireEvents=function(){t.EventHandler.add(this.element.querySelector("."+gt),se,this.agendaScrolling,this)},i.prototype.unWireEvents=function(){t.EventHandler.remove(this.element.querySelector("."+gt),se,this.agendaScrolling);for(var e=0,i=[].slice.call(this.element.querySelectorAll(".e-m-date"));e<i.length;e++){var n=i[e];t.EventHandler.remove(n,"click",this.dayNavigationClick)}},i.prototype.addEventListener=function(){this.parent.on(oe,this.onAgendaScrollUiUpdate,this),this.parent.on(ae,this.eventLoad,this)},i.prototype.removeEventListener=function(){this.parent.off(oe,this.onAgendaScrollUiUpdate),this.parent.off(ae,this.eventLoad)},i.prototype.onAgendaScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.parent.headerModule&&(this.parent.activeViewOptions.allowVirtualScrolling?this.parent.headerModule.updateHeaderItems("add"):this.parent.headerModule.updateHeaderItems("remove"));this.element.querySelector("."+gt).style.height=t.formatUnit(this.parent.element.offsetHeight-e)},i.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),t.remove(this.element),this.element=null,this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"))},i}(Ga),dr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ur=function(e){function i(t){var i=e.call(this,t)||this;return i.dayNameFormat="narrow",i.viewClass="e-month-agenda-view",i.agendaDates={},i.agendaBase=new cr(t),i}return dr(i,e),i.prototype.renderAppointmentContainer=function(){var e=this.getContentAreaElement(),i=t.createElement("div",{className:st});e.appendChild(i);var n=t.createElement("div",{className:rt});i.appendChild(n),this.appendAppContainer(n),this.setEventWrapperHeight()},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive?"narrow":"abbreviated"},i.prototype.setEventWrapperHeight=function(){var e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,i=this.parent.element.querySelector("."+tt);i&&(e+=i.offsetHeight);var n=this.getContentAreaElement().firstChild,a=this.element.querySelector("."+Se),r=this.parent.element.offsetHeight-e-a.offsetHeight-n.offsetHeight,s=this.element.querySelector("."+st),o=this.element.querySelector("."+rt);s.style.height=o.style.height=t.formatUnit(r)},i.prototype.onDataReady=function(e){this.setEventWrapperHeight(),this.clearElements();var i=e.processedData;if(this.parent.uiStateValues.isGroupAdaptive){var n=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];i=this.parent.eventBase.filterEventsByResource(n,i)}this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(i);for(var a=0,r=0,s=this.renderDates;r<s.length;r++){var o=s[r],l=this.appointmentFiltering(o),c=this.element.querySelectorAll("."+De)[a];l.length>0&&(c.querySelector("."+Ot)||c.appendChild(t.createElement("div",{className:Ot})),o.getTime()===m(new Date(this.parent.selectedDate.getTime())).getTime()&&this.onEventRender(l,o)),a++}},i.prototype.onCellClick=function(e){this.parent.quickPopup.quickPopupHide();var t=this.appointmentFiltering(e.startTime);this.onEventRender(t,e.startTime),this.parent.setProperties({selectedDate:new Date(""+e.startTime)},!0)},i.prototype.onEventRender=function(e,i){var n=this.element.querySelector("."+rt);if(n.innerHTML="",0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive)if(e.length>0){var a=t.createElement("div",{className:ot});n.appendChild(this.agendaBase.createAgendaContentElement("data",e,a))}else this.appendAppContainer(n);else if(e.length>0){var r=this.createTableLayout(),s=r.querySelector("tbody");this.agendaBase.calculateResourceTableElement(s,1,i),r.appendChild(s),n.appendChild(r)}else this.appendAppContainer(n);this.agendaBase.wireEventActions()},i.prototype.appointmentFiltering=function(e){var t=m(new Date(e.getTime())),i=v(new Date(t.getTime()),de);return this.parent.eventBase.filterEvents(t,i)},i.prototype.clearElements=function(){for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+Ot));e<i.length;e++){var n=i[e];t.remove(n)}this.appendAppContainer(this.element.querySelector("."+rt))},i.prototype.appendAppContainer=function(e){var i=t.createElement("div",{className:ot});t.addClass([i],"e-no-event"),i.innerHTML=this.parent.localeObj.getConstant("noEvents"),e.innerHTML="",e.appendChild(i)},i.prototype.getModuleName=function(){return"monthAgenda"},i}(lr),vr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mr=function(e){function i(t,i){var n=e.call(this,t)||this;return n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.day=0,n.renderType=i,n.appContainers=[].slice.call(n.element.querySelectorAll("."+ot)),n.dayLength=n.element.querySelectorAll("."+Ce+" tbody tr")[0].children.length,n.content=n.parent.element.querySelector("."+Ce),n}return vr(i,e),i.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map(function(e){return+e}))},i.prototype.getOverlapEvents=function(e,t){var i=[];if("day"===this.renderType)for(var n=0,a=t;n<a.length;n++){m((o=a[n])[this.fields.startTime]).getTime()<=m(new Date(e.getTime())).getTime()&&m(o[this.fields.endTime]).getTime()>=m(new Date(e.getTime())).getTime()&&i.push(o)}else for(var r=0,s=t;r<s.length;r++){var o,l=(o=s[r]).data;l[this.fields.startTime].getTime()<=e.getTime()&&l[this.fields.endTime].getTime()>e.getTime()&&i.push(o)}return i},i.prototype.renderResourceEvents=function(){for(var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel,t=0;t<e.length;t++)this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,e[t])},i.prototype.renderEvents=function(e,i){this.parent.headerRows.length>0&&"Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length;var n=this.parent.uiStateValues.isGroupAdaptive?0:i,a=e.data,r=this.getStartTime(e,a),s=this.getEndTime(e,a);if(this.day=this.parent.getIndexOfDate(this.dateRender,m(new Date(r.getTime()))),!(this.day<0)){var o=T(m(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour),l=this.getIndex(r);e.Index=l;var c=this.eventHeight,p=a.count;if(r<=s){var h=0,d=0,u=0,v=0;"day"===this.renderType||e[this.fields.isAllDay]?(h="day"===this.renderType?p*this.slotsPerDay*this.cellWidth-2:p*this.slotsPerDay*this.cellWidth,v=this.day*this.slotsPerDay*this.cellWidth):(h=this.getNormalEventsWidth(r,s,p),v=this.getPosition(o,r,s,this.day),v*=this.cellWidth),h=0===h?this.cellWidth:h,this.renderedEvents.push(t.extend({},e,null,!0));var g=this.appContainers[n],y=this.getRowTop(i),w=y+2+l*(c+2);if(d=this.parent.enableRtl?0:v,u=this.parent.enableRtl?v:0,this.cellHeight>(l+1)*(c+2)+this.moreIndicatorHeight){var b=this.createAppointmentElement(e,i);this.applyResourceColor(b,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(b),t.setStyleAttribute(b,{width:h+"px",left:d+"px",right:u+"px",top:w+"px"}),this.renderEventElement(e,b,g)}else for(var C=0;C<p;C++){var D=this.appContainers[n],O=D.querySelector("."+zt),E=this.parent.enableRtl?u:d;if(E=Math.floor(E/this.cellWidth)*this.cellWidth,D&&t.isNullOrUndefined(O)||!this.isAlreadyAvail(E,D)){var S=this.interval/this.slotCount,x=new Date(this.dateRender[this.day+C].getTime()),A=f(this.dateRender[this.day+C],1),k=new Date(r.setMinutes(Math.floor(r.getMinutes()/S)*S)),V=new Date(k.getTime()+6e4*S),M=void 0;this.parent.activeViewOptions.group.resources.length>0&&!t.isNullOrUndefined(i)&&(M=i.toString());var P=this.getFilterEvents(x,A,k,V,M),j=this.cellHeight-this.moreIndicatorHeight,R=Math.floor(j/(c+2)),H=P.length-R<=0?1:P.length-R,I=void 0;I="day"===this.renderType?this.getMoreIndicatorElement(H,x,A):this.getMoreIndicatorElement(H,k,V),t.isNullOrUndefined(M)||I.setAttribute("data-group-index",M),I.style.top=y+j+"px",I.style.width=this.cellWidth+"px",I.style.left=Math.floor(d/this.cellWidth)*this.cellWidth+"px",I.style.right=Math.floor(u/this.cellWidth)*this.cellWidth+"px",this.renderElement(D,I),t.EventHandler.add(I,"click",this.moreIndicatorClick,this)}}}}},i.prototype.getStartTime=function(e,t){var i=e[this.fields.startTime],n=T(i,this.startHour,this.endHour);return i=n.startHour.getTime()>=t[this.fields.startTime]?n.startHour:n.endHour.getTime()<=t[this.fields.startTime]?this.getNextDay(n.startHour,t):t[this.fields.startTime],e[this.fields.isAllDay]&&(t[this.fields.startTime]=n.startHour),i},i.prototype.getNextDay=function(e,t){for(var i,n=1;n<=this.dateRender.length;n++)if(i=f(e,n),-1!==this.parent.getIndexOfDate(this.dateRender,m(new Date(e.getTime()))))return t.count=t.count-1,i;return i},i.prototype.getEndTime=function(e,t){var i=e[this.fields.endTime],n=T(i,this.startHour,this.endHour);return i=n.endHour.getTime()<=t[this.fields.endTime]?n.endHour:t[this.fields.endTime],e[this.fields.isAllDay]&&(t[this.fields.endTime]=n.endHour),i},i.prototype.getNormalEventsWidth=function(e,t,i){return this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,i)},i.prototype.getSameDayEventsWidth=function(e,t){return(t.getTime()-e.getTime())/6e4*(this.cellWidth*this.slotCount)/this.interval},i.prototype.getSpannedEventsWidth=function(e,t,i){var n,a,r=i*this.slotsPerDay*this.cellWidth,s=T(m(new Date(e.getTime())),this.startHour,this.endHour);if(n=this.getSameDayEventsWidth(s.startHour,e),-1===this.parent.getIndexOfDate(this.dateRender,m(new Date(t.getTime()))))a=0;else{var o=T(m(new Date(t.getTime())),this.startHour,this.endHour);a=this.getSameDayEventsWidth(t,o.endHour)}var l=n+a;return r>l?r-l:a-n},i.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,m(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,m(new Date(t.getTime())))},i.prototype.getAppointmentLeft=function(e,t,i,n){var a=this.isSameDay(t,e.startHour)?(t.getTime()-e.startHour.getTime())/(6e4*this.interval)*this.slotCount:0;if(0===n)return a;return(e.endHour.getTime()-e.startHour.getTime())/6e4/this.interval*this.slotCount*n+a},i.prototype.getPosition=function(e,t,i,n){return e.endHour.getTime()<=i.getTime()&&e.startHour.getTime()>=t.getTime()?this.getAppointmentLeft(e,e.startHour,e.endHour,n):e.endHour.getTime()<=i.getTime()?this.getAppointmentLeft(e,t,e.endHour,n):e.startHour.getTime()>=t.getTime()?this.getAppointmentLeft(e,e.startHour,i,n):this.getAppointmentLeft(e,t,i,n)},i.prototype.getFilterEvents=function(e,t,i,n,a){return"day"===this.renderType?this.getFilteredEvents(e,t,a):this.getFilteredEvents(i,n,a)},i.prototype.isAlreadyAvail=function(e,t){for(var i=[].slice.call(t.querySelectorAll("."+zt)),n=0;n<i.length;n++){var a=void 0;if(i&&(a=this.parent.enableRtl?i[n].style.right:i[n].style.left),parseInt(a,10)===Math.floor(e))return!0}return!1},i.prototype.getRowTop=function(e){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){return this.parent.element.querySelector("."+gt+" tbody tr:nth-child("+(e+1)+")").offsetTop}return 0},i}(Za),gr=function(){function e(e,t){this.parent=e,this.renderDates=t}return e.prototype.groupByYear=function(e){for(var t={},i=0,n=e;i<n.length;i++){var a=n[i],r=a.getFullYear();t[r]=t[r]||[],t[r].push(a)}return t},e.prototype.groupByMonth=function(e){for(var t={},i=0,n=e;i<n.length;i++){var a=n[i],r=12*(a.getFullYear()-1970)+a.getMonth();t[r]=t[r]||[],t[r].push(a)}return t},e.prototype.groupByWeek=function(e){for(var t={},i=0,n=e;i<n.length;i++){var a=n[i],r=+new Date(1970,0,1),s=Math.ceil(((+a-r)/de+new Date(r).getDay()+1)/7);t[s]=t[s]||[],t[s].push(a)}return t},e.prototype.generateSlots=function(e,i,n,a,r,s){for(var o=this,l=[],c={getYear:function(e){return o.parent.globalize.formatDate(e,{format:"y"})},getMonth:function(e){return o.parent.globalize.formatDate(e,{format:"MMMM"})},getWeekNumber:function(e){return u(e)}},p=Object.keys(e),h=0;h<p.length;h++){var d=e[p[h]],v=void 0,m=t.createElement("div"),g=void 0;if(a){g=a({date:d[0],type:s})}else g=t.compile(n,c)({date:d[0]});t.append([].slice.call(g),m),v=m.innerHTML,l.push({date:d[0],type:s,className:[r],colSpan:d.length*i,text:v})}return l},e.prototype.generateColumnLevels=function(e,t){var i=[],n=this.parent.activeViewOptions.headerRows,a=1;"Hour"===n[n.length-1].option&&t.length>0&&(a=t.length/e.length);for(var r,s=[],o=0,l=n;o<l.length;o++){var c=l[o];switch(c.option){case"Year":r=c.template?this.parent.templateParser(c.template):void 0;var p=this.groupByYear(this.renderDates);s=this.generateSlots(p,a,'<span class="e-header-year">${getYear(date)}</span>',r,"e-header-year-cell","yearHeader"),i.push(s);break;case"Month":r=c.template?this.parent.templateParser(c.template):void 0;var h=this.groupByMonth(this.renderDates);s=this.generateSlots(h,a,'<span class="e-header-month">${getMonth(date)}</span>',r,"e-header-month-cell","monthHeader"),i.push(s);break;case"Week":r=c.template?this.parent.templateParser(c.template):void 0;var d=this.groupByWeek(this.renderDates);s=this.generateSlots(d,a,'<span class="e-header-week">${getWeekNumber(date)}</span>',r,"e-header-week-cell","weekHeader"),i.push(s);break;case"Date":s=(s=e).map(function(e){return e.colSpan=a,e}),i.push(s);break;case"Hour":t.length>0&&i.push(t)}}return i},e}(),fr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yr=function(e){function i(t){var i=e.call(this,t)||this;return i.dateHeaderTemplate='<span class="e-header-date e-navigate">${getTimelineDate(date)}</span>',i.baseCssClass="e-timeline-view",i}return fr(i,e),i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+qe)},i.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},i.prototype.scrollToWorkHour=function(){var e=this.parent.globalize.parseDate(this.parent.workHours.start,{skeleton:"Hm"}),i='[data-date="'+(this.isWorkDay(this.parent.selectedDate)&&this.parent.workHours.highlight&&!t.isNullOrUndefined(e)?new Date(+this.parent.selectedDate).setHours(e.getHours(),e.getMinutes()):new Date(+this.parent.selectedDate).setHours(0,0,0,0))+'"]',n=this.element.querySelector(i);n&&(this.getScrollableElement().scrollLeft=n.offsetLeft)},i.prototype.scrollToHour=function(e){var i=this.parent.globalize.parseDate(e,{skeleton:"Hm"});t.isNullOrUndefined(i)||(this.getScrollableElement().scrollLeft=this.getLeftFromDateTime(null,i))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);var i=[];if(this.parent.activeViewOptions.timeScale.enable&&(i=this.generateTimeSlots(e[e.length-1]),e.push(i)),this.parent.activeViewOptions.headerRows.length>0){e=new gr(this.parent,this.renderDates).generateColumnLevels(t,i)}return e},i.prototype.generateTimeSlots=function(e){for(var i=this,n=this.getTimeSlotRows(function(e){return e.type=e.first?"majorSlot":"minorSlot",e.className=e.first?["e-time-slots"]:["e-time-slots","e-time-cells"],e.workDays=i.parent.activeViewOptions.workDays,e}),a=[],r=0,s=e;r<s.length;r++){var o=s[r];o.colSpan=n.length;for(var l=0,c=t.extend([],n,null,!0);l<c.length;l++){var p=c[l];p.date=new Date(+m(o.date)+g(p.date)),a.push(p)}}return a},i.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),i=this.getLeftFromDateTime(e,new Date),n=this.element.querySelector("."+Ce).offsetHeight,a=this.element.querySelector("."+Se);this.element.querySelector("."+gt).appendChild(t.createElement("div",{className:Ye,styles:(this.parent.enableRtl?"right":"left")+":"+t.formatUnit(i)+"; height:"+t.formatUnit(n)}));var r=t.createElement("div",{innerHTML:this.parent.getTimeString(new Date),className:_e});a.appendChild(r),r.style[this.parent.enableRtl?"right":"left"]=t.formatUnit(i-r.offsetWidth/2)}},i.prototype.getLeftFromDateTime=function(e,i){var n=this.getStartHour(),a=this.getEndHour(),r=0,s=60*(i.getHours()-n.getHours())+(i.getMinutes()-n.getMinutes());if(!t.isNullOrUndefined(e)){var o=0===a.getHours()?24:a.getHours();0!==e[0]&&(r=e[0]*(60*(o-n.getHours()))+(a.getMinutes()-n.getMinutes())),s=r+s}return s*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},i.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").offsetWidth},i.prototype.renderHeader=function(){var e=t.createElement("tr");this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e);var i=t.createElement("td");i.appendChild(this.renderDatesHeader()),e.appendChild(i),t.prepend([e],this.element.querySelector("tbody"))},i.prototype.createAllDayRow=function(e,t){},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,m(new Date));return t>=0&&e.push(t),e},i.prototype.renderContent=function(){var e=t.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=t.createElement("td");i.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(i)}var n=t.createElement("td"),a=this.renderContentArea();a.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(a),n.appendChild(a),e.appendChild(n),this.element.querySelector("tbody").appendChild(e)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.lastResourceLevel.length:1},i.prototype.getResourceTdData=function(e,t){var i=this.parent.resourceBase.lastResourceLevel[e],n=i.resourceData[i.resource.startHourField]||this.parent.workHours.start,a=i.resourceData[i.resource.endHourField]||this.parent.workHours.end;return t.startHour=this.parent.globalize.parseDate(n,{skeleton:"Hm"}),t.endHour=this.parent.globalize.parseDate(a,{skeleton:"Hm"}),t.workDays=i.resourceData[i.resource.workDaysField]||this.parent.workDays,t.className=i.className,t.groupIndex=i.groupIndex,t.groupOrder=i.groupOrder,t},i.prototype.renderContentTable=function(e){for(var i=t.createElement("tr",{attrs:{role:"row"}}),n=e.querySelector("tbody"),a=t.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),r=this.getRowCount(),s=0;s<r;s++){for(var o=i.cloneNode(),l=0,c=this.colLevels[this.colLevels.length-1];l<c.length;l++){var p=c[l];this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(p=this.getResourceTdData(s,p));var h=this.createContentTd(p,p,a);o.appendChild(h)}n.appendChild(o)}e.appendChild(n)},i.prototype.getContentTdClass=function(e){return e.first||!this.parent.activeViewOptions.timeScale.enable?[De]:[De,ze]},i.prototype.renderEvents=function(){if(this.parent.activeViewOptions.timeScale.enable){new mr(this.parent,"hour").renderAppointments()}else{new mr(this.parent,"day").renderAppointments()}},i.prototype.getModuleName=function(){return"timelineViews"},i}(er),Tr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wr=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-timeline-month-view",i.isInverseTableSelect=!0,i}return Tr(i,e),i.prototype.getModuleName=function(){return"timelineMonth"},i.prototype.onDataReady=function(e){new mr(this.parent,"day").renderAppointments()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+qe)},i.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},i.prototype.setContentHeight=function(e,i,n){i&&(i.style.height=t.formatUnit(n-this.getScrollXIndent(e))),e.style.height=t.formatUnit(n)},i.prototype.getDateSlots=function(e,t){for(var i=[],n=0,a=e;n<a.length;n++){var r=a[n],s=[Ae];this.isCurrentDate(r)&&s.push(ke),i.push({date:r,type:"dateHeader",className:s,colSpan:1,workDays:t})}return i},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e)},i.prototype.renderContent=function(){var e=t.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=t.createElement("td");i.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(i)}var n=t.createElement("td");this.element.querySelector("tbody").appendChild(e);var a=t.createElement("div",{className:gt});a.appendChild(this.renderContentArea()),a.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(a),t.EventHandler.add(a,"scroll",this.onContentScroll,this),n.appendChild(a),e.appendChild(n)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.lastResourceLevel.length:1},i.prototype.getContentSlots=function(){for(var e=[],t=0;t<this.getRowCount();t++)for(var i=0,n=this.colLevels[this.colLevels.length-1];i<n.length;i++){var a=n[i];if(a.className=[De],this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.resourceBase.lastResourceLevel[t];a.workDays=r.resourceData[r.resource.workDaysField]||this.parent.workDays,a.className=a.className.concat(r.className),a.groupIndex=r.groupIndex,a.groupOrder=r.groupOrder}var s={date:new Date(+a.date),colSpan:a.colSpan,groupIndex:a.groupIndex,workDays:a.workDays,type:"monthCells",className:a.className};e[t]||(e[t]=[]),e[t].push(s)}return e},i.prototype.updateClassList=function(){},i.prototype.unwireEvents=function(){t.EventHandler.remove(this.getContentAreaElement(),"scroll",this.onContentScroll)},i.prototype.getMonthStart=function(e){var t=h(m(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.prototype.getMonthEnd=function(e){var t=h(m(e));return d(y(new Date(+t),this.parent.activeViewOptions.interval-1))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);if(this.parent.activeViewOptions.headerRows.length>0){e=new gr(this.parent,this.renderDates).generateColumnLevels(t,[])}return this.colLevels=e,e},i}(lr);e.Schedule=Fa,e.cellClick=_,e.cellDoubleClick=Y,e.actionBegin=G,e.actionComplete=Q,e.actionFailure=K,e.navigating=X,e.renderCell=J,e.eventClick=Z,e.eventRendered=$,e.dataBinding=ee,e.dataBound="dataBound",e.popupOpen=te,e.dragStart="dragStart",e.drag="drag",e.dragStop="dragStop",e.resizeStart=ie,e.resizing="resizing",e.resizeStop=ne,e.initialLoad="initial-load",e.initialEnd="initial-end",e.dataReady=ae,e.contentReady=re,e.scroll=se,e.scrollUiUpdate=oe,e.uiUpdate=le,e.documentClick=ce,e.cellMouseDown=pe,e.tapHoldReady=he,e.WEEK_LENGTH=7,e.MS_PER_DAY=de,e.MS_PER_MINUTE=6e4,e.getWeekFirstDate=p,e.firstDateOfMonth=h,e.lastDateOfMonth=d,e.getWeekNumber=u,e.setTime=v,e.resetTime=m,e.getDateInMs=g,e.addDays=f,e.addMonths=y,e.addYears=function(e,t){var i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,w(e))),e},e.getStartEndHours=T,e.getMaxDays=w,e.getDaysCount=b,e.getDateFromString=C,e.getScrollBarWidth=D,e.findIndexInData=O,e.getOuterHeight=E,e.Resize=za,e.DragAndDrop=Ya,e.HeaderRenderer=Gi,e.ViewBase=Ga,e.Day=ir,e.Week=ar,e.WorkWeek=sr,e.Month=lr,e.Agenda=hr,e.MonthAgenda=ur,e.TimelineViews=yr,e.TimelineMonth=wr,e.Timezone=Zi,e.localTimezoneName=$i,e.timezoneData=en,e.RecurrenceEditor=ra,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-schedule.umd.min.js.map
