{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * React Component Base\n */\n\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { extend } from '@syncfusion/ej2-base';\nvar defaulthtmlkeys = ['alt', 'className', 'disabled', 'form', 'id', 'readOnly', 'style', 'tabIndex', 'title', 'type', 'onClick', 'onFocus', 'onBlur'];\n/* tslint:disable */\n\nvar ComponentBase =\n/** @class */\nfunction (_super) {\n  __extends(ComponentBase, _super);\n\n  function ComponentBase() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.attrKeys = [];\n    _this.cachedTimeOut = 0;\n    _this.isAppendCalled = false;\n    return _this;\n  }\n\n  ComponentBase.prototype.componentWillMount = function () {\n    var propKeys = Object.keys(this.props);\n    this.htmlattributes = {};\n    this.attrKeys = defaulthtmlkeys.concat(this.controlAttributes || []);\n\n    for (var _i = 0, propKeys_1 = propKeys; _i < propKeys_1.length; _i++) {\n      var prop = propKeys_1[_i];\n\n      if (prop.indexOf('data-') !== -1 || prop.indexOf('aria-') !== -1 || this.attrKeys.indexOf(prop) !== -1) {\n        this.htmlattributes[prop] = this.props[prop];\n      }\n    }\n  };\n\n  ComponentBase.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.refreshChild(true); // Used timeout to resolve template binding\n    // Reference link: https://github.com/facebook/react/issues/10309#issuecomment-318433235\n\n    this.cachedTimeOut = setTimeout(function () {\n      var ele = ReactDOM.findDOMNode(_this);\n\n      if (ele) {\n        _this.isAppendCalled = true;\n\n        _this.appendTo(ele);\n      }\n    });\n  }; // tslint:disable-next-line:no-any\n\n\n  ComponentBase.prototype.componentWillReceiveProps = function (nextProps) {\n    if (!this.isAppendCalled) {\n      clearTimeout(this.cachedTimeOut);\n      this.isAppendCalled = true;\n      this.appendTo(ReactDOM.findDOMNode(this));\n    }\n\n    var dProps = extend({}, nextProps);\n    var keys = Object.keys(nextProps);\n\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n      var propkey = keys_1[_i];\n\n      if (this.props[propkey] === nextProps[propkey]) {\n        delete dProps[propkey];\n      } else if (this.attrKeys.indexOf(propkey) !== -1) {\n        if (propkey === 'className') {\n          this.element.classList.remove(this.props[propkey]);\n          this.element.classList.add(dProps[propkey]);\n        }\n\n        delete dProps[propkey];\n      }\n    }\n\n    if (dProps['children']) {\n      delete dProps['children'];\n    }\n\n    if (Object.keys(dProps).length) {\n      this.setProperties(dProps);\n    }\n\n    this.refreshChild(false, nextProps);\n  };\n\n  ComponentBase.prototype.getDefaultAttributes = function () {\n    return this.htmlattributes;\n  };\n\n  ComponentBase.prototype.refreshChild = function (silent, props) {\n    if (this.checkInjectedModules) {\n      var prevModule = this.getInjectedModules() || [];\n      var curModule = this.getInjectedServices() || [];\n\n      for (var _i = 0, curModule_1 = curModule; _i < curModule_1.length; _i++) {\n        var mod = curModule_1[_i];\n\n        if (prevModule.indexOf(mod) === -1) {\n          prevModule.push(mod);\n        }\n      }\n\n      this.injectedModules = prevModule;\n    }\n\n    if (this.directivekeys) {\n      var directiveValue = this.validateChildren({}, this.directivekeys, props || this.props);\n\n      if (directiveValue) {\n        if (!silent && this.skipRefresh) {\n          for (var _a = 0, _b = this.skipRefresh; _a < _b.length; _a++) {\n            var fields = _b[_a];\n            delete directiveValue[fields];\n          }\n        }\n\n        this.setProperties(directiveValue, silent);\n      }\n    }\n  };\n\n  ComponentBase.prototype.componentWillUnmount = function () {\n    this.destroy();\n  };\n  /* tslint:disable:no-any */\n\n\n  ComponentBase.prototype.validateChildren = function (childCache, mapper, props) {\n    var flag = false;\n    var childs = React.Children.toArray(props.children);\n\n    for (var _i = 0, childs_1 = childs; _i < childs_1.length; _i++) {\n      var child = childs_1[_i];\n      var ifield = this.getChildType(child);\n      var key = mapper[ifield];\n\n      if (ifield && mapper) {\n        // tslint:disable\n        var childProps = this.getChildProps(React.Children.toArray(child.props.children), key);\n\n        if (childProps.length) {\n          flag = true; // tslint:disable\n\n          childCache[child.type.propertyName || ifield] = childProps;\n        }\n      }\n    }\n\n    if (flag) {\n      return childCache;\n    }\n\n    return null;\n  }; // tslint:disable:no-any\n\n\n  ComponentBase.prototype.getChildType = function (child) {\n    if (child.type && child.type.isDirective) {\n      return child.type.moduleName || '';\n    }\n\n    return '';\n  };\n\n  ComponentBase.prototype.getChildProps = function (subChild, matcher) {\n    var ret = [];\n\n    for (var _i = 0, subChild_1 = subChild; _i < subChild_1.length; _i++) {\n      var child = subChild_1[_i];\n      var accessProp = false;\n      var key = void 0;\n\n      if (typeof matcher === 'string') {\n        accessProp = true;\n        key = matcher;\n      } else {\n        key = Object.keys(matcher)[0];\n      }\n\n      var prop = child.props; // tslint:disable-next-line:no-any\n\n      var field = this.getChildType(child);\n\n      if (field === key) {\n        if (accessProp || !prop.children) {\n          ret.push(extend({}, prop, {}, true));\n        } else {\n          ret.push(this.validateChildren(extend({}, prop), matcher[key], prop) || prop);\n        }\n      }\n    }\n\n    return ret;\n  }; // tslint:disable:no-any\n\n\n  ComponentBase.prototype.getInjectedServices = function () {\n    var childs = React.Children.toArray(this.props.children);\n\n    for (var _i = 0, childs_2 = childs; _i < childs_2.length; _i++) {\n      var child = childs_2[_i];\n      /* tslint:disable:no-any */\n\n      if (child.type.isService) {\n        return child.props.services;\n      }\n    }\n\n    return [];\n  };\n\n  return ComponentBase;\n}(React.PureComponent);\n\nexport { ComponentBase };","map":null,"metadata":{},"sourceType":"module"}