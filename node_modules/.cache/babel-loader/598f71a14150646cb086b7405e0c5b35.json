{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, Property, NotifyPropertyChanges, Event, Browser } from '@syncfusion/ej2-base';\nimport { getDefaultDateObject, getValue, cldrData, L10n, isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { EventHandler, classList } from '@syncfusion/ej2-base';\nimport { extractObjectFromRule, generate, generateSummary, getRecurrenceStringFromDate } from './date-generator';\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n  none: '',\n  daily: 'days',\n  weekly: 'weeks',\n  monthly: 'months',\n  yearly: 'years'\n};\nvar valueData = {\n  'sun': RULESUNDAY,\n  'mon': RULEMONDAY,\n  'tue': RULETUESDAY,\n  'wed': RULEWEDNESDAY,\n  'thu': RULETHURSDAY,\n  'fri': RULEFRIDAY,\n  'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\n\nvar RecurrenceEditor =\n/** @class */\nfunction (_super) {\n  __extends(RecurrenceEditor, _super);\n  /**\n   * Constructor for creating the widget\n   * @param  {object} options?\n   */\n\n\n  function RecurrenceEditor(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.defaultLocale = {\n      none: 'None',\n      daily: 'Daily',\n      weekly: 'Weekly',\n      monthly: 'Monthly',\n      month: 'Month',\n      yearly: 'Yearly',\n      never: 'Never',\n      until: 'Until',\n      count: 'Count',\n      first: 'First',\n      second: 'Second',\n      third: 'Third',\n      fourth: 'Fourth',\n      last: 'Last',\n      repeat: 'Repeat',\n      repeatEvery: 'Repeat every',\n      on: 'Repeat On',\n      end: 'End',\n      onDay: 'Day',\n      days: 'Day(s)',\n      weeks: 'Week(s)',\n      months: 'Month(s)',\n      years: 'Year(s)',\n      every: 'every',\n      summaryTimes: 'time(s)',\n      summaryOn: 'on',\n      summaryUntil: 'until',\n      summaryRepeat: 'Repeats',\n      summaryDay: 'day(s)',\n      summaryWeek: 'week(s)',\n      summaryMonth: 'month(s)',\n      summaryYear: 'year(s)',\n      monthWeek: 'Month Week',\n      monthPosition: 'Month Position',\n      monthExpander: 'Month Expander',\n      yearExpander: 'Year Expander',\n      repeatInterval: 'Repeat Interval'\n    };\n    _this.renderStatus = false;\n    _this.dayButtons = [];\n    _this.monthButtons = [];\n    return _this;\n  }\n\n  RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n    this.showFormElement();\n    this.updateForm(freq);\n    this.freshOnEndForm();\n    this.updateEndOnForm(endOn);\n    this.selectMonthDay(startDate);\n    this.updateUntilDate(startDate);\n    this.onMonthDay.setProperties({\n      checked: true\n    });\n  };\n\n  RecurrenceEditor.prototype.preRender = function () {\n    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale); // pre render code snippets\n  };\n\n  RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n    if (cssClass) {\n      addClass([this.element], cssClass);\n    }\n  };\n\n  RecurrenceEditor.prototype.initialize = function () {\n    this.renderComponent();\n\n    if (!isNullOrUndefined(this.value)) {\n      this.setRecurrenceRule(this.value);\n    } else {\n      this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n      this.updateForm(this.repeatType.value.toString());\n\n      if (this.selectedType > 0) {\n        this.setProperties({\n          value: this.getRecurrenceRule()\n        }, false);\n      }\n    }\n\n    this.applyCustomClass(this.cssClass);\n  };\n\n  RecurrenceEditor.prototype.triggerChangeEvent = function () {\n    if (this.renderStatus) {\n      var value = this.getRecurrenceRule();\n      this.trigger('change', {\n        value: value\n      });\n      this.setProperties({\n        value: value\n      }, false);\n    }\n  };\n\n  RecurrenceEditor.prototype.resetDayButton = function () {\n    var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n    elements.forEach(function (element) {\n      return removeClass([element], [ACTIVE, PRIMARY]);\n    });\n  };\n\n  RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n    this.resetDayButton();\n    var days = [0, 1, 2, 3, 4, 5, 6];\n    this.rotateArray(days, this.firstDayOfWeek);\n    var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n\n    if (element) {\n      addClass([element], [ACTIVE, PRIMARY]);\n    }\n  };\n\n  RecurrenceEditor.prototype.rtlClass = function (status) {\n    if (status) {\n      addClass([this.element], RTLCLASS);\n    } else {\n      removeClass([this.element], RTLCLASS);\n    }\n  };\n\n  RecurrenceEditor.prototype.updateUntilDate = function (date) {\n    var tempDate = new Date(date.getTime());\n    tempDate.setDate(tempDate.getDate() + 60);\n    this.untilDateObj.setProperties({\n      value: tempDate\n    });\n  };\n\n  RecurrenceEditor.prototype.selectMonthDay = function (date) {\n    var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n    this.monthDate.setProperties({\n      value: date.getDate()\n    });\n    this.monthWeekDays.setProperties({\n      value: valueData[weekday[date.getDay()]]\n    });\n    this.monthValue.setProperties({\n      value: '' + (date.getMonth() + 1)\n    });\n    this.monthWeekPos.setProperties({\n      value: this.getDayPosition(date)\n    });\n    this.daySelection(date.getDay());\n  };\n\n  RecurrenceEditor.prototype.updateForm = function (state) {\n    var _this = this;\n\n    this.repeatType.setProperties({\n      value: state\n    });\n    var end = this.element.querySelector('.' + ENDON);\n\n    if (state === DAILY) {\n      classList(end, [FORMLEFT], [FORMRIGHT]);\n    } else {\n      classList(end, [FORMRIGHT], [FORMLEFT]);\n    }\n\n    switch (state) {\n      case NONE:\n        neverClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case WEEKLY:\n        weekClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case MONTHLY:\n        monthClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case YEARLY:\n        yearClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case DAILY:\n        dailyClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n    }\n  };\n\n  RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n    var _this = this;\n\n    this.endType.setProperties({\n      value: state\n    });\n\n    switch (state) {\n      case NEVER:\n        noEndClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case UNTIL:\n        endOnDateClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case COUNT:\n        endOnCountClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n    }\n  };\n\n  RecurrenceEditor.prototype.freshOnEndForm = function () {\n    var _this = this;\n\n    noEndClassList.forEach(function (className) {\n      var element = _this.element.querySelector('.' + className);\n\n      if (element) {\n        removeClass([element], HIDEWRAPPER);\n      }\n    });\n  };\n\n  RecurrenceEditor.prototype.showFormElement = function () {\n    var _this = this;\n\n    neverClassList.forEach(function (className) {\n      return removeClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n    });\n  };\n\n  RecurrenceEditor.prototype.renderDropdowns = function () {\n    var _this = this;\n\n    var self = this;\n    this.repeatType = new DropDownList({\n      //set the data to dataSource property\n      dataSource: this.getRepeatData(),\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      index: this.selectedType,\n      fields: {\n        text: TEXTFIELD,\n        value: VALUEFIELD\n      },\n      placeholder: this.localeObj.getConstant(REPEAT),\n      htmlAttributes: {\n        'title': this.localeObj.getConstant(REPEAT)\n      },\n      change: function change(args) {\n        self.setProperties({\n          selectedType: args.value\n        }, false);\n        self.element.querySelector('.' + REPEATCONTENT).innerHTML = self.localeObj.getConstant(contentType[args.value]);\n        self.showFormElement();\n        self.updateForm(args.value);\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    }); // set placeholder to DropDownList input element\n\n    this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n    this.endType = new DropDownList({\n      dataSource: this.getEndData(),\n      popupWidth: this.getPopupWidth(),\n      enableRtl: this.enableRtl,\n      index: 1,\n      fields: {\n        text: TEXTFIELD,\n        value: VALUEFIELD\n      },\n      change: function change(args) {\n        self.freshOnEndForm();\n        self.updateEndOnForm(args.value);\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n\n    var renderDropDownList = function renderDropDownList(dropDownData) {\n      return new DropDownList({\n        dataSource: dropDownData,\n        popupWidth: _this.getPopupWidth(),\n        enableRtl: _this.enableRtl,\n        fields: {\n          text: TEXTFIELD,\n          value: VALUEFIELD\n        },\n        index: 1,\n        change: function change(args) {\n          self.onWeekDay.setProperties({\n            checked: true\n          });\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      });\n    };\n\n    this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n    this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n    this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n    this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n    this.monthValue = new DropDownList({\n      dataSource: this.getMonthData(),\n      fields: {\n        text: TEXTFIELD,\n        value: VALUEFIELD\n      },\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      index: 7,\n      change: function change(args) {\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n  };\n\n  RecurrenceEditor.prototype.setDefaultValue = function () {\n    var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n\n    for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n      var element = formelement_1[_i];\n      var instance = element.ej2_instances[0];\n\n      if (instance.element.classList.contains(REPEATINTERVAL)) {\n        instance.value = 1;\n        instance.dataBind();\n      } else if (instance.element.classList.contains(ENDONCOUNT)) {\n        instance.value = 10;\n        instance.dataBind();\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.resetFormValues = function () {\n    var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n\n    for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n      var element = recurreneElement_1[_i];\n      var instance = void 0;\n\n      if (element.classList.contains('e-datepicker')) {\n        instance = element.ej2_instances[0];\n\n        if (instance.value) {\n          instance.value = instance.value;\n          instance.dataBind();\n        } else {\n          this.updateUntilDate(this.startDate);\n        }\n      } else if (element.classList.contains('e-dropdownlist')) {\n        instance = element.ej2_instances[0];\n        instance.index = instance.index || 0;\n        instance.dataBind();\n      } else if (element.classList.contains('e-numerictextbox')) {\n        instance = element.ej2_instances[0];\n        var value = void 0;\n\n        if (instance.element.classList.contains(REPEATINTERVAL)) {\n          value = 1;\n        } else if (instance.element.classList.contains(ENDONCOUNT)) {\n          value = 10;\n        } else {\n          value = this.startDate.getDate();\n        }\n\n        instance.value = instance.value || value;\n        instance.dataBind();\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.getPopupWidth = function () {\n    return Browser.isDevice ? '100%' : 'auto';\n  };\n\n  RecurrenceEditor.prototype.renderDatePickers = function () {\n    var self = this;\n    this.untilDateObj = new DatePicker({\n      enableRtl: this.enableRtl,\n      min: this.minDate,\n      max: this.maxDate,\n      change: function change(args) {\n        if (args.value) {\n          self.triggerChangeEvent();\n        }\n      }\n    });\n    this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n  };\n\n  RecurrenceEditor.prototype.dayButtonRender = function () {\n    var _this = this;\n\n    var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n    var self = this;\n\n    for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n      var btn = btns_1[_i];\n      var button = new Button({\n        isToggle: true,\n        enableRtl: this.enableRtl\n      }, btn);\n      this.dayButtons.push(button);\n      EventHandler.add(btn, 'click', function (args) {\n        var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        var element = args.target;\n\n        if (!element.classList.contains(PRIMARY)) {\n          addClass([element], PRIMARY);\n          self.triggerChangeEvent();\n        } else if (btns.length > 1) {\n          removeClass([element], PRIMARY);\n          self.triggerChangeEvent();\n        }\n      });\n    }\n  };\n\n  RecurrenceEditor.prototype.radioButtonRender = function () {\n    var self = this;\n    this.onMonthDay = new RadioButton({\n      label: this.localeObj.getConstant(RADIOLABEL),\n      enableRtl: this.enableRtl,\n      name: 'monthType',\n      value: 'day',\n      change: function change(args) {\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n    this.monthButtons.push(this.onMonthDay);\n    this.onWeekDay = new RadioButton({\n      label: '',\n      name: 'monthType',\n      enableRtl: this.enableRtl,\n      value: 'daypos',\n      change: function change(args) {\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n    this.monthButtons.push(this.onWeekDay);\n  };\n\n  RecurrenceEditor.prototype.numericTextboxRender = function () {\n    var self = this;\n    this.recurrenceCount = new NumericTextBox({\n      value: 10,\n      format: '#',\n      enableRtl: this.enableRtl,\n      floatLabelType: 'Always',\n      min: 1,\n      change: function change(args) {\n        self.triggerChangeEvent();\n      }\n    });\n    this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n    this.monthDate = new NumericTextBox({\n      value: 1,\n      format: '#',\n      enableRtl: this.enableRtl,\n      min: 1,\n      max: 31,\n      change: function change(args) {\n        self.onMonthDay.setProperties({\n          checked: true\n        });\n        self.triggerChangeEvent();\n      }\n    });\n    this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n    this.repeatInterval = new NumericTextBox({\n      value: 1,\n      format: '#',\n      min: 1,\n      enableRtl: this.enableRtl,\n      floatLabelType: 'Always',\n      placeholder: this.localeObj.getConstant(REPEATEVERY),\n      change: function change(args) {\n        self.triggerChangeEvent();\n      }\n    });\n    this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n  };\n\n  RecurrenceEditor.prototype.renderComponent = function () {\n    this.setTemplate();\n    this.renderDropdowns();\n    this.renderDatePickers();\n    this.dayButtonRender();\n    this.radioButtonRender();\n    this.numericTextboxRender();\n  };\n\n  RecurrenceEditor.prototype.rotateArray = function (data, count) {\n    var temp;\n\n    for (var index = 0; index < count; index++) {\n      temp = data.shift();\n      data.push(temp);\n    }\n  };\n\n  RecurrenceEditor.prototype.getEndData = function () {\n    var endData = [NEVER, UNTIL, COUNT];\n    var self = this;\n    var dataSource = [];\n    endData.forEach(function (data) {\n      dataSource.push({\n        text: self.localeObj.getConstant(data),\n        value: data\n      });\n    });\n    return dataSource;\n  };\n\n  RecurrenceEditor.prototype.getDayPosition = function (date) {\n    var temp = new Date(date.getTime());\n    var endDate = new Date(date.getTime());\n    var day = date.getDay();\n    var positionCollection = [];\n    temp.setDate(1);\n    endDate.setDate(1);\n    endDate.setMonth(endDate.getMonth() + 1);\n\n    while (temp < endDate) {\n      if (temp.getDay() === day) {\n        positionCollection.push(temp.getTime());\n      }\n\n      temp.setDate(temp.getDate() + 1);\n    }\n\n    if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n      return -1;\n    }\n\n    return positionCollection.indexOf(date.getTime()) + 1;\n  };\n\n  RecurrenceEditor.prototype.getRepeatData = function () {\n    var data = [];\n    var self = this;\n    this.frequencies.forEach(function (element) {\n      var textValue = element === NONE ? NEVER : element;\n      data.push({\n        text: self.localeObj.getConstant(textValue),\n        value: element\n      });\n    });\n    return data;\n  };\n\n  RecurrenceEditor.prototype.getMonthPosData = function () {\n    var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n    var monthposValue = {\n      first: 1,\n      second: 2,\n      third: 3,\n      fourth: 4,\n      last: -1\n    };\n    var self = this;\n    var dataSource = [];\n    monthpos.forEach(function (data) {\n      dataSource.push({\n        text: self.localeObj.getConstant(data),\n        value: monthposValue[data]\n      });\n    });\n    return dataSource;\n  };\n\n  RecurrenceEditor.prototype.getDayData = function (format) {\n    var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n    var dayData = [];\n    var cldrObj;\n    this.rotateArray(weekday, this.firstDayOfWeek);\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      cldrObj = getValue('days.stand-alone.' + format, getDefaultDateObject());\n    } else {\n      cldrObj = getValue('main.' + '' + this.locale + '.dates.calendars.gregorian.days.stand-alone.' + format, cldrData);\n    }\n\n    for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n      var obj = weekday_1[_i];\n      dayData.push({\n        text: getValue(obj, cldrObj),\n        value: valueData[obj]\n      });\n    }\n\n    return dayData;\n  };\n\n  RecurrenceEditor.prototype.getMonthData = function () {\n    var monthData = [];\n    var cldrObj;\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      cldrObj = getValue('months.stand-alone.wide', getDefaultDateObject());\n    } else {\n      cldrObj = getValue('main.' + '' + this.locale + '.dates.calendars.gregorian.months.stand-alone.wide', cldrData);\n    }\n\n    for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n      var obj = _a[_i];\n      monthData.push({\n        text: getValue(obj, cldrObj),\n        value: obj\n      });\n    }\n\n    return monthData;\n  };\n\n  RecurrenceEditor.prototype.setTemplate = function () {\n    var dayData = this.getDayData('narrow');\n    var fullDay = this.getDayData('wide');\n    this.element.innerHTML = '<div class=\"' + HEADER + '\">' + '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT + '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' + '</div><div class=\"' + INPUTWARAPPER + ' ' + INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' + '<td><input type=\"text\" tabindex=\"0\" class=\"' + REPEATINTERVAL + '\"title=\"' + this.localeObj.getConstant('repeatInterval') + '\" /></td>' + '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' + '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' + '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' + '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' + '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' + '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' + '<div class=\"' + YEAREXPANDERWRAPPER + '\">' + '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' + this.localeObj.getConstant('yearExpander') + '\"/>' + '</div>' + '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' + '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' + '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' + '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' + '</div></td>' + '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" />' + '</div></td></tr>' + '<tr><td>' + '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' + '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' + '</div></td>' + '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' + '</div></td>' + '<td><div class=\"' + INPUTWARAPPER + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' + '</div></td></tr></table>' + '</div></div>' + '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' + '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL) + '\" />' + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' + '</div></div>' + '</div></div>';\n  };\n\n  RecurrenceEditor.prototype.getSelectedDaysData = function () {\n    var ruleData = RULEBYDAY + EQUAL;\n    var elements = this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY);\n    var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n    this.rotateArray(weekday, this.firstDayOfWeek);\n\n    for (var index = 0; index < elements.length; index++) {\n      ruleData += weekday[parseInt(elements[index].getAttribute('data-index'), 10)] + (index === elements.length - 1 ? '' : COMMA);\n    }\n\n    return ruleData + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.getSelectedMonthData = function () {\n    var ruleData;\n\n    if (this.onWeekDay.checked) {\n      ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n    } else {\n      ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n    }\n\n    return ruleData;\n  };\n\n  RecurrenceEditor.prototype.getIntervalData = function () {\n    return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.getEndOnCount = function () {\n    return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n    return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n    var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n    this.rotateArray(weekday, this.firstDayOfWeek);\n\n    for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n      var obj = _a[_i];\n      var index = parseInt(obj.element.getAttribute('data-index'), 10);\n\n      if (keys.indexOf(weekday[index]) !== -1) {\n        obj.setProperties({\n          isPrimary: true\n        });\n      } else {\n        obj.setProperties({\n          isPrimary: false\n        });\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.updateMonthUI = function () {\n    if (this.ruleObject.monthDay.length) {\n      this.monthDate.setProperties({\n        value: this.ruleObject.monthDay[0]\n      });\n      this.onMonthDay.setProperties({\n        checked: true\n      });\n    } else {\n      this.onWeekDay.setProperties({\n        checked: true\n      });\n      this.monthWeekPos.setProperties({\n        value: this.ruleObject.setPosition\n      });\n\n      for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n        var key = _a[_i];\n\n        if (valueData[key] === this.ruleObject.day[0]) {\n          this.monthWeekDays.setProperties({\n            value: this.ruleObject.day[0]\n          });\n          break;\n        }\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n    this.repeatInterval.setProperties({\n      value: this.ruleObject.interval\n    });\n\n    switch (state) {\n      case UNTIL:\n        this.untilDateObj.setProperties({\n          value: this.ruleObject.until\n        });\n        break;\n\n      case COUNT:\n        this.recurrenceCount.setProperties({\n          value: this.ruleObject.count\n        });\n        break;\n    }\n\n    switch (repeat) {\n      case WEEKLY:\n        this.updateWeekButton(this.ruleObject.day);\n        break;\n\n      case YEARLY:\n        this.monthValue.setProperties({\n          index: this.ruleObject.month[0] - 1\n        });\n        this.updateMonthUI();\n        break;\n\n      case MONTHLY:\n        this.updateMonthUI();\n        break;\n    }\n  };\n\n  RecurrenceEditor.prototype.getUntilData = function () {\n    var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n    return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.destroyComponents = function () {\n    if (!this.recurrenceCount.isDestroyed) {\n      this.recurrenceCount.destroy();\n    }\n\n    if (!this.monthDate.isDestroyed) {\n      this.monthDate.destroy();\n    }\n\n    if (!this.repeatInterval.isDestroyed) {\n      this.repeatInterval.destroy();\n    }\n\n    if (!this.untilDateObj.isDestroyed) {\n      this.untilDateObj.destroy();\n    }\n\n    if (!this.repeatType.isDestroyed) {\n      this.repeatType.destroy();\n    }\n\n    if (!this.endType.isDestroyed) {\n      this.endType.destroy();\n    }\n\n    if (!this.monthWeekPos.isDestroyed) {\n      this.monthWeekPos.destroy();\n    }\n\n    if (!this.monthWeekDays.isDestroyed) {\n      this.monthWeekDays.destroy();\n    }\n\n    if (!this.monthValue.isDestroyed) {\n      this.monthValue.destroy();\n    }\n\n    this.dayButtons.forEach(function (element) {\n      return element.destroy();\n    });\n    this.dayButtons = [];\n    this.monthButtons.forEach(function (element) {\n      return element.destroy();\n    });\n    this.monthButtons = [];\n  };\n\n  RecurrenceEditor.prototype.resetFields = function () {\n    this.startState(NONE, NEVER, this.startDate);\n    this.setDefaultValue();\n  };\n\n  RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n    if (rule === void 0) {\n      rule = this.getRecurrenceRule();\n    }\n\n    return generateSummary(rule, this.localeObj, this.locale);\n  };\n\n  RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n    viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n    return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate);\n  };\n\n  RecurrenceEditor.prototype.getRecurrenceRule = function () {\n    var ruleData = RULEFREQ + EQUAL;\n\n    switch (this.repeatType.value) {\n      case DAILY:\n        ruleData += RULEDAILY + SEMICOLON;\n        break;\n\n      case WEEKLY:\n        ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n        break;\n\n      case MONTHLY:\n        ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n        break;\n\n      case YEARLY:\n        ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n        break;\n\n      case NONE:\n        return '';\n    }\n\n    ruleData += this.getIntervalData();\n\n    switch (this.endType.value) {\n      case UNTIL:\n        ruleData += this.getUntilData();\n        break;\n\n      case COUNT:\n        ruleData += this.getEndOnCount();\n        break;\n    }\n\n    return ruleData;\n  };\n\n  RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n    if (startDate === void 0) {\n      startDate = this.startDate;\n    }\n\n    if (!rule) {\n      this.repeatType.setProperties({\n        value: NONE\n      });\n    }\n\n    this.ruleObject = extractObjectFromRule(rule);\n    var endon = this.ruleObject.count ? COUNT : this.ruleObject.until ? UNTIL : NEVER;\n\n    switch (this.ruleObject.freq) {\n      case RULEDAILY:\n        this.startState(DAILY, endon, startDate);\n        this.updateUI(DAILY, endon);\n        break;\n\n      case RULEWEEKLY:\n        this.startState(WEEKLY, endon, startDate);\n        this.updateUI(WEEKLY, endon);\n        break;\n\n      case RULEMONTHLY:\n        this.startState(MONTHLY, endon, startDate);\n        this.updateUI(MONTHLY, endon);\n        break;\n\n      case RULEYEARLY:\n        this.startState(YEARLY, endon, startDate);\n        this.updateUI(YEARLY, endon);\n        break;\n    }\n  };\n  /**\n   * Destroys the widget.\n   * @returns void\n   */\n\n\n  RecurrenceEditor.prototype.destroy = function () {\n    this.destroyComponents();\n\n    _super.prototype.destroy.call(this);\n\n    var removeClasses = ['e-' + this.getModuleName()];\n\n    if (this.cssClass) {\n      removeClasses = removeClasses.concat(this.cssClass.split(' '));\n    }\n\n    removeClass([this.element], removeClasses);\n    this.element.innerHTML = '';\n  };\n  /**\n   * Get component name.\n   * @returns string\n   * @private\n   */\n\n\n  RecurrenceEditor.prototype.getModuleName = function () {\n    return 'recurrenceeditor';\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   * @returns string\n   */\n\n\n  RecurrenceEditor.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Initialize the control rendering\n   * @returns void\n   * @private\n   */\n\n\n  RecurrenceEditor.prototype.render = function () {\n    this.initialize();\n    this.rtlClass(this.enableRtl);\n    this.renderStatus = true;\n  };\n  /**\n   * Called internally, if any of the property value changed.\n   * @private\n   */\n\n\n  RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'startDate':\n          this.selectMonthDay(newProp.startDate);\n          this.updateUntilDate(newProp.startDate);\n          this.endType.setProperties({\n            index: 0\n          });\n          break;\n\n        case 'enableRtl':\n          this.rtlClass(newProp.enableRtl);\n          break;\n\n        case 'cssClass':\n          this.applyCustomClass(newProp.cssClass);\n          break;\n\n        case 'selectedType':\n          this.repeatType.setProperties({\n            index: this.selectedType\n          });\n          break;\n\n        case 'minDate':\n          this.untilDateObj.setProperties({\n            minDate: this.minDate\n          });\n          break;\n\n        case 'maxDate':\n          this.untilDateObj.setProperties({\n            maxDate: this.maxDate\n          });\n          break;\n\n        case 'value':\n          if (this.getRecurrenceRule() !== this.value) {\n            this.setRecurrenceRule(this.value);\n          }\n\n          break;\n\n        case 'locale':\n        case 'frequencies':\n        case 'firstDayOfWeek':\n          this.refresh();\n          break;\n      }\n    }\n  };\n\n  __decorate([Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])], RecurrenceEditor.prototype, \"frequencies\", void 0);\n\n  __decorate([Property(0)], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n\n  __decorate([Property(new Date())], RecurrenceEditor.prototype, \"startDate\", void 0);\n\n  __decorate([Property()], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n\n  __decorate([Property('en-US')], RecurrenceEditor.prototype, \"locale\", void 0);\n\n  __decorate([Property()], RecurrenceEditor.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], RecurrenceEditor.prototype, \"enableRtl\", void 0);\n\n  __decorate([Property()], RecurrenceEditor.prototype, \"value\", void 0);\n\n  __decorate([Property(new Date(1900, 1, 1))], RecurrenceEditor.prototype, \"minDate\", void 0);\n\n  __decorate([Property(new Date(2099, 12, 31))], RecurrenceEditor.prototype, \"maxDate\", void 0);\n\n  __decorate([Property(0)], RecurrenceEditor.prototype, \"selectedType\", void 0);\n\n  __decorate([Event()], RecurrenceEditor.prototype, \"change\", void 0);\n\n  RecurrenceEditor = __decorate([NotifyPropertyChanges], RecurrenceEditor);\n  return RecurrenceEditor;\n}(Component);\n\nexport { RecurrenceEditor };","map":null,"metadata":{},"sourceType":"module"}