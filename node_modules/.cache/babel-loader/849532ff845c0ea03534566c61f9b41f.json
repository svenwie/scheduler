{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { EventHandler, Property, Internationalization, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, Animation, Browser } from '@syncfusion/ej2-base';\nimport { cldrData, L10n, Component, getDefaultDateObject, rippleEffect, Event } from '@syncfusion/ej2-base';\nimport { remove, addClass, removeClass, closest, append, attributes, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, formatUnit, getValue, getUniqueID } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { ListBase, cssClass as ListBaseClasses } from '@syncfusion/ej2-lists';\nvar WRAPPERCLASS = 'e-time-wrapper';\nvar POPUP = 'e-popup';\nvar ERROR = 'e-error';\nvar POPUPDIMENSION = '240px';\nvar DAY = new Date().getDate();\nvar MONTH = new Date().getMonth();\nvar YEAR = new Date().getFullYear();\nvar ROOT = 'e-timepicker';\nvar RTL = 'e-rtl';\nvar CONTENT = 'e-content';\nvar SELECTED = 'e-active';\nvar HOVER = 'e-hover';\nvar NAVIGATION = 'e-navigation';\nvar DISABLED = 'e-disabled';\nvar ICONANIMATION = 'e-icon-anim';\nvar FOCUS = 'e-input-focus';\nvar DEVICE = 'e-device';\nvar LISTCLASS = ListBaseClasses.li;\nvar HALFPOSITION = 2;\nvar ANIMATIONDURATION = 50;\nexport var TimePickerBase;\n\n(function (TimePickerBase) {\n  // tslint:disable-next-line\n  function createListItems(createdEl, min, max, globalize, timeFormat, step) {\n    var start;\n    var end;\n    var interval = step * 60000;\n    var listItems = [];\n    var timeCollections = [];\n    start = +min.setMilliseconds(0);\n    end = +max.setMilliseconds(0);\n\n    while (end >= start) {\n      timeCollections.push(start);\n      listItems.push(globalize.formatDate(new Date(start), {\n        format: timeFormat,\n        type: 'time'\n      }));\n      start += interval;\n    }\n\n    var listTag = ListBase.createList(createdEl, listItems, null, true);\n    return {\n      collection: timeCollections,\n      list: listTag\n    };\n  }\n\n  TimePickerBase.createListItems = createListItems;\n})(TimePickerBase || (TimePickerBase = {}));\n/**\n * TimePicker is an intuitive interface component which provides an options to select a time value\n * from popup list or to set a desired time value.\n * ```\n * <input id='timepicker' type='text'/>\n * <script>\n *   var timePickerObj = new TimePicker({ value: new Date() });\n *   timePickerObj.appendTo('#timepicker');\n * </script>\n * ```\n */\n\n\nvar TimePicker =\n/** @class */\nfunction (_super) {\n  __extends(TimePicker, _super);\n  /**\n   * Constructor for creating the widget\n   */\n\n\n  function TimePicker(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.liCollections = [];\n    _this.timeCollections = [];\n    _this.disableItemCollection = [];\n    return _this;\n  }\n  /**\n   * Initialize the event handler\n   * @private\n   */\n\n\n  TimePicker.prototype.preRender = function () {\n    this.keyConfigure = {\n      enter: 'enter',\n      escape: 'escape',\n      end: 'end',\n      tab: 'tab',\n      home: 'home',\n      down: 'downarrow',\n      up: 'uparrow',\n      left: 'leftarrow',\n      right: 'rightarrow',\n      open: 'alt+downarrow',\n      close: 'alt+uparrow'\n    };\n    this.cloneElement = this.element.cloneNode(true);\n    this.inputElement = this.element;\n    this.angularTag = null;\n\n    if (this.element.tagName === 'EJS-TIMEPICKER') {\n      this.angularTag = this.element.tagName;\n      this.inputElement = this.createElement('input');\n      this.element.appendChild(this.inputElement);\n    }\n  }; // element creation\n\n\n  TimePicker.prototype.render = function () {\n    this.initialize();\n    this.createInputElement();\n    this.setTimeAllowEdit();\n    this.setEnable();\n    this.validateInterval();\n    this.bindEvents();\n    this.validateDisable();\n    this.setValue(this.getFormattedValue(this.value));\n  };\n\n  TimePicker.prototype.setTimeAllowEdit = function () {\n    if (this.allowEdit) {\n      if (!this.readonly) {\n        this.inputElement.removeAttribute('readonly');\n      }\n    } else {\n      attributes(this.inputElement, {\n        'readonly': ''\n      });\n    }\n  };\n\n  TimePicker.prototype.validateDisable = function () {\n    this.setMinMax(this.initMin, this.initMax);\n    this.popupCreation();\n    this.popupObj.hide();\n\n    if (!isNaN(+this.value) && this.value !== null) {\n      if (!this.valueIsDisable(this.value)) {\n        //disable value given in value property so reset the date based on current date\n        if (this.strictMode) {\n          this.resetState();\n        }\n\n        this.initValue = null;\n        this.initMax = this.getDateObject(this.initMax);\n        this.initMin = this.getDateObject(this.initMin);\n        this.timeCollections = this.liCollections = [];\n        this.setMinMax(this.initMin, this.initMax);\n      }\n    }\n  };\n\n  TimePicker.prototype.validationAttribute = function (target, input) {\n    var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n    input.setAttribute('name', name);\n    target.removeAttribute('name');\n    var attributes = ['required', 'aria-required', 'form'];\n\n    for (var i = 0; i < attributes.length; i++) {\n      if (isNullOrUndefined(target.getAttribute(attributes[i]))) {\n        continue;\n      }\n\n      var attr = target.getAttribute(attributes[i]);\n      input.setAttribute(attributes[i], attr);\n      target.removeAttribute(attributes[i]);\n    }\n  };\n\n  TimePicker.prototype.initialize = function () {\n    this.globalize = new Internationalization(this.locale);\n    this.defaultCulture = new Internationalization('en'); // persist the value property.\n\n    this.setProperties({\n      value: this.checkDateValue(new Date('' + this.value))\n    }, true);\n    this.setProperties({\n      min: this.checkDateValue(new Date('' + this.min))\n    }, true);\n    this.setProperties({\n      max: this.checkDateValue(new Date('' + this.max))\n    }, true);\n\n    if (this.angularTag !== null) {\n      this.validationAttribute(this.element, this.inputElement);\n    }\n\n    this.checkAttributes(); //check the input element attributes\n\n    var localeText = {\n      placeholder: this.placeholder\n    };\n    this.l10n = new L10n('timepicker', localeText, this.locale);\n    this.setProperties({\n      placeholder: this.placeholder || this.l10n.getConstant('placeholder')\n    }, true);\n    this.initValue = this.checkDateValue(this.value);\n    this.initMin = this.checkDateValue(this.min);\n    this.initMax = this.checkDateValue(this.max);\n    this.isNavigate = this.isPreventBlur = this.isTextSelected = false;\n    this.activeIndex = this.valueWithMinutes = this.prevDate = null;\n\n    if (!isNullOrUndefined(this.element.getAttribute('id'))) {\n      if (this.angularTag !== null) {\n        this.inputElement.id = this.element.getAttribute('id') + '_input';\n      }\n    } else {\n      //for angular case\n      this.element.id = getUniqueID('ej2_timepicker');\n\n      if (this.angularTag !== null) {\n        attributes(this.inputElement, {\n          'id': this.element.id + '_input'\n        });\n      }\n    }\n\n    if (isNullOrUndefined(this.inputElement.getAttribute('name'))) {\n      attributes(this.inputElement, {\n        'name': this.element.id\n      });\n    }\n  };\n\n  TimePicker.prototype.checkDateValue = function (value) {\n    return !isNullOrUndefined(value) && value instanceof Date && !isNaN(+value) ? value : null;\n  };\n\n  TimePicker.prototype.createInputElement = function () {\n    this.inputWrapper = Input.createInput({\n      element: this.inputElement,\n      floatLabelType: this.floatLabelType,\n      properties: {\n        readonly: this.readonly,\n        placeholder: this.placeholder,\n        cssClass: this.cssClass,\n        enabled: this.enabled,\n        enableRtl: this.enableRtl,\n        showClearButton: this.showClearButton\n      },\n      buttons: [' e-input-group-icon e-time-icon e-icons']\n    }, this.createElement);\n    this.inputWrapper.container.style.width = this.setWidth(this.width);\n    attributes(this.inputElement, {\n      'aria-haspopup': 'true',\n      'aria-autocomplete': 'list',\n      'tabindex': '0',\n      'aria-activedescendant': 'null',\n      'aria-owns': this.element.id + '_options',\n      'aria-expanded': 'false',\n      'role': 'combobox',\n      'autocomplete': 'off',\n      'autocorrect': 'off',\n      'autocapitalize': 'off',\n      'spellcheck': 'false',\n      'aria-disabled': 'false',\n      'aria-invalid': 'false'\n    });\n\n    if (!this.isNullOrEmpty(this.inputStyle)) {\n      Input.addAttributes({\n        'style': this.inputStyle\n      }, this.inputElement);\n    }\n\n    addClass([this.inputWrapper.container], WRAPPERCLASS);\n  }; // destroy function\n\n\n  TimePicker.prototype.destroy = function () {\n    this.hide();\n    this.unBindEvents();\n    var ariaAttribute = {\n      'aria-haspopup': 'true',\n      'aria-autocomplete': 'list',\n      'tabindex': '0',\n      'aria-activedescendant': 'null',\n      'aria-owns': this.element.id + '_options',\n      'aria-expanded': 'false',\n      'role': 'combobox',\n      'autocomplete': 'off',\n      'autocorrect': 'off',\n      'autocapitalize': 'off',\n      'spellcheck': 'false',\n      'aria-disabled': 'true',\n      'aria-invalid': 'false'\n    };\n\n    if (this.inputElement) {\n      Input.removeAttributes(ariaAttribute, this.inputElement);\n\n      if (this.angularTag === null) {\n        this.inputWrapper.container.parentElement.appendChild(this.inputElement);\n      }\n\n      this.ensureInputAttribute();\n      this.enableElement([this.inputElement]);\n      this.inputElement.classList.remove('e-input');\n\n      if (isNullOrUndefined(this.cloneElement.getAttribute('disabled'))) {\n        Input.setEnabled(true, this.inputElement, this.floatLabelType);\n      }\n    }\n\n    if (this.inputWrapper.container) {\n      remove(this.inputWrapper.container);\n    }\n\n    this.inputWrapper = this.popupWrapper = this.cloneElement = undefined;\n    this.liCollections = this.timeCollections = this.disableItemCollection = [];\n\n    if (!isNullOrUndefined(this.rippleFn)) {\n      this.rippleFn();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    var form = closest(this.element, 'form');\n\n    if (form) {\n      EventHandler.remove(form, 'reset', this.formResetHandler.bind(this));\n    }\n  };\n\n  TimePicker.prototype.ensureInputAttribute = function () {\n    for (var i = 0; i < this.inputElement.attributes.length; i++) {\n      var prop = this.inputElement.attributes[i].name;\n\n      if (isNullOrUndefined(this.cloneElement.getAttribute(prop))) {\n        if (prop.toLowerCase() === 'value' || isNullOrUndefined(this.cloneElement.getAttribute('value'))) {\n          this.inputElement.value = '';\n        }\n\n        this.inputElement.removeAttribute(prop);\n      }\n    }\n  }; //popup creation\n\n\n  TimePicker.prototype.popupCreation = function () {\n    this.popupWrapper = this.createElement('div', {\n      className: ROOT + ' ' + POPUP,\n      attrs: {\n        'id': this.element.id + '_popup',\n        'style': 'visibility:hidden'\n      }\n    });\n\n    if (!isNullOrUndefined(this.cssClass)) {\n      this.popupWrapper.classList.add(this.cssClass);\n    }\n\n    if (!isNullOrUndefined(this.step) && this.step > 0) {\n      this.generateList();\n      append([this.listWrapper], this.popupWrapper);\n    }\n\n    document.body.appendChild(this.popupWrapper);\n    this.addSelection();\n    this.renderPopup();\n    this.setScrollPosition();\n  };\n\n  TimePicker.prototype.getPopupHeight = function () {\n    var height = parseInt(POPUPDIMENSION, 10);\n    var popupHeight = this.popupWrapper.getBoundingClientRect().height;\n    return popupHeight > height ? height : popupHeight;\n  };\n\n  TimePicker.prototype.generateList = function () {\n    this.createListItems();\n    this.wireListEvents();\n    var rippleModel = {\n      duration: 300,\n      selector: '.' + LISTCLASS\n    };\n    this.rippleFn = rippleEffect(this.listWrapper, rippleModel);\n    this.liCollections = this.listWrapper.querySelectorAll('.' + LISTCLASS);\n  };\n\n  TimePicker.prototype.popupCalculation = function () {\n    var left = 0;\n\n    if (Browser.isDevice) {\n      var firstItem = this.isEmptyList() ? this.listTag : this.liCollections[0];\n      left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - (this.enableRtl ? parseInt(getComputedStyle(this.inputElement).paddingRight, 10) : parseInt(getComputedStyle(this.inputElement).paddingLeft, 10)));\n    }\n\n    return left;\n  };\n\n  TimePicker.prototype.isEmptyList = function () {\n    return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || isNullOrUndefined(this.liCollections);\n  };\n\n  TimePicker.prototype.renderPopup = function () {\n    var _this = this;\n\n    this.containerStyle = this.inputWrapper.container.getBoundingClientRect();\n    var offset = Browser.isDevice ? this.setPopupPosition() : 2;\n    this.popupObj = new Popup(this.popupWrapper, {\n      width: this.setPopupWidth(this.width),\n      zIndex: this.zIndex,\n      targetType: 'relative',\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      relateTo: this.inputWrapper.container,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.enableRtl,\n      offsetY: offset,\n      offsetX: this.popupCalculation(),\n      open: function open() {\n        _this.popupWrapper.style.visibility = 'visible';\n        addClass([_this.inputWrapper.buttons[0]], SELECTED);\n      },\n      close: function close() {\n        removeClass([_this.inputWrapper.buttons[0]], SELECTED);\n\n        _this.unWireListEvents();\n\n        _this.inputElement.setAttribute('aria-activedescendant', 'null');\n\n        remove(_this.popupObj.element);\n\n        _this.popupObj.destroy();\n\n        _this.popupWrapper.innerHTML = '';\n        _this.listWrapper = _this.popupWrapper = _this.listTag = undefined;\n      }\n    });\n\n    if (!Browser.isDevice) {\n      this.popupObj.collision = {\n        X: 'none',\n        Y: 'flip'\n      };\n    }\n\n    this.popupObj.element.style.maxHeight = POPUPDIMENSION;\n  }; //util function\n\n\n  TimePicker.prototype.getFormattedValue = function (value) {\n    if (isNullOrUndefined(this.checkDateValue(value))) {\n      return null;\n    } else {\n      return this.globalize.formatDate(value, {\n        skeleton: 'medium',\n        type: 'time'\n      });\n    }\n  };\n\n  TimePicker.prototype.getDateObject = function (text) {\n    if (!this.isNullOrEmpty(text)) {\n      var dateValue = this.createDateObj(text);\n      var value = !this.isNullOrEmpty(this.initValue);\n\n      if (this.checkDateValue(dateValue)) {\n        var date = value ? this.initValue.getDate() : DAY;\n        var month = value ? this.initValue.getMonth() : MONTH;\n        var year = value ? this.initValue.getFullYear() : YEAR;\n        return new Date(year, month, date, dateValue.getHours(), dateValue.getMinutes(), dateValue.getSeconds());\n      }\n    }\n\n    return null;\n  };\n\n  TimePicker.prototype.removeErrorClass = function () {\n    removeClass([this.inputWrapper.container], ERROR);\n    attributes(this.inputElement, {\n      'aria-invalid': 'false'\n    });\n  };\n\n  TimePicker.prototype.checkErrorState = function (val) {\n    var value = this.getDateObject(val);\n\n    if (this.validateState(value)) {\n      this.removeErrorClass();\n    } else {\n      addClass([this.inputWrapper.container], ERROR);\n      attributes(this.inputElement, {\n        'aria-invalid': 'true'\n      });\n    }\n  };\n\n  TimePicker.prototype.validateInterval = function () {\n    if (!isNullOrUndefined(this.step) && this.step > 0) {\n      this.enableElement([this.inputWrapper.buttons[0]]);\n    } else {\n      this.disableTimeIcon();\n    }\n  };\n\n  TimePicker.prototype.disableTimeIcon = function () {\n    this.disableElement([this.inputWrapper.buttons[0]]);\n    this.hide();\n  };\n\n  TimePicker.prototype.disableElement = function (element) {\n    addClass(element, DISABLED);\n  };\n\n  TimePicker.prototype.enableElement = function (element) {\n    removeClass(element, DISABLED);\n  };\n\n  TimePicker.prototype.selectInputText = function () {\n    this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n  };\n\n  TimePicker.prototype.getMeridianText = function () {\n    var meridian;\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      meridian = getValue('dayPeriods.format.wide', getDefaultDateObject());\n    } else {\n      meridian = getValue('main.' + '' + this.locale + '.dates.calendars.gregorian.dayPeriods.format.abbreviated', cldrData);\n    }\n\n    return meridian;\n  };\n\n  TimePicker.prototype.getCursorSelection = function () {\n    var input = this.inputElement;\n    var start = 0;\n    var end = 0;\n\n    if (!isNaN(input.selectionStart)) {\n      start = input.selectionStart;\n      end = input.selectionEnd;\n    }\n\n    return {\n      start: Math.abs(start),\n      end: Math.abs(end)\n    };\n  };\n\n  TimePicker.prototype.getActiveElement = function () {\n    if (!isNullOrUndefined(this.popupWrapper)) {\n      return this.popupWrapper.querySelectorAll('.' + SELECTED);\n    } else {\n      return null;\n    }\n  };\n\n  TimePicker.prototype.isNullOrEmpty = function (value) {\n    if (isNullOrUndefined(value) || typeof value === 'string' && value.trim() === '') {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  TimePicker.prototype.setWidth = function (width) {\n    if (typeof width === 'number') {\n      width = formatUnit(width);\n    } else if (typeof width === 'string') {\n      width = width.match(/px|%|em/) ? width : formatUnit(width);\n    } else {\n      width = '100%';\n    }\n\n    return width;\n  };\n\n  TimePicker.prototype.setPopupWidth = function (width) {\n    width = this.setWidth(width);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.containerStyle.width * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    if (Browser.isDevice) {\n      var firstItem = this.isEmptyList() ? this.listTag : this.liCollections[0];\n      width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).textIndent, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n    }\n\n    return width;\n  };\n\n  TimePicker.prototype.setScrollPosition = function () {\n    var listHeight = this.getPopupHeight();\n    var element;\n    element = this.selectedElement;\n\n    if (!isNullOrUndefined(element)) {\n      this.findScrollTop(element);\n    } else if (this.popupWrapper && this.checkDateValue(this.scrollTo)) {\n      this.setScrollTo();\n    }\n  };\n\n  TimePicker.prototype.findScrollTop = function (element) {\n    var listHeight = this.getPopupHeight();\n    var nextEle = element.nextElementSibling;\n    var height = nextEle ? nextEle.offsetTop : element.offsetTop;\n    var liHeight = element.getBoundingClientRect().height;\n\n    if (height + element.offsetTop > listHeight) {\n      this.popupWrapper.scrollTop = nextEle ? height - (listHeight / HALFPOSITION + liHeight / HALFPOSITION) : height;\n    } else {\n      this.popupWrapper.scrollTop = 0;\n    }\n  };\n\n  TimePicker.prototype.setScrollTo = function () {\n    var element;\n\n    if (!isNullOrUndefined(this.popupWrapper)) {\n      var items = this.popupWrapper.querySelectorAll('.' + LISTCLASS);\n\n      if (items.length) {\n        var initialTime = this.timeCollections[0];\n        var scrollTime = this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();\n        element = items[Math.round((scrollTime - initialTime) / (this.step * 60000))];\n      }\n    } else {\n      this.popupWrapper.scrollTop = 0;\n    }\n\n    if (!isNullOrUndefined(element)) {\n      this.findScrollTop(element);\n    } else {\n      this.popupWrapper.scrollTop = 0;\n    }\n  };\n\n  TimePicker.prototype.getText = function () {\n    return isNullOrUndefined(this.checkDateValue(this.value)) ? '' : this.getValue(this.value);\n  };\n\n  TimePicker.prototype.getValue = function (value) {\n    return isNullOrUndefined(this.checkDateValue(value)) ? null : this.globalize.formatDate(value, {\n      format: this.cldrTimeFormat(),\n      type: 'time'\n    });\n  };\n\n  TimePicker.prototype.cldrDateFormat = function () {\n    var cldrDate;\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      cldrDate = getValue('dateFormats.short', getDefaultDateObject());\n    } else {\n      cldrDate = this.getCultureDateObject(cldrData, '' + this.locale);\n    }\n\n    return cldrDate;\n  };\n\n  TimePicker.prototype.cldrTimeFormat = function () {\n    var cldrTime;\n\n    if (this.isNullOrEmpty(this.format)) {\n      if (this.locale === 'en' || this.locale === 'en-US') {\n        cldrTime = getValue('timeFormats.short', getDefaultDateObject());\n      } else {\n        cldrTime = this.getCultureTimeObject(cldrData, '' + this.locale);\n      }\n    } else {\n      cldrTime = this.format;\n    }\n\n    return cldrTime;\n  };\n\n  TimePicker.prototype.dateToNumeric = function () {\n    var cldrTime;\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      cldrTime = getValue('timeFormats.medium', getDefaultDateObject());\n    } else {\n      cldrTime = getValue('main.' + '' + this.locale + '.dates.calendars.gregorian.timeFormats.medium', cldrData);\n    }\n\n    return cldrTime;\n  };\n\n  TimePicker.prototype.getExactDateTime = function (value) {\n    if (isNullOrUndefined(this.checkDateValue(value))) {\n      return null;\n    } else {\n      return this.globalize.formatDate(value, {\n        format: this.dateToNumeric(),\n        type: 'time'\n      });\n    }\n  };\n\n  TimePicker.prototype.setValue = function (value) {\n    var time = this.checkValue(value);\n\n    if (!this.strictMode && !this.validateState(time)) {\n      if (this.checkDateValue(this.valueWithMinutes) === null) {\n        this.initValue = this.valueWithMinutes = null;\n      }\n\n      this.validateMinMax(this.value, this.min, this.max);\n    } else {\n      if (this.isNullOrEmpty(time)) {\n        this.initValue = null;\n        this.validateMinMax(this.value, this.min, this.max);\n      } else {\n        this.initValue = this.compareFormatChange(time);\n      }\n    }\n\n    this.updateInput(true, this.initValue);\n  };\n\n  TimePicker.prototype.compareFormatChange = function (value) {\n    if (isNullOrUndefined(value)) {\n      return null;\n    }\n\n    return value !== this.getText() ? this.getDateObject(value) : this.getDateObject(this.value);\n  };\n\n  TimePicker.prototype.updatePlaceHolder = function () {\n    Input.setPlaceholder(this.l10n.getConstant('placeholder'), this.inputElement);\n  }; //event related functions\n\n\n  TimePicker.prototype.popupHandler = function (e) {\n    if (Browser.isDevice) {\n      this.element.setAttribute('readonly', 'readonly');\n    }\n\n    e.preventDefault();\n\n    if (this.isPopupOpen()) {\n      this.closePopup(0, e);\n    } else {\n      this.show(e);\n    }\n  };\n\n  TimePicker.prototype.mouseDownHandler = function () {\n    if (!this.readonly) {\n      var curPos = this.getCursorSelection();\n      this.inputElement.setSelectionRange(0, 0);\n      EventHandler.add(this.inputElement, 'mouseup', this.mouseUpHandler, this);\n    }\n  };\n\n  TimePicker.prototype.mouseUpHandler = function (event) {\n    if (!this.readonly) {\n      event.preventDefault();\n      EventHandler.remove(this.inputElement, 'mouseup', this.mouseUpHandler);\n      var curPos = this.getCursorSelection();\n\n      if (!(curPos.start === 0 && curPos.end === this.inputElement.value.length)) {\n        if (this.inputElement.value.length > 0) {\n          this.cursorDetails = this.focusSelection();\n        }\n\n        this.inputElement.setSelectionRange(this.cursorDetails.start, this.cursorDetails.end);\n      }\n    }\n  };\n\n  TimePicker.prototype.focusSelection = function () {\n    var regex = new RegExp('^[a-zA-Z0-9]+$');\n    var split = this.inputElement.value.split('');\n    split.push(' ');\n    var curPos = this.getCursorSelection();\n    var start = 0;\n    var end = 0;\n    var isSeparator = false;\n\n    if (!this.isTextSelected) {\n      for (var i = 0; i < split.length; i++) {\n        if (!regex.test(split[i])) {\n          end = i;\n          isSeparator = true;\n        }\n\n        if (isSeparator) {\n          if (curPos.start >= start && curPos.end <= end) {\n            end = end;\n            this.isTextSelected = true;\n            break;\n          } else {\n            start = i + 1;\n            isSeparator = false;\n          }\n        }\n      }\n    } else {\n      start = curPos.start;\n      end = curPos.end;\n      this.isTextSelected = false;\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  TimePicker.prototype.inputHandler = function (event) {\n    if (!this.readonly && this.enabled) {\n      if (event.action !== 'right' && event.action !== 'left' && event.action !== 'tab') {\n        event.preventDefault();\n      }\n\n      switch (event.action) {\n        case 'home':\n        case 'end':\n        case 'up':\n        case 'down':\n          this.keyHandler(event);\n          break;\n\n        case 'enter':\n          if (this.isNavigate) {\n            this.selectedElement = this.liCollections[this.activeIndex];\n            this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]);\n            this.updateValue(this.valueWithMinutes, event);\n          } else {\n            this.updateValue(this.inputElement.value, event);\n          }\n\n          this.hide();\n          addClass([this.inputWrapper.container], FOCUS);\n          this.isNavigate = false;\n          break;\n\n        case 'open':\n          this.show(event);\n          break;\n\n        case 'escape':\n          Input.setValue(this.objToString(this.value), this.inputElement, this.floatLabelType, this.showClearButton);\n          this.previousState(this.value);\n          this.hide();\n          break;\n\n        case 'close':\n          this.hide();\n          break;\n\n        default:\n          this.isNavigate = false;\n          break;\n      }\n    }\n  };\n\n  TimePicker.prototype.onMouseClick = function (event) {\n    var target = event.target;\n    var li = this.selectedElement = closest(target, '.' + LISTCLASS);\n    this.setSelection(li, event);\n\n    if (li && li.classList.contains(LISTCLASS)) {\n      this.hide();\n      addClass([this.inputWrapper.container], FOCUS);\n    }\n  };\n\n  TimePicker.prototype.closePopup = function (delay, e) {\n    if (this.isPopupOpen() && this.popupWrapper) {\n      var args = {\n        popup: this.popupObj,\n        event: e || null,\n        cancel: false,\n        name: 'open'\n      };\n      this.trigger('close', args);\n\n      if (!args.cancel) {\n        var animModel = {\n          name: 'FadeOut',\n          duration: ANIMATIONDURATION,\n          delay: delay ? delay : 0\n        };\n        this.popupObj.hide(new Animation(animModel));\n        removeClass([this.inputWrapper.container], [ICONANIMATION]);\n        attributes(this.inputElement, {\n          'aria-expanded': 'false'\n        });\n        EventHandler.remove(document, 'mousedown touchstart', this.documentClickHandler);\n      }\n    }\n\n    if (Browser.isDevice) {\n      this.element.removeAttribute('readonly');\n    }\n  };\n\n  TimePicker.prototype.checkValueChange = function (event, isNavigation) {\n    if (!this.strictMode && !this.validateState(this.valueWithMinutes)) {\n      if (this.checkDateValue(this.valueWithMinutes) === null) {\n        this.initValue = this.valueWithMinutes = null;\n      }\n\n      this.setProperties({\n        value: this.compareFormatChange(this.inputElement.value)\n      }, true);\n      this.initValue = this.valueWithMinutes = this.compareFormatChange(this.inputElement.value);\n      this.prevValue = this.inputElement.value;\n\n      if (+this.prevDate !== +this.value) {\n        this.changeEvent(event);\n      }\n    } else {\n      if (!isNavigation) {\n        if (this.prevValue !== this.inputElement.value || isNullOrUndefined(this.checkDateValue(this.value))) {\n          this.valueProcess(event, this.compareFormatChange(this.inputElement.value));\n        }\n      } else {\n        var value = this.getDateObject(new Date(this.timeCollections[this.activeIndex]));\n\n        if (+this.prevDate !== +value) {\n          this.valueProcess(event, value);\n        }\n      }\n    }\n  };\n\n  TimePicker.prototype.onMouseOver = function (event) {\n    var currentLi = closest(event.target, '.' + LISTCLASS);\n    this.setHover(currentLi, HOVER);\n  };\n\n  TimePicker.prototype.setHover = function (li, className) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(className)) {\n      this.removeHover(className);\n      addClass([li], className);\n\n      if (className === NAVIGATION) {\n        li.setAttribute('aria-selected', 'true');\n      }\n    }\n  };\n\n  TimePicker.prototype.setSelection = function (li, event) {\n    if (this.isValidLI(li) && !li.classList.contains(SELECTED)) {\n      this.checkValue(li.getAttribute('data-value'));\n      this.selectedElement = li;\n      this.activeIndex = Array.prototype.slice.call(this.liCollections).indexOf(li);\n      this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]);\n      addClass([this.selectedElement], SELECTED);\n      this.selectedElement.setAttribute('aria-selected', 'true');\n      this.checkValueChange(event, true);\n    }\n  };\n\n  TimePicker.prototype.onMouseLeave = function () {\n    this.removeHover(HOVER);\n  };\n\n  TimePicker.prototype.scrollHandler = function () {\n    if (this.getModuleName() === 'timepicker' && Browser.isDevice) {\n      return;\n    } else {\n      this.hide();\n    }\n  };\n\n  TimePicker.prototype.setMinMax = function (minVal, maxVal) {\n    if (isNullOrUndefined(this.checkDateValue(minVal))) {\n      this.initMin = this.getDateObject('12:00:00 AM');\n    }\n\n    if (isNullOrUndefined(this.checkDateValue(maxVal))) {\n      this.initMax = this.getDateObject('11:59:59 PM');\n    }\n  }; //protected function\n\n\n  TimePicker.prototype.validateMinMax = function (dateVal, minVal, maxVal) {\n    var value = dateVal instanceof Date ? dateVal : this.getDateObject(dateVal);\n\n    if (!isNullOrUndefined(this.checkDateValue(value))) {\n      dateVal = this.strictOperation(this.initMin, this.initMax, dateVal, value);\n    } else if (+this.createDateObj(this.getFormattedValue(this.initMin)) > +this.createDateObj(this.getFormattedValue(this.initMax))) {\n      this.disableTimeIcon();\n    }\n\n    if (this.strictMode) {\n      dateVal = this.valueIsDisable(dateVal) ? dateVal : null;\n    }\n\n    this.checkErrorState(dateVal);\n    return dateVal;\n  };\n\n  TimePicker.prototype.valueIsDisable = function (value) {\n    if (this.disableItemCollection.length > 0) {\n      if (this.disableItemCollection.length === this.timeCollections.length) {\n        return false;\n      }\n\n      var time = value instanceof Date ? this.objToString(value) : value;\n\n      for (var index = 0; index < this.disableItemCollection.length; index++) {\n        if (time === this.disableItemCollection[index]) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  TimePicker.prototype.validateState = function (val) {\n    if (!this.strictMode) {\n      if (this.valueIsDisable(val)) {\n        var value = typeof val === 'string' ? this.setCurrentDate(this.getDateObject(val)) : this.setCurrentDate(this.getDateObject(val));\n        var maxValue = this.setCurrentDate(this.getDateObject(this.initMax));\n        var minValue = this.setCurrentDate(this.getDateObject(this.initMin));\n\n        if (!isNullOrUndefined(this.checkDateValue(value))) {\n          if (+value > +maxValue || +value < +minValue) {\n            return false;\n          }\n        } else {\n          if (+maxValue < +minValue || this.inputElement.value !== '') {\n            return false;\n          }\n        }\n      } else {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  TimePicker.prototype.strictOperation = function (minimum, maximum, dateVal, val) {\n    var maxValue = this.createDateObj(this.getFormattedValue(maximum));\n    var minValue = this.createDateObj(this.getFormattedValue(minimum));\n    var value = this.createDateObj(this.getFormattedValue(val));\n\n    if (this.strictMode) {\n      if (+minValue > +maxValue) {\n        this.disableTimeIcon();\n        this.initValue = this.getDateObject(maxValue);\n        Input.setValue(this.getValue(this.initValue), this.inputElement, this.floatLabelType, this.showClearButton);\n        return this.inputElement.value;\n      } else if (+minValue >= +value) {\n        return this.getDateObject(minValue);\n      } else if (+value >= +maxValue || +minValue === +maxValue) {\n        return this.getDateObject(maxValue);\n      }\n    } else {\n      if (+minValue > +maxValue) {\n        this.disableTimeIcon();\n\n        if (!isNaN(+this.createDateObj(dateVal))) {\n          return dateVal;\n        }\n      }\n    }\n\n    return dateVal;\n  };\n\n  TimePicker.prototype.bindEvents = function () {\n    EventHandler.add(this.inputWrapper.buttons[0], 'mousedown touchstart', this.popupHandler, this);\n    EventHandler.add(this.inputElement, 'blur', this.inputBlurHandler, this);\n    EventHandler.add(this.inputElement, 'focus', this.inputFocusHandler, this);\n    EventHandler.add(this.inputElement, 'change', this.inputChangeHandler, this);\n\n    if (this.showClearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown touchstart', this.clearHandler, this);\n    }\n\n    var form = closest(this.element, 'form');\n\n    if (form) {\n      EventHandler.add(form, 'reset', this.formResetHandler.bind(this));\n    }\n\n    if (!Browser.isDevice) {\n      this.inputEvent = new KeyboardEvents(this.inputWrapper.container, {\n        keyAction: this.inputHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n\n      if (this.showClearButton) {\n        EventHandler.add(this.inputElement, 'mousedown touchstart', this.mouseDownHandler, this);\n      }\n    }\n  };\n\n  TimePicker.prototype.formResetHandler = function () {\n    if (!this.inputElement.getAttribute('value')) {\n      this.value = null;\n\n      if (this.inputElement) {\n        Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        this.removeErrorClass();\n      }\n    } else {\n      this.value = this.checkDateValue(new Date('' + this.element.getAttribute('value')));\n    }\n  };\n\n  TimePicker.prototype.inputChangeHandler = function (e) {\n    e.stopPropagation();\n  };\n\n  TimePicker.prototype.unBindEvents = function () {\n    EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown touchstart', this.popupHandler);\n    EventHandler.remove(this.inputElement, 'blur', this.inputBlurHandler);\n    EventHandler.remove(this.inputElement, 'focus', this.inputFocusHandler);\n    EventHandler.remove(this.inputElement, 'change', this.inputChangeHandler);\n\n    if (this.inputEvent) {\n      this.inputEvent.destroy();\n    }\n\n    EventHandler.remove(this.inputElement, 'mousedown touchstart', this.mouseDownHandler);\n    EventHandler.remove(this.inputWrapper.clearButton, 'mousedown touchstart', this.clearHandler);\n    var form = closest(this.element, 'form');\n\n    if (form) {\n      EventHandler.remove(form, 'reset', this.formResetHandler.bind(this));\n    }\n  };\n\n  TimePicker.prototype.bindClearEvent = function () {\n    if (this.showClearButton && this.inputWrapper.clearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown touchstart', this.clearHandler, this);\n    }\n  };\n\n  TimePicker.prototype.clearHandler = function (e) {\n    e.preventDefault();\n    this.clear(e);\n\n    if (this.popupWrapper) {\n      this.popupWrapper.scrollTop = 0;\n    }\n  };\n\n  TimePicker.prototype.clear = function (event) {\n    this.setProperties({\n      value: null\n    }, true);\n    this.initValue = null;\n    this.resetState();\n    this.changeEvent(event);\n  };\n\n  TimePicker.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.zIndex = this.zIndex;\n      this.popupObj.dataBind();\n    }\n  };\n\n  TimePicker.prototype.checkAttributes = function () {\n    var attributes = ['step', 'disabled', 'readonly', 'style', 'name', 'value', 'min', 'max', 'placeholder'];\n    var value;\n\n    for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n      var prop = attributes_1[_i];\n\n      if (!isNullOrUndefined(this.inputElement.getAttribute(prop))) {\n        switch (prop) {\n          case 'disabled':\n            var enabled = isNullOrUndefined(this.inputElement.getAttribute(prop));\n            this.setProperties({\n              enabled: enabled\n            }, true);\n            break;\n\n          case 'readonly':\n            var readonly = !isNullOrUndefined(this.inputElement.getAttribute(prop));\n            this.setProperties({\n              readonly: readonly\n            }, true);\n            break;\n\n          case 'style':\n            this.inputStyle = this.inputElement.getAttribute(prop);\n            break;\n\n          case 'name':\n            this.inputElement.setAttribute('name', this.inputElement.getAttribute(prop));\n            break;\n\n          case 'step':\n            this.step = parseInt(this.inputElement.getAttribute(prop), 10);\n            break;\n\n          case 'placeholder':\n            this.placeholder = this.inputElement.getAttribute(prop);\n            break;\n\n          case 'min':\n            value = new Date(this.inputElement.getAttribute(prop));\n\n            if (!isNullOrUndefined(this.checkDateValue(value))) {\n              this.setProperties({\n                min: value\n              }, true);\n            }\n\n            break;\n\n          case 'max':\n            value = new Date(this.inputElement.getAttribute(prop));\n\n            if (!isNullOrUndefined(this.checkDateValue(value))) {\n              this.setProperties({\n                max: value\n              }, true);\n            }\n\n            break;\n\n          case 'value':\n            value = new Date(this.inputElement.getAttribute(prop));\n\n            if (!isNullOrUndefined(this.checkDateValue(value))) {\n              this.initValue = value;\n              this.updateInput(false, this.initValue);\n            }\n\n            break;\n        }\n      }\n    }\n  };\n\n  TimePicker.prototype.setCurrentDate = function (value) {\n    if (isNullOrUndefined(this.checkDateValue(value))) {\n      return null;\n    }\n\n    return new Date(YEAR, MONTH, DAY, value.getHours(), value.getMinutes(), value.getSeconds());\n  };\n\n  TimePicker.prototype.getTextFormat = function () {\n    var time = 0;\n\n    if (this.cldrTimeFormat().split(' ')[0] === 'a' || this.cldrTimeFormat().indexOf('a') === 0) {\n      time = 1;\n    } else if (this.cldrTimeFormat().indexOf('a') < 0) {\n      var strArray = this.cldrTimeFormat().split(' ');\n\n      for (var i = 0; i < strArray.length; i++) {\n        if (strArray[i].toLowerCase().indexOf('h') >= 0) {\n          time = i;\n          break;\n        }\n      }\n    }\n\n    return time;\n  };\n\n  TimePicker.prototype.updateValue = function (value, event) {\n    var val;\n\n    if (this.isNullOrEmpty(value)) {\n      this.resetState();\n    } else {\n      val = this.checkValue(value);\n\n      if (this.strictMode) {\n        // this case set previous value to the text box when set invalid date\n        var inputVal = val === null && value.trim().length > 0 ? this.previousState(this.prevDate) : this.inputElement.value;\n        Input.setValue(inputVal, this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n    }\n\n    this.checkValueChange(event, typeof value === 'string' ? false : true);\n  };\n\n  TimePicker.prototype.previousState = function (date) {\n    var value = this.getDateObject(date);\n\n    for (var i = 0; i < this.timeCollections.length; i++) {\n      if (+value === this.timeCollections[i]) {\n        this.activeIndex = i;\n        this.selectedElement = this.liCollections[i];\n        this.valueWithMinutes = new Date(this.timeCollections[i]);\n        break;\n      }\n    }\n\n    return this.prevValue;\n  };\n\n  TimePicker.prototype.resetState = function () {\n    this.removeSelection();\n    Input.setValue('', this.inputElement, this.floatLabelType, false);\n    this.valueWithMinutes = this.activeIndex = null;\n\n    if (!this.strictMode) {\n      this.checkErrorState(null);\n    }\n  };\n\n  TimePicker.prototype.objToString = function (val) {\n    if (isNullOrUndefined(this.checkDateValue(val))) {\n      return null;\n    } else {\n      return this.globalize.formatDate(val, {\n        format: this.cldrTimeFormat(),\n        type: 'time'\n      });\n    }\n  };\n\n  TimePicker.prototype.checkValue = function (value) {\n    if (!this.isNullOrEmpty(value)) {\n      var date = value instanceof Date ? value : this.getDateObject(value);\n      return this.validateValue(date, value);\n    }\n\n    this.resetState();\n    return this.valueWithMinutes = null;\n  };\n\n  TimePicker.prototype.validateValue = function (date, value) {\n    var time;\n    var val = this.validateMinMax(value, this.min, this.max);\n    var newval = this.createDateObj(val);\n\n    if (this.getFormattedValue(newval) !== this.getFormattedValue(this.value)) {\n      this.valueWithMinutes = isNullOrUndefined(newval) ? null : newval;\n      time = this.objToString(this.valueWithMinutes);\n    } else {\n      if (this.strictMode) {\n        //for strict mode case, when value not present within a range. Reset the nearest range value.\n        date = newval;\n      }\n\n      this.valueWithMinutes = this.checkDateValue(date);\n      time = this.objToString(this.valueWithMinutes);\n    }\n\n    if (!this.strictMode && isNullOrUndefined(time)) {\n      var value_1 = val.trim().length > 0 ? val : '';\n      Input.setValue(value_1, this.inputElement, this.floatLabelType, this.showClearButton);\n    } else {\n      Input.setValue(time, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    return time;\n  };\n\n  TimePicker.prototype.findNextElement = function (event) {\n    var textVal = this.inputElement.value;\n    var value = isNullOrUndefined(this.valueWithMinutes) ? this.createDateObj(textVal) : this.getDateObject(this.valueWithMinutes);\n    var timeVal = null;\n    var count = this.liCollections.length;\n\n    if (!isNullOrUndefined(this.checkDateValue(value)) || !isNullOrUndefined(this.activeIndex)) {\n      if (event.action === 'home') {\n        var index = this.validLiElement(0);\n        timeVal = +this.createDateObj(new Date(this.timeCollections[index]));\n        this.activeIndex = index;\n      } else if (event.action === 'end') {\n        var index = this.validLiElement(this.timeCollections.length - 1, true);\n        timeVal = +this.createDateObj(new Date(this.timeCollections[index]));\n        this.activeIndex = index;\n      } else {\n        if (event.action === 'down') {\n          for (var i = 0; i < count; i++) {\n            if (+value < this.timeCollections[i]) {\n              var index = this.validLiElement(i);\n              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));\n              this.activeIndex = index;\n              break;\n            } else if (i === count - 1) {\n              var index = this.validLiElement(0);\n              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));\n              this.activeIndex = index;\n              break;\n            }\n          }\n        } else {\n          for (var i = count - 1; i >= 0; i--) {\n            if (+value > this.timeCollections[i]) {\n              var index = this.validLiElement(i, true);\n              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));\n              this.activeIndex = index;\n              break;\n            } else if (i === 0) {\n              var index = this.validLiElement(count - 1);\n              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));\n              this.activeIndex = index;\n              break;\n            }\n          }\n        }\n      }\n\n      this.selectedElement = this.liCollections[this.activeIndex];\n      this.elementValue(isNullOrUndefined(timeVal) ? null : new Date(timeVal));\n    } else {\n      var index = this.validLiElement(0, event.action === 'down' ? false : true);\n      this.activeIndex = index;\n      this.selectedElement = this.liCollections[index];\n      this.elementValue(new Date(this.timeCollections[index]));\n    }\n  };\n\n  TimePicker.prototype.elementValue = function (value) {\n    if (!isNullOrUndefined(this.checkDateValue(value))) {\n      this.checkValue(value);\n    }\n  };\n\n  TimePicker.prototype.validLiElement = function (index, backward) {\n    var elementIndex = null;\n    var items = isNullOrUndefined(this.popupWrapper) ? this.liCollections : this.popupWrapper.querySelectorAll('.' + LISTCLASS);\n    var isCheck = true;\n\n    if (items.length) {\n      if (backward) {\n        for (var i = index; i >= 0; i--) {\n          if (!items[i].classList.contains(DISABLED)) {\n            elementIndex = i;\n            break;\n          } else if (i === 0) {\n            if (isCheck) {\n              index = i = items.length;\n              isCheck = false;\n            }\n          }\n        }\n      } else {\n        for (var i = index; i <= items.length - 1; i++) {\n          if (!items[i].classList.contains(DISABLED)) {\n            elementIndex = i;\n            break;\n          } else if (i === items.length - 1) {\n            if (isCheck) {\n              index = i = -1;\n              isCheck = false;\n            }\n          }\n        }\n      }\n    }\n\n    return elementIndex;\n  };\n\n  TimePicker.prototype.keyHandler = function (event) {\n    if (isNullOrUndefined(this.step) || this.step <= 0 || this.inputWrapper.buttons[0].classList.contains(DISABLED)) {\n      return;\n    }\n\n    var count = this.timeCollections.length;\n\n    if (isNullOrUndefined(this.getActiveElement()) || this.getActiveElement().length === 0) {\n      if (this.liCollections.length > 0) {\n        if (isNullOrUndefined(this.value) && isNullOrUndefined(this.activeIndex)) {\n          var index = this.validLiElement(0, event.action === 'down' ? false : true);\n          this.activeIndex = index;\n          this.selectedElement = this.liCollections[index];\n          this.elementValue(new Date(this.timeCollections[index]));\n        } else {\n          this.findNextElement(event);\n        }\n      } else {\n        this.findNextElement(event);\n      }\n    } else {\n      var nextItem = void 0;\n\n      if (event.keyCode >= 37 && event.keyCode <= 40) {\n        var index = event.keyCode === 40 || event.keyCode === 39 ? ++this.activeIndex : --this.activeIndex;\n        this.activeIndex = index = this.activeIndex === count ? 0 : this.activeIndex;\n        this.activeIndex = index = this.activeIndex < 0 ? count - 1 : this.activeIndex;\n        this.activeIndex = index = this.validLiElement(this.activeIndex, event.keyCode === 40 || event.keyCode === 39 ? false : true);\n        nextItem = isNullOrUndefined(this.timeCollections[index]) ? this.timeCollections[0] : this.timeCollections[index];\n      } else if (event.action === 'home') {\n        var index = this.validLiElement(0);\n        this.activeIndex = index;\n        nextItem = this.timeCollections[index];\n      } else if (event.action === 'end') {\n        var index = this.validLiElement(count - 1, true);\n        this.activeIndex = index;\n        nextItem = this.timeCollections[index];\n      }\n\n      this.selectedElement = this.liCollections[this.activeIndex];\n      this.elementValue(new Date(nextItem));\n    }\n\n    this.isNavigate = true;\n    this.setHover(this.selectedElement, NAVIGATION);\n    this.setActiveDescendant();\n    this.selectInputText();\n\n    if (this.isPopupOpen() && this.selectedElement !== null && (!event || event.type !== 'click')) {\n      this.setScrollPosition();\n    }\n  };\n\n  TimePicker.prototype.setPopupPosition = function () {\n    var offsetValue;\n    var padding = 1;\n    var popupHeight = this.getPopupHeight();\n    var element = this.getActiveElement();\n    var liHeight = this.liCollections[0].getBoundingClientRect().height;\n    var listHeight = popupHeight / HALFPOSITION;\n    var height = element.length === 0 ? this.liCollections[0].offsetTop : element[0].offsetTop;\n    var lastItemOffsetValue = this.liCollections[this.liCollections.length - 1].offsetTop;\n    var ulPadding = parseInt(getComputedStyle(this.listTag).paddingTop, 10);\n\n    if (lastItemOffsetValue - listHeight < height) {\n      var count = popupHeight / liHeight;\n      offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - ulPadding - HALFPOSITION;\n    } else if (height + liHeight > listHeight) {\n      offsetValue = listHeight - liHeight / HALFPOSITION;\n    } else {\n      offsetValue = height;\n    }\n\n    offsetValue = offsetValue + HALFPOSITION + (liHeight - this.containerStyle.height) / HALFPOSITION;\n    return -offsetValue;\n  };\n\n  TimePicker.prototype.getCultureTimeObject = function (ld, c) {\n    return getValue('main.' + c + '.dates.calendars.gregorian.timeFormats.short', ld);\n  };\n\n  TimePicker.prototype.getCultureDateObject = function (ld, c) {\n    return getValue('main.' + c + '.dates.calendars.gregorian.dateFormats.short', ld);\n  };\n\n  TimePicker.prototype.wireListEvents = function () {\n    EventHandler.add(this.listWrapper, 'click', this.onMouseClick, this);\n\n    if (!Browser.isDevice) {\n      EventHandler.add(this.listWrapper, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.listWrapper, 'mouseout', this.onMouseLeave, this);\n    }\n  };\n\n  TimePicker.prototype.unWireListEvents = function () {\n    if (this.listWrapper) {\n      EventHandler.remove(this.listWrapper, 'click', this.onMouseClick);\n\n      if (!Browser.isDevice) {\n        EventHandler.remove(this.listWrapper, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.listWrapper, 'mouseout', this.onMouseLeave);\n      }\n    }\n  };\n\n  TimePicker.prototype.valueProcess = function (event, value) {\n    var result = isNullOrUndefined(this.checkDateValue(value)) ? null : value;\n\n    if (+this.prevDate !== +result) {\n      this.initValue = result;\n      this.changeEvent(event);\n    }\n  };\n\n  TimePicker.prototype.changeEvent = function (e) {\n    this.addSelection();\n    this.updateInput(true, this.initValue);\n    var eventArgs = {\n      event: e || null,\n      value: this.value,\n      text: this.inputElement.value,\n      isInteracted: !isNullOrUndefined(e),\n      element: this.element\n    };\n    eventArgs.value = this.valueWithMinutes || this.getDateObject(this.inputElement.value);\n    this.prevDate = this.valueWithMinutes || this.getDateObject(this.inputElement.value);\n    this.trigger('change', eventArgs);\n  };\n\n  TimePicker.prototype.updateInput = function (isUpdate, date) {\n    if (isUpdate) {\n      this.prevValue = this.getValue(date);\n    }\n\n    this.prevDate = this.valueWithMinutes = date;\n    this.setProperties({\n      value: date\n    }, true);\n  };\n\n  TimePicker.prototype.setActiveDescendant = function () {\n    if (!isNullOrUndefined(this.selectedElement)) {\n      attributes(this.inputElement, {\n        'aria-activedescendant': this.selectedElement.getAttribute('id')\n      });\n    } else {\n      attributes(this.inputElement, {\n        'aria-activedescendant': 'null'\n      });\n    }\n  };\n\n  TimePicker.prototype.removeSelection = function () {\n    this.removeHover(HOVER);\n\n    if (!isNullOrUndefined(this.popupWrapper)) {\n      var items = this.popupWrapper.querySelectorAll('.' + SELECTED);\n\n      if (items.length) {\n        removeClass(items, SELECTED);\n        items[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  TimePicker.prototype.removeHover = function (className) {\n    var hoveredItem = this.getHoverItem(className);\n\n    if (hoveredItem && hoveredItem.length) {\n      removeClass(hoveredItem, className);\n\n      if (className === NAVIGATION) {\n        hoveredItem[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  TimePicker.prototype.getHoverItem = function (className) {\n    var hoveredItem;\n\n    if (!isNullOrUndefined(this.popupWrapper)) {\n      hoveredItem = this.popupWrapper.querySelectorAll('.' + className);\n    }\n\n    return hoveredItem;\n  };\n\n  TimePicker.prototype.setActiveClass = function () {\n    if (!isNullOrUndefined(this.popupWrapper)) {\n      var items = this.popupWrapper.querySelectorAll('.' + LISTCLASS);\n\n      if (items.length) {\n        for (var i = 0; i < items.length; i++) {\n          if (this.timeCollections[i] === +this.getDateObject(this.valueWithMinutes)) {\n            items[i].setAttribute('aria-selected', 'true');\n            this.selectedElement = items[i];\n            this.activeIndex = i;\n            break;\n          }\n        }\n      }\n    }\n  };\n\n  TimePicker.prototype.addSelection = function () {\n    this.selectedElement = null;\n    this.removeSelection();\n    this.setActiveClass();\n\n    if (!isNullOrUndefined(this.selectedElement)) {\n      addClass([this.selectedElement], SELECTED);\n      this.selectedElement.setAttribute('aria-selected', 'true');\n    }\n  };\n\n  TimePicker.prototype.isValidLI = function (li) {\n    return li && li.classList.contains(LISTCLASS) && !li.classList.contains(DISABLED);\n  };\n\n  TimePicker.prototype.createDateObj = function (val) {\n    var today = this.globalize.formatDate(new Date(), {\n      skeleton: 'short',\n      type: 'date'\n    });\n    var value = null;\n\n    if (typeof val === 'string') {\n      if (val.toUpperCase().indexOf('AM') > -1 || val.toUpperCase().indexOf('PM') > -1) {\n        today = this.defaultCulture.formatDate(new Date(), {\n          skeleton: 'short',\n          type: 'date'\n        });\n        value = isNaN(+new Date(today + ' ' + val)) ? null : new Date(new Date(today + ' ' + val).setMilliseconds(0));\n\n        if (isNullOrUndefined(value)) {\n          value = this.TimeParse(today, val);\n        }\n      } else {\n        value = this.TimeParse(today, val);\n      }\n    } else if (val instanceof Date) {\n      value = val;\n    }\n\n    return value;\n  };\n\n  TimePicker.prototype.TimeParse = function (today, val) {\n    var value;\n    value = this.globalize.parseDate(today + ' ' + val, {\n      format: this.cldrDateFormat() + ' ' + this.cldrTimeFormat(),\n      type: 'datetime'\n    });\n    value = isNullOrUndefined(value) ? this.globalize.parseDate(today + ' ' + val, {\n      format: this.cldrDateFormat() + ' ' + this.dateToNumeric(),\n      type: 'datetime'\n    }) : value;\n    value = isNullOrUndefined(value) ? value : new Date(value.setMilliseconds(0));\n    return value;\n  };\n\n  TimePicker.prototype.createListItems = function () {\n    var _this = this;\n\n    this.listWrapper = this.createElement('div', {\n      className: CONTENT,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    var start;\n    var end;\n    var interval = this.step * 60000;\n    var listItems = [];\n    this.timeCollections = [];\n    this.disableItemCollection = [];\n    start = +this.getDateObject(this.initMin).setMilliseconds(0);\n    end = +this.getDateObject(this.initMax).setMilliseconds(0);\n\n    while (end >= start) {\n      this.timeCollections.push(start);\n      listItems.push(this.globalize.formatDate(new Date(start), {\n        format: this.cldrTimeFormat(),\n        type: 'time'\n      }));\n      start += interval;\n    }\n\n    var listBaseOptions = {\n      itemCreated: function itemCreated(args) {\n        var eventArgs = {\n          element: args.item,\n          text: args.text,\n          value: _this.getDateObject(args.text),\n          isDisabled: false\n        };\n\n        _this.trigger('itemRender', eventArgs);\n\n        if (eventArgs.isDisabled) {\n          eventArgs.element.classList.add(DISABLED);\n        }\n\n        if (eventArgs.element.classList.contains(DISABLED)) {\n          _this.disableItemCollection.push(eventArgs.element.getAttribute('data-value'));\n        }\n      }\n    };\n    this.listTag = ListBase.createList(this.createElement, listItems, listBaseOptions, true);\n    attributes(this.listTag, {\n      'role': 'listbox',\n      'aria-hidden': 'false',\n      'id': this.element.id + '_options'\n    });\n    append([this.listTag], this.listWrapper);\n  };\n\n  TimePicker.prototype.documentClickHandler = function (event) {\n    event.preventDefault();\n    var target = event.target;\n\n    if (!closest(target, '#' + this.popupObj.element.id) && target !== this.inputElement && target !== (this.inputWrapper && this.inputWrapper.buttons[0]) && target !== (this.inputWrapper && this.inputWrapper.clearButton) && target !== (this.inputWrapper && this.inputWrapper.container)) {\n      if (this.isPopupOpen()) {\n        this.hide();\n      }\n    } else if (target !== this.inputElement) {\n      if (!Browser.isDevice) {\n        this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.inputElement;\n        event.preventDefault();\n      }\n    }\n  };\n\n  TimePicker.prototype.setEnableRtl = function () {\n    Input.setEnableRtl(this.enableRtl, [this.inputWrapper.container]);\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = this.enableRtl;\n      this.popupObj.dataBind();\n    }\n  };\n\n  TimePicker.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputElement, this.floatLabelType);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper.container], DISABLED);\n      attributes(this.inputElement, {\n        'aria-disabled': 'false'\n      });\n    } else {\n      this.hide();\n      addClass([this.inputWrapper.container], DISABLED);\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n    }\n  };\n\n  TimePicker.prototype.getProperty = function (date, val) {\n    if (val === 'min') {\n      this.initMin = this.checkDateValue(new Date('' + date.min));\n      this.setProperties({\n        min: this.initMin\n      }, true);\n    } else {\n      this.initMax = this.checkDateValue(new Date('' + date.max));\n      this.setProperties({\n        max: this.initMax\n      }, true);\n    }\n\n    if (this.inputElement.value === '') {\n      this.validateMinMax(this.value, this.min, this.max);\n    } else {\n      this.checkValue(this.inputElement.value);\n    }\n\n    this.checkValueChange(null, false);\n  };\n\n  TimePicker.prototype.inputBlurHandler = function (e) {\n    // IE popup closing issue when click over the scrollbar\n    if (this.isPreventBlur && this.isPopupOpen()) {\n      this.inputElement.focus();\n      return;\n    }\n\n    this.closePopup(0, e);\n    removeClass([this.inputWrapper.container], [FOCUS]);\n    var blurArguments = {\n      model: this\n    };\n    this.trigger('blur', blurArguments);\n\n    if (this.getText() !== this.inputElement.value) {\n      this.updateValue(this.inputElement.value, e);\n    } else if (this.inputElement.value.trim().length === 0) {\n      this.resetState();\n    }\n\n    this.cursorDetails = null;\n    this.isNavigate = false;\n  };\n  /**\n   * Focuses out the TimePicker textbox element.\n   * @returns void\n   */\n\n\n  TimePicker.prototype.focusOut = function () {\n    if (document.activeElement === this.inputElement) {\n      this.inputElement.blur();\n      var blurArguments = {\n        model: this\n      };\n      this.trigger('blur', blurArguments);\n    }\n  };\n\n  TimePicker.prototype.isPopupOpen = function () {\n    if (this.popupWrapper && this.popupWrapper.classList.contains('' + ROOT)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  TimePicker.prototype.inputFocusHandler = function () {\n    var focusArguments = {\n      model: this\n    };\n\n    if (!this.readonly && !Browser.isDevice) {\n      this.selectInputText();\n    }\n\n    this.trigger('focus', focusArguments);\n  };\n  /**\n   * Focused the TimePicker textbox element.\n   * @returns void\n   */\n\n\n  TimePicker.prototype.focusIn = function () {\n    if (document.activeElement !== this.inputElement && this.enabled) {\n      this.inputElement.focus();\n      var focusArguments = {\n        model: this\n      };\n      this.trigger('focus', focusArguments);\n    }\n  };\n  /**\n   * Hides the TimePicker popup.\n   * @returns void\n   */\n\n\n  TimePicker.prototype.hide = function () {\n    this.closePopup(100, null);\n  };\n  /**\n   * Opens the popup to show the list items.\n   * @returns void\n   */\n\n\n  TimePicker.prototype.show = function (event) {\n    if (this.enabled && this.readonly || !this.enabled || this.popupWrapper) {\n      return;\n    } else {\n      var args = {\n        popup: this.popupObj || null,\n        cancel: false,\n        event: event || null,\n        name: 'open'\n      };\n      this.trigger('open', args);\n\n      if (!args.cancel && !this.isPopupOpen() && !this.inputWrapper.buttons[0].classList.contains(DISABLED)) {\n        this.inputElement.focus();\n        this.popupCreation();\n\n        if (!args.cancel) {\n          var openAnimation = {\n            name: 'FadeIn',\n            duration: ANIMATIONDURATION\n          };\n          this.popupObj.refreshPosition(this.inputElement);\n\n          if (this.zIndex === 1000) {\n            this.popupObj.show(new Animation(openAnimation), this.element);\n          } else {\n            this.popupObj.show(new Animation(openAnimation), null);\n          }\n\n          this.setActiveDescendant();\n          attributes(this.inputElement, {\n            'aria-expanded': 'true'\n          });\n          addClass([this.inputWrapper.container], FOCUS);\n        }\n\n        EventHandler.add(document, 'mousedown touchstart', this.documentClickHandler, this);\n      }\n    }\n  };\n  /**\n   * Gets the properties to be maintained upon browser refresh.\n   * @returns string\n   */\n\n\n  TimePicker.prototype.getPersistData = function () {\n    var keyEntity = ['value'];\n    return this.addOnPersist(keyEntity);\n  };\n  /**\n   * To get component name\n   * @private\n   */\n\n\n  TimePicker.prototype.getModuleName = function () {\n    return 'timepicker';\n  };\n  /**\n   * Called internally if any of the property value changed.\n   * returns void\n   * @private\n   */\n\n\n  TimePicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this.inputElement);\n          this.inputElement.setAttribute('aria-placeholder', newProp.placeholder);\n          break;\n\n        case 'readonly':\n          Input.setReadonly(this.readonly, this.inputElement, this.floatLabelType);\n\n          if (this.readonly) {\n            this.hide();\n          }\n\n          break;\n\n        case 'cssClass':\n          addClass([this.inputWrapper.container], [newProp.cssClass]);\n\n          if (this.popupWrapper) {\n            addClass([this.popupWrapper], [newProp.cssClass]);\n          }\n\n          this.setProperties({\n            cssClass: newProp.cssClass\n          }, true);\n          break;\n\n        case 'enabled':\n          this.setProperties({\n            enabled: newProp.enabled\n          }, true);\n          this.setEnable();\n          break;\n\n        case 'allowEdit':\n          this.setTimeAllowEdit();\n          break;\n\n        case 'enableRtl':\n          this.setProperties({\n            enableRtl: newProp.enableRtl\n          }, true);\n          this.setEnableRtl();\n          break;\n\n        case 'zIndex':\n          this.setProperties({\n            zIndex: newProp.zIndex\n          }, true);\n          this.setZIndex();\n          break;\n\n        case 'min':\n        case 'max':\n          this.getProperty(newProp, prop);\n          break;\n\n        case 'showClearButton':\n          Input.setClearButton(this.showClearButton, this.inputElement, this.inputWrapper);\n          this.bindClearEvent();\n          break;\n\n        case 'locale':\n          this.setProperties({\n            locale: newProp.locale\n          }, true);\n          this.globalize = new Internationalization(this.locale);\n          this.l10n.setLocale(this.locale);\n          this.updatePlaceHolder();\n          this.setValue(this.value);\n          break;\n\n        case 'width':\n          setStyleAttribute(this.inputWrapper.container, {\n            'width': this.setWidth(newProp.width)\n          });\n          this.containerStyle = this.inputWrapper.container.getBoundingClientRect();\n          break;\n\n        case 'format':\n          this.setProperties({\n            format: newProp.format\n          }, true);\n          this.setValue(this.value);\n          break;\n\n        case 'value':\n          if (typeof newProp.value === 'string') {\n            this.setProperties({\n              value: this.checkDateValue(new Date(newProp.value))\n            }, true);\n            newProp.value = this.value;\n          } else {\n            newProp.value = this.checkDateValue(new Date('' + newProp.value));\n          }\n\n          this.initValue = newProp.value;\n          newProp.value = this.compareFormatChange(this.checkValue(newProp.value));\n          this.checkValueChange(null, false);\n          break;\n\n        case 'floatLabelType':\n          this.floatLabelType = newProp.floatLabelType;\n          Input.removeFloating(this.inputWrapper);\n          Input.addFloating(this.inputElement, this.floatLabelType, this.placeholder);\n          break;\n\n        case 'strictMode':\n          if (newProp.strictMode) {\n            this.checkErrorState(null);\n          }\n\n          this.setProperties({\n            strictMode: newProp.strictMode\n          }, true);\n          this.checkValue(this.inputElement.value);\n          this.checkValueChange(null, false);\n          break;\n\n        case 'scrollTo':\n          if (this.checkDateValue(new Date('' + newProp.scrollTo))) {\n            if (this.popupWrapper) {\n              this.setScrollTo();\n            }\n\n            this.setProperties({\n              scrollTo: newProp.scrollTo\n            }, true);\n          } else {\n            this.setProperties({\n              scrollTo: null\n            }, true);\n          }\n\n          break;\n      }\n    }\n  };\n\n  __decorate([Property(null)], TimePicker.prototype, \"width\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], TimePicker.prototype, \"strictMode\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"format\", void 0);\n\n  __decorate([Property(true)], TimePicker.prototype, \"enabled\", void 0);\n\n  __decorate([Property(false)], TimePicker.prototype, \"readonly\", void 0);\n\n  __decorate([Property('Never')], TimePicker.prototype, \"floatLabelType\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"placeholder\", void 0);\n\n  __decorate([Property(1000)], TimePicker.prototype, \"zIndex\", void 0);\n\n  __decorate([Property(false)], TimePicker.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(true)], TimePicker.prototype, \"showClearButton\", void 0);\n\n  __decorate([Property(30)], TimePicker.prototype, \"step\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"scrollTo\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"value\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"min\", void 0);\n\n  __decorate([Property(null)], TimePicker.prototype, \"max\", void 0);\n\n  __decorate([Property(true)], TimePicker.prototype, \"allowEdit\", void 0);\n\n  __decorate([Property(false)], TimePicker.prototype, \"enableRtl\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"change\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"created\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"destroyed\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"open\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"itemRender\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"close\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"blur\", void 0);\n\n  __decorate([Event()], TimePicker.prototype, \"focus\", void 0);\n\n  TimePicker = __decorate([NotifyPropertyChanges], TimePicker);\n  return TimePicker;\n}(Component);\n\nexport { TimePicker };","map":null,"metadata":{},"sourceType":"module"}